(self.webpackChunkunseen=self.webpackChunkunseen||[]).push([[941],{4212:function(t){var e;self,e=function(){return function(){var t={672:function(t){const e={html:document.documentElement,body:document.body,window:{w:window.innerWidth,h:window.innerHeight}};t.exports=e},336:function(t){t.exports=function(t,e){let n=null;return function(){clearTimeout(n);const r=arguments,i=this;n=setTimeout(function(){t.apply(i,r)},e)}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r={};return function(){"use strict";n.d(r,{default:function(){return O}});var t=n(336),e=n.n(t),i=n(672),o=n.n(i);function s(){if(!(this instanceof s))return new s;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}var a=window.document.documentElement,l=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector;s.prototype.matchesSelector=function(t,e){return l.call(t,e)},s.prototype.querySelectorAll=function(t,e){return e.querySelectorAll(t)},s.prototype.indexes=[];var u=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;s.prototype.indexes.push({name:"ID",selector:function(t){var e;if(e=t.match(u))return e[0].slice(1)},element:function(t){if(t.id)return[t.id]}});var c=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;s.prototype.indexes.push({name:"CLASS",selector:function(t){var e;if(e=t.match(c))return e[0].slice(1)},element:function(t){var e=t.className;if(e){if("string"==typeof e)return e.split(/\s/);if("object"==typeof e&&"baseVal"in e)return e.baseVal.split(/\s/)}}});var h,d=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;s.prototype.indexes.push({name:"TAG",selector:function(t){var e;if(e=t.match(d))return e[0].toUpperCase()},element:function(t){return[t.nodeName.toUpperCase()]}}),s.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},h="function"==typeof window.Map?window.Map:function(){function t(){this.map={}}return t.prototype.get=function(t){return this.map[t+" "]},t.prototype.set=function(t,e){this.map[t+" "]=e},t}();var p=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function f(t,e){var n,r,i,o,s,a,l=(t=t.slice(0).concat(t.default)).length,u=e,c=[];do{if(p.exec(""),(i=p.exec(u))&&(u=i[3],i[2]||!u))for(n=0;n<l;n++)if(s=(a=t[n]).selector(i[1])){for(r=c.length,o=!1;r--;)if(c[r].index===a&&c[r].key===s){o=!0;break}o||c.push({index:a,key:s});break}}while(i);return c}function m(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],e.isPrototypeOf(i))return i}function v(t,e){return t.id-e.id}s.prototype.logDefaultIndexUsed=function(){},s.prototype.add=function(t,e){var n,r,i,o,s,a,l,u,c=this.activeIndexes,d=this.selectors,p=this.selectorObjects;if("string"==typeof t){for(p[(n={id:this.uid++,selector:t,data:e}).id]=n,l=f(this.indexes,t),r=0;r<l.length;r++)o=(u=l[r]).key,(s=m(c,i=u.index))||((s=Object.create(i)).map=new h,c.push(s)),i===this.indexes.default&&this.logDefaultIndexUsed(n),(a=s.map.get(o))||(a=[],s.map.set(o,a)),a.push(n);this.size++,d.push(t)}},s.prototype.remove=function(t,e){if("string"==typeof t){var n,r,i,o,s,a,l,u,c=this.activeIndexes,h=this.selectors=[],d=this.selectorObjects,p={},m=1===arguments.length;for(n=f(this.indexes,t),i=0;i<n.length;i++)for(r=n[i],o=c.length;o--;)if(a=c[o],r.index.isPrototypeOf(a)){if(l=a.map.get(r.key))for(s=l.length;s--;)(u=l[s]).selector!==t||!m&&u.data!==e||(l.splice(s,1),p[u.id]=!0);break}for(i in p)delete d[i],this.size--;for(i in d)h.push(d[i].selector)}},s.prototype.queryAll=function(t){if(!this.selectors.length)return[];var e,n,r,i,o,s,a,l,u={},c=[],h=this.querySelectorAll(this.selectors.join(", "),t);for(e=0,r=h.length;e<r;e++)for(o=h[e],n=0,i=(s=this.matches(o)).length;n<i;n++)u[(l=s[n]).id]?a=u[l.id]:(a={id:l.id,selector:l.selector,data:l.data,elements:[]},u[l.id]=a,c.push(a)),a.elements.push(o);return c.sort(v)},s.prototype.matches=function(t){if(!t)return[];var e,n,r,i,o,s,a,l,u,c,h,d=this.activeIndexes,p={},f=[];for(e=0,i=d.length;e<i;e++)if(l=(a=d[e]).element(t))for(n=0,o=l.length;n<o;n++)if(u=a.map.get(l[n]))for(r=0,s=u.length;r<s;r++)!p[h=(c=u[r]).id]&&this.matchesSelector(t,c.selector)&&(p[h]=!0,f.push(c));return f.sort(v)};const g={},_={},b=["mouseenter","mouseleave","pointerenter","pointerleave"];function y(t){void 0===_[t]&&(_[t]=[])}function x(t){return"string"==typeof t?document.querySelectorAll(t):t}function w(t){let e=function(t,e){const n=[];let r=e;do{if(1!==r.nodeType)break;const e=t.matches(r);e.length&&n.push({delegatedTarget:r,stack:e})}while(r=r.parentElement);return n}(g[t.type],t.target);if(e.length)for(let n=0;n<e.length;n++)for(let r=0;r<e[n].stack.length;r++)-1!==b.indexOf(t.type)?(S(t,e[n].delegatedTarget),t.target===e[n].delegatedTarget&&e[n].stack[r].data(t)):(S(t,e[n].delegatedTarget),e[n].stack[r].data(t))}function S(t,e){Object.defineProperty(t,"currentTarget",{configurable:!0,enumerable:!0,get:()=>e})}function M(t){return JSON.parse(JSON.stringify(t))}var T=new class{bindAll(t,e){e||(e=Object.getOwnPropertyNames(Object.getPrototypeOf(t)));for(let n=0;n<e.length;n++)t[e[n]]=t[e[n]].bind(t)}on(t,e,n,r){const i=t.split(" ");for(let t=0;t<i.length;t++)if("function"!=typeof e||void 0!==n)if(e.nodeType&&1===e.nodeType||e===window||e===document)e.addEventListener(i[t],n,r);else{e=x(e);for(let o=0;o<e.length;o++)e[o].addEventListener(i[t],n,r)}else y(i[t]),_[i[t]].push(e)}delegate(t,e,n){const r=t.split(" ");for(let t=0;t<r.length;t++){let i=g[r[t]];void 0===i&&(i=new s,g[r[t]]=i,-1!==b.indexOf(r[t])?document.addEventListener(r[t],w,!0):document.addEventListener(r[t],w)),i.add(e,n)}}off(t,e,n,r){const i=t.split(" ");for(let t=0;t<i.length;t++){if(void 0===e){_[i[t]]=[];continue}if("function"==typeof e){y(i[t]);for(let n=0;n<_[i[t]].length;n++)_[i[t]][n]===e&&_[i[t]].splice(n,1);continue}const o=g[i[t]];if(void 0===o||(o.remove(e,n),0!==o.size))if(void 0===e.removeEventListener){e=x(e);for(let o=0;o<e.length;o++)e[o].removeEventListener(i[t],n,r)}else e.removeEventListener(i[t],n,r);else delete g[i[t]],-1!==b.indexOf(i[t])?document.removeEventListener(i[t],w,!0):document.removeEventListener(i[t],w)}}emit(t,...e){!function(t,e){if(_[t])for(let n=0;n<_[t].length;n++)_[t][n](...e)}(t,e)}debugDelegated(){return M(g)}debugBus(){return M(_)}};function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class A{constructor(t={}){E(this,"onRaf",()=>{T.emit(A.INTERNALRAF),this.options.disableRaf||requestAnimationFrame(this.onRaf)}),this.options=t,this.addEvents()}addEvents(){this.options.disableRaf||requestAnimationFrame(this.onRaf),this.options.disableResize||T.on("resize",window,e()(()=>{this.onResize()},150)),this.onScroll(),"ontouchstart"in document.documentElement&&(o().isTouch=!0,this.detectMouse())}onScroll(){T.on("wheel",window,t=>{T.emit(A.WHEEL,{event:t})},{passive:!1}),T.on("scroll",window,t=>{T.emit(A.INTERNALSCROLL,{event:t})},{passive:!0})}onResize({width:t,height:e}={}){o().window.w=t||window.innerWidth,o().window.h=e||window.innerHeight,T.emit(A.RESIZE)}detectMouse(){window.addEventListener("mousemove",function t(e){(Math.abs(e.movementX)>0||Math.abs(e.movementY)>0)&&(o().isTouch=!1,T.emit(A.MOUSEDETECTED),window.removeEventListener("mousemove",t))})}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}E(A,"INTERNALRAF","raf:internal"),E(A,"EXTERNALRAF","raf:external"),E(A,"WHEEL","wheel"),E(A,"INTERNALSCROLL","scroll:internal"),E(A,"EXTERNALSCROLL","scroll:external"),E(A,"RESIZE","resize"),E(A,"MOUSEDETECTED","mouseDetected"),E(A,"SCROLLEND","scrollEnd");class P{constructor(t){C(this,"onMouseMove",t=>{this.mouseDown&&(this.mousePos=t.clientY,this.position-=this.prevMousePos-this.mousePos,this.position=Math.min(Math.max(this.position,0),this.maxY),this.prevMousePos=this.mousePos,this.controller.targetPos=this.position/this.maxY*this.controller.maxScroll,this.controller.clamp(),this.controller.syncScroll=!0,this.transform(),T.emit(A.EXTERNALSCROLL,-this.controller.targetPos))}),C(this,"onMouseDown",t=>{this.mousePos=this.prevMousePos=t.clientY,this.mouseDown=!0,o().body.style.userSelect="none",this.el.classList.add("active")}),C(this,"onMouseUp",()=>{this.mouseDown=!1,o().body.style.removeProperty("user-select"),this.el.classList.remove("active")}),this.controller=t,this.addHTML(),this.el=document.querySelector(this.controller.options.scrollbarEl),this.handle=document.querySelector(this.controller.options.scrollbarHandleEl),this.position=0,this.mousePos=0,this.prevMousePos=0,this.addStyles(),this.addEvents()}transform(){let t;this.mouseDown?t=this.position:(t=-this.controller.targetPos/-this.controller.maxScroll*(o().window.h-this.handleHeight),this.position=t),this.handle.style.transform=`translate3d(0, ${t}px, 0)`}show(){this.el.classList.add("show")}hide(){this.el.classList.remove("show")}addEvents(){T.on("mousedown",this.handle,this.onMouseDown),T.on("mousemove",window,this.onMouseMove),T.on("mouseup",window,this.onMouseUp)}onResize(){this.scale=(-this.controller.maxScroll+o().window.h)/o().window.h,this.scale<=1?this.handle.style.height=0:(this.trueSize=o().window.h/this.scale,this.handleHeight=Math.max(this.trueSize,40),this.handle.style.height=`${this.handleHeight}px`,this.maxY=o().window.h-this.handleHeight)}addHTML(){if(document.querySelector(this.controller.options.scrollbarEl))return;const t=document.createElement("div");t.classList.add(this.controller.options.scrollbarEl.substring(1)),t.innerHTML=`<div class="${this.controller.options.scrollbarHandleEl.substring(1)}"><div></div></div>`,document.body.appendChild(t)}addStyles(){if(!this.controller.options.disableNativeScrollbar&&!this.controller.options.scrollbarStyles)return;let t="";this.controller.options.disableNativeScrollbar&&(t+="html{scrollbar-width:none;}body{-ms-overflow-style:none;}body::-webkit-scrollbar{width:0;height:0;}"),this.controller.options.scrollbarStyles&&(t+=`${this.controller.options.scrollbarEl} {position:fixed;top:0;right:0;width:20px;height:100%;z-index:900;}.is-touch ${this.controller.options.scrollbarEl} {display:none;}${this.controller.options.scrollbarEl} > div {padding:6px 0;width:10px;height:0;margin:0 auto;visibility:hidden;}${this.controller.options.scrollbarEl} > div > div {width:100%;height:100%;border-radius:10px;opacity:0.3;background-color:#000;}${this.controller.options.scrollbarEl} > div > div:hover {opacity:0.9;}${this.controller.options.scrollbarEl}:hover > div, ${this.controller.options.scrollbarEl}.show > div, ${this.controller.options.scrollbarEl}.active > div {visibility:visible;}${this.controller.options.scrollbarEl}.active > div > div {opacity:0.9;}`);const e=document.createElement("style");e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}destroy(){T.off("mousedown",this.handle,this.onMouseDown),T.off("mousemove",window,this.onMouseMove),T.off("mouseup",window,this.onMouseUp)}}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class L{constructor(t={}){R(this,"onScroll",({event:t})=>{this.scrolling||(this.toggleIframes(),this.scrolling=!0);const e=this.targetPos;if(o().isTouch||"wheel"!==t.type){if(this.preventResizeScroll)return void(this.preventResizeScroll=!1);if(this.wheeling)return;o().isTouch&&"scrollTop"===this.options.touchScrollType?this.targetPos=this.horizontalScroll?-this.containerElement.scrollLeft:-this.containerElement.scrollTop:o().isTouch&&"transform"===this.options.touchScrollType&&this.options.lockIOSBrowserUI?this.targetPos=this.horizontalScroll?-document.body.scrollLeft:-document.body.scrollTop:this.targetPos=-window.scrollY,o().isTouch&&"transform"!==this.options.touchScrollType&&(this.currentPos=this.targetPos)}else t.preventDefault(),this.syncScroll=!0,this.wheeling=!0,this.targetPos+=-1*t.deltaY;this.clamp(),e!==this.targetPos&&(T.emit(A.EXTERNALSCROLL,-this.targetPos),this.options.customScrollbar&&this.scrollbar.show()),this.options.customScrollbar&&this.scrollbar.transform()}),R(this,"onRAF",()=>{if(this.testFps&&this.options.limitLerpRate&&(this.time=.001*performance.now(),this.delta=Math.min(60*(this.time-this.startTime),1),this.startTime=this.time),!this.render)return;Math.abs(this.targetPos-this.currentPos)<.5?(this.currentPos=this.targetPos,this.scrolling&&!this.syncScroll&&(this.scrolling=!1,this.options.customScrollbar&&this.scrollbar.hide(),this.toggleIframes(!0),T.emit(A.SCROLLEND,-this.targetPos)),this.syncScroll&&(window.scrollTo(0,-this.targetPos),this.syncScroll=!1,this.wheeling=!1)):this.currentPos+=(this.targetPos-this.currentPos)*this.ease*this.delta;const t=this.horizontalScroll?this.currentPos:0,e=this.horizontalScroll?0:this.currentPos;this.applyTransform(t,e),T.emit(A.EXTERNALRAF,{targetPos:-this.targetPos,currentPos:-this.currentPos})}),R(this,"onResize",()=>{if(this.scrollElementsLength>1){const t=this.scrollElements[this.scrollElementsLength-1],e=window.getComputedStyle(t),n=parseFloat(this.horizontalScroll?e.marginRight:e.marginBottom),r=t.getBoundingClientRect(),i=this.horizontalScroll?r.right:r.bottom;this.scrollLength=i+n-this.currentPos}else this.scrollLength=this.horizontalScroll?this.scrollElements[0].scrollWidth:this.scrollElements[0].scrollHeight;const t=this.horizontalScroll?o().window.w:o().window.h;this.maxScroll=this.scrollLength>t?-(this.scrollLength-t):0,this.clamp(),this.firstResize||(this.preventResizeScroll=!0),o().isTouch&&this.options.lockIOSBrowserUI?this.containerElement.style.height=this.scrollLength+"px":o().body.style.height=this.scrollLength+"px",this.options.customScrollbar&&this.scrollbar.onResize(),this.firstResize=!1}),R(this,"toggleFixedContainer",()=>{this.containerElement.style.position="static";const t=this.currentPos;this.applyTransform(0,0),requestAnimationFrame(()=>{this.containerElement.style.position="fixed";const e=this.horizontalScroll?t:0,n=this.horizontalScroll?0:t;this.applyTransform(e,n)})}),this.options=t,this.targetPos=this.currentPos=this.prevScrollPos=this.maxScroll=0,this.enabled=!1,this.render=!1,this.scrolling=!1,this.wheeling=!1,this.syncScroll=!1,this.horizontalScroll=!1,this.firstResize=!0,this.preventResizeScroll=!1,this.nativeScroll=!0,this.ease=o().isTouch?this.options.touchEase:this.options.ease,this.originalScrollbarSetting=this.options.customScrollbar,this.testFps=!0,this.delta=1,this.time=this.startTime=performance.now(),this.setElements(),o().isTouch?(this.options.customScrollbar=!1,"transform"===this.options.touchScrollType?this.setupSmoothScroll():"scrollTop"===this.options.touchScrollType&&(document.documentElement.classList.add("asscroll-touch"),this.addTouchStyles(),T.on("scroll",this.containerElement,t=>{T.emit(A.INTERNALSCROLL,{event:t})},{passive:!0}))):this.setupSmoothScroll(),this.addEvents()}setElements(){this.containerElement="string"==typeof this.options.containerElement?document.querySelector(this.options.containerElement):this.options.containerElement,null===this.containerElement&&console.error("ASScroll: could not find container element"),this.containerElement.setAttribute("asscroll-container",""),this.scrollElements="string"==typeof this.options.scrollElements?document.querySelectorAll(this.options.scrollElements):this.options.scrollElements,this.scrollElements.length&&(this.scrollElements=[...this.scrollElements]),this.scrollElements=this.scrollElements.length?this.scrollElements:[this.containerElement.firstElementChild],this.scrollElementsLength=this.scrollElements.length,this.scrollElements.forEach(t=>t.setAttribute("asscroll",""))}setupSmoothScroll(){this.nativeScroll=!1,o().isTouch&&this.options.lockIOSBrowserUI?(Object.assign(document.body.style,{position:"fixed",width:"100%",height:"100%",overflowY:"auto"}),o().html.style.overflow="hidden",this.scrollElements.forEach(t=>{t.style.position="fixed"}),T.on("scroll",document.body,t=>{T.emit(A.INTERNALSCROLL,{event:t})})):Object.assign(this.containerElement.style,{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",contain:"content"}),this.options.customScrollbar&&(this.scrollbar=new P(this)),T.on(A.INTERNALRAF,this.onRAF),T.on(A.RESIZE,this.onResize),this.options.limitLerpRate&&setTimeout(()=>{this.testFps=!1,this.delta=.1*Math.round(10*this.delta)},2e3)}applyTransform(t,e){for(let n=0;n<this.scrollElementsLength;n++)this.scrollElements[n].style.transform=`translate3d(${t}px, ${e}px, 0px)`}enable({newScrollElements:t=!1,reset:e=!1,restore:n=!1,horizontalScroll:r=!1}={}){this.enabled||(this.enabled=!0,this.render=!0,this.horizontalScroll=r,t&&(this.scrollElements=t.length?[...t]:[t],this.scrollElementsLength=this.scrollElements.length,this.scrollElements.forEach(t=>t.setAttribute("asscroll","")),o().isTouch&&"transform"===this.options.touchScrollType&&this.options.lockIOSBrowserUI&&this.scrollElements.forEach(t=>{t.style.position="fixed"})),this.iframes=this.containerElement.querySelectorAll("iframe"),o().isTouch&&"transform"!==this.options.touchScrollType?("scrollTop"===this.options.touchScrollType&&this.containerElement.style.removeProperty("overflow"),this.maxScroll=-this.containerElement.scrollHeight,e&&(this.targetPos=this.currentPos=0,this.scrollTo(0,!1))):(this.firstResize=!0,e&&(this.targetPos=this.currentPos=0,this.applyTransform(0,0)),this.onResize()),o().isTouch&&"transform"===this.options.touchScrollType&&this.options.lockIOSBrowserUI&&(o().body.style.overflowY="auto",e&&document.body.scrollTo(0,0)),n&&this.scrollTo(this.prevScrollPos,!1),T.on(A.WHEEL,this.onScroll),T.on(A.INTERNALSCROLL,this.onScroll))}disable({inputOnly:t=!1}={}){this.enabled&&(this.enabled=!1,t||(this.render=!1),T.off(A.WHEEL,this.onScroll),T.off(A.INTERNALSCROLL,this.onScroll),this.prevScrollPos=this.targetPos,o().isTouch?"scrollTop"===this.options.touchScrollType?this.containerElement.style.overflow="hidden":"transform"===this.options.touchScrollType&&this.options.lockIOSBrowserUI&&(o().body.style.overflowY="hidden"):o().body.style.height="0px")}clamp(){this.targetPos=Math.max(Math.min(this.targetPos,0),this.maxScroll)}scrollTo(t,e=!0){this.targetPos=t,o().isTouch&&"transform"!==this.options.touchScrollType&&("scrollTop"===this.options.touchScrollType?this.horizontalScroll?this.containerElement.scrollTo(-this.targetPos,0):this.containerElement.scrollTo(0,-this.targetPos):window.scrollTo(0,-this.targetPos)),this.clamp(),this.syncScroll=!0,e&&T.emit(A.EXTERNALSCROLL,-this.targetPos)}toggleIframes(t){for(let e=0;e<this.iframes.length;e++)this.iframes[e].style.pointerEvents=t?"auto":"none"}blockScrollEvent(t){t.stopPropagation()}addEvents(){T.on(A.MOUSEDETECTED,()=>{"transform"!==this.options.touchScrollType&&(this.options.customScrollbar=this.originalScrollbarSetting,this.ease=this.options.ease,this.setupSmoothScroll(),this.onResize())}),o().isTouch||(T.on("mouseleave",document,()=>{window.scrollTo(0,-this.targetPos)}),T.on("keydown",window,t=>{"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Home"!==t.key&&"End"!==t.key&&"Tab"!==t.key||window.scrollTo(0,-this.targetPos),"Tab"===t.key&&this.toggleFixedContainer()}),T.delegate("click",'a[href^="#"]',this.toggleFixedContainer),T.delegate("wheel",this.options.blockScrollClass,this.blockScrollEvent))}addTouchStyles(){const t=".asscroll-touch [asscroll-container] {position:absolute;top:0;left:0;right:0;bottom:-0.1px;overflow-y: auto;} .asscroll-touch [asscroll] {margin-bottom:0.1px;}",e=document.createElement("style");e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=class{constructor(t={}){k(this,"update",()=>{this.events.onRaf()}),k(this,"resize",t=>{this.events.onResize(t)});const{containerElement:e="[asscroll-container]",scrollElements:n="[asscroll]",ease:r=.075,touchEase:i=1,touchScrollType:o="none",lockIOSBrowserUI:s=!1,scrollbarEl:a=".asscrollbar",scrollbarHandleEl:l=".asscrollbar__handle",customScrollbar:u=!0,scrollbarStyles:c=!0,disableNativeScrollbar:h=!0,disableRaf:d=!1,disableResize:p=!1,limitLerpRate:f=!0,blockScrollClass:m=".asscroll-block"}=t;this.events=new A({disableRaf:d,disableResize:p}),this.controller=new L({containerElement:e,scrollElements:n,ease:r,touchEase:i,customScrollbar:u,lockIOSBrowserUI:s,scrollbarEl:a,scrollbarHandleEl:l,scrollbarStyles:c,disableNativeScrollbar:h,touchScrollType:o,limitLerpRate:f,blockScrollClass:m})}enable(t){void 0!==t&&"object"!=typeof t&&console.warn("ASScroll: Please pass an object with your parameters. Since 2.0"),this.controller.enable(t)}disable(t){void 0!==t&&"object"!=typeof t&&console.warn("ASScroll: Please pass an object with your parameters. Since 2.0"),this.controller.disable(t)}on(t,e){"function"==typeof e?"scroll"!==t?"update"!==t?"scrollEnd"!==t?console.warn(`ASScroll: "${t}" is not a valid event`):T.on(A.SCROLLEND,e):T.on(A.EXTERNALRAF,e):T.on(A.EXTERNALSCROLL,e):console.error("ASScroll: Function not provided as second parameter")}off(t,e){"function"==typeof e?"scroll"!==t?"update"!==t?"scrollEnd"!==t?console.warn(`ASScroll: "${t}" is not a valid event`):T.off(A.SCROLLEND,e):T.off(A.EXTERNALRAF,e):T.off(A.EXTERNALSCROLL,e):console.error("ASScroll: Function not provided as second parameter")}scrollTo(t,e=!0){this.controller.scrollTo(-t,e)}get targetPos(){return-this.controller.targetPos}get currentPos(){return-this.controller.currentPos}set currentPos(t){this.controller.targetPos=this.controller.currentPos=-t}get maxScroll(){return-this.controller.maxScroll}get containerElement(){return this.controller.containerElement}get scrollElements(){return this.controller.scrollElements}get isHorizontal(){return this.controller.horizontalScroll}get isScrollJacking(){return!this.controller.nativeScroll&&this.controller.enabled}get scrollPos(){}get smoothScrollPos(){}onRaf(){}onResize(){}}}(),r.default}()},t.exports=e()},1219:function(t,e){"use strict";function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,s=r.length;o<s;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}};var r=n;r.TinyEmitter=n;var i=function(t){this.wrap=document.querySelector("[data-router-wrapper]"),this.properties=t,this.Transition=t.transition?new t.transition.class(this.wrap,t.transition.name):null};i.prototype.setup=function(){this.onEnter&&this.onEnter(),this.onEnterCompleted&&this.onEnterCompleted()},i.prototype.add=function(){this.wrap.insertAdjacentHTML("beforeend",this.properties.view.outerHTML)},i.prototype.update=function(){document.title=this.properties.page.title},i.prototype.show=function(t){var e=this;return new Promise(function(n){try{function r(t){e.onEnterCompleted&&e.onEnterCompleted(),n()}return e.update(),e.onEnter&&e.onEnter(),Promise.resolve(e.Transition?Promise.resolve(e.Transition.show(t)).then(r):r())}catch(i){return Promise.reject(i)}})},i.prototype.hide=function(t){var e=this;return new Promise(function(n){try{function r(t){e.onLeaveCompleted&&e.onLeaveCompleted(),n()}return e.onLeave&&e.onLeave(),Promise.resolve(e.Transition?Promise.resolve(e.Transition.hide(t)).then(r):r())}catch(i){return Promise.reject(i)}})};var o=new window.DOMParser,s=function(t,e){this.renderers=t,this.transitions=e};s.prototype.getOrigin=function(t){var e=t.match(/(https?:\/\/[\w\-.]+)/);return e?e[1].replace(/https?:\/\//,""):null},s.prototype.getPathname=function(t){var e=t.match(/https?:\/\/.*?(\/[\w_\-./]+)/);return e?e[1]:"/"},s.prototype.getAnchor=function(t){var e=t.match(/(#.*)$/);return e?e[1]:null},s.prototype.getParams=function(t){var e=t.match(/\?([\w_\-.=&]+)/);if(!e)return null;for(var n=e[1].split("&"),r={},i=0;i<n.length;i++){var o=n[i].split("=");r[o[0]]=o[1]}return r},s.prototype.getDOM=function(t){return"string"==typeof t?o.parseFromString(t,"text/html"):t},s.prototype.getView=function(t){return t.querySelector("[data-router-view]")},s.prototype.getSlug=function(t){return t.getAttribute("data-router-view")},s.prototype.getRenderer=function(t){if(!this.renderers)return Promise.resolve(i);if(t in this.renderers){var e=this.renderers[t];return"function"!=typeof e||i.isPrototypeOf(e)?"function"==typeof e.then?Promise.resolve(e).then(function(t){return t.default}):Promise.resolve(e):Promise.resolve(e()).then(function(t){return t.default})}return Promise.resolve(i)},s.prototype.getTransition=function(t){return this.transitions?t in this.transitions?{class:this.transitions[t],name:t}:"default"in this.transitions?{class:this.transitions.default,name:"default"}:null:null},s.prototype.getProperties=function(t){var e=this.getDOM(t),n=this.getView(e),r=this.getSlug(n);return{page:e,view:n,slug:r,renderer:this.getRenderer(r,this.renderers),transition:this.getTransition(r,this.transitions)}},s.prototype.getLocation=function(t){return{href:t,anchor:this.getAnchor(t),origin:this.getOrigin(t),params:this.getParams(t),pathname:this.getPathname(t)}};var a=function(t){function e(e){var n=this;void 0===e&&(e={});var r=e.renderers,i=e.transitions;t.call(this),this.Helpers=new s(r,i),this.Transitions=i,this.Contextual=!1,this.location=this.Helpers.getLocation(window.location.href),this.properties=this.Helpers.getProperties(document.cloneNode(!0)),this.popping=!1,this.running=!1,this.trigger=null,this.cache=new Map,this.cache.set(this.location.href,this.properties),this.properties.renderer.then(function(t){n.From=new t(n.properties),n.From.setup()}),this._navigate=this.navigate.bind(this),window.addEventListener("popstate",this.popState.bind(this)),this.links=document.querySelectorAll("a:not([target]):not([data-router-disabled])"),this.attach(this.links)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.attach=function(t){for(var e=0,n=t;e<n.length;e+=1)n[e].addEventListener("click",this._navigate)},e.prototype.detach=function(t){for(var e=0,n=t;e<n.length;e+=1)n[e].removeEventListener("click",this._navigate)},e.prototype.navigate=function(t){if(!t.metaKey&&!t.ctrlKey){t.preventDefault();var e=!!t.currentTarget.hasAttribute("data-transition")&&t.currentTarget.dataset.transition;this.redirect(t.currentTarget.href,e,t.currentTarget)}},e.prototype.redirect=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n="script"),this.trigger=n,!this.running&&t!==this.location.href){var r=this.Helpers.getLocation(t);this.Contextual=!1,e&&(this.Contextual=this.Transitions.contextual[e].prototype,this.Contextual.name=e),r.origin!==this.location.origin||r.anchor&&r.pathname===this.location.pathname?window.location.href=t:(this.location=r,this.beforeFetch())}},e.prototype.popState=function(){this.trigger="popstate",this.Contextual=!1;var t=this.Helpers.getLocation(window.location.href);this.location.pathname!==t.pathname||!this.location.anchor&&!t.anchor?(this.popping=!0,this.location=t,this.beforeFetch()):this.location=t},e.prototype.pushState=function(){this.popping||window.history.pushState(this.location,"",this.location.href)},e.prototype.fetch=function(){try{var t=this;return Promise.resolve(fetch(t.location.href,{mode:"same-origin",method:"GET",headers:{"X-Requested-With":"Highway"},credentials:"same-origin"})).then(function(e){if(e.status>=200&&e.status<300)return e.text();window.location.href=t.location.href})}catch(t){return Promise.reject(t)}},e.prototype.beforeFetch=function(){try{var t=this;function r(){t.afterFetch()}t.pushState(),t.running=!0,t.emit("NAVIGATE_OUT",{from:{page:t.From.properties.page,view:t.From.properties.view},trigger:t.trigger,location:t.location});var e={trigger:t.trigger,contextual:t.Contextual},n=t.cache.has(t.location.href)?Promise.resolve(t.From.hide(e)).then(function(){t.properties=t.cache.get(t.location.href)}):Promise.resolve(Promise.all([t.fetch(),t.From.hide(e)])).then(function(e){t.properties=t.Helpers.getProperties(e[0]),t.cache.set(t.location.href,t.properties)});return Promise.resolve(n&&n.then?n.then(r):r())}catch(t){return Promise.reject(t)}},e.prototype.afterFetch=function(){try{var t=this;return Promise.resolve(t.properties.renderer).then(function(e){return t.To=new e(t.properties),t.To.add(),t.emit("NAVIGATE_IN",{to:{page:t.To.properties.page,view:t.To.wrap.lastElementChild},trigger:t.trigger,location:t.location}),Promise.resolve(t.To.show({trigger:t.trigger,contextual:t.Contextual})).then(function(){t.popping=!1,t.running=!1,t.detach(t.links),t.links=document.querySelectorAll("a:not([target]):not([data-router-disabled])"),t.attach(t.links),t.emit("NAVIGATE_END",{to:{page:t.To.properties.page,view:t.To.wrap.lastElementChild},from:{page:t.From.properties.page,view:t.From.properties.view},trigger:t.trigger,location:t.location}),t.From=t.To,t.trigger=null})})}catch(t){return Promise.reject(t)}},e}(r),l=function(t,e){this.wrap=t,this.name=e};l.prototype.show=function(t){var e=this,n=t.trigger,r=t.contextual,i=this.wrap.lastElementChild,o=this.wrap.firstElementChild;return new Promise(function(t){r?(i.setAttribute("data-transition-in",r.name),i.removeAttribute("data-transition-out",r.name),r.in&&r.in({to:i,from:o,trigger:n,done:t})):(i.setAttribute("data-transition-in",e.name),i.removeAttribute("data-transition-out",e.name),e.in&&e.in({to:i,from:o,trigger:n,done:t}))})},l.prototype.hide=function(t){var e=this,n=t.trigger,r=t.contextual,i=this.wrap.firstElementChild;return new Promise(function(t){r?(i.setAttribute("data-transition-out",r.name),i.removeAttribute("data-transition-in",r.name),r.out&&r.out({from:i,trigger:n,done:t})):(i.setAttribute("data-transition-out",e.name),i.removeAttribute("data-transition-in",e.name),e.out&&e.out({from:i,trigger:n,done:t}))})},console.log("Highway v2.2.0"),e.Z={Core:a,Helpers:s,Renderer:i,Transition:l}},5500:function(t,e,n){"use strict";n.d(e,{Wj:function(){return Il}});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function i(t,e){return t(e={exports:{}},e.exports),e.exports}var o,s,a,l=function(t){return t&&t.Math==Math&&t},u=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof r&&r)||Function("return this")(),c=function(t){try{return!!t()}catch(t){return!0}},h=!c(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,f={f:p&&!d.call({1:2},1)?function(t){var e=p(this,t);return!!e&&e.enumerable}:d},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,g=function(t){return v.call(t).slice(8,-1)},_="".split,b=c(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==g(t)?_.call(t,""):Object(t)}:Object,y=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=function(t){return b(y(t))},w=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t,e){if(!w(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!w(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!w(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!w(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},M={}.hasOwnProperty,T=function(t,e){return M.call(t,e)},E=u.document,A=w(E)&&w(E.createElement),C=function(t){return A?E.createElement(t):{}},P=!h&&!c(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a}),R=Object.getOwnPropertyDescriptor,L={f:h?R:function(t,e){if(t=x(t),e=S(e,!0),P)try{return R(t,e)}catch(t){}if(T(t,e))return m(!f.f.call(t,e),t[e])}},k=function(t){if(!w(t))throw TypeError(String(t)+" is not an object");return t},O=Object.defineProperty,D={f:h?O:function(t,e,n){if(k(t),e=S(e,!0),k(n),P)try{return O(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=h?function(t,e,n){return D.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},U=function(t,e){try{I(u,t,e)}catch(n){u[t]=e}return e},F="__core-js_shared__",N=u[F]||U(F,{}),B=i(function(t){(t.exports=function(t,e){return N[t]||(N[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),V=B("native-function-to-string",Function.toString),z=u.WeakMap,G="function"==typeof z&&/native code/.test(V.call(z)),H=0,j=Math.random(),W=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+j).toString(36)},K=B("keys"),q=function(t){return K[t]||(K[t]=W(t))},X={},Y=u.WeakMap;if(G){var $=new Y,Z=$.get,J=$.has,Q=$.set;o=function(t,e){return Q.call($,t,e),e},s=function(t){return Z.call($,t)||{}},a=function(t){return J.call($,t)}}else{var tt=q("state");X[tt]=!0,o=function(t,e){return I(t,tt,e),e},s=function(t){return T(t,tt)?t[tt]:{}},a=function(t){return T(t,tt)}}var et,nt,rt={set:o,get:s,has:a,enforce:function(t){return a(t)?s(t):o(t,{})},getterFor:function(t){return function(e){var n;if(!w(e)||(n=s(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},it=i(function(t){var e=rt.get,n=rt.enforce,r=String(V).split("toString");B("inspectSource",function(t){return V.call(t)}),(t.exports=function(t,e,i,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||T(i,"name")||I(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==u?(s?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=i:I(t,e,i)):a?t[e]=i:U(e,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||V.call(this)})}),ot=u,st=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?st(ot[t])||st(u[t]):ot[t]&&ot[t][e]||u[t]&&u[t][e]},lt=Math.ceil,ut=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?ut:lt)(t)},ht=Math.min,dt=function(t){return t>0?ht(ct(t),9007199254740991):0},pt=Math.max,ft=Math.min,mt=function(t,e){var n=ct(t);return n<0?pt(n+e,0):ft(n,e)},vt=function(t){return function(e,n,r){var i,o=x(e),s=dt(o.length),a=mt(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},gt={includes:vt(!0),indexOf:vt(!1)},_t=gt.indexOf,bt=function(t,e){var n,r=x(t),i=0,o=[];for(n in r)!T(X,n)&&T(r,n)&&o.push(n);for(;e.length>i;)T(r,n=e[i++])&&(~_t(o,n)||o.push(n));return o},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xt=yt.concat("length","prototype"),wt={f:Object.getOwnPropertyNames||function(t){return bt(t,xt)}},St={f:Object.getOwnPropertySymbols},Mt=at("Reflect","ownKeys")||function(t){var e=wt.f(k(t)),n=St.f;return n?e.concat(n(t)):e},Tt=function(t,e){for(var n=Mt(e),r=D.f,i=L.f,o=0;o<n.length;o++){var s=n[o];T(t,s)||r(t,s,i(e,s))}},Et=/#|\.prototype\./,At=function(t,e){var n=Pt[Ct(t)];return n==Lt||n!=Rt&&("function"==typeof e?c(e):!!e)},Ct=At.normalize=function(t){return String(t).replace(Et,".").toLowerCase()},Pt=At.data={},Rt=At.NATIVE="N",Lt=At.POLYFILL="P",kt=At,Ot=L.f,Dt=function(t,e){var n,r,i,o,s,a=t.target,l=t.global,c=t.stat;if(n=l?u:c?u[a]||U(a,{}):(u[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=Ot(n,r))&&s.value:n[r],!kt(l?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Tt(o,i)}(t.sham||i&&i.sham)&&I(o,"sham",!0),it(n,r,o,t)}},It=Array.isArray||function(t){return"Array"==g(t)},Ut=function(t,e,n){var r=S(e);r in t?D.f(t,r,m(0,n)):t[r]=n},Ft=!!Object.getOwnPropertySymbols&&!c(function(){return!String(Symbol())}),Nt=u.Symbol,Bt=B("wks"),Vt=function(t){return Bt[t]||(Bt[t]=Ft&&Nt[t]||(Ft?Nt:W)("Symbol."+t))},zt=at("navigator","userAgent")||"",Gt=u.process,Ht=Gt&&Gt.versions,jt=Ht&&Ht.v8;jt?nt=(et=jt.split("."))[0]+et[1]:zt&&(!(et=zt.match(/Edge\/(\d+)/))||et[1]>=74)&&(et=zt.match(/Chrome\/(\d+)/))&&(nt=et[1]);var Wt=nt&&+nt,Kt=Vt("species"),qt=function(t){return Wt>=51||!c(function(){var e=[];return(e.constructor={})[Kt]=function(){return{foo:1}},1!==e[t](Boolean).foo})},Xt=Vt("species"),Yt=[].slice,$t=Math.max;Dt({target:"Array",proto:!0,forced:!qt("slice")},{slice:function(t,e){var n,r,i,o=x(this),s=dt(o.length),a=mt(t,s),l=mt(void 0===e?s:e,s);if(It(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!It(n.prototype)?w(n)&&null===(n=n[Xt])&&(n=void 0):n=void 0,n===Array||void 0===n))return Yt.call(o,a,l);for(r=new(void 0===n?Array:n)($t(l-a,0)),i=0;a<l;a++,i++)a in o&&Ut(r,i,o[a]);return r.length=i,r}});var Zt=D.f,Jt=Function.prototype,Qt=Jt.toString,te=/^\s*function ([^ (]*)/,ee="name";h&&!(ee in Jt)&&Zt(Jt,ee,{configurable:!0,get:function(){try{return Qt.call(this).match(te)[1]}catch(t){return""}}});var ne=wt.f,re={}.toString,ie="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],oe={f:function(t){return ie&&"[object Window]"==re.call(t)?function(t){try{return ne(t)}catch(t){return ie.slice()}}(t):ne(x(t))}},se=oe.f,ae=c(function(){return!Object.getOwnPropertyNames(1)});function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function ue(t){return ue="function"==typeof Symbol&&"symbol"===le(Symbol.iterator)?function(t){return le(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":le(t)},ue(t)}Dt({target:"Object",stat:!0,forced:ae},{getOwnPropertyNames:se});var ce=function(t){return Object(y(t))},he=Object.keys||function(t){return bt(t,yt)},de=h?Object.defineProperties:function(t,e){k(t);for(var n,r=he(e),i=r.length,o=0;i>o;)D.f(t,n=r[o++],e[n]);return t},pe=at("document","documentElement"),fe=q("IE_PROTO"),me=function(){},ve=function(){var t,e=C("iframe"),n=yt.length;for(e.style.display="none",pe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ve=t.F;n--;)delete ve.prototype[yt[n]];return ve()},ge=Object.create||function(t,e){var n;return null!==t?(me.prototype=k(t),n=new me,me.prototype=null,n[fe]=t):n=ve(),void 0===e?n:de(n,e)};X[fe]=!0;var _e={f:Vt},be=D.f,ye=function(t){var e=ot.Symbol||(ot.Symbol={});T(e,t)||be(e,t,{value:_e.f(t)})},xe=D.f,we=Vt("toStringTag"),Se=function(t,e,n){t&&!T(t=n?t:t.prototype,we)&&xe(t,we,{configurable:!0,value:e})},Me=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Te=function(t,e,n){if(Me(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Ee=Vt("species"),Ae=function(t,e){var n;return It(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!It(n.prototype)?w(n)&&null===(n=n[Ee])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ce=[].push,Pe=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,s=5==t||o;return function(a,l,u,c){for(var h,d,p=ce(a),f=b(p),m=Te(l,u,3),v=dt(f.length),g=0,_=c||Ae,y=e?_(a,v):n?_(a,0):void 0;v>g;g++)if((s||g in f)&&(d=m(h=f[g],g,p),t))if(e)y[g]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:Ce.call(y,h)}else if(i)return!1;return o?-1:r||i?i:y}},Re={forEach:Pe(0),map:Pe(1),filter:Pe(2),some:Pe(3),every:Pe(4),find:Pe(5),findIndex:Pe(6)},Le=Re.forEach,ke=q("hidden"),Oe="Symbol",De=Vt("toPrimitive"),Ie=rt.set,Ue=rt.getterFor(Oe),Fe=Object.prototype,Ne=u.Symbol,Be=u.JSON,Ve=Be&&Be.stringify,ze=L.f,Ge=D.f,He=oe.f,je=f.f,We=B("symbols"),Ke=B("op-symbols"),qe=B("string-to-symbol-registry"),Xe=B("symbol-to-string-registry"),Ye=B("wks"),$e=u.QObject,Ze=!$e||!$e.prototype||!$e.prototype.findChild,Je=h&&c(function(){return 7!=ge(Ge({},"a",{get:function(){return Ge(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=ze(Fe,e);r&&delete Fe[e],Ge(t,e,n),r&&t!==Fe&&Ge(Fe,e,r)}:Ge,Qe=function(t,e){var n=We[t]=ge(Ne.prototype);return Ie(n,{type:Oe,tag:t,description:e}),h||(n.description=e),n},tn=Ft&&"symbol"==typeof Ne.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Ne},en=function(t,e,n){t===Fe&&en(Ke,e,n),k(t);var r=S(e,!0);return k(n),T(We,r)?(n.enumerable?(T(t,ke)&&t[ke][r]&&(t[ke][r]=!1),n=ge(n,{enumerable:m(0,!1)})):(T(t,ke)||Ge(t,ke,m(1,{})),t[ke][r]=!0),Je(t,r,n)):Ge(t,r,n)},nn=function(t,e){k(t);var n=x(e),r=he(n).concat(an(n));return Le(r,function(e){h&&!rn.call(n,e)||en(t,e,n[e])}),t},rn=function(t){var e=S(t,!0),n=je.call(this,e);return!(this===Fe&&T(We,e)&&!T(Ke,e))&&(!(n||!T(this,e)||!T(We,e)||T(this,ke)&&this[ke][e])||n)},on=function(t,e){var n=x(t),r=S(e,!0);if(n!==Fe||!T(We,r)||T(Ke,r)){var i=ze(n,r);return!i||!T(We,r)||T(n,ke)&&n[ke][r]||(i.enumerable=!0),i}},sn=function(t){var e=He(x(t)),n=[];return Le(e,function(t){T(We,t)||T(X,t)||n.push(t)}),n},an=function(t){var e=t===Fe,n=He(e?Ke:x(t)),r=[];return Le(n,function(t){!T(We,t)||e&&!T(Fe,t)||r.push(We[t])}),r};Ft||(Ne=function(){if(this instanceof Ne)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=W(t),n=function(t){this===Fe&&n.call(Ke,t),T(this,ke)&&T(this[ke],e)&&(this[ke][e]=!1),Je(this,e,m(1,t))};return h&&Ze&&Je(Fe,e,{configurable:!0,set:n}),Qe(e,t)},it(Ne.prototype,"toString",function(){return Ue(this).tag}),f.f=rn,D.f=en,L.f=on,wt.f=oe.f=sn,St.f=an,h&&(Ge(Ne.prototype,"description",{configurable:!0,get:function(){return Ue(this).description}}),it(Fe,"propertyIsEnumerable",rn,{unsafe:!0})),_e.f=function(t){return Qe(Vt(t),t)}),Dt({global:!0,wrap:!0,forced:!Ft,sham:!Ft},{Symbol:Ne}),Le(he(Ye),function(t){ye(t)}),Dt({target:Oe,stat:!0,forced:!Ft},{for:function(t){var e=String(t);if(T(qe,e))return qe[e];var n=Ne(e);return qe[e]=n,Xe[n]=e,n},keyFor:function(t){if(!tn(t))throw TypeError(t+" is not a symbol");if(T(Xe,t))return Xe[t]},useSetter:function(){Ze=!0},useSimple:function(){Ze=!1}}),Dt({target:"Object",stat:!0,forced:!Ft,sham:!h},{create:function(t,e){return void 0===e?ge(t):nn(ge(t),e)},defineProperty:en,defineProperties:nn,getOwnPropertyDescriptor:on}),Dt({target:"Object",stat:!0,forced:!Ft},{getOwnPropertyNames:sn,getOwnPropertySymbols:an}),Dt({target:"Object",stat:!0,forced:c(function(){St.f(1)})},{getOwnPropertySymbols:function(t){return St.f(ce(t))}}),Be&&Dt({target:"JSON",stat:!0,forced:!Ft||c(function(){var t=Ne();return"[null]"!=Ve([t])||"{}"!=Ve({a:t})||"{}"!=Ve(Object(t))})},{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!tn(t))return It(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!tn(e))return e}),r[1]=e,Ve.apply(Be,r)}}),Ne.prototype[De]||I(Ne.prototype,De,Ne.prototype.valueOf),Se(Ne,Oe),X[ke]=!0;var ln=D.f,un=u.Symbol;if(h&&"function"==typeof un&&(!("description"in un.prototype)||void 0!==un().description)){var cn={},hn=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof hn?new un(t):void 0===t?un():un(t);return""===t&&(cn[e]=!0),e};Tt(hn,un);var dn=hn.prototype=un.prototype;dn.constructor=hn;var pn=dn.toString,fn="Symbol(test)"==String(un("test")),mn=/^Symbol\((.*)\)[^)]+$/;ln(dn,"description",{configurable:!0,get:function(){var t=w(this)?this.valueOf():this,e=pn.call(t);if(T(cn,t))return"";var n=fn?e.slice(7,-1):e.replace(mn,"$1");return""===n?void 0:n}}),Dt({global:!0,forced:!0},{Symbol:hn})}ye("iterator");var vn=Vt("unscopables"),gn=Array.prototype;null==gn[vn]&&I(gn,vn,ge(null));var _n,bn,yn,xn=function(t){gn[vn][t]=!0},wn={},Sn=!c(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Mn=q("IE_PROTO"),Tn=Object.prototype,En=Sn?Object.getPrototypeOf:function(t){return t=ce(t),T(t,Mn)?t[Mn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Tn:null},An=Vt("iterator"),Cn=!1;[].keys&&("next"in(yn=[].keys())?(bn=En(En(yn)))!==Object.prototype&&(_n=bn):Cn=!0),null==_n&&(_n={}),T(_n,An)||I(_n,An,function(){return this});var Pn={IteratorPrototype:_n,BUGGY_SAFARI_ITERATORS:Cn},Rn=Pn.IteratorPrototype,Ln=function(){return this},kn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return k(n),function(t){if(!w(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),On=Pn.IteratorPrototype,Dn=Pn.BUGGY_SAFARI_ITERATORS,In=Vt("iterator"),Un="keys",Fn="values",Nn="entries",Bn=function(){return this},Vn=function(t,e,n,r,i,o,s){!function(t,e,n){var r=e+" Iterator";t.prototype=ge(Rn,{next:m(1,n)}),Se(t,r,!1),wn[r]=Ln}(n,e,r);var a,l,u,c=function(t){if(t===i&&v)return v;if(!Dn&&t in p)return p[t];switch(t){case Un:case Fn:case Nn:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,p=t.prototype,f=p[In]||p["@@iterator"]||i&&p[i],v=!Dn&&f||c(i),g="Array"==e&&p.entries||f;if(g&&(a=En(g.call(new t)),On!==Object.prototype&&a.next&&(En(a)!==On&&(kn?kn(a,On):"function"!=typeof a[In]&&I(a,In,Bn)),Se(a,h,!0))),i==Fn&&f&&f.name!==Fn&&(d=!0,v=function(){return f.call(this)}),p[In]!==v&&I(p,In,v),wn[e]=v,i)if(l={values:c(Fn),keys:o?v:c(Un),entries:c(Nn)},s)for(u in l)(Dn||d||!(u in p))&&it(p,u,l[u]);else Dt({target:e,proto:!0,forced:Dn||d},l);return l},zn="Array Iterator",Gn=rt.set,Hn=rt.getterFor(zn),jn=Vn(Array,"Array",function(t,e){Gn(this,{type:zn,target:x(t),index:0,kind:e})},function(){var t=Hn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");wn.Arguments=wn.Array,xn("keys"),xn("values"),xn("entries");var Wn=Object.assign,Kn=!Wn||c(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Wn({},t)[n]||he(Wn({},e)).join("")!=r})?function(t,e){for(var n=ce(t),r=arguments.length,i=1,o=St.f,s=f.f;r>i;)for(var a,l=b(arguments[i++]),u=o?he(l).concat(o(l)):he(l),c=u.length,d=0;c>d;)a=u[d++],h&&!s.call(l,a)||(n[a]=l[a]);return n}:Wn;Dt({target:"Object",stat:!0,forced:Object.assign!==Kn},{assign:Kn});var qn=Vt("toStringTag"),Xn="Arguments"==g(function(){return arguments}()),Yn=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),qn))?n:Xn?g(e):"Object"==(r=g(e))&&"function"==typeof e.callee?"Arguments":r},$n={};$n[Vt("toStringTag")]="z";var Zn="[object z]"!==String($n)?function(){return"[object "+Yn(this)+"]"}:$n.toString,Jn=Object.prototype;Zn!==Jn.toString&&it(Jn,"toString",Zn,{unsafe:!0});var Qn=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),tr=i(function(t){var e=D.f,n=W("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!w(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!T(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Qn&&s.REQUIRED&&i(t)&&!T(t,n)&&o(t),t}};X[n]=!0}),er=Vt("iterator"),nr=Array.prototype,rr=Vt("iterator"),ir=function(t,e,n,r){try{return r?e(k(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&k(i.call(t)),e}},or=i(function(t){var e=function(t,e){this.stopped=t,this.result=e},n=t.exports=function(t,n,r,i,o){var s,a,l,u,c,h,d,p,f=Te(n,r,i?2:1);if(o)s=t;else{if(a=function(t){if(null!=t)return t[rr]||t["@@iterator"]||wn[Yn(t)]}(t),"function"!=typeof a)throw TypeError("Target is not iterable");if(void 0!==(p=a)&&(wn.Array===p||nr[er]===p)){for(l=0,u=dt(t.length);u>l;l++)if((c=i?f(k(d=t[l])[0],d[1]):f(t[l]))&&c instanceof e)return c;return new e(!1)}s=a.call(t)}for(h=s.next;!(d=h.call(s)).done;)if("object"==typeof(c=ir(s,f,d.value,i))&&c&&c instanceof e)return c;return new e(!1)};n.stop=function(t){return new e(!0,t)}}),sr=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ar=Vt("iterator"),lr=!1;try{var ur=0,cr={next:function(){return{done:!!ur++}},return:function(){lr=!0}};cr[ar]=function(){return this},Array.from(cr,function(){throw 2})}catch(t){}var hr=function(t,e,n){var r,i;return kn&&"function"==typeof(r=e.constructor)&&r!==n&&w(i=r.prototype)&&i!==n.prototype&&kn(t,i),t},dr=function(t,e,n){for(var r in e)it(t,r,e[r],n);return t},pr=Vt("species"),fr=D.f,mr=tr.fastKey,vr=rt.set,gr=rt.getterFor,_r={getConstructor:function(t,e,n,r){var i=t(function(t,o){sr(t,i,e),vr(t,{type:e,index:ge(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=o&&or(o,t[r],t,n)}),o=gr(e),s=function(t,e,n){var r,i,s=o(t),l=a(t,e);return l?l.value=n:(s.last=l={index:i=mr(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=l),r&&(r.next=l),h?s.size++:t.size++,"F"!==i&&(s.index[i]=l)),t},a=function(t,e){var n,r=o(t),i=mr(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return dr(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=a(e,t);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),h?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=Te(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),dr(i.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),h&&fr(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=gr(e),o=gr(r);Vn(t,e,function(t,e){vr(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),function(t){var e=at(t),n=D.f;h&&e&&!e[pr]&&n(e,pr,{configurable:!0,get:function(){return this}})}(e)}},br=(function(t,e,n,r){var i=u[t],o=i&&i.prototype,s=i,a="add",l={},h=function(t){var e=o[t];it(o,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t||"get"==t||"has"==t?function(t){return e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(kt(t,"function"!=typeof i||!(o.forEach&&!c(function(){(new i).entries().next()}))))s=n.getConstructor(e,t,r,a),tr.REQUIRED=!0;else if(kt(t,!0)){var d=new s,p=d[a](-0,1)!=d,f=c(function(){d.has(1)}),m=function(){if(!lr)return!1;var t=!1;try{var e={};e[ar]=function(){return{next:function(){return{done:t=!0}}}},function(t){new i(t)}(e)}catch(t){}return t}(),v=c(function(){for(var t=new i,e=5;e--;)t[a](e,e);return!t.has(-0)});m||((s=e(function(e,n){sr(e,s,t);var o=hr(new i,e,s);return null!=n&&or(n,o[a],o,r),o})).prototype=o,o.constructor=s),(f||v)&&(h("delete"),h("has")),(v||p)&&h(a)}l[t]=s,Dt({global:!0,forced:s!=i},l),Se(s,t),n.setStrong(s,t,r)}("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},_r),function(t){return function(e,n){var r,i,o=String(y(e)),s=ct(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s))<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}}),yr={codeAt:br(!1),charAt:br(!0)},xr=yr.charAt,wr="String Iterator",Sr=rt.set,Mr=rt.getterFor(wr);Vn(String,"String",function(t){Sr(this,{type:wr,string:String(t),index:0})},function(){var t,e=Mr(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=xr(n,r),e.index+=t.length,{value:t,done:!1})});var Tr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Er=Vt("iterator"),Ar=Vt("toStringTag"),Cr=jn.values;for(var Pr in Tr){var Rr=u[Pr],Lr=Rr&&Rr.prototype;if(Lr){if(Lr[Er]!==Cr)try{I(Lr,Er,Cr)}catch(t){Lr[Er]=Cr}if(Lr[Ar]||I(Lr,Ar,Pr),Tr[Pr])for(var kr in jn)if(Lr[kr]!==jn[kr])try{I(Lr,kr,jn[kr])}catch(t){Lr[kr]=jn[kr]}}}function Or(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Dr={},Ir=[];function Ur(t,e){if(Array.isArray(t)){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)Ur(o.value,e)}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if("object"!==ue(t))Nr(Object.getOwnPropertyNames(e)),Dr[t]=Object.assign(Dr[t]||{},e);else for(var a in t)Ur(a,t[a])}function Fr(t){return Dr[t]||{}}function Nr(t){Ir.push.apply(Ir,Or(t))}var Br=gt.includes;Dt({target:"Array",proto:!0},{includes:function(t){return Br(this,t,arguments.length>1?arguments[1]:void 0)}}),xn("includes");var Vr,zr,Gr=function(){var t=k(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Hr=RegExp.prototype.exec,jr=String.prototype.replace,Wr=Hr,Kr=(Vr=/a/,zr=/b*/g,Hr.call(Vr,"a"),Hr.call(zr,"a"),0!==Vr.lastIndex||0!==zr.lastIndex),qr=void 0!==/()??/.exec("")[1];(Kr||qr)&&(Wr=function(t){var e,n,r,i,o=this;return qr&&(n=new RegExp("^"+o.source+"$(?!\\s)",Gr.call(o))),Kr&&(e=o.lastIndex),r=Hr.call(o,t),Kr&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),qr&&r&&r.length>1&&jr.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var Xr=Wr;Dt({target:"RegExp",proto:!0,forced:/./.exec!==Xr},{exec:Xr});var Yr=Vt("match"),$r=function(t){var e;return w(t)&&(void 0!==(e=t[Yr])?!!e:"RegExp"==g(t))},Zr=Vt("match");Dt({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Zr]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(y(this)).indexOf(function(t){if($r(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),arguments.length>1?arguments[1]:void 0)}});var Jr=Vt("species"),Qr=!c(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ti=!c(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),ei=function(t,e,n,r){var i=Vt(t),o=!c(function(){var e={};return e[i]=function(){return 7},7!=""[t](e)}),s=o&&!c(function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Jr]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e});if(!o||!s||"replace"===t&&!Qr||"split"===t&&!ti){var a=/./[i],l=n(i,""[t],function(t,e,n,r,i){return e.exec===Xr?o&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),u=l[0],h=l[1];it(String.prototype,t,u),it(RegExp.prototype,i,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}),r&&I(RegExp.prototype[i],"sham",!0)}},ni=yr.charAt,ri=function(t,e,n){return e+(n?ni(t,e).length:1)},ii=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==g(t))throw TypeError("RegExp#exec called on incompatible receiver");return Xr.call(t,e)},oi=Math.max,si=Math.min,ai=Math.floor,li=/\$([$&'`]|\d\d?|<[^>]*>)/g,ui=/\$([$&'`]|\d\d?)/g;ei("replace",2,function(t,e,n){return[function(n,r){var i=y(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,i){var o=n(e,t,this,i);if(o.done)return o.value;var s=k(t),a=String(this),l="function"==typeof i;l||(i=String(i));var u=s.global;if(u){var c=s.unicode;s.lastIndex=0}for(var h=[];;){var d=ii(s,a);if(null===d)break;if(h.push(d),!u)break;""===String(d[0])&&(s.lastIndex=ri(a,dt(s.lastIndex),c))}for(var p,f="",m=0,v=0;v<h.length;v++){d=h[v];for(var g=String(d[0]),_=oi(si(ct(d.index),a.length),0),b=[],y=1;y<d.length;y++)b.push(void 0===(p=d[y])?p:String(p));var x=d.groups;if(l){var w=[g].concat(b,_,a);void 0!==x&&w.push(x);var S=String(i.apply(void 0,w))}else S=r(g,a,_,b,x,i);_>=m&&(f+=a.slice(m,_)+S,m=_+g.length)}return f+a.slice(m)}];function r(t,n,r,i,o,s){var a=r+t.length,l=i.length,u=ui;return void 0!==o&&(o=ce(o),u=li),e.call(s,u,function(e,s){var u;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":u=o[s.slice(1,-1)];break;default:var c=+s;if(0===c)return e;if(c>l){var h=ai(c/10);return 0===h?e:h<=l?void 0===i[h-1]?s.charAt(1):i[h-1]+s.charAt(1):e}u=i[c-1]}return void 0===u?"":u})}});var ci="\t\n\v\f\r                　\u2028\u2029\ufeff",hi="["+ci+"]",di=RegExp("^"+hi+hi+"*"),pi=RegExp(hi+hi+"*$"),fi=function(t){return function(e){var n=String(y(e));return 1&t&&(n=n.replace(di,"")),2&t&&(n=n.replace(pi,"")),n}},mi={start:fi(1),end:fi(2),trim:fi(3)},vi=mi.trim;function gi(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)i.push(e(t[n]));return i}function _i(t){return t%360*Math.PI/180}function bi(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function yi(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}function xi(t){return t.charAt(0).toUpperCase()+t.slice(1)}function wi(t,e,n,r){return null!=e&&null!=n||(r=r||t.bbox(),null==e?e=r.width/r.height*n:null==n&&(n=r.height/r.width*e)),{width:e,height:n}}function Si(t,e){var n,r,i=t.origin;if("string"==typeof i||null==i){var o=(i||"center").toLowerCase().trim(),s=e.bbox(),a=s.height,l=s.width,u=s.x,c=s.y,h=o.includes("left")?u:o.includes("right")?u+l:u+l/2,d=o.includes("top")?c:o.includes("bottom")?c+a:c+a/2;n=null!=t.ox?t.ox:h,r=null!=t.oy?t.oy:d}else n=i[0],r=i[1];return[n,r]}Dt({target:"String",proto:!0,forced:function(t){return c(function(){return!!ci[t]()||"​᠎"!="​᠎"[t]()||ci[t].name!==t})}("trim")},{trim:function(){return vi(this)}});var Mi="http://www.w3.org/2000/svg",Ti="http://www.w3.org/2000/xmlns/",Ei="http://www.w3.org/1999/xlink",Ai={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function Ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Pi=function t(){Ci(this,t)},Ri={},Li="___SYMBOL___ROOT___";function ki(t){return Ai.document.createElementNS(Mi,t)}function Oi(t){if(t instanceof Pi)return t;if("object"===ue(t))return Ui(t);if(null==t)return new Ri[Li];if("string"==typeof t&&"<"!==t.charAt(0))return Ui(Ai.document.querySelector(t));var e=ki("svg");return e.innerHTML=t,Ui(e.firstChild)}function Di(t,e){return e instanceof Ai.window.Node?e:ki(t)}function Ii(t){if(!t)return null;if(t.instance instanceof Pi)return t.instance;var e=xi(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":Ri[e]||(e="Dom"),new Ri[e](t)}var Ui=Ii;function Fi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ri[e]=t,n&&(Ri[Li]=t),Nr(Object.getOwnPropertyNames(t.prototype)),t}var Ni=1e3;function Bi(t){return"Svgjs"+xi(t)+Ni++}function Vi(t){for(var e=t.children.length-1;e>=0;e--)Vi(t.children[e]);return t.id?Ii(t).id(Bi(t.nodeName)):Ii(t)}function zi(t,e,n){var r,i;for(i=(t=Array.isArray(t)?t:[t]).length-1;i>=0;i--)for(r in e){var o=e[r];n&&(o=Gi(e[r])),t[i].prototype[r]=o}}function Gi(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[n.length-1];return!i||i.constructor!==Object||i instanceof Array?t.apply(this,n):t.apply(this,n.slice(0,-1)).attr(i)}}Ur("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),"function"==typeof e.isRoot&&e.isRoot()&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),"function"==typeof t.isRoot&&t.isRoot()&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){(t=Oi(t)).remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){(t=Oi(t)).remove();var e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=Oi(t)).before(this),this},insertAfter:function(t){return(t=Oi(t)).after(this),this}});var Hi=Re.filter;Dt({target:"Array",proto:!0,forced:!qt("filter")},{filter:function(t){return Hi(this,t,arguments.length>1?arguments[1]:void 0)}});var ji=function(t,e){var n=[][t];return!n||!c(function(){n.call(null,e||function(){throw 1},1)})},Wi=gt.indexOf,Ki=[].indexOf,qi=!!Ki&&1/[1].indexOf(1,-0)<0,Xi=ji("indexOf");Dt({target:"Array",proto:!0,forced:qi||Xi},{indexOf:function(t){return qi?Ki.apply(this,arguments)||0:Wi(this,t,arguments.length>1?arguments[1]:void 0)}});var Yi=[].join,$i=b!=Object,Zi=ji("join",",");Dt({target:"Array",proto:!0,forced:$i||Zi},{join:function(t){return Yi.call(x(this),void 0===t?",":t)}});var Ji=Vt("species"),Qi=[].push,to=Math.min,eo=4294967295,no=!c(function(){return!RegExp(eo,"y")});ei("split",2,function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(y(this)),i=void 0===n?eo:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!$r(t))return e.call(r,t,i);for(var o,s,a,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,u+"g");(o=Xr.call(h,r))&&!((s=h.lastIndex)>c&&(l.push(r.slice(c,o.index)),o.length>1&&o.index<r.length&&Qi.apply(l,o.slice(1)),a=o[0].length,c=s,l.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?!a&&h.test("")||l.push(""):l.push(r.slice(c)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=y(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var s=k(t),a=String(this),l=function(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[Ji])?e:Me(n)}(s,RegExp),u=s.unicode,c=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(no?"y":"g"),h=new l(no?s:"^(?:"+s.source+")",c),d=void 0===i?eo:i>>>0;if(0===d)return[];if(0===a.length)return null===ii(h,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){h.lastIndex=no?f:0;var v,g=ii(h,no?a:a.slice(f));if(null===g||(v=to(dt(h.lastIndex+(no?0:f)),a.length))===p)f=ri(a,f,u);else{if(m.push(a.slice(p,f)),m.length===d)return m;for(var _=1;_<=g.length-1;_++)if(m.push(g[_]),m.length===d)return m;f=p=v}}return m.push(a.slice(p)),m}]},!no);var ro=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,io=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,oo=/rgb\((\d+),(\d+),(\d+)\)/,so=/(#[a-z0-9\-_]+)/i,ao=/\)\s*,?\s*/,lo=/\s/g,uo=/^#[a-f0-9]{3,6}$/i,co=/^rgb\(/,ho=/^(\s+)?$/,po=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fo=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,mo=/[\s,]+/,vo=/([^e])-/gi,go=/[MLHVCSQTAZ]/gi,_o=/[MLHVCSQTAZ]/i,bo=/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,yo=/\./g;Ur("Dom",{classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(mo)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!==t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}});var xo=Re.forEach,wo=ji("forEach")?function(t){return xo(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;for(var So in Dt({target:"Array",proto:!0,forced:[].forEach!=wo},{forEach:wo}),Tr){var Mo=u[So],To=Mo&&Mo.prototype;if(To&&To.forEach!==wo)try{I(To,"forEach",wo)}catch(t){To.forEach=wo}}Ur("Dom",{css:function(t,e){var n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter(function(t){return!!t.length}).forEach(function(t){var e=t.split(/\s*:\s*/);n[e[0]]=e[1]}),n;if(arguments.length<2){if(Array.isArray(t)){var r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=bi(s.value);n[l]=this.node.style[l]}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}if("string"==typeof t)return this.node.style[bi(t)];if("object"===ue(t))for(var u in t)this.node.style[bi(u)]=null==t[u]||ho.test(t[u])?"":t[u]}return 2===arguments.length&&(this.node.style[bi(t)]=null==e||ho.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),Ur("Dom",{data:function(t,e,n){if("object"===ue(t))for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),Ur("Dom",{remember:function(t,e){if("object"===ue(arguments[0]))for(var n in t)this.remember(n,t[n]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});var Eo=function(t){return function(e,n,r,i){Me(n);var o=ce(e),s=b(o),a=dt(o.length),l=t?a-1:0,u=t?-1:1;if(r<2)for(;;){if(l in s){i=s[l],l+=u;break}if(l+=u,t?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=u)l in s&&(i=n(i,s[l],l,o));return i}},Ao=[Eo(!1),Eo(!0)][0];Dt({target:"Array",proto:!0,forced:ji("reduce")},{reduce:function(t){return Ao(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Co=0,Po={};function Ro(t){var e=t.getEventHolder();return e===Ai.window&&(e=Po),e.events||(e.events={}),e.events}function Lo(t){return t.getEventTarget()}function ko(t,e,n,r,i){var o=n.bind(r||t),s=Oi(t),a=Ro(s),l=Lo(s);e=Array.isArray(e)?e:e.split(mo),n._svgjsListenerId||(n._svgjsListenerId=++Co),e.forEach(function(t){var e=t.split(".")[0],r=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][r]=a[e][r]||{},a[e][r][n._svgjsListenerId]=o,l.addEventListener(e,o,i||!1)})}function Oo(t,e,n,r){var i=Oi(t),o=Ro(i),s=Lo(i);("function"!=typeof n||(n=n._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(mo)).forEach(function(t){var e,a,l=t&&t.split(".")[0],u=t&&t.split(".")[1];if(n)o[l]&&o[l][u||"*"]&&(s.removeEventListener(l,o[l][u||"*"][n],r||!1),delete o[l][u||"*"][n]);else if(l&&u){if(o[l]&&o[l][u]){for(a in o[l][u])Oo(s,[l,u].join("."),a);delete o[l][u]}}else if(u)for(t in o)for(e in o[t])u===e&&Oo(s,[t,u].join("."));else if(l){if(o[l]){for(e in o[l])Oo(s,[l,e].join("."));delete o[l]}}else{for(t in o)Oo(s,t);!function(t){var e=t.getEventHolder();e.events&&(e.events={})}(i)}})}var Do=Vt("isConcatSpreadable"),Io=9007199254740991,Uo="Maximum allowed index exceeded",Fo=Wt>=51||!c(function(){var t=[];return t[Do]=!1,t.concat()[0]!==t}),No=qt("concat"),Bo=function(t){if(!w(t))return!1;var e=t[Do];return void 0!==e?!!e:It(t)};Dt({target:"Array",proto:!0,forced:!Fo||!No},{concat:function(t){var e,n,r,i,o,s=ce(this),a=Ae(s,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(Bo(o=-1===e?s:arguments[e])){if(l+(i=dt(o.length))>Io)throw TypeError(Uo);for(n=0;n<i;n++,l++)n in o&&Ut(a,l,o[n])}else{if(l>=Io)throw TypeError(Uo);Ut(a,l++,o)}return a.length=l,a}});var Vo=Re.map;Dt({target:"Array",proto:!0,forced:!qt("map")},{map:function(t){return Vo(this,t,arguments.length>1?arguments[1]:void 0)}});var zo=Date.prototype,Go="Invalid Date",Ho=zo.toString,jo=zo.getTime;new Date(NaN)+""!=Go&&it(zo,"toString",function(){var t=jo.call(this);return t==t?Ho.call(this):Go});var Wo=mi.trim,Ko=u.parseInt,qo=/^[+-]?0[Xx]/,Xo=8!==Ko(ci+"08")||22!==Ko(ci+"0x16")?function(t,e){var n=Wo(String(t));return Ko(n,e>>>0||(qo.test(n)?16:10))}:Ko;Dt({global:!0,forced:parseInt!=Xo},{parseInt:Xo});var Yo="toString",$o=RegExp.prototype,Zo=$o.toString,Jo=c(function(){return"/a/b"!=Zo.call({source:"a",flags:"b"})}),Qo=Zo.name!=Yo;function ts(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function es(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ns(t,e,n){return e&&es(t.prototype,e),n&&es(t,n),t}function rs(t){var e=Math.round(t),n=Math.max(0,Math.min(255,e)).toString(16);return 1===n.length?"0"+n:n}function is(t,e){for(var n=e.length;n--;)if(null==t[e[n]])return!1;return!0}function os(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}(Jo||Qo)&&it(RegExp.prototype,Yo,function(){var t=k(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in $o)?Gr.call(t):n)},{unsafe:!0});var ss=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"rgb";if(t=t||0,this.space)for(var o in this.space)delete this[this.space[o]];if("number"==typeof t)i="string"==typeof r?r:i,r="string"==typeof r?0:r,Object.assign(this,{_a:t,_b:e,_c:n,_d:r,space:i});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){var s=function(t,e){var n=is(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,space:"rgb"}:is(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:is(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:is(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:is(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:is(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=e||n.space,n}(t,e);Object.assign(this,s)}else if("string"==typeof t)if(co.test(t)){var a=t.replace(lo,""),l=oo.exec(a).slice(1,4).map(function(t){return parseInt(t)}),u=ts(l,3),c=u[0],h=u[1],d=u[2];Object.assign(this,{_a:c,_b:h,_c:d,_d:0,space:"rgb"})}else{if(!uo.test(t))throw Error("Unsupported string format, can't construct Color");var p=io.exec(function(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)).map(function(t){return parseInt(t,16)}),f=ts(p,4),m=f[1],v=f[2],g=f[3];Object.assign(this,{_a:m,_b:v,_c:g,_d:0,space:"rgb"})}var _=this._a,b=this._b,y=this._c,x=this._d,w="rgb"===this.space?{r:_,g:b,b:y}:"xyz"===this.space?{x:_,y:b,z:y}:"hsl"===this.space?{h:_,s:b,l:y}:"lab"===this.space?{l:_,a:b,b:y}:"lch"===this.space?{l:_,c:b,h:y}:"cmyk"===this.space?{c:_,m:b,y:y,k:x}:{};Object.assign(this,w)}},{key:"rgb",value:function(){if("rgb"===this.space)return this;if("lab"===(R=this.space)||"xyz"===R||"lch"===R){var e=this.x,n=this.y,r=this.z;if("lab"===this.space||"lch"===this.space){var i=this.l,o=this.a,s=this.b;if("lch"===this.space){var a=this.c,l=this.h,u=Math.PI/180;o=a*Math.cos(u*l),s=a*Math.sin(u*l)}var c=(i+16)/116,h=o/500+c,d=c-s/200,p=16/116,f=.008856,m=7.787;e=.95047*(Math.pow(h,3)>f?Math.pow(h,3):(h-p)/m),n=1*(Math.pow(c,3)>f?Math.pow(c,3):(c-p)/m),r=1.08883*(Math.pow(d,3)>f?Math.pow(d,3):(d-p)/m)}var v=3.2406*e+-1.5372*n+-.4986*r,g=-.9689*e+1.8758*n+.0415*r,_=.0557*e+-.204*n+1.057*r,b=Math.pow,y=.0031308;return new t(255*(v>y?1.055*b(v,1/2.4)-.055:12.92*v),255*(g>y?1.055*b(g,1/2.4)-.055:12.92*g),255*(_>y?1.055*b(_,1/2.4)-.055:12.92*_))}if("hsl"===this.space){var x=this.h,w=this.s,S=this.l;if(x/=360,S/=100,0==(w/=100))return new t(S*=255,S,S);var M=S<.5?S*(1+w):S+w-S*w,T=2*S-M;return new t(255*os(T,M,x+1/3),255*os(T,M,x),255*os(T,M,x-1/3))}if("cmyk"===this.space){var E=this.c,A=this.m,C=this.y,P=this.k;return new t(255*(1-Math.min(1,E*(1-P)+P)),255*(1-Math.min(1,A*(1-P)+P)),255*(1-Math.min(1,C*(1-P)+P)))}return this;var R}},{key:"lab",value:function(){var e=this.xyz(),n=e.x,r=e.y;return new t(116*r-16,500*(n-r),200*(r-e.z),"lab")}},{key:"xyz",value:function(){var e=this.rgb(),n=ts([e._a,e._b,e._c].map(function(t){return t/255}),3),r=n[0],i=n[1],o=n[2],s=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,a=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,u=(.4124*s+.3576*a+.1805*l)/.95047,c=(.2126*s+.7152*a+.0722*l)/1,h=(.0193*s+.1192*a+.9505*l)/1.08883;return new t(u>.008856?Math.pow(u,1/3):7.787*u+16/116,c>.008856?Math.pow(c,1/3):7.787*c+16/116,h>.008856?Math.pow(h,1/3):7.787*h+16/116,"xyz")}},{key:"lch",value:function(){var e=this.lab(),n=e.l,r=e.a,i=e.b,o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),s=180*Math.atan2(i,r)/Math.PI;return s<0&&(s=360-(s*=-1)),new t(n,o,s,"lch")}},{key:"hsl",value:function(){var e=this.rgb(),n=ts([e._a,e._b,e._c].map(function(t){return t/255}),3),r=n[0],i=n[1],o=n[2],s=Math.max(r,i,o),a=Math.min(r,i,o),l=(s+a)/2,u=s===a,c=s-a;return new t(360*(u?0:s===r?((i-o)/c+(i<o?6:0))/6:s===i?((o-r)/c+2)/6:s===o?((r-i)/c+4)/6:0),100*(u?0:l>.5?c/(2-s-a):c/(s+a)),100*l,"hsl")}},{key:"cmyk",value:function(){var e=this.rgb(),n=ts([e._a,e._b,e._c].map(function(t){return t/255}),3),r=n[0],i=n[1],o=n[2],s=Math.min(1-r,1-i,1-o);return 1===s?new t(0,0,0,1,"cmyk"):new t((1-r-s)/(1-s),(1-i-s)/(1-s),(1-o-s)/(1-s),s,"cmyk")}},{key:"_clamped",value:function(){var t=this.rgb(),e=t._a,n=t._b,r=t._c,i=Math.max,o=Math.min,s=Math.round;return[e,n,r].map(function(t){return i(0,o(s(t),255))})}},{key:"toHex",value:function(){var t=ts(this._clamped().map(rs),3),e=t[0],n=t[1],r=t[2];return"#".concat(e).concat(n).concat(r)}},{key:"toString",value:function(){return this.toHex()}},{key:"toRgb",value:function(){var t=ts(this._clamped(),3),e=t[0],n=t[1],r=t[2];return"rgb(".concat(e,",").concat(n,",").concat(r,")")}},{key:"toArray",value:function(){return[this._a,this._b,this._c,this._d,this.space]}}],[{key:"random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vibrant",n=arguments.length>1?arguments[1]:void 0,r=Math.random,i=Math.round,o=Math.sin,s=Math.PI;if("vibrant"===e)return new t(24*r()+57,38*r()+45,360*r(),"lch");if("sine"===e)return new t(i(80*o(2*s*(n=null==n?r():n)/.5+.01)+150),i(50*o(2*s*n/.5+4.6)+200),i(100*o(2*s*n/.5+2.3)+150));if("pastel"===e)return new t(8*r()+86,17*r()+9,360*r(),"lch");if("dark"===e)return new t(10+10*r(),50*r()+86,360*r(),"lch");if("rgb"===e)return new t(255*r(),255*r(),255*r());if("lab"===e)return new t(100*r(),256*r()-128,256*r()-128,"lab");if("grey"===e){var a=255*r();return new t(a,a,a)}}},{key:"test",value:function(t){return"string"==typeof t&&(uo.test(t)||co.test(t))}},{key:"isRgb",value:function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}},{key:"isColor",value:function(e){return e&&(e instanceof t||this.isRgb(e)||this.test(e))}}]),t}(),as=c(function(){he(1)});function ls(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function us(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?ls(t):e}function cs(t){return cs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cs(t)}function hs(t,e,n){return hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},hs(t,e,n||t)}function ds(t,e){return ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ds(t,e)}function ps(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ds(t,e)}Dt({target:"Object",stat:!0,forced:as},{keys:function(t){return he(ce(t))}}),ei("match",1,function(t,e,n){return[function(e){var n=y(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=k(t),o=String(this);if(!i.global)return ii(i,o);var s=i.unicode;i.lastIndex=0;for(var a,l=[],u=0;null!==(a=ii(i,o));){var c=String(a[0]);l[u]=c,""===c&&(i.lastIndex=ri(o,dt(i.lastIndex),s)),u++}return 0===u?null:l}]});var fs=wt.f,ms=L.f,vs=D.f,gs=mi.trim,_s="Number",bs=u.Number,ys=bs.prototype,xs=g(ge(ys))==_s,ws=function(t){var e,n,r,i,o,s,a,l,u=S(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=gs(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(s=(o=u.slice(2)).length,a=0;a<s;a++)if((l=o.charCodeAt(a))<48||l>i)return NaN;return parseInt(o,r)}return+u};if(kt(_s,!bs(" 0o1")||!bs("0b1")||bs("+0x1"))){for(var Ss,Ms=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Ms&&(xs?c(function(){ys.valueOf.call(n)}):g(n)!=_s)?hr(new bs(ws(e)),n,Ms):ws(e)},Ts=h?fs(bs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Es=0;Ts.length>Es;Es++)T(bs,Ss=Ts[Es])&&!T(Ms,Ss)&&vs(Ms,Ss,ms(bs,Ss));Ms.prototype=ys,ys.constructor=Ms,it(u,_s,Ms)}var As=mi.trim,Cs=u.parseFloat,Ps=1/Cs(ci+"-0")!=-1/0?function(t){var e=As(String(t)),n=Cs(e);return 0===n&&"-"==e.charAt(0)?-0:n}:Cs;Dt({global:!0,forced:parseFloat!=Ps},{parseFloat:Ps});var Rs=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(t,e){var n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===ue(t)?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==n.x?0:n.x,this.y=null==n.y?0:n.y,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(t){return this.clone().transformO(t)}},{key:"transformO",value:function(t){ks.isMatrixLike(t)||(t=new ks(t));var e=this.x,n=this.y;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}},{key:"toArray",value:function(){return[this.x,this.y]}}]),t}();function Ls(t,e,n){return Math.abs(e-t)<(n||1e-6)}var ks=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(e){var n=t.fromArray([1,0,0,1,0,0]);return e=e instanceof Zs?e.matrixify():"string"==typeof e?t.fromArray(e.split(mo).map(parseFloat)):Array.isArray(e)?t.fromArray(e):"object"===ue(e)&&t.isMatrixLike(e)?e:"object"===ue(e)?(new t).transform(e):6===arguments.length?t.fromArray([].slice.call(arguments)):n,this.a=null!=e.a?e.a:n.a,this.b=null!=e.b?e.b:n.b,this.c=null!=e.c?e.c:n.c,this.d=null!=e.d?e.d:n.d,this.e=null!=e.e?e.e:n.e,this.f=null!=e.f?e.f:n.f,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(e){if(t.isMatrixLike(e))return new t(e).multiplyO(this);var n=t.formatTransforms(e),r=new Rs(n.ox,n.oy).transform(this),i=r.x,o=r.y,s=(new t).translateO(n.rx,n.ry).lmultiplyO(this).translateO(-i,-o).scaleO(n.scaleX,n.scaleY).skewO(n.skewX,n.skewY).shearO(n.shear).rotateO(n.theta).translateO(i,o);if(isFinite(n.px)||isFinite(n.py)){var a=new Rs(i,o).transform(s),l=n.px?n.px-a.x:0,u=n.py?n.py-a.y:0;s.translateO(l,u)}return s.translateO(n.tx,n.ty),s}},{key:"compose",value:function(e){e.origin&&(e.originX=e.origin[0],e.originY=e.origin[1]);var n=e.originX||0,r=e.originY||0,i=e.scaleX||1,o=e.scaleY||1,s=e.shear||0,a=e.rotate||0,l=e.translateX||0,u=e.translateY||0;return(new t).translateO(-n,-r).scaleO(i,o).shearO(s).rotateO(a).translateO(l,u).lmultiplyO(this).translateO(n,r)}},{key:"decompose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.a,r=this.b,i=this.c,o=this.d,s=this.e,a=this.f,l=n*o-r*i,u=l>0?1:-1,c=u*Math.sqrt(n*n+r*r),h=Math.atan2(u*r,u*n),d=180/Math.PI*h,p=Math.cos(h),f=Math.sin(h),m=(n*i+r*o)/l,v=i*c/(m*n-r)||o*c/(m*r+n);return{scaleX:c,scaleY:v,shear:m,rotate:d,translateX:s-t+t*p*c+e*(m*p*c-f*v),translateY:a-e+t*f*c+e*(m*f*c+p*v),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}},{key:"multiply",value:function(t){return this.clone().multiplyO(t)}},{key:"multiplyO",value:function(e){var n=e instanceof t?e:new t(e);return t.matrixMultiply(this,n,this)}},{key:"lmultiply",value:function(t){return this.clone().lmultiplyO(t)}},{key:"lmultiplyO",value:function(e){var n=e instanceof t?e:new t(e);return t.matrixMultiply(n,this,this)}},{key:"inverseO",value:function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.e,o=this.f,s=t*r-e*n;if(!s)throw new Error("Cannot invert "+this);var a=r/s,l=-e/s,u=-n/s,c=t/s,h=-(a*i+u*o),d=-(l*i+c*o);return this.a=a,this.b=l,this.c=u,this.d=c,this.e=h,this.f=d,this}},{key:"inverse",value:function(){return this.clone().inverseO()}},{key:"translate",value:function(t,e){return this.clone().translateO(t,e)}},{key:"translateO",value:function(t,e){return this.e+=t||0,this.f+=e||0,this}},{key:"scale",value:function(t,e,n,r){var i;return(i=this.clone()).scaleO.apply(i,arguments)}},{key:"scaleO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(r=n,n=e,e=t);var i=this.a,o=this.b,s=this.c,a=this.d,l=this.e,u=this.f;return this.a=i*t,this.b=o*e,this.c=s*t,this.d=a*e,this.e=l*t-n*t+n,this.f=u*e-r*e+r,this}},{key:"rotate",value:function(t,e,n){return this.clone().rotateO(t,e,n)}},{key:"rotateO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=_i(t);var r=Math.cos(t),i=Math.sin(t),o=this.a,s=this.b,a=this.c,l=this.d,u=this.e,c=this.f;return this.a=o*r-s*i,this.b=s*r+o*i,this.c=a*r-l*i,this.d=l*r+a*i,this.e=u*r-c*i+n*i-e*r+e,this.f=c*r+u*i-e*i-n*r+n,this}},{key:"flip",value:function(t,e){return this.clone().flipO(t,e)}},{key:"flipO",value:function(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}},{key:"shear",value:function(t,e,n){return this.clone().shearO(t,e,n)}},{key:"shearO",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.a,r=this.b,i=this.c,o=this.d,s=this.e,a=this.f;return this.a=n+r*t,this.c=i+o*t,this.e=s+a*t-e*t,this}},{key:"skew",value:function(t,e,n,r){var i;return(i=this.clone()).skewO.apply(i,arguments)}},{key:"skewO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(r=n,n=e,e=t),t=_i(t),e=_i(e);var i=Math.tan(t),o=Math.tan(e),s=this.a,a=this.b,l=this.c,u=this.d,c=this.e,h=this.f;return this.a=s+a*i,this.b=a+s*o,this.c=l+u*i,this.d=u+l*o,this.e=c+h*i-r*i,this.f=h+c*o-n*o,this}},{key:"skewX",value:function(t,e,n){return this.skew(t,0,e,n)}},{key:"skewXO",value:function(t,e,n){return this.skewO(t,0,e,n)}},{key:"skewY",value:function(t,e,n){return this.skew(0,t,e,n)}},{key:"skewYO",value:function(t,e,n){return this.skewO(0,t,e,n)}},{key:"aroundO",value:function(t,e,n){var r=t||0,i=e||0;return this.translateO(-r,-i).lmultiplyO(n).translateO(r,i)}},{key:"around",value:function(t,e,n){return this.clone().aroundO(t,e,n)}},{key:"equals",value:function(e){var n=new t(e);return Ls(this.a,n.a)&&Ls(this.b,n.b)&&Ls(this.c,n.c)&&Ls(this.d,n.d)&&Ls(this.e,n.e)&&Ls(this.f,n.f)}},{key:"toString",value:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},{key:"toArray",value:function(){return[this.a,this.b,this.c,this.d,this.e,this.f]}},{key:"valueOf",value:function(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}],[{key:"fromArray",value:function(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}},{key:"isMatrixLike",value:function(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}},{key:"formatTransforms",value:function(t){var e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,r=t.flip&&(e||"y"===t.flip)?-1:1,i=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,s=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,a=t.scale&&t.scale.length?t.scale[1]*r:isFinite(t.scale)?t.scale*r:isFinite(t.scaleY)?t.scaleY*r:r,l=t.shear||0,u=t.rotate||t.theta||0,c=new Rs(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),h=c.x,d=c.y,p=new Rs(t.position||t.px||t.positionX,t.py||t.positionY),f=p.x,m=p.y,v=new Rs(t.translate||t.tx||t.translateX,t.ty||t.translateY),g=v.x,_=v.y,b=new Rs(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:s,scaleY:a,skewX:i,skewY:o,shear:l,theta:u,rx:b.x,ry:b.y,tx:g,ty:_,ox:h,oy:d,px:f,py:m}}},{key:"matrixMultiply",value:function(t,e,n){var r=t.a*e.a+t.c*e.b,i=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,s=t.b*e.c+t.d*e.d,a=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return n.a=r,n.b=i,n.c=o,n.d=s,n.e=a,n.f=l,n}}]),t}();function Os(){if(!Os.nodes){var t=Oi().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");var e=t.path().node;Os.nodes={svg:t,path:e}}if(!Os.nodes.svg.node.parentNode){var n=Ai.document.body||Ai.document.documentElement;Os.nodes.svg.addTo(n)}return Os.nodes}function Ds(t){return!(t.width||t.height||t.x||t.y)}Fi(ks,"Matrix");var Is=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(t){return t="string"==typeof t?t.split(mo).map(parseFloat):Array.isArray(t)?t:"object"===ue(t)?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}},{key:"merge",value:function(e){var n=Math.min(this.x,e.x),r=Math.min(this.y,e.y);return new t(n,r,Math.max(this.x+this.width,e.x+e.width)-n,Math.max(this.y+this.height,e.y+e.height)-r)}},{key:"transform",value:function(e){e instanceof ks||(e=new ks(e));var n=1/0,r=-1/0,i=1/0,o=-1/0;return[new Rs(this.x,this.y),new Rs(this.x2,this.y),new Rs(this.x,this.y2),new Rs(this.x2,this.y2)].forEach(function(t){t=t.transform(e),n=Math.min(n,t.x),r=Math.max(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.y)}),new t(n,i,r-n,o-i)}},{key:"addOffset",value:function(){return this.x+=Ai.window.pageXOffset,this.y+=Ai.window.pageYOffset,this}},{key:"toString",value:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}},{key:"toArray",value:function(){return[this.x,this.y,this.width,this.height]}},{key:"isNulled",value:function(){return Ds(this)}}]),t}();function Us(t,e){var n,r;try{if(Ds(n=t(this.node))&&(r=this.node)!==Ai.document&&!(Ai.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===Ai.document}).call(Ai.document.documentElement,r))throw new Error("Element not in the dom")}catch(t){n=e(this)}return n}Ur({viewbox:{viewbox:function(t,e,n,r){return null==t?new Is(this.attr("viewBox")):this.attr("viewBox",new Is(t,e,n,r))},zoom:function(t,e){var n=this.node.clientWidth,r=this.node.clientHeight,i=this.viewbox();if(!n&&!r){var o=window.getComputedStyle(this.node);n=parseFloat(o.getPropertyValue("width")),r=parseFloat(o.getPropertyValue("height"))}var s=n/i.width,a=r/i.height,l=Math.min(s,a);if(null==t)return l;var u=l/t;u===1/0&&(u=Number.MIN_VALUE),e=e||new Rs(n/2/s+i.x,r/2/a+i.y);var c=new Is(i).transform(new ks({scale:u,origin:e}));return this.viewbox(c)}}}),Fi(Is,"Box");var Fs=function(){try{return Function("name","baseClass","_constructor",["baseClass = baseClass || Array","return {"," [name]: class extends baseClass {"," constructor (...args) {"," super(...args)"," _constructor && _constructor.apply(this, args)"," }"," }","}[name]"].join("\n"))}catch(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Array,n=arguments.length>2?arguments[2]:void 0,r=function(){e.apply(this,arguments),n&&n.apply(this,arguments)};return(r.prototype=Object.create(e.prototype)).constructor=r,r.prototype.map=function(t){var e=new r;return e.push.apply(e,Array.prototype.map.call(this,t)),e},r}}}(),Ns=Fs("List",Array,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("number"==typeof t)return this;this.length=0,this.push.apply(this,Or(t))});zi(Ns,{each:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?this.map(function(e){return t.call(e,e)}):this.map(function(e){return e[t].apply(e,n)})},toArray:function(){return Array.prototype.concat.apply([],this)}});var Bs=["toArray","constructor","each"];function Vs(t,e){return new Ns(gi((e||Ai.document).querySelectorAll(t),function(t){return Ii(t)}))}Ns.extend=function(t){t=t.reduce(function(t,e){return Bs.includes(e)||"_"===e[0]||(t[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.each.apply(this,[e].concat(n))}),t},{}),zi(Ns,t)};var zs=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).events,r=void 0===n?{}:n;return Ci(this,e),(t=us(this,cs(e).call(this))).events=r,t}return ps(e,t),ns(e,[{key:"addEventListener",value:function(){}},{key:"dispatch",value:function(t,e){return function(t,e,n){var r=Lo(t);return e instanceof Ai.window.Event||(e=new Ai.window.CustomEvent(e,{detail:n,cancelable:!0})),r.dispatchEvent(e),e}(this,t,e)}},{key:"dispatchEvent",value:function(t){var e=this.getEventHolder().events;if(!e)return!0;var n=e[t.type];for(var r in n)for(var i in n[r])n[r][i](t);return!t.defaultPrevented}},{key:"fire",value:function(t,e){return this.dispatch(t,e),this}},{key:"getEventHolder",value:function(){return this}},{key:"getEventTarget",value:function(){return this}},{key:"off",value:function(t,e){return Oo(this,t,e),this}},{key:"on",value:function(t,e,n,r){return ko(this,t,e,n,r),this}},{key:"removeEventListener",value:function(){}}]),e}(Pi);function Gs(){}Fi(zs,"EventTarget");var Hs=400,js=">",Ws=0,Ks={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"},qs=Fs("SVGArray",Array,function(t){this.init(t)});zi(qs,{init:function(t){return"number"==typeof t||(this.length=0,this.push.apply(this,Or(this.parse(t)))),this},toArray:function(){return Array.prototype.concat.apply([],this)},toString:function(){return this.join(" ")},valueOf:function(){var t=[];return t.push.apply(t,Or(this)),t},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof Array?t:t.trim().split(mo).map(parseFloat)},clone:function(){return new this.constructor(this)},toSet:function(){return new Set(this)}});var Xs=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(e,n){return n=Array.isArray(e)?e[1]:n,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=n||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(n=e.match(ro))&&(this.value=parseFloat(n[1]),"%"===n[5]?this.value/=100:"s"===n[5]&&(this.value*=1e3),this.unit=n[5]):e instanceof t&&(this.value=e.valueOf(),this.unit=e.unit),this}},{key:"toString",value:function(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}},{key:"toJSON",value:function(){return this.toString()}},{key:"toArray",value:function(){return[this.value,this.unit]}},{key:"valueOf",value:function(){return this.value}},{key:"plus",value:function(e){return e=new t(e),new t(this+e,this.unit||e.unit)}},{key:"minus",value:function(e){return e=new t(e),new t(this-e,this.unit||e.unit)}},{key:"times",value:function(e){return e=new t(e),new t(this*e,this.unit||e.unit)}},{key:"divide",value:function(e){return e=new t(e),new t(this/e,this.unit||e.unit)}},{key:"convert",value:function(e){return new t(this.value,e)}}]),t}(),Ys=[],$s=function(t){function e(t,n){var r;return Ci(this,e),(r=us(this,cs(e).call(this,t))).node=t,r.type=t.nodeName,n&&t!==n&&r.attr(n),r}return ps(e,t),ns(e,[{key:"add",value:function(t,e){return t=Oi(t),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}},{key:"addTo",value:function(t){return Oi(t).put(this)}},{key:"children",value:function(){return new Ns(gi(this.node.children,function(t){return Ii(t)}))}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}},{key:"clone",value:function(){return this.writeDataToDom(),Vi(this.node.cloneNode(!0))}},{key:"each",value:function(t,e){var n,r,i=this.children();for(n=0,r=i.length;n<r;n++)t.apply(i[n],[n,i]),e&&i[n].each(t,e);return this}},{key:"element",value:function(t){return this.put(new e(ki(t)))}},{key:"first",value:function(){return Ii(this.node.firstChild)}},{key:"get",value:function(t){return Ii(this.node.childNodes[t])}},{key:"getEventHolder",value:function(){return this.node}},{key:"getEventTarget",value:function(){return this.node}},{key:"has",value:function(t){return this.index(t)>=0}},{key:"id",value:function(t){return void 0!==t||this.node.id||(this.node.id=Bi(this.type)),this.attr("id",t)}},{key:"index",value:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}},{key:"last",value:function(){return Ii(this.node.lastChild)}},{key:"matches",value:function(t){var e=this.node;return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}},{key:"parent",value:function(t){var e=this;if(!e.node.parentNode)return null;if(e=Ii(e.node.parentNode),!t)return e;for(;e;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"===e.node.parentNode.nodeName||"#document-fragment"===e.node.parentNode.nodeName)return null;e=Ii(e.node.parentNode)}}},{key:"put",value:function(t,e){return this.add(t,e),t}},{key:"putIn",value:function(t){return Oi(t).add(this)}},{key:"remove",value:function(){return this.parent()&&this.parent().removeElement(this),this}},{key:"removeElement",value:function(t){return this.node.removeChild(t.node),this}},{key:"replace",value:function(t){return t=Oi(t),this.node.parentNode.replaceChild(t.node,this.node),t}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1?arguments[1]:void 0,n=Math.pow(10,t),r=this.attr();e||(e=Object.keys(r));var i={};return e.forEach(function(t){i[t]=Math.round(r[t]*n)/n}),this.attr(i),this}},{key:"toString",value:function(){return this.id()}},{key:"svg",value:function(t,e){var n,r,i;if(!1===t&&(e=!1,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();var o=this;if(null!=t){if(o=Ii(o.node.cloneNode(!0)),e){var s=t(o);if(o=s||o,!1===s)return""}o.each(function(){var e=t(this),n=e||this;!1===e?this.remove():e&&this!==n&&this.replace(n)},!0)}return e?o.node.outerHTML:o.node.innerHTML}for(e=null!=e&&e,n=Ai.document.createElementNS(Mi,"svg"),i=Ai.document.createDocumentFragment(),n.innerHTML=t,r=n.children.length;r--;)i.appendChild(n.firstElementChild);var a=this.parent();return e?this.replace(i)&&a:this.add(i)}},{key:"words",value:function(t){return this.node.textContent=t,this}},{key:"writeDataToDom",value:function(){return this.each(function(){this.writeDataToDom()}),this}}]),e}(zs);zi($s,{attr:function(t,e,n){var r=this;if(null==t){t={},e=this.node.attributes;var i=!0,o=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;t[u.nodeName]=po.test(u.nodeValue)?parseFloat(u.nodeValue):u.nodeValue}}catch(t){o=!0,s=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return t}if(t instanceof Array)return t.reduce(function(t,e){return t[e]=r.attr(e),t},{});if("object"===ue(t)&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?Ks[t]:po.test(e)?parseFloat(e):e;"number"==typeof(e=Ys.reduce(function(e,n){return n(t,e,r)},e))?e=new Xs(e):ss.isColor(e)?e=new ss(e):e.constructor===Array&&(e=new qs(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return Vs(t,this.node)},findOne:function(t){return Ii(this.node.querySelector(t))}}),Fi($s,"Dom");var Zs=function(t){function e(t,n){var r;return Ci(this,e),(r=us(this,cs(e).call(this,t,n))).dom={},r.node.instance=ls(r),t.hasAttribute("svgjs:data")&&r.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),r}return ps(e,t),ns(e,[{key:"center",value:function(t,e){return this.cx(t).cy(e)}},{key:"cx",value:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}},{key:"cy",value:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}},{key:"defs",value:function(){return this.root().defs()}},{key:"dmove",value:function(t,e){return this.dx(t).dy(e)}},{key:"dx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x(new Xs(t).plus(this.x()))}},{key:"dy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.y(new Xs(t).plus(this.y()))}},{key:"root",value:function(){var t=this.parent(Ri[Li]);return t&&t.root()}},{key:"getEventHolder",value:function(){return this}},{key:"height",value:function(t){return this.attr("height",t)}},{key:"inside",value:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"parents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai.document;t=Oi(t);for(var e=new Ns,n=this;(n=n.parent())&&n.node!==t.node&&n.node!==Ai.document;)e.push(n);return e}},{key:"reference",value:function(t){if(!(t=this.attr(t)))return null;var e=t.match(so);return e?Oi(e[1]):null}},{key:"setData",value:function(t){return this.dom=t,this}},{key:"size",value:function(t,e){var n=wi(this,t,e);return this.width(new Xs(n.width)).height(new Xs(n.height))}},{key:"width",value:function(t){return this.attr("width",t)}},{key:"writeDataToDom",value:function(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),hs(cs(e.prototype),"writeDataToDom",this).call(this)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("y",t)}}]),e}($s);zi(Zs,{bbox:function(){return new Is(Us.call(this,function(t){return t.getBBox()},function(t){try{var e=t.clone().addTo(Os().svg).show(),n=e.node.getBBox();return e.remove(),n}catch(e){throw new Error('Getting bbox of element "'+t.node.nodeName+'" is not possible. '+e.toString())}}))},rbox:function(t){var e=new Is(Us.call(this,function(t){return t.getBoundingClientRect()},function(t){throw new Error('Getting rbox of element "'+t.node.nodeName+'" is not possible')}));return t?e.transform(t.screenCTM().inverse()):e.addOffset()},point:function(t,e){return new Rs(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new ks(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new ks(e)}return new ks(this.node.getScreenCTM())}}),Fi(Zs,"Element");var Js={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,n={};n[t]=function(n){if(void 0===n)return this.attr(t);if("string"==typeof n||n instanceof ss||ss.isRgb(n)||n instanceof Zs)this.attr(t,n);else for(e=Js[t].length-1;e>=0;e--)null!=n[Js[t][e]]&&this.attr(Js.prefix(t,Js[t][e]),n[Js[t][e]]);return this},Ur(["Element","Runner"],n)}),Ur(["Element","Runner"],{matrix:function(t,e,n,r,i,o){return null==t?new ks(this):this.attr("transform",new ks(t,e,n,r,i,o))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,r){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:r},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,r){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:r},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t,e){var n="string"==typeof t?t:(isFinite(t),"both"),r="both"===t&&isFinite(e)?[e,e]:"x"===t?[e,0]:"y"===t?[0,e]:isFinite(t)?[t,t]:[0,0];return this.transform({flip:n,origin:r},!0)},opacity:function(t){return this.attr("opacity",t)}}),Ur("radius",{radius:function(t,e){var n=(this._element||this).type;return"radialGradient"===n||"radialGradient"===n?this.attr("r",new Xs(t)):this.rx(t).ry(null==e?t:e)}}),Ur("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new Rs(this.node.getPointAtLength(t))}}),Ur(["Element","Runner"],{font:function(t,e){if("object"===ue(t)){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),Ur("Text",{ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)}});var Qs=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(t,e){return t[e]=function(t){return null===t?Oo(this,e):ko(this,e,t),this},t},{});Ur("Element",Qs);var ta=[].reverse,ea=[1,2];Dt({target:"Array",proto:!0,forced:String(ea)===String(ea.reverse())},{reverse:function(){return It(this)&&(this.length=this.length),ta.call(this)}}),Dt({target:"Object",stat:!0,forced:!h,sham:!h},{defineProperties:de}),Dt({target:"Object",stat:!0,forced:!h,sham:!h},{defineProperty:D.f});var na=L.f,ra=c(function(){na(1)});function ia(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function sa(t){return this.attr("rx",t)}function aa(t){return this.attr("ry",t)}function la(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function ua(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function ca(t){return null==t?this.attr("cx"):this.attr("cx",t)}function ha(t){return null==t?this.attr("cy"):this.attr("cy",t)}function da(t){return null==t?2*this.rx():this.rx(new Xs(t).divide(2))}function pa(t){return null==t?2*this.ry():this.ry(new Xs(t).divide(2))}Dt({target:"Object",stat:!0,forced:!h||ra,sham:!h},{getOwnPropertyDescriptor:function(t,e){return na(x(t),e)}}),Dt({target:"Object",stat:!0,sham:!h},{getOwnPropertyDescriptors:function(t){for(var e,n,r=x(t),i=L.f,o=Mt(r),s={},a=0;o.length>a;)void 0!==(n=i(r,e=o[a++]))&&Ut(s,e,n);return s}}),Ur("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){var t=(this.attr("transform")||"").split(ao).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(mo).map(function(t){return parseFloat(t)})]}).reverse().reduce(function(t,e){return"matrix"===e[0]?t.lmultiply(ks.fromArray(e[1])):t[e[0]].apply(t,e[1])},new ks);return t},toParent:function(t){if(this===t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toRoot:function(){return this.toParent(this.root())},transform:function(t,e){if(null==t||"string"==typeof t){var n=new ks(this).decompose();return null==t?n:n[t]}ks.isMatrixLike(t)||(t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oa(n,!0).forEach(function(e){ia(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oa(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{origin:Si(t,this)}));var r=new ks(!0===e?this:e||!1).transform(t);return this.attr("transform",r)}});var fa={__proto__:null,rx:sa,ry:aa,x:la,y:ua,cx:ca,cy:ha,width:da,height:pa},ma=function(t){function e(){return Ci(this,e),us(this,cs(e).apply(this,arguments))}return ps(e,t),e}(Zs);Fi(ma,"Shape");var va=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("circle",t),t))}return ps(e,t),ns(e,[{key:"radius",value:function(t){return this.attr("r",t)}},{key:"rx",value:function(t){return this.attr("r",t)}},{key:"ry",value:function(t){return this.rx(t)}},{key:"size",value:function(t){return this.radius(new Xs(t).divide(2))}}]),e}(ma);zi(va,{x:la,y:ua,cx:ca,cy:ha,width:da,height:pa}),Ur({Container:{circle:Gi(function(t){return this.put(new va).size(t).move(0,0)})}}),Fi(va,"Circle");var ga=function(t){function e(){return Ci(this,e),us(this,cs(e).apply(this,arguments))}return ps(e,t),ns(e,[{key:"flatten",value:function(t){return this.each(function(){return this instanceof e?this.flatten(t).ungroup(t):this.toParent(t)}),this.node.firstElementChild||this.remove(),this}},{key:"ungroup",value:function(t){return t=t||this.parent(),this.each(function(){return this.toParent(t)}),this.remove(),this}}]),e}(Zs);Fi(ga,"Container");var _a=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("defs",t),t))}return ps(e,t),ns(e,[{key:"flatten",value:function(){return this}},{key:"ungroup",value:function(){return this}}]),e}(ga);Fi(_a,"Defs");var ba=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("ellipse",t),t))}return ps(e,t),ns(e,[{key:"size",value:function(t,e){var n=wi(this,t,e);return this.rx(new Xs(n.width).divide(2)).ry(new Xs(n.height).divide(2))}}]),e}(ma);zi(ba,fa),Ur("Container",{ellipse:Gi(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.put(new ba).size(t,e).move(0,0)})}),Fi(ba,"Ellipse");var ya=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("stop",t),t))}return ps(e,t),ns(e,[{key:"update",value:function(t){return("number"==typeof t||t instanceof Xs)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Xs(t.offset)),this}}]),e}(Zs);function xa(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new Xs(t),fy:new Xs(e)}):this.attr({x1:new Xs(t),y1:new Xs(e)})}function wa(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new Xs(t),cy:new Xs(e)}):this.attr({x2:new Xs(t),y2:new Xs(e)})}Fi(ya,"Stop");var Sa={__proto__:null,from:xa,to:wa},Ma=function(t){function e(t,n){return Ci(this,e),us(this,cs(e).call(this,Di(t+"Gradient","string"==typeof t?null:t),n))}return ps(e,t),ns(e,[{key:"stop",value:function(t,e,n){return this.put(new ya).update(t,e,n)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,n,r){return"transform"===t&&(t="gradientTransform"),hs(cs(e.prototype),"attr",this).call(this,t,n,r)}},{key:"targets",value:function(){return Vs('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new Is}}]),e}(ga);zi(Ma,Sa),Ur({Container:{gradient:Gi(function(t,e){return this.defs().gradient(t,e)})},Defs:{gradient:Gi(function(t,e){return this.put(new Ma(t)).update(e)})}}),Fi(Ma,"Gradient");var Ta=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("pattern",t),t))}return ps(e,t),ns(e,[{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,n,r){return"transform"===t&&(t="patternTransform"),hs(cs(e.prototype),"attr",this).call(this,t,n,r)}},{key:"targets",value:function(){return Vs('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new Is}}]),e}(ga);Ur({Container:{pattern:function(){var t;return(t=this.defs()).pattern.apply(t,arguments)}},Defs:{pattern:Gi(function(t,e,n){return this.put(new Ta).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})})}}),Fi(Ta,"Pattern");var Ea,Aa=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("image",t),t))}return ps(e,t),ns(e,[{key:"load",value:function(t,e){if(!t)return this;var n=new Ai.window.Image;return ko(n,"load",function(t){var r=this.parent(Ta);0===this.width()&&0===this.height()&&this.size(n.width,n.height),r instanceof Ta&&0===r.width()&&0===r.height()&&r.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)},this),ko(n,"load error",function(){Oo(n)}),this.attr("href",n.src=t,Ei)}}]),e}(ma);Ea=function(t,e,n){return"fill"!==t&&"stroke"!==t||fo.test(e)&&(e=n.root().defs().image(e)),e instanceof Aa&&(e=n.root().defs().pattern(0,0,function(t){t.add(e)})),e},Ys.push(Ea),Ur({Container:{image:Gi(function(t,e){return this.put(new Aa).size(0,0).load(t,e)})}}),Fi(Aa,"Image");var Ca=Fs("PointArray",qs);zi(Ca,{toString:function(){for(var t=0,e=this.length,n=[];t<e;t++)n.push(this[t].join(","));return n.join(" ")},toLine:function(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.length,r=[];e<n;e++)r.push([this[e][0]+(this.destination[e][0]-this[e][0])*t,this[e][1]+(this.destination[e][1]-this[e][1])*t]);return new Ca(r)},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0]],e=[];if(t instanceof Array){if(t[0]instanceof Array)return t}else t=t.trim().split(mo).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,r=t.length;n<r;n+=2)e.push([t[n],t[n+1]]);return e},transform:function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];e.push([t.a*r[0]+t.c*r[1]+t.e,t.b*r[0]+t.d*r[1]+t.f])}return new Ca(e)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r=this.length-1;r>=0;r--)this[r]=[this[r][0]+t,this[r][1]+e];return this},size:function(t,e){var n,r=this.bbox();for(n=this.length-1;n>=0;n--)r.width&&(this[n][0]=(this[n][0]-r.x)*t/r.width+r.x),r.height&&(this[n][1]=(this[n][1]-r.y)*e/r.height+r.y);return this},bbox:function(){var t=-1/0,e=-1/0,n=1/0,r=1/0;return this.forEach(function(i){t=Math.max(i[0],t),e=Math.max(i[1],e),n=Math.min(i[0],n),r=Math.min(i[1],r)}),{x:n,y:r,width:t-n,height:e-r}}});var Pa={__proto__:null,MorphArray:Ca,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}},Ra=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("line",t),t))}return ps(e,t),ns(e,[{key:"array",value:function(){return new Ca([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}},{key:"plot",value:function(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new Ca(t).toLine(),this.attr(t))}},{key:"move",value:function(t,e){return this.attr(this.array().move(t,e).toLine())}},{key:"size",value:function(t,e){var n=wi(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}]),e}(ma);zi(Ra,Pa),Ur({Container:{line:Gi(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ra.prototype.plot.apply(this.put(new Ra),null!=e[0]?e:[0,0,0,0])})}}),Fi(Ra,"Line");var La=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("marker",t),t))}return ps(e,t),ns(e,[{key:"width",value:function(t){return this.attr("markerWidth",t)}},{key:"height",value:function(t){return this.attr("markerHeight",t)}},{key:"ref",value:function(t,e){return this.attr("refX",t).attr("refY",e)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return"url(#"+this.id()+")"}}]),e}(ga);Ur({Container:{marker:function(){var t;return(t=this.defs()).marker.apply(t,arguments)}},Defs:{marker:Gi(function(t,e,n){return this.put(new La).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)})},marker:{marker:function(t,e,n,r){var i=["marker"];return"all"!==t&&i.push(t),i=i.join("-"),t=arguments[1]instanceof La?arguments[1]:this.defs().marker(e,n,r),this.attr(i,t)}}}),Fi(La,"Marker");var ka=[].sort,Oa=[1,2,3],Da=c(function(){Oa.sort(void 0)}),Ia=c(function(){Oa.sort(null)}),Ua=ji("sort");function Fa(t,e){return function(n){return null==n?this[n]:(this[t]=n,e&&e.call(this),this)}}Dt({target:"Array",proto:!0,forced:Da||!Ia||Ua},{sort:function(t){return void 0===t?ka.call(ce(this)):ka.call(ce(this),Me(t))}});var Na={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,n,r){return function(i){return i<0?t>0?e/t*i:n>0?r/n*i:0:i>1?n<1?(1-r)/(1-n)*i+(r-n)/(1-n):t<1?(1-e)/(1-t)*i+(e-t)/(1-t):1:3*i*Math.pow(1-i,2)*e+3*Math.pow(i,2)*(1-i)*r+Math.pow(i,3)}},steps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";e=e.split("-").reverse()[0];var n=t;return"none"===e?--n:"both"===e&&++n,function(r){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Math.floor(r*t),s=r*o%1==0;return"start"!==e&&"both"!==e||++o,i&&s&&--o,r>=0&&o<0&&(o=0),r<=1&&o>n&&(o=n),o/n}}},Ba=function(){function t(){Ci(this,t)}return ns(t,[{key:"done",value:function(){return!1}}]),t}(),Va=function(t){function e(t){var n;return Ci(this,e),(n=us(this,cs(e).call(this))).ease=Na[t||js]||t,n}return ps(e,t),ns(e,[{key:"step",value:function(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}]),e}(Ba),za=function(t){function e(t){var n;return Ci(this,e),(n=us(this,cs(e).call(this))).stepper=t,n}return ps(e,t),ns(e,[{key:"step",value:function(t,e,n,r){return this.stepper(t,e,n,r)}},{key:"done",value:function(t){return t.done}}]),e}(Ba);function Ga(){var t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,r=Math.log(e/100+1e-10),i=-r/Math.sqrt(n*n+r*r),o=3.9/(i*t);this.d=2*i*o,this.k=o*o}zi(function(t){function e(t,n){var r;return Ci(this,e),(r=us(this,cs(e).call(this))).duration(t||500).overshoot(n||0),r}return ps(e,t),ns(e,[{key:"step",value:function(t,e,n,r){if("string"==typeof t)return t;if(r.done=n===1/0,n===1/0)return e;if(0===n)return t;n>100&&(n=16),n/=1e3;var i=r.velocity||0,o=-this.d*i-this.k*(t-e),s=t+i*n+o*n*n/2;return r.velocity=i+o*n,r.done=Math.abs(e-s)+Math.abs(i)<.002,r.done?e:s}}]),e}(za),{duration:Fa("_duration",Ga),overshoot:Fa("_overshoot",Ga)});var Ha=function(t){function e(t,n,r,i){var o;return Ci(this,e),t=null==t?.1:t,n=null==n?.01:n,r=null==r?0:r,i=null==i?1e3:i,(o=us(this,cs(e).call(this))).p(t).i(n).d(r).windup(i),o}return ps(e,t),ns(e,[{key:"step",value:function(t,e,n,r){if("string"==typeof t)return t;if(r.done=n===1/0,n===1/0)return e;if(0===n)return t;var i=e-t,o=(r.integral||0)+i*n,s=(i-(r.error||0))/n,a=this.windup;return!1!==a&&(o=Math.max(-a,Math.min(o,a))),r.error=i,r.integral=o,r.done=Math.abs(i)<.001,r.done?e:t+(this.P*i+this.I*o+this.D*s)}}]),e}(za);zi(Ha,{windup:Fa("windup"),p:Fa("P"),i:Fa("I"),d:Fa("D")});var ja=Fs("PathArray",qs);function Wa(t,e,n,r){return n+r.replace(yo," .")}for(var Ka={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},qa="mlhvqtcsaz".split(""),Xa=0,Ya=qa.length;Xa<Ya;++Xa)Ka[qa[Xa]]=function(t){return function(e,n,r){if("H"===t)e[0]=e[0]+n.x;else if("V"===t)e[0]=e[0]+n.y;else if("A"===t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var i=0,o=e.length;i<o;++i)e[i]=e[i]+(i%2?n.y:n.x);return Ka[t](e,n,r)}}(qa[Xa].toUpperCase());zi(ja,{toString:function(){return function(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e][0],null!=t[e][1]&&(r+=t[e][1],null!=t[e][2]&&(r+=" ",r+=t[e][2],null!=t[e][3]&&(r+=" ",r+=t[e][3],r+=" ",r+=t[e][4],null!=t[e][5]&&(r+=" ",r+=t[e][5],r+=" ",r+=t[e][6],null!=t[e][7]&&(r+=" ",r+=t[e][7])))));return r+" "}(this)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r,i=this.length-1;i>=0;i--)"M"===(r=this[i][0])||"L"===r||"T"===r?(this[i][1]+=t,this[i][2]+=e):"H"===r?this[i][1]+=t:"V"===r?this[i][1]+=e:"C"===r||"S"===r||"Q"===r?(this[i][1]+=t,this[i][2]+=e,this[i][3]+=t,this[i][4]+=e,"C"===r&&(this[i][5]+=t,this[i][6]+=e)):"A"===r&&(this[i][6]+=t,this[i][7]+=e);return this},size:function(t,e){var n,r,i=this.bbox();for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,n=this.length-1;n>=0;n--)"M"===(r=this[n][0])||"L"===r||"T"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y):"H"===r?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:"V"===r?this[n][1]=(this[n][1]-i.y)*e/i.height+i.y:"C"===r||"S"===r||"Q"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*e/i.height+i.y,"C"===r&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*e/i.height+i.y)):"A"===r&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*e/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*e/i.height+i.y);return this},equalCommands:function(t){var e,n,r;for(t=new ja(t),r=this.length===t.length,e=0,n=this.length;r&&e<n;e++)r=this[e][0]===t[e][0];return r},morph:function(t){return t=new ja(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,r,i,o=this,s=this.destination.value,a=[],l=new ja;for(e=0,n=o.length;e<n;e++){for(a[e]=[o[e][0]],r=1,i=o[e].length;r<i;r++)a[e][r]=o[e][r]+(s[e][r]-o[e][r])*t;"A"===a[e][0]&&(a[e][4]=+(0!==a[e][4]),a[e][5]=+(0!==a[e][5]))}return l.value=a,l},parse:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[["M",0,0]];if(e instanceof ja)return e;var n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(bo,Wa).replace(go," $& ").replace(vo,"$1 -").trim().split(mo):e.reduce(function(t,e){return[].concat.call(t,e)},[]);var r=[],i=new Rs,o=new Rs,s=0,a=e.length;do{_o.test(e[s])?(t=e[s],++s):"M"===t?t="L":"m"===t&&(t="l"),r.push(Ka[t].call(null,e.slice(s,s+=n[t.toUpperCase()]).map(parseFloat),i,o))}while(a>s);return r},bbox:function(){return Os().path.setAttribute("d",this.toString()),Os.nodes.path.getBBox()}});var $a=function(){function t(e){Ci(this,t),this._stepper=e||new Va("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}return ns(t,[{key:"from",value:function(t){return null==t?this._from:(this._from=this._set(t),this)}},{key:"to",value:function(t){return null==t?this._to:(this._to=this._set(t),this)}},{key:"type",value:function(t){return null==t?this._type:(this._type=t,this)}},{key:"_set",value:function(t){if(!this._type){var e=ue(t);"number"===e?this.type(Xs):"string"===e?ss.isColor(t)?this.type(ss):mo.test(t)?this.type(go.test(t)?ja:qs):ro.test(t)?this.type(Xs):this.type(Za):tl.indexOf(t.constructor)>-1?this.type(t.constructor):Array.isArray(t)?this.type(qs):"object"===e?this.type(Qa):this.type(Za)}var n=new this._type(t);return this._type===ss&&(n=this._to?n[this._to[4]]():this._from?n[this._from[4]]():n),n=n.toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(n.length)).map(Object).map(function(t){return t.done=!0,t}),n}},{key:"stepper",value:function(t){return null==t?this._stepper:(this._stepper=t,this)}},{key:"done",value:function(){return this._context.map(this._stepper.done).reduce(function(t,e){return t&&e},!0)}},{key:"at",value:function(t){var e=this;return this._morphObj.fromArray(this._from.map(function(n,r){return e._stepper.step(n,e._to[r],t,e._context[r],e._context)}))}}]),t}(),Za=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}},{key:"valueOf",value:function(){return this.value}},{key:"toArray",value:function(){return[this.value]}}]),t}(),Ja=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,t.defaults,e),this}},{key:"toArray",value:function(){var t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}]),t}();Ja.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};var Qa=function(){function t(){Ci(this,t),this.init.apply(this,arguments)}return ns(t,[{key:"init",value:function(t){if(this.values=[],!Array.isArray(t)){t=t||{};var e=[];for(var n in t)e.push([n,t[n]]);return e.sort(function(t,e){return t[0]-e[0]}),this.values=e.reduce(function(t,e){return t.concat(e)},[]),this}this.values=t}},{key:"valueOf",value:function(){for(var t={},e=this.values,n=0,r=e.length;n<r;n+=2)t[e[n]]=e[n+1];return t}},{key:"toArray",value:function(){return this.values}}]),t}(),tl=[Za,Ja,Qa],el=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("path",t),t))}return ps(e,t),ns(e,[{key:"array",value:function(){return this._array||(this._array=new ja(this.attr("d")))}},{key:"plot",value:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new ja(t))}},{key:"clear",value:function(){return delete this._array,this}},{key:"move",value:function(t,e){return this.attr("d",this.array().move(t,e))}},{key:"x",value:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}},{key:"y",value:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}},{key:"size",value:function(t,e){var n=wi(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}},{key:"width",value:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}},{key:"height",value:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},{key:"targets",value:function(){return Vs('svg textpath [href*="'+this.id()+'"]')}}]),e}(ma);el.prototype.MorphArray=ja,Ur({Container:{path:Gi(function(t){return this.put(new el).plot(t||new ja)})}}),Fi(el,"Path");var nl={__proto__:null,array:function(){return this._array||(this._array=new Ca(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new Ca(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=wi(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}},rl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("polygon",t),t))}return ps(e,t),e}(ma);Ur({Container:{polygon:Gi(function(t){return this.put(new rl).plot(t||new Ca)})}}),zi(rl,Pa),zi(rl,nl),Fi(rl,"Polygon");var il=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("polyline",t),t))}return ps(e,t),e}(ma);Ur({Container:{polyline:Gi(function(t){return this.put(new il).plot(t||new Ca)})}}),zi(il,Pa),zi(il,nl),Fi(il,"Polyline");var ol=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("rect",t),t))}return ps(e,t),e}(ma);zi(ol,{rx:sa,ry:aa}),Ur({Container:{rect:Gi(function(t,e){return this.put(new ol).size(t,e)})}}),Fi(ol,"Rect");var sl=Math.max,al=Math.min;Dt({target:"Array",proto:!0,forced:!qt("splice")},{splice:function(t,e){var n,r,i,o,s,a,l=ce(this),u=dt(l.length),c=mt(t,u),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=u-c):(n=h-2,r=al(sl(ct(e),0),u-c)),u+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=Ae(l,r),o=0;o<r;o++)(s=c+o)in l&&Ut(i,o,l[s]);if(i.length=r,n<r){for(o=c;o<u-r;o++)a=o+n,(s=o+r)in l?l[a]=l[s]:delete l[a];for(o=u;o>u-r+n;o--)delete l[o-1]}else if(n>r)for(o=u-r;o>c;o--)a=o+n-1,(s=o+r-1)in l?l[a]=l[s]:delete l[a];for(o=0;o<n;o++)l[o+c]=arguments[o+2];return l.length=u-r+n,i}});var ll=function(){function t(){Ci(this,t),this._first=null,this._last=null}return ns(t,[{key:"push",value:function(t){var e=t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}},{key:"shift",value:function(){var t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}},{key:"first",value:function(){return this._first&&this._first.value}},{key:"last",value:function(){return this._last&&this._last.value}},{key:"remove",value:function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}}]),t}(),ul={nextDraw:null,frames:new ll,timeouts:new ll,immediates:new ll,timer:function(){return Ai.window.performance||Ai.window.Date},transforms:[],frame:function(t){var e=ul.frames.push({run:t});return null===ul.nextDraw&&(ul.nextDraw=Ai.window.requestAnimationFrame(ul._draw)),e},timeout:function(t,e){e=e||0;var n=ul.timer().now()+e,r=ul.timeouts.push({run:t,time:n});return null===ul.nextDraw&&(ul.nextDraw=Ai.window.requestAnimationFrame(ul._draw)),r},immediate:function(t){var e=ul.immediates.push(t);return null===ul.nextDraw&&(ul.nextDraw=Ai.window.requestAnimationFrame(ul._draw)),e},cancelFrame:function(t){null!=t&&ul.frames.remove(t)},clearTimeout:function(t){null!=t&&ul.timeouts.remove(t)},cancelImmediate:function(t){null!=t&&ul.immediates.remove(t)},_draw:function(t){for(var e=null,n=ul.timeouts.last();(e=ul.timeouts.shift())&&(t>=e.time?e.run():ul.timeouts.push(e),e!==n););for(var r=null,i=ul.frames.last();r!==i&&(r=ul.frames.shift());)r.run(t);for(var o=null;o=ul.immediates.shift();)o();ul.nextDraw=ul.timeouts.first()||ul.frames.first()?Ai.window.requestAnimationFrame(ul._draw):null}},cl=function(t){var e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}},hl=function(){var t=Ai.window;return(t.performance||t.Date).now()},dl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hl;return Ci(this,e),(t=us(this,cs(e).call(this)))._timeSource=n,t._startTime=0,t._speed=1,t._persist=0,t._nextFrame=null,t._paused=!0,t._runners=[],t._runnerIds=[],t._lastRunnerId=-1,t._time=0,t._lastSourceTime=0,t._lastStepTime=0,t._step=t._stepFn.bind(ls(t),!1),t._stepImmediate=t._stepFn.bind(ls(t),!0),t}return ps(e,t),ns(e,[{key:"schedule",value:function(t,e,n){if(null==t)return this._runners.map(cl);var r=0,i=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)r=i;else if("absolute"===n||"start"===n)r=e,e=0;else if("now"===n)r=this._time;else{if("relative"!==n)throw new Error('Invalid value for the "when" parameter');var o=this._runners[t.id];o&&(r=o.start+e,e=0)}t.unschedule(),t.timeline(this);var s=t.persist(),a={persist:null===s?this._persist:s,start:r+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort(function(t,e){return t.start-e.start}),this._runnerIds=this._runners.map(function(t){return t.runner.id}),this.updateTime()._continue(),this}},{key:"unschedule",value:function(t){var e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}},{key:"getEndTime",value:function(){var t=this._runners[this._runnerIds.indexOf(this._lastRunnerId)],e=t?t.runner.duration():0;return(t?t.start:0)+e}},{key:"getEndTimeOfTimeline",value:function(){for(var t=0,e=0;e<this._runners.length;e++){var n=this._runners[e],r=n?n.runner.duration():0,i=(n?n.start:0)+r;i>t&&(t=i)}return t}},{key:"updateTime",value:function(){return this.active()||(this._lastSourceTime=this._timeSource()),this}},{key:"play",value:function(){return this._paused=!1,this.updateTime()._continue()}},{key:"pause",value:function(){return this._paused=!0,this._continue()}},{key:"stop",value:function(){return this.time(0),this.pause()}},{key:"finish",value:function(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}},{key:"speed",value:function(t){return null==t?this._speed:(this._speed=t,this)}},{key:"reverse",value:function(t){var e=this.speed();if(null==t)return this.speed(-e);var n=Math.abs(e);return this.speed(t?n:-n)}},{key:"seek",value:function(t){return this.time(this._time+t)}},{key:"time",value:function(t){return null==t?this._time:(this._time=t,this._continue(!0))}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"source",value:function(t){return null==t?this._timeSource:(this._timeSource=t,this)}},{key:"_stepFn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._timeSource(),n=e-this._lastSourceTime;t&&(n=0);var r=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(var i=this._runners.length;i--;){var o=this._runners[i],s=o.runner;this._time-o.start<=0&&s.reset()}for(var a=!1,l=0,u=this._runners.length;l<u;l++){var c=this._runners[l],h=c.runner,d=r,p=this._time-c.start;if(p<=0)a=!0;else if(p<d&&(d=p),h.active()){if(h.step(d).done){if(!0!==c.persist)h.duration()-h.time()+this._time+c.persist<this._time&&(h.unschedule(),--l,--u)}else a=!0}}return a&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}},{key:"_continue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ul.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=ul.frame(this._step)),this)}},{key:"active",value:function(){return!!this._nextFrame}}]),e}(zs);function pl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pl(n,!0).forEach(function(e){ia(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pl(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}Ur({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new dl,this._timeline):(this._timeline=t,this)}}});var ml=function(t){function e(t){var n;return Ci(this,e),(n=us(this,cs(e).call(this))).id=e.id++,t="function"==typeof(t=null==t?Hs:t)?new za(t):t,n._element=null,n._timeline=null,n.done=!1,n._queue=[],n._duration="number"==typeof t&&t,n._isDeclarative=t instanceof za,n._stepper=n._isDeclarative?t:new Va,n._history={},n.enabled=!0,n._time=0,n._lastTime=0,n._reseted=!0,n.transforms=new ks,n.transformId=1,n._haveReversed=!1,n._reverse=!1,n._loopsDone=0,n._swing=!1,n._wait=0,n._times=1,n._frameId=null,n._persist=!!n._isDeclarative||null,n}return ps(e,t),ns(e,[{key:"element",value:function(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}},{key:"timeline",value:function(t){return void 0===t?this._timeline:(this._timeline=t,this)}},{key:"animate",value:function(t,n,r){var i=e.sanitise(t,n,r),o=new e(i.duration);return this._timeline&&o.timeline(this._timeline),this._element&&o.element(this._element),o.loop(i).schedule(i.delay,i.when)}},{key:"schedule",value:function(t,e,n){if(t instanceof dl||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}},{key:"unschedule",value:function(){var t=this.timeline();return t&&t.unschedule(this),this}},{key:"loop",value:function(t,e,n){return"object"===ue(t)&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}},{key:"delay",value:function(t){return this.animate(0,t)}},{key:"queue",value:function(t,e,n,r){return this._queue.push({initialiser:t||Gs,runner:e||Gs,retarget:n,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}},{key:"during",value:function(t){return this.queue(null,t)}},{key:"after",value:function(t){return this.on("finished",t)}},{key:"time",value:function(t){if(null==t)return this._time;var e=t-this._time;return this.step(e),this}},{key:"duration",value:function(){return this._times*(this._wait+this._duration)-this._wait}},{key:"loops",value:function(t){var e=this._duration+this._wait;if(null==t){var n=Math.floor(this._time/e),r=(this._time-n*e)/this._duration;return Math.min(n+r,this._times)}var i=t%1,o=e*Math.floor(t)+this._duration*i;return this.time(o)}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"position",value:function(t){var e,n=this._time,r=this._duration,i=this._wait,o=this._times,s=this._swing,a=this._reverse;if(null==t){var l=function(t){var e=s*Math.floor(t%(2*(i+r))/(i+r)),n=e&&!a||!e&&a,o=Math.pow(-1,n)*(t%(i+r))/r+n;return Math.max(Math.min(o,1),0)},u=o*(i+r)-i;return e=n<=0?Math.round(l(1e-5)):n<u?l(n):Math.round(l(u-1e-5))}var c=Math.floor(this.loops()),h=s&&c%2==0;return e=c+(h&&!a||a&&h?t:1-t),this.loops(e)}},{key:"progress",value:function(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}},{key:"step",value:function(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;var e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;var r=this.duration(),i=this._lastTime<=0&&this._time>0,o=this._lastTime<r&&this._time>=r;this._lastTime=this._time,i&&this.fire("start",this);var s=this._isDeclarative;if(this.done=!s&&!o&&this._time>=r,this._reseted=!1,n||s){this._initialise(n),this.transforms=new ks;var a=this._run(s?t:e);this.fire("step",this)}return this.done=this.done||a&&s,o&&this.fire("finished",this),this}},{key:"reset",value:function(){return this._reseted||(this.time(0),this._reseted=!0),this}},{key:"finish",value:function(){return this.step(1/0)}},{key:"reverse",value:function(t){return this._reverse=null==t?!this._reverse:t,this}},{key:"ease",value:function(t){return this._stepper=new Va(t),this}},{key:"active",value:function(t){return null==t?this.enabled:(this.enabled=t,this)}},{key:"_rememberMorpher",value:function(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){var n=this.timeline();n&&n.play()}}},{key:"_tryRetarget",value:function(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){var r=this._queue.indexOf(this._history[t].caller);return this._queue.splice(r,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget(e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;var i=this.timeline();return i&&i.play(),!0}return!1}},{key:"_initialise",value:function(t){if(t||this._isDeclarative)for(var e=0,n=this._queue.length;e<n;++e){var r=this._queue[e],i=this._isDeclarative||!r.initialised&&t;t=!r.finished,i&&t&&(r.initialiser.call(this),r.initialised=!0)}}},{key:"_run",value:function(t){for(var e=!0,n=0,r=this._queue.length;n<r;++n){var i=this._queue[n],o=i.runner.call(this,t);i.finished=i.finished||!0===o,e=e&&i.finished}return e}},{key:"addTransform",value:function(t,e){return this.transforms.lmultiplyO(t),this}},{key:"clearTransform",value:function(){return this.transforms=new ks,this}},{key:"clearTransformsFromQueue",value:function(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(function(t){return!t.isTransform}))}}],[{key:"sanitise",value:function(t,e,n){var r=1,i=!1,o=0;return e=e||Ws,n=n||"last","object"!==ue(t=t||Hs)||t instanceof Ba||(e=t.delay||e,n=t.when||n,i=t.swing||i,r=t.times||r,o=t.wait||o,t=t.duration||Hs),{duration:t,delay:e,swing:i,times:r,wait:o,when:n}}}]),e}(zs);ml.id=0;var vl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ks,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ci(this,t),this.transforms=e,this.id=n,this.done=r}return ns(t,[{key:"clearTransformsFromQueue",value:function(){}}]),t}();zi([ml,vl],{mergeWith:function(t){return new vl(t.transforms.lmultiply(this.transforms),t.id)}});var gl=function(t,e){return t.lmultiplyO(e)},_l=function(t){return t.transforms};function bl(){var t=this._transformationRunners.runners.map(_l).reduce(gl,new ks);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}var yl=function(){function t(){Ci(this,t),this.runners=[],this.ids=[]}return ns(t,[{key:"add",value:function(t){if(!this.runners.includes(t)){var e=t.id+1;return this.runners.push(t),this.ids.push(e),this}}},{key:"getByID",value:function(t){return this.runners[this.ids.indexOf(t+1)]}},{key:"remove",value:function(t){var e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}},{key:"merge",value:function(){var t=this,e=null;return this.runners.forEach(function(n,r){e&&n.done&&e.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))&&(t.remove(n.id),t.edit(e.id,n.mergeWith(e))),e=n}),this}},{key:"edit",value:function(t,e){var n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}},{key:"length",value:function(){return this.ids.length}},{key:"clearBefore",value:function(t){var e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new vl).forEach(function(t){return t.clearTransformsFromQueue()}),this}}]),t}();Ur({Element:{animate:function(t,e,n){var r=ml.sanitise(t,e,n),i=this.timeline();return new ml(r.duration).loop(r).element(this).timeline(i.play()).schedule(r.delay,r.when)},delay:function(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore:function(t){this._transformationRunners.clearBefore(t.id)},_currentTransform:function(t){return this._transformationRunners.runners.filter(function(e){return e.id<=t.id}).map(_l).reduce(gl,new ks)},_addRunner:function(t){this._transformationRunners.add(t),ul.cancelImmediate(this._frameId),this._frameId=ul.immediate(bl.bind(this))},_prepareRunner:function(){null==this._frameId&&(this._transformationRunners=(new yl).add(new vl(new ks(this))))}}}),zi(ml,{attr:function(t,e){return this.styleAttr("attr",t,e)},css:function(t,e){return this.styleAttr("css",t,e)},styleAttr:function(t,e,n){if("object"===ue(e)){for(var r in e)this.styleAttr(t,r,e[r]);return this}var i=new $a(this._stepper).to(n);return this.queue(function(){i=i.from(this.element()[t](e))},function(n){return this.element()[t](e,i.at(n)),i.done()}),this},zoom:function(t,e){if(this._tryRetarget("zoom",wa,e))return this;var n=new $a(this._stepper).to(new Xs(t));return this.queue(function(){n=n.from(this.element().zoom())},function(t){return this.element().zoom(n.at(t),e),n.done()},function(t,r){e=r,n.to(t)}),this._rememberMorpher("zoom",n),this},transform:function(t,e,n){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;var r=ks.isMatrixLike(t);n=null!=t.affine?t.affine:null!=n?n:!r;var i,o,s,a,l,u=new $a(this._stepper).type(n?Ja:ks);return this.queue(function(){o=o||this.element(),i=i||Si(t,o),l=new ks(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)},function(c){e||this.clearTransform();var h=new Rs(i).transform(o._currentTransform(this)),d=h.x,p=h.y,f=new ks(fl({},t,{origin:[d,p]})),m=this._isDeclarative&&s?s:l;if(n){f=f.decompose(d,p),m=m.decompose(d,p);var v=f.rotate,g=m.rotate,_=[v-360,v,v+360],b=_.map(function(t){return Math.abs(t-g)}),y=Math.min.apply(Math,Or(b)),x=b.indexOf(y);f.rotate=_[x]}e&&(r||(f.rotate=t.rotate||0),this._isDeclarative&&a&&(m.rotate=a)),u.from(m),u.to(f);var w=u.at(c);return a=w.rotate,s=new ks(w),this.addTransform(s),o._addRunner(this),u.done()},function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(i=Si(t,o)),t=fl({},e,{origin:i})},!0),this._isDeclarative&&this._rememberMorpher("transform",u),this},x:function(t,e){return this._queueNumber("x",t)},y:function(t){return this._queueNumber("y",t)},dx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("x",t)},dy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("y",t)},dmove:function(t,e){return this.dx(t).dy(e)},_queueNumberDelta:function(t,e){if(e=new Xs(e),this._tryRetarget(t,e))return this;var n=new $a(this._stepper).to(e),r=null;return this.queue(function(){r=this.element()[t](),n.from(r),n.to(r+e)},function(e){return this.element()[t](n.at(e)),n.done()},function(t){n.to(r+new Xs(t))}),this._rememberMorpher(t,n),this},_queueObject:function(t,e){if(this._tryRetarget(t,e))return this;var n=new $a(this._stepper).to(e);return this.queue(function(){n.from(this.element()[t]())},function(e){return this.element()[t](n.at(e)),n.done()}),this._rememberMorpher(t,n),this},_queueNumber:function(t,e){return this._queueObject(t,new Xs(e))},cx:function(t){return this._queueNumber("cx",t)},cy:function(t){return this._queueNumber("cy",t)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var n;return t&&e||(n=this._element.bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.width(t).height(e)},width:function(t){return this._queueNumber("width",t)},height:function(t){return this._queueNumber("height",t)},plot:function(t,e,n,r){if(4===arguments.length)return this.plot([t,e,n,r]);if(this._tryRetarget("plot",t))return this;var i=new $a(this._stepper).type(this._element.MorphArray).to(t);return this.queue(function(){i.from(this._element.array())},function(t){return this._element.plot(i.at(t)),i.done()}),this._rememberMorpher("plot",i),this},leading:function(t){return this._queueNumber("leading",t)},viewbox:function(t,e,n,r){return this._queueObject("viewbox",new Is(t,e,n,r))},update:function(t){return"object"!==ue(t)?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),zi(ml,{rx:sa,ry:aa,from:xa,to:wa}),Fi(ml,"Runner");var xl=function(t){function e(t){var n;return Ci(this,e),(n=us(this,cs(e).call(this,Di("svg",t),t))).namespace(),n}return ps(e,t),ns(e,[{key:"isRoot",value:function(){return!(this.node.parentNode&&this.node.parentNode instanceof Ai.window.SVGElement&&"#document"!==this.node.parentNode.nodeName)}},{key:"root",value:function(){return this.isRoot()?this:hs(cs(e.prototype),"root",this).call(this)}},{key:"namespace",value:function(){return this.isRoot()?this.attr({xmlns:Mi,version:"1.1"}).attr("xmlns:xlink",Ei,Ti).attr("xmlns:svgjs","http://svgjs.com/svgjs",Ti):this.root().namespace()}},{key:"defs",value:function(){return this.isRoot()?Ii(this.node.querySelector("defs"))||this.put(new _a):this.root().defs()}},{key:"parent",value:function(t){return this.isRoot()?"#document"===this.node.parentNode.nodeName?null:Ii(this.node.parentNode):hs(cs(e.prototype),"parent",this).call(this,t)}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this}}]),e}(ga);Ur({Container:{nested:Gi(function(){return this.put(new xl)})}}),Fi(xl,"Svg",!0);var wl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("symbol",t),t))}return ps(e,t),e}(ga);Ur({Container:{symbol:Gi(function(){return this.put(new wl)})}}),Fi(wl,"Symbol");var Sl={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(Ai.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()}},Ml=function(t){function e(t){var n;return Ci(this,e),(n=us(this,cs(e).call(this,Di("text",t),t))).dom.leading=new Xs(1.3),n._rebuild=!0,n._build=!1,n}return ps(e,t),ns(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)}},{key:"move",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.x(t,n).y(e,n)}},{key:"cx",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)}},{key:"cy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)}},{key:"center",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.cx(t,n).cy(e,n)}},{key:"text",value:function(t){if(void 0===t){var e=this.node.childNodes,n=0;t="";for(var r=0,i=e.length;r<i;++r)"textPath"!==e[r].nodeName?(r!==n&&3!==e[r].nodeType&&!0===Ii(e[r]).dom.newLined&&(t+="\n"),t+=e[r].textContent):0===r&&(n=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var o=0,s=(t=t.split("\n")).length;o<s;o++)this.tspan(t[o]).newLine();return this.build(!1).rebuild()}},{key:"leading",value:function(t){return null==t?this.dom.leading:(this.dom.leading=new Xs(t),this.rebuild())}},{key:"rebuild",value:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading;this.each(function(){var t=Ai.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=r*new Xs(t);this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?n+=i:(this.attr("dy",i+n),n=0))}),this.fire("rebuild")}return this}},{key:"build",value:function(t){return this._build=!!t,this}},{key:"setData",value:function(t){return this.dom=t,this.dom.leading=new Xs(t.leading||1.3),this}}]),e}(ma);zi(Ml,Sl),Ur({Container:{text:Gi(function(t){return this.put(new Ml).text(t)}),plain:Gi(function(t){return this.put(new Ml).plain(t)})}}),Fi(Ml,"Text");var Tl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("tspan",t),t))}return ps(e,t),ns(e,[{key:"text",value:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)}},{key:"dx",value:function(t){return this.attr("dx",t)}},{key:"dy",value:function(t){return this.attr("dy",t)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("x",t)}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"newLine",value:function(){var t=this.parent(Ml);this.dom.newLined=!0;var e=Ai.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new Xs(e);return this.dy(n).attr("x",t.x())}}]),e}(Ml);zi(Tl,Sl),Ur({Tspan:{tspan:Gi(function(t){var e=new Tl;return this._build||this.clear(),this.node.appendChild(e.node),e.text(t)})}}),Fi(Tl,"Tspan");var El=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("clipPath",t),t))}return ps(e,t),ns(e,[{key:"remove",value:function(){return this.targets().forEach(function(t){t.unclip()}),hs(cs(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return Vs('svg [clip-path*="'+this.id()+'"]')}}]),e}(ga);Ur({Container:{clip:Gi(function(){return this.defs().put(new El)})},Element:{clipWith:function(t){var e=t instanceof El?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip:function(){return this.attr("clip-path",null)},clipper:function(){return this.reference("clip-path")}}}),Fi(El,"ClipPath");var Al=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("foreignObject",t),t))}return ps(e,t),e}(Zs);Ur({Container:{foreignObject:Gi(function(t,e){return this.put(new Al).size(t,e)})}}),Fi(Al,"ForeignObject");var Cl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("g",t),t))}return ps(e,t),ns(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.move(t,e.y,e)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.move(e.x,t,e)}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),r=t-n.x,i=e-n.y;return this.dmove(r,i)}},{key:"dx",value:function(t){return this.dmove(t,0)}},{key:"dy",value:function(t){return this.dmove(0,t)}},{key:"dmove",value:function(t,e){return this.children().forEach(function(n,r){var i=n.bbox(),o=new ks(n),s=o.translate(t,e).transform(o.inverse()),a=new Rs(i.x,i.y).transform(s);n.move(a.x,a.y)}),this}},{key:"width",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.width:this.size(t,e.height,e)}},{key:"height",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.height:this.size(e.width,t,e)}},{key:"size",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),r=wi(this,t,e,n),i=r.width/n.width,o=r.height/n.height;return this.children().forEach(function(t,e){var r=new Rs(n).transform(new ks(t).inverse());t.scale(i,o,r.x,r.y)}),this}}]),e}(ga);Ur({Container:{group:Gi(function(){return this.put(new Cl)})}}),Fi(Cl,"G");var Pl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("a",t),t))}return ps(e,t),ns(e,[{key:"to",value:function(t){return this.attr("href",t,Ei)}},{key:"target",value:function(t){return this.attr("target",t)}}]),e}(ga);Ur({Container:{link:Gi(function(t){return this.put(new Pl).to(t)})},Element:{linkTo:function(t){var e=new Pl;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}}),Fi(Pl,"A");var Rl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("mask",t),t))}return ps(e,t),ns(e,[{key:"remove",value:function(){return this.targets().forEach(function(t){t.unmask()}),hs(cs(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return Vs('svg [mask*="'+this.id()+'"]')}}]),e}(ga);function Ll(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}Ur({Container:{mask:Gi(function(){return this.defs().put(new Rl)})},Element:{maskWith:function(t){var e=t instanceof Rl?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask:function(){return this.attr("mask",null)},masker:function(){return this.reference("mask")}}}),Fi(Rl,"Mask");var kl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("style",t),t))}return ps(e,t),ns(e,[{key:"addText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.node.textContent+=t,this}},{key:"font",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rule("@font-face",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ll(n,!0).forEach(function(e){ia(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ll(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({fontFamily:t,src:e},n))}},{key:"rule",value:function(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;var n=t+"{";for(var r in e)n+=yi(r)+":"+e[r]+";";return n+"}"}(t,e))}}]),e}(Zs);Ur("Dom",{style:Gi(function(t,e){return this.put(new kl).rule(t,e)}),fontface:Gi(function(t,e,n){return this.put(new kl).font(t,e,n)})}),Fi(kl,"Style");var Ol=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("textPath",t),t))}return ps(e,t),ns(e,[{key:"array",value:function(){var t=this.track();return t?t.array():null}},{key:"plot",value:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this}},{key:"track",value:function(){return this.reference("href")}}]),e}(Ml);Ur({Container:{textPath:Gi(function(t,e){return t instanceof Ml||(t=this.text(t)),t.path(e)})},Text:{path:Gi(function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Ol;if(t instanceof el||(t=this.defs().path(t)),r.attr("href","#"+t,Ei),n)for(;e=this.node.firstChild;)r.node.appendChild(e);return this.put(r)}),textPath:function(){return this.findOne("textPath")}},Path:{text:Gi(function(t){return t instanceof Ml||(t=(new Ml).addTo(this.parent()).text(t)),t.path(this)}),targets:function(){return Vs('svg [href*="'+this.id()+'"]')}}}),Ol.prototype.MorphArray=ja,Fi(Ol,"TextPath");var Dl=function(t){function e(t){return Ci(this,e),us(this,cs(e).call(this,Di("use",t),t))}return ps(e,t),ns(e,[{key:"element",value:function(t,e){return this.attr("href",(e||"")+"#"+t,Ei)}}]),e}(ma);Ur({Container:{use:Gi(function(t,e){return this.put(new Dl).element(t,e)})}}),Fi(Dl,"Use");var Il=Oi;zi([xl,wl,Aa,Ta,La],Fr("viewbox")),zi([Ra,il,rl,el],Fr("marker")),zi(Ml,Fr("Text")),zi(el,Fr("Path")),zi(_a,Fr("Defs")),zi([Ml,Tl],Fr("Tspan")),zi([ol,ba,va,Ma],Fr("radius")),zi(zs,Fr("EventTarget")),zi($s,Fr("Dom")),zi(Zs,Fr("Element")),zi(ma,Fr("Shape")),zi(ga,Fr("Container")),zi(ml,Fr("Runner")),Ns.extend(Or(new Set(Ir))),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];tl.push.apply(tl,Or([].concat(t)))}([Xs,ss,Is,ks,qs,Ca,ja]),zi(tl,{to:function(t){return(new $a).type(this.constructor).from(this.valueOf()).to(t)},fromArray:function(t){return this.init(t),this}})},6041:function(t,e){!function(t){"use strict";class e{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class r extends n{constructor(t,e,n,r){super(t),this.value=e,this.presetKey=n,this.last=null==r||r}}function i(t){return null==t}const o={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class s{constructor(t){var e;this.message=null!==(e=o[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new s({type:"alreadydisposed"})}static notBindable(){return new s({type:"notbindable"})}static propertyNotFound(t){return new s({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new s({type:"shouldneverhappen"})}}class a{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter(t=>t.handler!==e)),this}emit(t,e){const n=this.observers_[t];n&&n.forEach(t=>{t.handler(e)})}}const l="tp";function u(t){return(e,n)=>[l,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function c(t){return t.rawValue}function h(t,e){t.emitter.on("change",function(t,e){return n=>e(t(n))}(c,e)),e(t.rawValue)}function d(t,e,n){h(t.value(e),n)}function p(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}const f=u("btn");class m{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(f()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(f("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(f("t")),function(t,e){h(t,t=>{e.textContent=null!=t?t:""})}(e.props.value("title"),r),this.buttonElement.appendChild(r)}}class v{constructor(t,e){this.emitter=new a,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new m(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class g{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new a,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}class _{constructor(t){this.emitter=new a,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function b(t,e){const n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new g(t,e):new _(t)}class y{constructor(t){this.emitter=new a,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(t){return Object.keys(t).reduce((e,n)=>Object.assign(e,{[n]:b(t[n])}),{})}static fromObject(t){const e=this.createCore(t);return new y(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function x(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function w(t){return{custom:e=>x(e)(t),boolean:x(t=>"boolean"==typeof t?t:void 0)(t),number:x(t=>"number"==typeof t?t:void 0)(t),string:x(t=>"string"==typeof t?t:void 0)(t),function:x(t=>"function"==typeof t?t:void 0)(t),constant:e=>x(t=>t===e?e:void 0)(t),raw:x(t=>t)(t),object:e=>x(t=>{if(function(t){return null!==t&&"object"==typeof t}(t))return function(t,e){return Object.keys(e).reduce((n,r)=>{if(void 0===n)return;const i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0},{})}(t,e)})(t),array:e=>x(t=>{if(Array.isArray(t))return function(t,e){return t.reduce((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0},[])}(t,e)})(t)}}const S={optional:w(!0),required:w(!1)};function M(t,e){const n=S.required.object(e)(t);return n.succeeded?n.value:void 0}const T=u(""),E={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class A{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(t=>{e.classList.remove(T(void 0,E[t]))}),this.blade.get("positions").forEach(t=>{e.classList.add(T(void 0,E[t]))})}),this.viewProps.handleDispose(()=>{!function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(e)})}get parent(){return this.parent_}}const C="http://www.w3.org/2000/svg";function P(t){t.offsetHeight}function R(t){return void 0!==t.ontouchstart}const L=u("lbl");class k{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(L()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(L("l")),d(e.props,"label",e=>{i(e)?this.element.classList.add(L(void 0,"nol")):(this.element.classList.remove(L(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(n),n.appendChild(function(t,e){const n=t.createDocumentFragment();return e.split("\n").map(e=>t.createTextNode(e)).forEach((e,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)}),n}(t,e)))}),this.element.appendChild(n),this.labelElement=n;const r=t.createElement("div");r.classList.add(L("v")),this.element.appendChild(r),this.valueElement=r}}class O extends A{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new k(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class D extends A{constructor(t){super(t),this.value=t.value}}class I extends y{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=y.createCore(e);return new I(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!i(t)?`${t}px`:"auto"}bindExpandedClass(t,e){d(this,"expanded",()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)})}}function U(t,e){e.style.height=t.styleHeight}function F(t,e){t.value("expanded").emitter.on("beforechange",()=>{t.set("completed",!1),i(t.get("expandedHeight"))&&t.set("expandedHeight",function(t,e){let n=0;return function(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),P(e),n=e.clientHeight,t.set("temporaryExpanded",null),P(e)}),n}(t,e)),t.set("shouldFixHeight",!0),P(e)}),t.emitter.on("change",()=>{U(t,e)}),U(t,e),e.addEventListener("transitionend",e=>{"height"===e.propertyName&&(t.set("shouldFixHeight",!1),t.set("expandedHeight",null),t.set("completed",!0))})}class N{constructor(t,e){const n=u(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}class B extends D{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new k(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const V=u("");function z(t,e){return p(t,V(void 0,e))}class G extends y{constructor(t){super(t)}static create(t){var e,n;const r=null!=t?t:{},i={disabled:null!==(e=r.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=r.hidden)&&void 0!==n&&n},o=y.createCore(i);return new G(o)}bindClassModifiers(t){d(this,"disabled",z(t,"disabled")),d(this,"hidden",z(t,"hidden"))}bindDisabled(t){d(this,"disabled",e=>{t.disabled=e})}bindTabIndex(t){d(this,"disabled",e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}}class H{constructor(){this.disabled=!1,this.emitter=new a}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class j{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new a,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class W{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((t,e)=>e.constrain(t),t)}}function K(t,e){if(t instanceof e)return t;if(t instanceof W){const n=t.constraints.reduce((t,n)=>t||(n instanceof e?n:null),null);if(n)return n}return null}class q{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return i(this.minValue)||(e=Math.max(e,this.minValue)),i(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class X{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const Y=u("pop");class ${constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Y()),e.viewProps.bindClassModifiers(this.element),h(e.shows,p(this.element,Y(void 0,"v")))}}class Z{constructor(t,e){this.shows=b(!1),this.viewProps=e.viewProps,this.view=new $(t,{shows:this.shows,viewProps:this.viewProps})}}const J=u("txt");class Q{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(J()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(J("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class tt{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Q(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);i(n)||(this.value.rawValue=n),this.view.refresh()}}class et{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const nt={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class rt{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=nt[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const it={"+":t=>t,"-":t=>-t,"~":t=>~t};class ot{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=it[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function st(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(""!==i)return i}return""}}function at(t,e){var n;const r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function lt(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function ut(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const r=function(t,e){const n=lt(t,e);if(""!==n)return n;const r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";const i=lt(t,e+=1);return""===i?"":r+i}(t,e);return""===r?"":n+r}function ct(t,e){const n=t.substr(e,1);if("0"===n)return n;const r=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=r.length,""===r?"":r+lt(t,e)}const ht=st([function(t,e){const n=ct(t,e);if(e+=n.length,""===n)return"";const r=t.substr(e,1);if(e+=r.length,"."!==r)return"";const i=lt(t,e);return n+r+i+ut(t,e+=i.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=lt(t,e);return e+=r.length,""===r?"":n+r+ut(t,e)},function(t,e){const n=ct(t,e);return e+=n.length,""===n?"":n+ut(t,e)}]);const dt=st([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const r=function(t,e){var n;const r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const r=function(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const r=function(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r}]),pt=st([dt,ht]);function ft(t,e){return function(t,e){const n=pt(t,e);return e+=n.length,""===n?null:{evaluable:new et(n),cursor:e}}(t,e)||function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const r=gt(t,e);if(!r)return null;e=r.cursor,e+=at(t,e).length;const i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}(t,e)}function mt(t,e,n){n+=at(e,n).length;const r=t.filter(t=>e.startsWith(t,n))[0];return r?(n+=r.length,{cursor:n+=at(e,n).length,operator:r}):null}const vt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>function(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const i=mt(e,n,r);if(!i)break;r=i.cursor;const s=t(n,r);if(!s)return null;r=s.cursor,o=new rt(i.operator,o,s.evaluable)}return o?{cursor:r,evaluable:o}:null}}(t,e),function t(e,n){const r=ft(e,n);if(r)return r;const i=e.substr(n,1);if(n+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const o=t(e,n);return o?{cursor:n=o.cursor,evaluable:new ot(i,o.evaluable)}:null});function gt(t,e){return e+=at(t,e).length,vt(t,e)}function _t(t){var e;const n=function(t){const e=gt(t,0);return e?e.cursor+at(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function bt(t){if("number"==typeof t)return t;if("string"==typeof t){const e=_t(t);if(!i(e))return e}return 0}function yt(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function xt(t,e){for(;t.length<e;)t.push(void 0)}function wt(t){const e=[];return xt(e,t),b(e)}function St(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function Mt({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(t){i||(i=!0,t(),i=!1)}t.emitter.on("change",r=>{o(()=>{e.setRawValue(n(t,e),r.options)})}),e.emitter.on("change",i=>{o(()=>{t.setRawValue(r(t,e),i.options)}),o(()=>{e.setRawValue(n(t,e),i.options)})}),o(()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})})}function Tt(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Et(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function At(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Ct(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Pt(t,e){const n=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+r.left),y:t.pageY-((n&&n.scrollY||0)+r.top)}}class Rt{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new a,t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Pt(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Pt(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Pt(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Lt(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function kt(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ot(t,e,n){return Math.min(Math.max(t,e),n)}const Dt=u("txt");class It{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Dt(),Dt(void 0,"num")),e.arrayPosition&&this.element.classList.add(Dt(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Dt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Dt()),this.inputElement.classList.add(Dt("i"));const r=t.createElement("div");r.classList.add(Dt("k")),this.element.appendChild(r),this.knobElement=r;const i=t.createElementNS(C,"svg");i.classList.add(Dt("g")),this.knobElement.appendChild(i);const o=t.createElementNS(C,"path");o.classList.add(Dt("gb")),i.appendChild(o),this.guideBodyElem_=o;const s=t.createElementNS(C,"path");s.classList.add(Dt("gh")),i.appendChild(s),this.guideHeadElem_=s;const a=t.createElement("div");a.classList.add(u("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Dt(void 0,"drg"));this.element.classList.add(Dt(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=Ot(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Ut{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=b(null),this.view=new It(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new Rt(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);i(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=Tt(this.baseStep_,Et(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Tt(this.baseStep_,Et(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function Ft(t,e){t.write(e)}function Nt(t){const e=function(t){const e=t?K(t,X):null;return e?e.step:null}(t);return null!=e?e:1}function Bt(t,e){var n;const r=t&&K(t,X),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}class Vt{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((t,e)=>{var n,r;return null!==(r=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==r?r:t});return this.asm_.fromComponents(e)}}const zt=u("pndtxt");class Gt{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(zt()),this.textViews.forEach(e=>{const n=t.createElement("div");n.classList.add(zt("a")),n.appendChild(e.element),this.element.appendChild(n)})}}class Ht{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,r)=>function(t,e,n){return new Ut(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:b(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,r)),this.acs_.forEach((t,n)=>{Mt({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,r)=>{const i=e.assembly.toComponents(t.rawValue);return i[n]=r.rawValue,e.assembly.fromComponents(i)}})}),this.view=new Gt(t,{textViews:this.acs_.map(t=>t.view)})}}const jt={defaultInterval:200,defaultLineCount:3};class Wt{constructor(){this.emitter=new a,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const Kt=u("grl");class qt{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Kt()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(C,"svg");n.classList.add(Kt("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(C,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const i=t.createElement("div");i.classList.add(Kt("t"),u("tt")()),this.element.appendChild(i),this.tooltipElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach((o,s)=>{if(void 0===o)return;const a=Lt(s,0,e,0,t.width),l=Lt(o,n,r,t.height,0);i.push([a,l].join(","))}),this.lineElem_.setAttributeNS(null,"points",i.join(" "));const o=this.tooltipElem_,s=this.value.rawValue[this.cursor_.index];if(void 0===s)return void o.classList.remove(Kt("t","a"));const a=Lt(this.cursor_.index,0,e,0,t.width),l=Lt(s,n,r,t.height,0);o.style.left=`${a}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(s)}`,o.classList.contains(Kt("t","a"))||(o.classList.add(Kt("t","a"),Kt("t","in")),P(o),o.classList.remove(Kt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Xt{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Wt,this.view=new qt(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),R(t)){const t=new Rt(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Lt(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(Lt(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}class Yt{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}on(t,e){const r=e.bind(this);return this.controller_.emitter.on(t,()=>{r(new n(this))}),this}}class $t extends n{constructor(t,e,n){super(t),this.cell=e,this.index=n}}class Zt extends e{constructor(t){super(t),this.cellToApiMap_=new Map,this.emitter_=new a;const e=this.controller_.valueController;e.cellControllers.forEach((t,n)=>{const r=new Yt(t);this.cellToApiMap_.set(t,r),t.emitter.on("click",()=>{const t=n%e.size[0],i=Math.floor(n/e.size[0]);this.emitter_.emit("click",{event:new $t(this,r,[t,i])})})})}cell(t,e){const n=this.controller_.valueController,r=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(r)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class Jt{constructor(t,e){this.size=e.size;const[n,r]=this.size,i=[];for(let o=0;o<r;o++)for(let r=0;r<n;r++){const n=new v(t,{props:y.fromObject(Object.assign({},e.cellConfig(r,o))),viewProps:G.create()});i.push(n)}this.cellCs_=i,this.viewProps=G.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(t=>{t.viewProps.set("disposed",!0)})}),this.view=new N(t,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach(t=>{this.view.element.appendChild(t.view.element)})}get cellControllers(){return this.cellCs_}}const Qt={id:"buttongrid",type:"blade",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept(t){const e=S,n=M(t,{cells:e.required.function,size:e.required.array(e.required.number),view:e.required.constant("buttongrid"),label:e.optional.string});return n?{params:n}:null},controller:t=>new O(t.document,{blade:t.blade,props:y.fromObject({label:t.params.label}),valueController:new Jt(t.document,{cellConfig:t.params.cells,size:t.params.size})}),api:t=>t.controller instanceof O&&t.controller.valueController instanceof Jt?new Zt(t.controller):null};class te extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.controller_.valueController.value.emitter.on(t,t=>{n(new r(this,t.rawValue,void 0,t.options.last))}),this}}function ee(t,e,n){return t*(1-n)+e*n}function ne(t,e){let n=.25,r=.5,i=-1;for(let o=0;o<20;o++){const[o,s]=t.curve(r);if(r+=n*(o<e?1:-1),i=s,n*=.5,Math.abs(e-o)<.001)break}return i}class re{constructor(t=0,e=0,n=1,r=1){this.cache_=[],this.comps_=[t,e,n,r]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(t){return!i(t)&&!!Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]&&"number"==typeof t[3]}static equals(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}curve(t){const e=ee(0,this.x1,t),n=ee(0,this.y1,t),r=ee(this.x1,this.x2,t),i=ee(this.y1,this.y2,t),o=ee(this.x2,1,t),s=ee(this.y2,1,t),a=ee(e,r,t),l=ee(n,i,t),u=ee(r,o,t),c=ee(i,s,t);return[ee(a,u,t),ee(l,c,t)]}y(t){if(0===this.cache_.length){const t=[];for(let e=0;e<100;e++)t.push(ne(this,Lt(e,0,99,0,1)));this.cache_=t}return this.cache_[Math.round(Lt(Ot(t,0,1),0,1,0,99))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const ie={toComponents:t=>t.toObject(),fromComponents:t=>new re(...t)};function oe(t){const e=yt(2);return`cubic-bezier(${t.toObject().map(t=>e(t)).join(", ")})`}const se=[0,.5,.5,1];function ae(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new re(...se);const n=[e[1],e[2],e[3],e[4]].reduce((t,e)=>{if(!t)return null;const n=Number(e);return isNaN(n)?null:[...t,n]},[]);return new re(...null!=n?n:se)}const le=u("cbz");class ue{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(le()),e.viewProps.bindClassModifiers(this.element),e.foldable.bindExpandedClass(this.element,le(void 0,"expanded")),d(e.foldable,"completed",p(this.element,le(void 0,"cpl")));const n=t.createElement("div");n.classList.add(le("h")),this.element.appendChild(n);const r=t.createElement("button");r.classList.add(le("b")),e.viewProps.bindDisabled(r);const i=t.createElementNS(C,"svg");i.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',r.appendChild(i),n.appendChild(r),this.buttonElement=r;const o=t.createElement("div");if(o.classList.add(le("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(le("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const ce=u("cbzp");class he{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ce()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ce("g")),this.element.appendChild(n),this.graphElement=n;const r=t.createElement("div");r.classList.add(ce("t")),this.element.appendChild(r),this.textElement=r}}function de(t,e){const n=new MutationObserver(t=>{for(const r of t)"childList"===r.type&&r.addedNodes.forEach(t=>{t.contains(t)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const pe=u("cbzg");class fe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pe()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(pe("p")),this.element.appendChild(n),this.previewElement=n;const r=t.createElementNS(C,"svg");r.classList.add(pe("g")),this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(C,"path");i.classList.add(pe("u")),this.svgElem_.appendChild(i),this.guideElem_=i;const o=t.createElementNS(C,"polyline");o.classList.add(pe("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[t.createElement("div"),t.createElement("div")],this.handleElems_.forEach(t=>{t.classList.add(pe("h")),this.element.appendChild(t)}),this.vectorElems_=[t.createElementNS(C,"line"),t.createElementNS(C,"line")],this.vectorElems_.forEach(t=>{t.classList.add(pe("v")),this.svgElem_.appendChild(t)}),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=e.selection,this.handleElems_.forEach((t,e)=>{h(this.sel_,function(t,e){return n=>e(t(n))}(t=>t===e,p(t,pe("h","sel"))))}),de(this.element,()=>{this.refresh()})}getVertMargin_(t){return.25*t}valueToPosition(t,e){const n=this.element.getBoundingClientRect(),r=n.width,i=n.height,o=this.getVertMargin_(i);return{x:Lt(t,0,1,0,r),y:Lt(e,0,1,i-o,o)}}positionToValue(t,e){const n=this.element.getBoundingClientRect(),r=n.width,i=n.height,o=this.getVertMargin_(i);return{x:Ot(Lt(t,0,r,0,1),0,1),y:Lt(e,i-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(t=>{const e=this.valueToPosition(0,t),n=this.valueToPosition(1,t);return[`M ${e.x},${e.y}`,`L ${n.x},${n.y}`].join(" ")}).join(" "));const t=this.value_.rawValue,e=[];let n=0;for(;;){const r=this.valueToPosition(...t.curve(n));if(e.push([r.x,r.y].join(",")),n>=1)break;n=Math.min(n+.05,1)}this.lineElem_.setAttributeNS(null,"points",e.join(" "));const r=t.toObject();[0,1].forEach(t=>{const e=this.valueToPosition(t,t),n=this.valueToPosition(r[2*t],r[2*t+1]),i=this.vectorElems_[t];i.setAttributeNS(null,"x1",String(e.x)),i.setAttributeNS(null,"y1",String(e.y)),i.setAttributeNS(null,"x2",String(n.x)),i.setAttributeNS(null,"y2",String(n.y));const o=this.handleElems_[t];o.style.left=`${n.x}px`,o.style.top=`${n.y}px`})}onValueChange_(){this.refresh()}}const me=u("cbzprv");class ve{constructor(t,e){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(me()),e.viewProps.bindClassModifiers(this.element);const n=t.createElementNS(C,"svg");n.classList.add(me("g")),this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(C,"path");r.classList.add(me("t")),this.svgElem_.appendChild(r),this.ticksElem_=r;const i=t.createElement("div");i.classList.add(me("m")),this.element.appendChild(i),this.markerElem_=i,this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.viewProps.handleDispose(this.onDispose_),de(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(me("m","a")),this.startTime_=(new Date).getTime()+400,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(me("m","a"))}onDispose_(){this.stop()}updateMarker_(t){const e=this.value_.rawValue.y(Ot(t,0,1));this.markerElem_.style.left=100*e+"%"}refresh(){const t=this.svgElem_.getBoundingClientRect(),e=t.width,n=t.height,r=[],i=this.value_.rawValue;for(let t=0;t<24;t++){const o=Lt(t,0,23,0,1),s=Lt(i.y(o),0,1,0,e);r.push(`M ${s},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",r.join(" "))}onTimer_(){if(null===this.startTime_)return;const t=(new Date).getTime()-this.startTime_,e=t/1e3;this.updateMarker_(e),t>1400&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function ge(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}class _e{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.sel_=b(0),this.viewProps=e.viewProps,this.view=new fe(t,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new ve(t,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",t=>{t.stopImmediatePropagation(),t.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const n=new Rt(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(t,e,n){const r=this.sel_.rawValue,i=this.value.rawValue.toObject(),o=this.view.positionToValue(t.x,t.y),s=e?function(t,e,n,r){const i=ge(t,e,n,r),o=Math.atan2(r-e,n-t),s=Math.round(o/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(s)*i,y:e+Math.sin(s)*i}}(r,r,o.x,o.y):o;i[2*r]=s.x,i[2*r+1]=s.y,this.value.setRawValue(new re(...i),n)}onPointerDown_(t){const e=t.data;if(!e.point)return;const n=this.value.rawValue,r=this.view.valueToPosition(n.x1,n.y1),i=ge(e.point.x,e.point.y,r.x,r.y),o=this.view.valueToPosition(n.x2,n.y2),s=ge(e.point.x,e.point.y,o.x,o.y);this.sel_.rawValue=i<=s?0:1,this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(t){Ct(t.key)&&t.preventDefault();const e=this.sel_.rawValue,n=this.value.rawValue.toObject();n[2*e]+=Tt(this.baseStep_,At(t)),n[2*e+1]+=Tt(this.baseStep_,Et(t)),this.value.setRawValue(new re(...n),{forceEmit:!1,last:!1})}onKeyUp_(t){Ct(t.key)&&t.preventDefault();const e=Tt(this.baseStep_,At(t)),n=Tt(this.baseStep_,Et(t));0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class be{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new he(t,{viewProps:this.viewProps}),this.gc_=new _e(t,{baseStep:e.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const n=Object.assign(Object.assign({},e.axis),{constraint:new q({max:1,min:0})}),r=Object.assign(Object.assign({},e.axis),{constraint:void 0});this.tc_=new Ht(t,{assembly:ie,axes:[n,r,n,r],parser:_t,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(t=>t.inputElement)]}refresh(){this.gc_.refresh()}}class ye{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=function(t){return I.create(t)}(e.expanded),this.view=new ue(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new tt(t,{parser:ae,props:y.fromObject({formatter:oe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_="popup"===e.pickerLayout?new Z(t,{viewProps:this.viewProps}):null;const n=new be(t,{axis:e.axis,value:this.value,viewProps:this.viewProps});n.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),h(this.popC_.shows,t=>{t&&n.refresh()}),Mt({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),F(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const e=t.relatedTarget;e&&this.popC_.view.element.contains(e)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=function(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!R(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_&&"Escape"===t.key&&(this.popC_.shows.rawValue=!1)}}const xe={id:"cubic-bezier",type:"blade",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept(t){const e=S,n=M(t,{value:e.required.array(e.required.number),view:e.required.constant("cubicbezier"),expanded:e.optional.boolean,label:e.optional.string,picker:e.optional.custom(t=>"inline"===t||"popup"===t?t:void 0)});return n?{params:n}:null},controller(t){var e,n;const r=b(new re(...t.params.value),{constraint:new Vt({assembly:ie,components:[0,1,2,3].map(t=>t%2==0?new q({min:0,max:1}):void 0)}),equals:re.equals}),i=new ye(t.document,{axis:{baseStep:.1,textProps:y.fromObject({draggingScale:.01,formatter:yt(2)})},expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:r,viewProps:t.viewProps});return new B(t.document,{blade:t.blade,props:y.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof B&&t.controller.valueController instanceof ye?new te(t.controller):null};class we extends e{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}class Se{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(t){this.start_=t.getTime()}calculateFps_(t){if(0===this.timestamps_.length)return null;const e=this.timestamps_[0];return 1e3*(this.frameCount_-e.frameCount)/(t-e.time)}compactTimestamps_(){if(this.timestamps_.length<=20)return;const t=this.timestamps_.length-20;this.timestamps_.splice(0,t);const e=this.timestamps_[0].frameCount;this.timestamps_.forEach(t=>{t.frameCount-=e}),this.frameCount_-=e}end(t){if(null===this.start_)return;const e=t.getTime();this.duration_=e-this.start_,this.start_=null,this.fps_=this.calculateFps_(e),this.timestamps_.push({frameCount:this.frameCount_,time:e}),++this.frameCount_,this.compactTimestamps_()}}const Me=u("fps");class Te{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Me()),e.viewProps.bindClassModifiers(this.element),this.graphElement=t.createElement("div"),this.graphElement.classList.add(Me("g")),this.element.appendChild(this.graphElement);const n=t.createElement("div");n.classList.add(Me("l")),this.element.appendChild(n);const r=t.createElement("span");r.classList.add(Me("v")),r.textContent="--",n.appendChild(r),this.valueElement=r;const i=t.createElement("span");i.classList.add(Me("u")),i.textContent="FPS",n.appendChild(i)}}class Ee{constructor(t,e){this.stopwatch_=new Se,this.onTick_=this.onTick_.bind(this),this.ticker_=e.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=e.value,this.viewProps=e.viewProps,this.view=new Te(t,{viewProps:this.viewProps}),this.graphC_=new Xt(t,{formatter:yt(0),lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const t=this.stopwatch_.fps;if(null!==t){const e=this.value_.rawValue;this.value_.rawValue=function(t,e){const n=[...St(t),e];return n.length>t.length?n.splice(0,n.length-t.length):xt(n,t.length),n}(e,t),this.view.valueElement.textContent=t.toFixed(0)}}}function Ae(t,e){return 0===e?new H:new j(t,null!=e?e:jt.defaultInterval)}const Ce={id:"fpsgraph",type:"blade",accept(t){const e=S,n=M(t,{view:e.required.constant("fpsgraph"),interval:e.optional.number,label:e.optional.string,lineCount:e.optional.number,max:e.optional.number,min:e.optional.number});return n?{params:n}:null},controller(t){var e,n,r,i;const o=null!==(e=t.params.interval)&&void 0!==e?e:500;return new O(t.document,{blade:t.blade,props:y.fromObject({label:t.params.label}),valueController:new Ee(t.document,{lineCount:null!==(n=t.params.lineCount)&&void 0!==n?n:2,maxValue:null!==(r=t.params.max)&&void 0!==r?r:90,minValue:null!==(i=t.params.min)&&void 0!==i?i:0,ticker:Ae(t.document,o),value:wt(80),viewProps:t.viewProps})})},api:t=>t.controller instanceof O&&t.controller.valueController instanceof Ee?new we(t.controller):null};class Pe{constructor(t,e){this.min=t,this.max=e}static isObject(t){if("object"!=typeof t||null===t)return!1;const e=t.min,n=t.max;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.min===e.min&&t.max===e.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Re={fromComponents:t=>new Pe(t[0],t[1]),toComponents:t=>[t.min,t.max]};class Le{constructor(t){this.edge=t}constrain(t){var e,n,r,i,o,s,a,l;if(t.min<=t.max)return new Pe(null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t.min))&&void 0!==n?n:t.min,null!==(i=null===(r=this.edge)||void 0===r?void 0:r.constrain(t.max))&&void 0!==i?i:t.max);const u=(t.min+t.max)/2;return new Pe(null!==(s=null===(o=this.edge)||void 0===o?void 0:o.constrain(u))&&void 0!==s?s:u,null!==(l=null===(a=this.edge)||void 0===a?void 0:a.constrain(u))&&void 0!==l?l:u)}}const ke=u("rsltxt");class Oe{constructor(t,e){this.sliderView_=e.sliderView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(ke());const n=t.createElement("div");n.classList.add(ke("s")),n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(ke("t")),r.appendChild(this.textView_.element),this.element.appendChild(r)}}const De=u("rsl");class Ie{constructor(t,e){this.maxValue_=e.maxValue,this.minValue_=e.minValue,this.element=t.createElement("div"),this.element.classList.add(De()),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this));const n=t.createElement("div");n.classList.add(De("t")),this.element.appendChild(n),this.trackElement=n;const r=t.createElement("div");r.classList.add(De("b")),n.appendChild(r),this.barElement=r;const i=["min","max"].map(e=>{const r=t.createElement("div");return r.classList.add(De("k"),De("k",e)),n.appendChild(r),r});this.knobElements=[i[0],i[1]],this.update()}valueToX_(t){return 100*Ot(Lt(t,this.minValue_,this.maxValue_,0,1),0,1)}update(){const t=this.value_.rawValue;0===t.length?this.element.classList.add(De(void 0,"zero")):this.element.classList.remove(De(void 0,"zero"));const e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${e[0]}%`,this.barElement.style.right=100-e[1]+"%",this.knobElements.forEach((t,n)=>{t.style.left=`${e[n]}%`})}onValueChange_(){this.update()}}class Ue{constructor(t,e){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.maxValue_=e.maxValue,this.minValue_=e.minValue,this.viewProps=e.viewProps,this.value=e.value,this.view=new Ie(t,{maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:e.viewProps});const n=new Rt(this.view.trackElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}ofs_(){return"min"===this.grabbing_?this.view.knobElements[0].getBoundingClientRect().width/2:"max"===this.grabbing_?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){return t.point?Lt((t.point.x+this.ofs_())/t.bounds.width,0,1,this.minValue_,this.maxValue_):null}onPointerDown_(t){if(!t.data.point)return;const e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,r=Lt(n.min,this.minValue_,this.maxValue_,0,1),i=Lt(n.max,this.minValue_,this.maxValue_,0,1);Math.abs(i-e)<=.025?this.grabbing_="max":Math.abs(r-e)<=.025?this.grabbing_="min":e>=r&&e<=i?(this.grabbing_="length",this.grabOffset_=Lt(e-r,0,1,0,this.maxValue_-this.minValue_)):e<r?(this.grabbing_="min",this.onPointerMove_(t)):e>i&&(this.grabbing_="max",this.onPointerMove_(t))}applyPointToValue_(t,e){const n=this.valueFromData_(t);if(null!==n)if("min"===this.grabbing_)this.value.setRawValue(new Pe(n,this.value.rawValue.max),e);else if("max"===this.grabbing_)this.value.setRawValue(new Pe(this.value.rawValue.min,n),e);else if("length"===this.grabbing_){const t=this.value.rawValue.length;let r=n-this.grabOffset_,i=r+t;r<this.minValue_?(r=this.minValue_,i=this.minValue_+t):i>this.maxValue_&&(r=this.maxValue_-t,i=this.maxValue_),this.value.setRawValue(new Pe(r,i),e)}}onPointerMove_(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Fe{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new Ue(t,e);const n={baseStep:e.baseStep,constraint:e.constraint,textProps:y.fromObject({draggingScale:e.draggingScale,formatter:e.formatter})};this.tc_=new Ht(t,{assembly:Re,axes:[n,n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new Oe(t,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Ne(t){return Pe.isObject(t)?new Pe(t.min,t.max):new Pe(0,0)}function Be(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function Ve(t){const e=[],n=function(t){return"max"in t&&!i(t.max)||"min"in t&&!i(t.min)?new q({max:t.max,min:t.min}):null}(t);n&&e.push(n);const r=function(t){return"step"in t&&!i(t.step)?new X(t.step):null}(t);return r&&e.push(r),new Le(new W(e))}const ze={id:"input-interval",type:"input",css:".tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}",accept:(t,e)=>{if(!Pe.isObject(t))return null;const n=S,r=M(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,step:n.optional.number});return r?{initialValue:new Pe(t.min,t.max),params:r}:null},binding:{reader:t=>Ne,constraint:t=>Ve(t.params),equals:Pe.equals,writer:t=>Be},controller(t){var e;const n=t.value,r=t.constraint;if(!(r instanceof Le))throw s.shouldNeverHappen();const i=(n.rawValue.min+n.rawValue.max)/2,o=null!==(e=t.params.format)&&void 0!==e?e:yt(function(t,e){const n=t&&K(t,X);return n?kt(n.step):Math.max(kt(e),2)}(r.edge,i)),a=r.edge&&K(r.edge,q);if(void 0!==(null==a?void 0:a.minValue)&&void 0!==(null==a?void 0:a.maxValue))return new Fe(t.document,{baseStep:Nt(r.edge),constraint:r.edge,draggingScale:Bt(a,i),formatter:o,maxValue:a.maxValue,minValue:a.minValue,parser:_t,value:n,viewProps:t.viewProps});const l={baseStep:Nt(r.edge),constraint:r.edge,textProps:y.fromObject({draggingScale:i,formatter:o})};return new Ht(t.document,{assembly:Re,axes:[l,l],parser:_t,value:n,viewProps:t.viewProps})}};class Ge{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}}class He extends r{constructor(t,e,n,r,i){super(t,r,i),this.cell=e,this.index=n}}class je extends e{constructor(t){super(t),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach(t=>{const e=new Ge(t);this.cellToApiMap_.set(t,e)})}get value(){return this.controller_.value}cell(t,e){const n=this.controller_.valueController,r=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(r)}on(t,e){const n=e.bind(this);this.controller_.value.emitter.on(t,t=>{const e=this.controller_.valueController,r=e.findCellByValue(t.rawValue);if(!r)return;const i=this.cellToApiMap_.get(r);if(!i)return;const o=e.cellControllers.indexOf(r);n(new He(this,i,[o%e.size[0],Math.floor(o/e.size[0])],t.rawValue,void 0))})}}const We=u("rad");class Ke{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(We()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(We("l")),this.element.appendChild(n);const r=t.createElement("input");r.classList.add(We("i")),r.name=e.name,r.type="radio",e.viewProps.bindDisabled(r),n.appendChild(r),this.inputElement=r;const i=t.createElement("div");i.classList.add(We("b")),n.appendChild(i);const o=t.createElement("div");o.classList.add(We("t")),i.appendChild(o),d(e.props,"title",t=>{o.textContent=t})}}class qe{constructor(t,e){this.props=e.props,this.viewProps=e.viewProps,this.view=new Ke(t,{name:e.name,props:this.props,viewProps:this.viewProps})}}class Xe{constructor(t,e){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=e.size;const[n,r]=this.size;for(let i=0;i<r;i++)for(let r=0;r<n;r++){const n=new qe(t,{name:e.groupName,props:y.fromObject(Object.assign({},e.cellConfig(r,i))),viewProps:G.create()});this.cellCs_.push(n),this.cellValues_.push(e.cellConfig(r,i).value)}this.value=e.value,h(this.value,t=>{const e=this.findCellByValue(t);e&&(e.view.inputElement.checked=!0)}),this.viewProps=G.create(),this.view=new N(t,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach(t=>{t.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(t.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(t){const e=this.cellValues_.findIndex(e=>e===t);return e<0?null:this.cellCs_[e]}onCellInputChange_(t){const e=t.currentTarget,n=this.cellCs_.findIndex(t=>t.view.inputElement===e);n<0||(this.value.rawValue=this.cellValues_[n])}}const Ye={id:"radiogrid",type:"blade",accept(t){const e=S,n=M(t,{cells:e.required.function,groupName:e.required.string,size:e.required.array(e.required.number),value:e.required.raw,view:e.required.constant("radiogrid"),label:e.optional.string});return n?{params:n}:null},controller:t=>new B(t.document,{blade:t.blade,props:y.fromObject({label:t.params.label}),valueController:new Xe(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:b(t.params.value)})}),api:t=>t.controller instanceof B&&t.controller.valueController instanceof Xe?new je(t.controller):null},$e=[Qt,xe,Ce,ze,Ye,{id:"input-radiogrid",type:"input",accept(t,e){if("number"!=typeof t)return null;const n=S,r=M(e,{cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),view:n.required.constant("radiogrid")});return r?{initialValue:t,params:r}:null},binding:{reader:t=>bt,writer:t=>Ft},controller:t=>new Xe(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})}];t.CubicBezier=re,t.plugins=$e,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1613:function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}n.d(e,{Z:function(){return w}});var i=window.document.documentElement,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;r.prototype.matchesSelector=function(t,e){return o.call(t,e)},r.prototype.querySelectorAll=function(t,e){return e.querySelectorAll(t)},r.prototype.indexes=[];var s=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;r.prototype.indexes.push({name:"ID",selector:function(t){var e;if(e=t.match(s))return e[0].slice(1)},element:function(t){if(t.id)return[t.id]}});var a=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;r.prototype.indexes.push({name:"CLASS",selector:function(t){var e;if(e=t.match(a))return e[0].slice(1)},element:function(t){var e=t.className;if(e){if("string"==typeof e)return e.split(/\s/);if("object"==typeof e&&"baseVal"in e)return e.baseVal.split(/\s/)}}});var l,u=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;r.prototype.indexes.push({name:"TAG",selector:function(t){var e;if(e=t.match(u))return e[0].toUpperCase()},element:function(t){return[t.nodeName.toUpperCase()]}}),r.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},l="function"==typeof window.Map?window.Map:function(){function t(){this.map={}}return t.prototype.get=function(t){return this.map[t+" "]},t.prototype.set=function(t,e){this.map[t+" "]=e},t}();var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function h(t,e){var n,r,i,o,s,a,l=(t=t.slice(0).concat(t.default)).length,u=e,h=[];do{if(c.exec(""),(i=c.exec(u))&&(u=i[3],i[2]||!u))for(n=0;n<l;n++)if(s=(a=t[n]).selector(i[1])){for(r=h.length,o=!1;r--;)if(h[r].index===a&&h[r].key===s){o=!0;break}o||h.push({index:a,key:s});break}}while(i);return h}function d(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],e.isPrototypeOf(i))return i}function p(t,e){return t.id-e.id}r.prototype.logDefaultIndexUsed=function(){},r.prototype.add=function(t,e){var n,r,i,o,s,a,u,c,p=this.activeIndexes,f=this.selectors,m=this.selectorObjects;if("string"==typeof t){for(m[(n={id:this.uid++,selector:t,data:e}).id]=n,u=h(this.indexes,t),r=0;r<u.length;r++)o=(c=u[r]).key,(s=d(p,i=c.index))||((s=Object.create(i)).map=new l,p.push(s)),i===this.indexes.default&&this.logDefaultIndexUsed(n),(a=s.map.get(o))||(a=[],s.map.set(o,a)),a.push(n);this.size++,f.push(t)}},r.prototype.remove=function(t,e){if("string"==typeof t){var n,r,i,o,s,a,l,u,c=this.activeIndexes,d=this.selectors=[],p=this.selectorObjects,f={},m=1===arguments.length;for(n=h(this.indexes,t),i=0;i<n.length;i++)for(r=n[i],o=c.length;o--;)if(a=c[o],r.index.isPrototypeOf(a)){if(l=a.map.get(r.key))for(s=l.length;s--;)(u=l[s]).selector!==t||!m&&u.data!==e||(l.splice(s,1),f[u.id]=!0);break}for(i in f)delete p[i],this.size--;for(i in p)d.push(p[i].selector)}},r.prototype.queryAll=function(t){if(!this.selectors.length)return[];var e,n,r,i,o,s,a,l,u={},c=[],h=this.querySelectorAll(this.selectors.join(", "),t);for(e=0,r=h.length;e<r;e++)for(o=h[e],n=0,i=(s=this.matches(o)).length;n<i;n++)u[(l=s[n]).id]?a=u[l.id]:(a={id:l.id,selector:l.selector,data:l.data,elements:[]},u[l.id]=a,c.push(a)),a.elements.push(o);return c.sort(p)},r.prototype.matches=function(t){if(!t)return[];var e,n,r,i,o,s,a,l,u,c,h,d=this.activeIndexes,f={},m=[];for(e=0,i=d.length;e<i;e++)if(l=(a=d[e]).element(t))for(n=0,o=l.length;n<o;n++)if(u=a.map.get(l[n]))for(r=0,s=u.length;r<s;r++)!f[h=(c=u[r]).id]&&this.matchesSelector(t,c.selector)&&(f[h]=!0,m.push(c));return m.sort(p)};const f={},m={},v=["mouseenter","mouseleave"];function g(t){void 0===m[t]&&(m[t]=[])}function _(t){return"string"==typeof t?document.querySelectorAll(t):t}function b(t){let e=function(t,e){const n=[];let r=e;do{if(1!==r.nodeType)break;const e=t.matches(r);e.length&&n.push({delegatedTarget:r,stack:e})}while(r=r.parentElement);return n}(f[t.type],t.target);if(e.length)for(let n=0;n<e.length;n++)for(let r=0;r<e[n].stack.length;r++)-1!==v.indexOf(t.type)?(y(t,e[n].delegatedTarget),t.target===e[n].delegatedTarget&&e[n].stack[r].data(t)):(y(t,e[n].delegatedTarget),e[n].stack[r].data(t))}function y(t,e){Object.defineProperty(t,"currentTarget",{configurable:!0,enumerable:!0,get:()=>e})}function x(t){return JSON.parse(JSON.stringify(t))}class w{bindAll(t,e){void 0===e&&(e=Object.getOwnPropertyNames(Object.getPrototypeOf(t)));for(let n=0;n<e.length;n++)t[e[n]]=t[e[n]].bind(t)}on(t,e,n,r){if("function"==typeof e&&void 0===n)return g(t),void m[t].push(e);const i=t.split(" ");for(let t=0;t<i.length;t++)if(e.nodeType&&1===e.nodeType||e===window||e===document)e.addEventListener(i[t],n,r);else{e=_(e);for(let o=0;o<e.length;o++)e[o].addEventListener(i[t],n,r)}}delegate(t,e,n){const i=t.split(" ");for(let t=0;t<i.length;t++){let o=f[i[t]];void 0===o&&(o=new r,f[i[t]]=o,-1!==v.indexOf(i[t])?document.addEventListener(i[t],b,!0):document.addEventListener(i[t],b)),o.add(e,n)}}off(t,e,n,r){if(void 0===e)return void(m[t]=[]);if("function"==typeof e){g(t);for(let n=0;n<m[t].length;n++)m[t][n]===e&&m[t].splice(n,1);return}const i=t.split(" ");for(let t=0;t<i.length;t++){const o=f[i[t]];if(void 0===o||(o.remove(e,n),0!==o.size))if(void 0===e.removeEventListener){e=_(e);for(let o=0;o<e.length;o++)e[o].removeEventListener(i[t],n,r)}else e.removeEventListener(i[t],n,r);else delete f[i[t]],document.removeEventListener(i[t],b)}}emit(t,...e){!function(t,e){if(m[t])for(let n=0;n<m[t].length;n++)m[t][n](...e)}(t,e)}debugDelegated(){return x(f)}debugBus(){return x(m)}}},9742:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],l=o[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,l)),c=0,h=l>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===l&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e),1===l&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(l(t,a,a+s>u?u:a+s));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:function(t,e,n){"use strict";var r=n(9742),i=n(645),o=n(7300);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|p(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(u(t,o+d)!==u(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function y(t,e,n,r){return H(z(e,t.length-n),t,n,r)}function x(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function S(t,e,n,r){return H(G(e),t,n,r)}function M(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.lW=l,e.h2=50,l.TYPED_ARRAY_SUPPORT=void 0!==n.g.TYPED_ARRAY_SUPPORT?n.g.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.h2;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=t.slice(e,n),h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return y(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function U(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,o){return o||U(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return o||U(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);O(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);O(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:z(new l(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}},7300:function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},3099:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},6077:function(t,e,n){var r=n(111);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},1223:function(t,e,n){var r=n(5112),i=n(30),o=n(3070),s=r("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},5787:function(t){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},9670:function(t,e,n){var r=n(111);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i=n(4019),o=n(9781),s=n(7854),a=n(111),l=n(6656),u=n(648),c=n(8880),h=n(1320),d=n(3070).f,p=n(9518),f=n(7674),m=n(5112),v=n(9711),g=s.Int8Array,_=g&&g.prototype,b=s.Uint8ClampedArray,y=b&&b.prototype,x=g&&p(g),w=_&&p(_),S=Object.prototype,M=S.isPrototypeOf,T=m("toStringTag"),E=v("TYPED_ARRAY_TAG"),A=i&&!!f&&"Opera"!==u(s.opera),C=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R={BigInt64Array:8,BigUint64Array:8},L=function(t){if(!a(t))return!1;var e=u(t);return l(P,e)||l(R,e)};for(r in P)s[r]||(A=!1);if((!A||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},A))for(r in P)s[r]&&f(s[r],x);if((!A||!w||w===S)&&(w=x.prototype,A))for(r in P)s[r]&&f(s[r].prototype,w);if(A&&p(y)!==w&&f(y,w),o&&!l(w,T))for(r in C=!0,d(w,T,{get:function(){return a(this)?this[E]:void 0}}),P)s[r]&&c(s[r],E,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:C&&E,aTypedArray:function(t){if(L(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(f){if(M.call(x,t))return t}else for(var e in P)if(l(P,r)){var n=s[e];if(n&&(t===n||M.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(o){if(n)for(var r in P){var i=s[r];if(i&&l(i.prototype,t))try{delete i.prototype[t]}catch(t){}}w[t]&&!n||h(w,t,n?e:A&&_[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(o){if(f){if(n)for(r in P)if((i=s[r])&&l(i,t))try{delete i[t]}catch(t){}if(x[t]&&!n)return;try{return h(x,t,n?e:A&&x[t]||e)}catch(t){}}for(r in P)!(i=s[r])||i[t]&&!n||h(i,t,e)}},isView:function(t){if(!a(t))return!1;var e=u(t);return"DataView"===e||l(P,e)||l(R,e)},isTypedArray:L,TypedArray:x,TypedArrayPrototype:w}},3331:function(t,e,n){"use strict";var r=n(7854),i=n(9781),o=n(4019),s=n(8880),a=n(2248),l=n(7293),u=n(5787),c=n(9958),h=n(7466),d=n(7067),p=n(1179),f=n(9518),m=n(7674),v=n(8006).f,g=n(3070).f,_=n(1285),b=n(8003),y=n(9909),x=y.get,w=y.set,S="ArrayBuffer",M="DataView",T="Wrong index",E=r.ArrayBuffer,A=E,C=r.DataView,P=C&&C.prototype,R=Object.prototype,L=r.RangeError,k=p.pack,O=p.unpack,D=function(t){return[255&t]},I=function(t){return[255&t,t>>8&255]},U=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},F=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},N=function(t){return k(t,23,4)},B=function(t){return k(t,52,8)},V=function(t,e){g(t.prototype,e,{get:function(){return x(this)[e]}})},z=function(t,e,n,r){var i=d(n),o=x(t);if(i+e>o.byteLength)throw L(T);var s=x(o.buffer).bytes,a=i+o.byteOffset,l=s.slice(a,a+e);return r?l:l.reverse()},G=function(t,e,n,r,i,o){var s=d(n),a=x(t);if(s+e>a.byteLength)throw L(T);for(var l=x(a.buffer).bytes,u=s+a.byteOffset,c=r(+i),h=0;h<e;h++)l[u+h]=c[o?h:e-h-1]};if(o){if(!l(function(){E(1)})||!l(function(){new E(-1)})||l(function(){return new E,new E(1.5),new E(NaN),E.name!=S})){for(var H,j=(A=function(t){return u(this,A),new E(d(t))}).prototype=E.prototype,W=v(E),K=0;W.length>K;)(H=W[K++])in A||s(A,H,E[H]);j.constructor=A}m&&f(P)!==R&&m(P,R);var q=new C(new A(2)),X=P.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||a(P,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},{unsafe:!0})}else A=function(t){u(this,A,S);var e=d(t);w(this,{bytes:_.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},C=function(t,e,n){u(this,C,M),u(t,A,M);var r=x(t).byteLength,o=c(e);if(o<0||o>r)throw L("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw L("Wrong length");w(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(V(A,"byteLength"),V(C,"buffer"),V(C,"byteLength"),V(C,"byteOffset")),a(C.prototype,{getInt8:function(t){return z(this,1,t)[0]<<24>>24},getUint8:function(t){return z(this,1,t)[0]},getInt16:function(t){var e=z(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=z(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return F(z(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return F(z(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return O(z(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return O(z(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){G(this,1,t,D,e)},setUint8:function(t,e){G(this,1,t,D,e)},setInt16:function(t,e){G(this,2,t,I,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){G(this,2,t,I,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){G(this,4,t,U,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){G(this,4,t,U,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){G(this,4,t,N,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){G(this,8,t,B,e,arguments.length>2?arguments[2]:void 0)}});b(A,S),b(C,M),t.exports={ArrayBuffer:A,DataView:C}},1285:function(t,e,n){"use strict";var r=n(7908),i=n(1400),o=n(7466);t.exports=function(t){for(var e=r(this),n=o(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,u=void 0===l?n:i(l,n);u>a;)e[a++]=t;return e}},8457:function(t,e,n){"use strict";var r=n(9974),i=n(7908),o=n(3411),s=n(7659),a=n(7466),l=n(6135),u=n(1246);t.exports=function(t){var e,n,c,h,d,p,f=i(t),m="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,_=void 0!==g,b=u(f),y=0;if(_&&(g=r(g,v>2?arguments[2]:void 0,2)),null==b||m==Array&&s(b))for(n=new m(e=a(f.length));e>y;y++)p=_?g(f[y],y):f[y],l(n,y,p);else for(d=(h=b.call(f)).next,n=new m;!(c=d.call(h)).done;y++)p=_?o(h,g,[c.value,y],!0):c.value,l(n,y,p);return n.length=y,n}},1318:function(t,e,n){var r=n(5656),i=n(7466),o=n(1400),s=function(t){return function(e,n,s){var a,l=r(e),u=i(l.length),c=o(s,u);if(t&&n!=n){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2092:function(t,e,n){var r=n(9974),i=n(8361),o=n(7908),s=n(7466),a=n(5417),l=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,c=4==t,h=6==t,d=7==t,p=5==t||h;return function(f,m,v,g){for(var _,b,y=o(f),x=i(y),w=r(m,v,3),S=s(x.length),M=0,T=g||a,E=e?T(f,S):n||d?T(f,0):void 0;S>M;M++)if((p||M in x)&&(b=w(_=x[M],M,y),t))if(e)E[M]=b;else if(b)switch(t){case 3:return!0;case 5:return _;case 6:return M;case 2:l.call(E,_)}else switch(t){case 4:return!1;case 7:l.call(E,_)}return h?-1:u||c?c:E}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},5417:function(t,e,n){var r=n(111),i=n(3157),o=n(5112)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},3411:function(t,e,n){var r=n(9670),i=n(9212);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}},7072:function(t,e,n){var r=n(5112)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},4326:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:function(t,e,n){var r=n(1694),i=n(4326),o=n(5112)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},9920:function(t,e,n){var r=n(6656),i=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e){for(var n=i(e),a=s.f,l=o.f,u=0;u<n.length;u++){var c=n[u];r(t,c)||a(t,c,l(e,c))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},4994:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),o=n(9114),s=n(8003),a=n(7497),l=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),s(t,u,!1,!0),a[u]=l,t}},8880:function(t,e,n){var r=n(9781),i=n(3070),o=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(7593),i=n(3070),o=n(9114);t.exports=function(t,e,n){var s=r(e);s in t?i.f(t,s,o(0,n)):t[s]=n}},654:function(t,e,n){"use strict";var r=n(2109),i=n(4994),o=n(9518),s=n(7674),a=n(8003),l=n(8880),u=n(1320),c=n(5112),h=n(1913),d=n(7497),p=n(3383),f=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,v=c("iterator"),g="keys",_="values",b="entries",y=function(){return this};t.exports=function(t,e,n,c,p,x,w){i(n,e,c);var S,M,T,E=function(t){if(t===p&&L)return L;if(!m&&t in P)return P[t];switch(t){case g:case _:case b:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",C=!1,P=t.prototype,R=P[v]||P["@@iterator"]||p&&P[p],L=!m&&R||E(p),k="Array"==e&&P.entries||R;if(k&&(S=o(k.call(new t)),f!==Object.prototype&&S.next&&(h||o(S)===f||(s?s(S,f):"function"!=typeof S[v]&&l(S,v,y)),a(S,A,!0,!0),h&&(d[A]=y))),p==_&&R&&R.name!==_&&(C=!0,L=function(){return R.call(this)}),h&&!w||P[v]===L||l(P,v,L),d[e]=L,p)if(M={values:E(_),keys:x?L:E(g),entries:E(b)},w)for(T in M)(m||C||!(T in P))&&u(P,T,M[T]);else r({target:e,proto:!0,forced:m||C},M);return M}},9781:function(t,e,n){var r=n(7293);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(t,e,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},5268:function(t,e,n){var r=n(4326),i=n(7854);t.exports="process"==r(i.process)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,i,o=n(7854),s=n(8113),a=o.process,l=a&&a.versions,u=l&&l.v8;u?i=(r=u.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(1320),a=n(3505),l=n(9920),u=n(4705);t.exports=function(t,e){var n,c,h,d,p,f=t.target,m=t.global,v=t.stat;if(n=m?r:v?r[f]||a(f,{}):(r[f]||{}).prototype)for(c in e){if(d=e[c],h=t.noTargetGet?(p=i(n,c))&&p.value:n[c],!u(m?c:f+(v?".":"#")+c,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(t.sham||h&&h.sham)&&o(d,"sham",!0),s(n,c,d,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,n){"use strict";n(4916);var r=n(1320),i=n(7293),o=n(5112),s=n(8880),a=o("species"),l=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),u="$0"==="a".replace(/./,"$0"),c=o("replace"),h=!!/./[c]&&""===/./[c]("a","$0"),d=!i(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});t.exports=function(t,e,n,c){var p=o(t),f=!i(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),m=f&&!i(function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[a]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e});if(!f||!m||"replace"===t&&(!l||!u||h)||"split"===t&&!d){var v=/./[p],g=n(p,""[t],function(t,e,n,r,i){return e.exec===RegExp.prototype.exec?f&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}},{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),_=g[0],b=g[1];r(String.prototype,t,_),r(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}c&&s(RegExp.prototype[p],"sham",!0)}},9974:function(t,e,n){var r=n(3099);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},5005:function(t,e,n){var r=n(857),i=n(7854),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},1246:function(t,e,n){var r=n(648),i=n(7497),o=n(5112)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},8554:function(t,e,n){var r=n(9670),i=n(1246);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},647:function(t,e,n){var r=n(7908),i=Math.floor,o="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,l,u,c){var h=n+t.length,d=l.length,p=a;return void 0!==u&&(u=r(u),p=s),o.call(c,p,function(r,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":s=u[o.slice(1,-1)];break;default:var a=+o;if(0===a)return r;if(a>d){var c=i(a/10);return 0===c?r:c<=d?void 0===l[c-1]?o.charAt(1):l[c-1]+o.charAt(1):r}s=l[a-1]}return void 0===s?"":s})}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(t,e,n){var r=n(7908),i={}.hasOwnProperty;t.exports=function(t,e){return i.call(r(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),i=n(7293),o=n(317);t.exports=!r&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},1179:function(t){var e=Math.abs,n=Math.pow,r=Math.floor,i=Math.log,o=Math.LN2;t.exports={pack:function(t,s,a){var l,u,c,h=new Array(a),d=8*a-s-1,p=(1<<d)-1,f=p>>1,m=23===s?n(2,-24)-n(2,-77):0,v=t<0||0===t&&1/t<0?1:0,g=0;for((t=e(t))!=t||t===1/0?(u=t!=t?1:0,l=p):(l=r(i(t)/o),t*(c=n(2,-l))<1&&(l--,c*=2),(t+=l+f>=1?m/c:m*n(2,1-f))*c>=2&&(l++,c/=2),l+f>=p?(u=0,l=p):l+f>=1?(u=(t*c-1)*n(2,s),l+=f):(u=t*n(2,f-1)*n(2,s),l=0));s>=8;h[g++]=255&u,u/=256,s-=8);for(l=l<<s|u,d+=s;d>0;h[g++]=255&l,l/=256,d-=8);return h[--g]|=128*v,h},unpack:function(t,e){var r,i=t.length,o=8*i-e-1,s=(1<<o)-1,a=s>>1,l=o-7,u=i-1,c=t[u--],h=127&c;for(c>>=7;l>0;h=256*h+t[u],u--,l-=8);for(r=h&(1<<-l)-1,h>>=-l,l+=e;l>0;r=256*r+t[u],u--,l-=8);if(0===h)h=1-a;else{if(h===s)return r?NaN:c?-1/0:1/0;r+=n(2,e),h-=a}return(c?-1:1)*r*n(2,h-e)}}},8361:function(t,e,n){var r=n(7293),i=n(4326),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},9587:function(t,e,n){var r=n(111),i=n(7674);t.exports=function(t,e,n){var o,s;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&i(t,s),t}},2788:function(t,e,n){var r=n(5465),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},9909:function(t,e,n){var r,i,o,s=n(8536),a=n(7854),l=n(111),u=n(8880),c=n(6656),h=n(5465),d=n(6200),p=n(3501),f="Object already initialized",m=a.WeakMap;if(s){var v=h.state||(h.state=new m),g=v.get,_=v.has,b=v.set;r=function(t,e){if(_.call(v,t))throw new TypeError(f);return e.facade=t,b.call(v,t,e),e},i=function(t){return g.call(v,t)||{}},o=function(t){return _.call(v,t)}}else{var y=d("state");p[y]=!0,r=function(t,e){if(c(t,y))throw new TypeError(f);return e.facade=t,u(t,y,e),e},i=function(t){return c(t,y)?t[y]:{}},o=function(t){return c(t,y)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),i=n(7497),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4705:function(t,e,n){var r=n(7293),i=/#|\.prototype\./,o=function(t,e){var n=a[s(t)];return n==u||n!=l&&("function"==typeof e?r(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},111:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:function(t){t.exports=!1},9212:function(t,e,n){var r=n(9670);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},3383:function(t,e,n){"use strict";var r,i,o,s=n(7293),a=n(9518),l=n(8880),u=n(6656),c=n(5112),h=n(1913),d=c("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):p=!0);var f=null==r||s(function(){var t={};return r[d].call(t)!==t});f&&(r={}),h&&!f||u(r,d)||l(r,d,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},7497:function(t){t.exports={}},133:function(t,e,n){var r=n(5268),i=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!Symbol.sham&&(r?38===i:i>37&&i<41)})},590:function(t,e,n){var r=n(7293),i=n(5112),o=n(1913),s=i("iterator");t.exports=!r(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach(function(t,r){e.delete("b"),n+=r+t}),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},8536:function(t,e,n){var r=n(7854),i=n(2788),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},1574:function(t,e,n){"use strict";var r=n(9781),i=n(7293),o=n(1956),s=n(5181),a=n(5296),l=n(7908),u=n(8361),c=Object.assign,h=Object.defineProperty;t.exports=!c||i(function(){if(r&&1!==c({b:1},c(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||o(c({},e)).join("")!=i})?function(t,e){for(var n=l(t),i=arguments.length,c=1,h=s.f,d=a.f;i>c;)for(var p,f=u(arguments[c++]),m=h?o(f).concat(h(f)):o(f),v=m.length,g=0;v>g;)p=m[g++],r&&!d.call(f,p)||(n[p]=f[p]);return n}:c},30:function(t,e,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),l=n(490),u=n(317),c=n(6200)("IE_PROTO"),h=function(){},d=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=u("iframe")).style.display="none",l.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var n=s.length;n--;)delete p.prototype[s[n]];return p()};a[c]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[c]=t):n=p(),void 0===e?n:o(n,e)}},6048:function(t,e,n){var r=n(9781),i=n(3070),o=n(9670),s=n(1956);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=s(e),a=r.length,l=0;a>l;)i.f(t,n=r[l++],e[n]);return t}},3070:function(t,e,n){var r=n(9781),i=n(4664),o=n(9670),s=n(7593),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(o(t),e=s(e,!0),o(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),i=n(5296),o=n(9114),s=n(5656),a=n(7593),l=n(6656),u=n(4664),c=Object.getOwnPropertyDescriptor;e.f=r?c:function(t,e){if(t=s(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(l(t,e))return o(!i.f.call(t,e),t[e])}},8006:function(t,e,n){var r=n(6324),i=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(6656),i=n(7908),o=n(6200),s=n(8544),a=o("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},6324:function(t,e,n){var r=n(6656),i=n(5656),o=n(1318).indexOf,s=n(3501);t.exports=function(t,e){var n,a=i(t),l=0,u=[];for(n in a)!r(s,n)&&r(a,n)&&u.push(n);for(;e.length>l;)r(a,n=e[l++])&&(~o(u,n)||u.push(n));return u}},1956:function(t,e,n){var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},3887:function(t,e,n){var r=n(5005),i=n(8006),o=n(5181),s=n(9670);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2248:function(t,e,n){var r=n(1320);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},1320:function(t,e,n){var r=n(7854),i=n(8880),o=n(6656),s=n(3505),a=n(2788),l=n(9909),u=l.get,c=l.enforce,h=String(String).split("String");(t.exports=function(t,e,n,a){var l,u=!!a&&!!a.unsafe,d=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(l=c(n)).source||(l.source=h.join("string"==typeof e?e:""))),t!==r?(u?!p&&t[e]&&(d=!0):delete t[e],d?t[e]=n:i(t,e,n)):d?t[e]=n:s(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&u(this).source||a(this)})},7651:function(t,e,n){var r=n(4326),i=n(2261);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},2261:function(t,e,n){"use strict";var r,i,o=n(7066),s=n(2999),a=n(2309),l=RegExp.prototype.exec,u=a("native-string-replace",String.prototype.replace),c=l,h=(r=/a/,i=/b*/g,l.call(r,"a"),l.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),d=s.UNSUPPORTED_Y||s.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(h||p||d)&&(c=function(t){var e,n,r,i,s=this,a=d&&s.sticky,c=o.call(s),f=s.source,m=0,v=t;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),v=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(f="(?: "+f+")",v=" "+v,m++),n=new RegExp("^(?:"+f+")",c)),p&&(n=new RegExp("^"+f+"$(?!\\s)",c)),h&&(e=s.lastIndex),r=l.call(a?n:s,v),a?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:h&&r&&(s.lastIndex=s.global?r.index+r[0].length:e),p&&r&&r.length>1&&u.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=c},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},2999:function(t,e,n){"use strict";var r=n(7293);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r(function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),e.BROKEN_CARET=r(function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},4488:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:function(t,e,n){var r=n(7854),i=n(8880);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},6340:function(t,e,n){"use strict";var r=n(5005),i=n(3070),o=n(5112),s=n(9781),a=o("species");t.exports=function(t){var e=r(t),n=i.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,i=n(6656),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),i=n(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){var r=n(7854),i=n(3505),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},2309:function(t,e,n){var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.11.2",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},8710:function(t,e,n){var r=n(9958),i=n(4488),o=function(t){return function(e,n){var o,s,a=String(i(e)),l=r(n),u=a.length;return l<0||l>=u?t?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},3197:function(t){"use strict";var e=2147483647,n=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",o=Math.floor,s=String.fromCharCode,a=function(t){return t+22+75*(t<26)},l=function(t,e,n){var r=0;for(t=n?o(t/700):t>>1,t+=o(t/e);t>455;r+=36)t=o(t/35);return o(r+36*t/(t+38))},u=function(t){var n=[];t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t);var r,u,c=t.length,h=128,d=0,p=72;for(r=0;r<t.length;r++)(u=t[r])<128&&n.push(s(u));var f=n.length,m=f;for(f&&n.push("-");m<c;){var v=e;for(r=0;r<t.length;r++)(u=t[r])>=h&&u<v&&(v=u);var g=m+1;if(v-h>o((e-d)/g))throw RangeError(i);for(d+=(v-h)*g,h=v,r=0;r<t.length;r++){if((u=t[r])<h&&++d>e)throw RangeError(i);if(u==h){for(var _=d,b=36;;b+=36){var y=b<=p?1:b>=p+26?26:b-p;if(_<y)break;var x=_-y,w=36-y;n.push(s(a(y+x%w))),_=o(x/w)}n.push(s(a(_))),p=l(d,g,m==f),d=0,++m}}++d,++h}return n.join("")};t.exports=function(t){var e,i,o=[],s=t.toLowerCase().replace(r,".").split(".");for(e=0;e<s.length;e++)i=s[e],o.push(n.test(i)?"xn--"+u(i):i);return o.join(".")}},1400:function(t,e,n){var r=n(9958),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},7067:function(t,e,n){var r=n(9958),i=n(7466);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},5656:function(t,e,n){var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9958:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},7466:function(t,e,n){var r=n(9958),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488);t.exports=function(t){return Object(r(t))}},4590:function(t,e,n){var r=n(3002);t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},3002:function(t,e,n){var r=n(9958);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},7593:function(t,e,n){var r=n(111);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},9843:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(9781),s=n(3832),a=n(260),l=n(3331),u=n(5787),c=n(9114),h=n(8880),d=n(7466),p=n(7067),f=n(4590),m=n(7593),v=n(6656),g=n(648),_=n(111),b=n(30),y=n(7674),x=n(8006).f,w=n(7321),S=n(2092).forEach,M=n(6340),T=n(3070),E=n(1236),A=n(9909),C=n(9587),P=A.get,R=A.set,L=T.f,k=E.f,O=Math.round,D=i.RangeError,I=l.ArrayBuffer,U=l.DataView,F=a.NATIVE_ARRAY_BUFFER_VIEWS,N=a.TYPED_ARRAY_TAG,B=a.TypedArray,V=a.TypedArrayPrototype,z=a.aTypedArrayConstructor,G=a.isTypedArray,H="BYTES_PER_ELEMENT",j="Wrong length",W=function(t,e){for(var n=0,r=e.length,i=new(z(t))(r);r>n;)i[n]=e[n++];return i},K=function(t,e){L(t,e,{get:function(){return P(this)[e]}})},q=function(t){var e;return t instanceof I||"ArrayBuffer"==(e=g(t))||"SharedArrayBuffer"==e},X=function(t,e){return G(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Y=function(t,e){return X(t,e=m(e,!0))?c(2,t[e]):k(t,e)},$=function(t,e,n){return!(X(t,e=m(e,!0))&&_(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?L(t,e,n):(t[e]=n.value,t)};o?(F||(E.f=Y,T.f=$,K(V,"buffer"),K(V,"byteOffset"),K(V,"byteLength"),K(V,"length")),r({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:Y,defineProperty:$}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,a=t+(n?"Clamped":"")+"Array",l="get"+t,c="set"+t,m=i[a],v=m,g=v&&v.prototype,T={},E=function(t,e){L(t,e,{get:function(){return function(t,e){var n=P(t);return n.view[l](e*o+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=P(t);n&&(r=(r=O(r))<0?0:r>255?255:255&r),i.view[c](e*o+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};F?s&&(v=e(function(t,e,n,r){return u(t,v,a),C(_(e)?q(e)?void 0!==r?new m(e,f(n,o),r):void 0!==n?new m(e,f(n,o)):new m(e):G(e)?W(v,e):w.call(v,e):new m(p(e)),t,v)}),y&&y(v,B),S(x(m),function(t){t in v||h(v,t,m[t])}),v.prototype=g):(v=e(function(t,e,n,r){u(t,v,a);var i,s,l,c=0,h=0;if(_(e)){if(!q(e))return G(e)?W(v,e):w.call(v,e);i=e,h=f(n,o);var m=e.byteLength;if(void 0===r){if(m%o)throw D(j);if((s=m-h)<0)throw D(j)}else if((s=d(r)*o)+h>m)throw D(j);l=s/o}else l=p(e),i=new I(s=l*o);for(R(t,{buffer:i,byteOffset:h,byteLength:s,length:l,view:new U(i)});c<l;)E(t,c++)}),y&&y(v,B),g=v.prototype=b(V)),g.constructor!==v&&h(g,"constructor",v),N&&h(g,N,a),T[a]=v,r({global:!0,forced:v!=m,sham:!F},T),H in v||h(v,H,o),H in g||h(g,H,o),M(a)}):t.exports=function(){}},3832:function(t,e,n){var r=n(7854),i=n(7293),o=n(7072),s=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,l=r.Int8Array;t.exports=!s||!i(function(){l(1)})||!i(function(){new l(-1)})||!o(function(t){new l,new l(null),new l(1.5),new l(t)},!0)||i(function(){return 1!==new l(new a(2),1,void 0).length})},7321:function(t,e,n){var r=n(7908),i=n(7466),o=n(1246),s=n(7659),a=n(9974),l=n(260).aTypedArrayConstructor;t.exports=function(t){var e,n,u,c,h,d,p=r(t),f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=o(p);if(null!=g&&!s(g))for(d=(h=g.call(p)).next,p=[];!(c=d.call(h)).done;)p.push(c.value);for(v&&f>2&&(m=a(m,arguments[2],2)),n=i(p.length),u=new(l(this))(n),e=0;n>e;e++)u[e]=v?m(p[e],e):p[e];return u}},9711:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(t,e,n){var r=n(7854),i=n(2309),o=n(6656),s=n(9711),a=n(133),l=n(3307),u=i("wks"),c=r.Symbol,h=l?c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)&&(a||"string"==typeof u[t])||(a&&o(c,t)?u[t]=c[t]:u[t]=h("Symbol."+t)),u[t]}},6992:function(t,e,n){"use strict";var r=n(5656),i=n(1223),o=n(7497),s=n(9909),a=n(654),l="Array Iterator",u=s.set,c=s.getterFor(l);t.exports=a(Array,"Array",function(t,e){u(this,{type:l,target:r(t),index:0,kind:e})},function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},4916:function(t,e,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,i=n(9909),o=n(654),s="String Iterator",a=i.set,l=i.getterFor(s);o(String,"String",function(t){a(this,{type:s,string:String(t),index:0})},function(){var t,e=l(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})})},5306:function(t,e,n){"use strict";var r=n(7007),i=n(9670),o=n(7466),s=n(9958),a=n(4488),l=n(1530),u=n(647),c=n(7651),h=Math.max,d=Math.min;r("replace",2,function(t,e,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=r.REPLACE_KEEPS_$0,m=p?"$":"$0";return[function(n,r){var i=a(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!p&&f||"string"==typeof r&&-1===r.indexOf(m)){var a=n(e,t,this,r);if(a.done)return a.value}var v=i(t),g=String(this),_="function"==typeof r;_||(r=String(r));var b=v.global;if(b){var y=v.unicode;v.lastIndex=0}for(var x=[];;){var w=c(v,g);if(null===w)break;if(x.push(w),!b)break;""===String(w[0])&&(v.lastIndex=l(g,o(v.lastIndex),y))}for(var S,M="",T=0,E=0;E<x.length;E++){w=x[E];for(var A=String(w[0]),C=h(d(s(w.index),g.length),0),P=[],R=1;R<w.length;R++)P.push(void 0===(S=w[R])?S:String(S));var L=w.groups;if(_){var k=[A].concat(P,C,g);void 0!==L&&k.push(L);var O=String(r.apply(void 0,k))}else O=u(A,g,C,P,L,r);C>=T&&(M+=g.slice(T,C)+O,T=C+A.length)}return M+g.slice(T)}]})},4197:function(t,e,n){n(9843)("Float32",function(t){return function(e,n,r){return t(this,e,n,r)}})},5109:function(t,e,n){n(9843)("Int16",function(t){return function(e,n,r){return t(this,e,n,r)}})},5125:function(t,e,n){n(9843)("Int32",function(t){return function(e,n,r){return t(this,e,n,r)}})},7145:function(t,e,n){n(9843)("Int8",function(t){return function(e,n,r){return t(this,e,n,r)}})},3824:function(t,e,n){"use strict";var r=n(260),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=[].sort;o("sort",function(t){return s.call(i(this),t)})},8255:function(t,e,n){n(9843)("Uint16",function(t){return function(e,n,r){return t(this,e,n,r)}})},9135:function(t,e,n){n(9843)("Uint32",function(t){return function(e,n,r){return t(this,e,n,r)}})},2472:function(t,e,n){n(9843)("Uint8",function(t){return function(e,n,r){return t(this,e,n,r)}})},3948:function(t,e,n){var r=n(7854),i=n(8324),o=n(6992),s=n(8880),a=n(5112),l=a("iterator"),u=a("toStringTag"),c=o.values;for(var h in i){var d=r[h],p=d&&d.prototype;if(p){if(p[l]!==c)try{s(p,l,c)}catch(t){p[l]=c}if(p[u]||s(p,u,h),i[h])for(var f in o)if(p[f]!==o[f])try{s(p,f,o[f])}catch(t){p[f]=o[f]}}}},1637:function(t,e,n){"use strict";n(6992);var r=n(2109),i=n(5005),o=n(590),s=n(1320),a=n(2248),l=n(8003),u=n(4994),c=n(9909),h=n(5787),d=n(6656),p=n(9974),f=n(648),m=n(9670),v=n(111),g=n(30),_=n(9114),b=n(8554),y=n(1246),x=n(5112),w=i("fetch"),S=i("Headers"),M=x("iterator"),T="URLSearchParams",E="URLSearchParamsIterator",A=c.set,C=c.getterFor(T),P=c.getterFor(E),R=/\+/g,L=Array(4),k=function(t){return L[t-1]||(L[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},O=function(t){try{return decodeURIComponent(t)}catch(e){return t}},D=function(t){var e=t.replace(R," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(k(n--),O);return e}},I=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(t){return U[t]},N=function(t){return encodeURIComponent(t).replace(I,F)},B=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:D(r.shift()),value:D(r.join("="))}))},V=function(t){this.entries.length=0,B(this.entries,t)},z=function(t,e){if(t<e)throw TypeError("Not enough arguments")},G=u(function(t,e){A(this,{type:E,iterator:b(C(t).entries),kind:e})},"Iterator",function(){var t=P(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),H=function(){h(this,H,T);var t,e,n,r,i,o,s,a,l,u=arguments.length>0?arguments[0]:void 0,c=[];if(A(this,{type:T,entries:c,updateURL:function(){},updateSearchParams:V}),void 0!==u)if(v(u))if("function"==typeof(t=y(u)))for(n=(e=t.call(u)).next;!(r=n.call(e)).done;){if((s=(o=(i=b(m(r.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");c.push({key:s.value+"",value:a.value+""})}else for(l in u)d(u,l)&&c.push({key:l,value:u[l]+""});else B(c,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},j=H.prototype;a(j,{append:function(t,e){z(arguments.length,2);var n=C(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){z(arguments.length,1);for(var e=C(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){z(arguments.length,1);for(var e=C(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){z(arguments.length,1);for(var e=C(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){z(arguments.length,1);for(var e=C(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){z(arguments.length,1);for(var n,r=C(this),i=r.entries,o=!1,s=t+"",a=e+"",l=0;l<i.length;l++)(n=i[l]).key===s&&(o?i.splice(l--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var t,e,n,r=C(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=C(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new G(this,"keys")},values:function(){return new G(this,"values")},entries:function(){return new G(this,"entries")}},{enumerable:!0}),s(j,M,j.entries),s(j,"toString",function(){for(var t,e=C(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(N(t.key)+"="+N(t.value));return n.join("&")},{enumerable:!0}),l(H,T),r({global:!0,forced:!o},{URLSearchParams:H}),o||"function"!=typeof w||"function"!=typeof S||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(v(e=arguments[1])&&(n=e.body,f(n)===T&&((r=e.headers?new S(e.headers):new S).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=g(e,{body:_(0,String(n)),headers:_(0,r)}))),i.push(e)),w.apply(this,i)}}),t.exports={URLSearchParams:H,getState:C}},285:function(t,e,n){"use strict";n(8783);var r,i=n(2109),o=n(9781),s=n(590),a=n(7854),l=n(6048),u=n(1320),c=n(5787),h=n(6656),d=n(1574),p=n(8457),f=n(8710).codeAt,m=n(3197),v=n(8003),g=n(1637),_=n(9909),b=a.URL,y=g.URLSearchParams,x=g.getState,w=_.set,S=_.getterFor("URL"),M=Math.floor,T=Math.pow,E="Invalid scheme",A="Invalid host",C="Invalid port",P=/[A-Za-z]/,R=/[\d+-.A-Za-z]/,L=/\d/,k=/^(0x|0X)/,O=/^[0-7]+$/,D=/^\d+$/,I=/^[\dA-Fa-f]+$/,U=/[\0\t\n\r #%/:?@[\\]]/,F=/[\0\t\n\r #/:?@[\\]]/,N=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\t\n\r]/g,V=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return A;if(!(n=G(e.slice(1,-1))))return A;t.host=n}else if($(t)){if(e=m(e),U.test(e))return A;if(null===(n=z(e)))return A;t.host=n}else{if(F.test(e))return A;for(n="",r=p(e),i=0;i<r.length;i++)n+=X(r[i],j);t.host=n}},z=function(t){var e,n,r,i,o,s,a,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(e=l.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=l[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=k.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?D:8==o?O:I).test(i))return t;s=parseInt(i,o)}n.push(s)}for(r=0;r<e;r++)if(s=n[r],r==e-1){if(s>=T(256,5-e))return null}else if(s>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*T(256,3-r);return a},G=function(t){var e,n,r,i,o,s,a,l=[0,0,0,0,0,0,0,0],u=0,c=null,h=0,d=function(){return t.charAt(h)};if(":"==d()){if(":"!=t.charAt(1))return;h+=2,c=++u}for(;d();){if(8==u)return;if(":"!=d()){for(e=n=0;n<4&&I.test(d());)e=16*e+parseInt(d(),16),h++,n++;if("."==d()){if(0==n)return;if(h-=n,u>6)return;for(r=0;d();){if(i=null,r>0){if(!("."==d()&&r<4))return;h++}if(!L.test(d()))return;for(;L.test(d());){if(o=parseInt(d(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}l[u]=256*l[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;l[u++]=e}else{if(null!==c)return;h++,c=++u}}if(null!==c)for(s=u-c,u=7;0!=u&&s>0;)a=l[u],l[u--]=l[c+s-1],l[c+--s]=a;else if(8!=u)return;return l},H=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=M(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},j={},W=d({},j,{" ":1,'"':1,"<":1,">":1,"`":1}),K=d({},W,{"#":1,"?":1,"{":1,"}":1}),q=d({},K,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),X=function(t,e){var n=f(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(t){return h(Y,t.scheme)},Z=function(t){return""!=t.username||""!=t.password},J=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Q=function(t,e){var n;return 2==t.length&&P.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},tt=function(t){var e;return t.length>1&&Q(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},et=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&Q(e[0],!0)||e.pop()},nt=function(t){return"."===t||"%2e"===t.toLowerCase()},rt={},it={},ot={},st={},at={},lt={},ut={},ct={},ht={},dt={},pt={},ft={},mt={},vt={},gt={},_t={},bt={},yt={},xt={},wt={},St={},Mt=function(t,e,n,i){var o,s,a,l,u,c=n||rt,d=0,f="",m=!1,v=!1,g=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(N,"")),e=e.replace(B,""),o=p(e);d<=o.length;){switch(s=o[d],c){case rt:if(!s||!P.test(s)){if(n)return E;c=ot;continue}f+=s.toLowerCase(),c=it;break;case it:if(s&&(R.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(n)return E;f="",c=ot,d=0;continue}if(n&&($(t)!=h(Y,f)||"file"==f&&(Z(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,n)return void($(t)&&Y[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?c=vt:$(t)&&i&&i.scheme==t.scheme?c=st:$(t)?c=ct:"/"==o[d+1]?(c=at,d++):(t.cannotBeABaseURL=!0,t.path.push(""),c=xt)}break;case ot:if(!i||i.cannotBeABaseURL&&"#"!=s)return E;if(i.cannotBeABaseURL&&"#"==s){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,c=St;break}c="file"==i.scheme?vt:lt;continue;case st:if("/"!=s||"/"!=o[d+1]){c=lt;continue}c=ht,d++;break;case at:if("/"==s){c=dt;break}c=yt;continue;case lt:if(t.scheme=i.scheme,s==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==s||"\\"==s&&$(t))c=ut;else if("?"==s)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",c=wt;else{if("#"!=s){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),c=yt;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=St}break;case ut:if(!$(t)||"/"!=s&&"\\"!=s){if("/"!=s){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,c=yt;continue}c=dt}else c=ht;break;case ct:if(c=ht,"/"!=s||"/"!=f.charAt(d+1))continue;d++;break;case ht:if("/"!=s&&"\\"!=s){c=dt;continue}break;case dt:if("@"==s){m&&(f="%40"+f),m=!0,a=p(f);for(var _=0;_<a.length;_++){var b=a[_];if(":"!=b||g){var y=X(b,q);g?t.password+=y:t.username+=y}else g=!0}f=""}else if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&$(t)){if(m&&""==f)return"Invalid authority";d-=p(f).length+1,f="",c=pt}else f+=s;break;case pt:case ft:if(n&&"file"==t.scheme){c=_t;continue}if(":"!=s||v){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&$(t)){if($(t)&&""==f)return A;if(n&&""==f&&(Z(t)||null!==t.port))return;if(l=V(t,f))return l;if(f="",c=bt,n)return;continue}"["==s?v=!0:"]"==s&&(v=!1),f+=s}else{if(""==f)return A;if(l=V(t,f))return l;if(f="",c=mt,n==ft)return}break;case mt:if(!L.test(s)){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&$(t)||n){if(""!=f){var x=parseInt(f,10);if(x>65535)return C;t.port=$(t)&&x===Y[t.scheme]?null:x,f=""}if(n)return;c=bt;continue}return C}f+=s;break;case vt:if(t.scheme="file","/"==s||"\\"==s)c=gt;else{if(!i||"file"!=i.scheme){c=yt;continue}if(s==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==s)t.host=i.host,t.path=i.path.slice(),t.query="",c=wt;else{if("#"!=s){tt(o.slice(d).join(""))||(t.host=i.host,t.path=i.path.slice(),et(t)),c=yt;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=St}}break;case gt:if("/"==s||"\\"==s){c=_t;break}i&&"file"==i.scheme&&!tt(o.slice(d).join(""))&&(Q(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),c=yt;continue;case _t:if(s==r||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&Q(f))c=yt;else if(""==f){if(t.host="",n)return;c=bt}else{if(l=V(t,f))return l;if("localhost"==t.host&&(t.host=""),n)return;f="",c=bt}continue}f+=s;break;case bt:if($(t)){if(c=yt,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=r&&(c=yt,"/"!=s))continue}else t.fragment="",c=St;else t.query="",c=wt;break;case yt:if(s==r||"/"==s||"\\"==s&&$(t)||!n&&("?"==s||"#"==s)){if(".."===(u=(u=f).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(et(t),"/"==s||"\\"==s&&$(t)||t.path.push("")):nt(f)?"/"==s||"\\"==s&&$(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Q(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(s==r||"?"==s||"#"==s))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==s?(t.query="",c=wt):"#"==s&&(t.fragment="",c=St)}else f+=X(s,K);break;case xt:"?"==s?(t.query="",c=wt):"#"==s?(t.fragment="",c=St):s!=r&&(t.path[0]+=X(s,j));break;case wt:n||"#"!=s?s!=r&&("'"==s&&$(t)?t.query+="%27":t.query+="#"==s?"%23":X(s,j)):(t.fragment="",c=St);break;case St:s!=r&&(t.fragment+=X(s,W))}d++}},Tt=function(t){var e,n,r=c(this,Tt,"URL"),i=arguments.length>1?arguments[1]:void 0,s=String(t),a=w(r,{type:"URL"});if(void 0!==i)if(i instanceof Tt)e=S(i);else if(n=Mt(e={},String(i)))throw TypeError(n);if(n=Mt(a,s,null,e))throw TypeError(n);var l=a.searchParams=new y,u=x(l);u.updateSearchParams(a.query),u.updateURL=function(){a.query=String(l)||null},o||(r.href=At.call(r),r.origin=Ct.call(r),r.protocol=Pt.call(r),r.username=Rt.call(r),r.password=Lt.call(r),r.host=kt.call(r),r.hostname=Ot.call(r),r.port=Dt.call(r),r.pathname=It.call(r),r.search=Ut.call(r),r.searchParams=Ft.call(r),r.hash=Nt.call(r))},Et=Tt.prototype,At=function(){var t=S(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,s=t.path,a=t.query,l=t.fragment,u=e+":";return null!==i?(u+="//",Z(t)&&(u+=n+(r?":"+r:"")+"@"),u+=H(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(u+="?"+a),null!==l&&(u+="#"+l),u},Ct=function(){var t=S(this),e=t.scheme,n=t.port;if("blob"==e)try{return new Tt(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&$(t)?e+"://"+H(t.host)+(null!==n?":"+n:""):"null"},Pt=function(){return S(this).scheme+":"},Rt=function(){return S(this).username},Lt=function(){return S(this).password},kt=function(){var t=S(this),e=t.host,n=t.port;return null===e?"":null===n?H(e):H(e)+":"+n},Ot=function(){var t=S(this).host;return null===t?"":H(t)},Dt=function(){var t=S(this).port;return null===t?"":String(t)},It=function(){var t=S(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ut=function(){var t=S(this).query;return t?"?"+t:""},Ft=function(){return S(this).searchParams},Nt=function(){var t=S(this).fragment;return t?"#"+t:""},Bt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&l(Et,{href:Bt(At,function(t){var e=S(this),n=String(t),r=Mt(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)}),origin:Bt(Ct),protocol:Bt(Pt,function(t){var e=S(this);Mt(e,String(t)+":",rt)}),username:Bt(Rt,function(t){var e=S(this),n=p(String(t));if(!J(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=X(n[r],q)}}),password:Bt(Lt,function(t){var e=S(this),n=p(String(t));if(!J(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=X(n[r],q)}}),host:Bt(kt,function(t){var e=S(this);e.cannotBeABaseURL||Mt(e,String(t),pt)}),hostname:Bt(Ot,function(t){var e=S(this);e.cannotBeABaseURL||Mt(e,String(t),ft)}),port:Bt(Dt,function(t){var e=S(this);J(e)||(""==(t=String(t))?e.port=null:Mt(e,t,mt))}),pathname:Bt(It,function(t){var e=S(this);e.cannotBeABaseURL||(e.path=[],Mt(e,t+"",bt))}),search:Bt(Ut,function(t){var e=S(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Mt(e,t,wt)),x(e.searchParams).updateSearchParams(e.query)}),searchParams:Bt(Ft),hash:Bt(Nt,function(t){var e=S(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Mt(e,t,St)):e.fragment=null})}),u(Et,"toJSON",function(){return At.call(this)},{enumerable:!0}),u(Et,"toString",function(){return At.call(this)},{enumerable:!0}),b){var Vt=b.createObjectURL,zt=b.revokeObjectURL;Vt&&u(Tt,"createObjectURL",function(t){return Vt.apply(b,arguments)}),zt&&u(Tt,"revokeObjectURL",function(t){return zt.apply(b,arguments)})}v(Tt,"URL"),i({global:!0,forced:!s,sham:!o},{URL:Tt})},7082:function(t,e,n){"use strict";n.d(e,{Z:function(){return Qt}});var r,i,o,s,a,l,u,c,h,d,p,f,m,v,g,_,b,y,x,w,S,M,T,E,A,C,P,R=1,L=[],k=[],O=Date.now,D=O(),I=0,U=1,F=function(t){return t},N=function(){return"undefined"!=typeof window},B=function(){return r||N()&&(r=window.gsap)&&r.registerPlugin&&r},V=function(t){return!!~u.indexOf(t)},z=function(t,e){return~L.indexOf(t)&&L[L.indexOf(t)+1][e]},G=function(t,e){var n=e.s,r=e.sc,i=k.indexOf(t),o=r===ut.sc?1:2;return!~i&&(i=k.push(t)-1),k[i+o]||(k[i+o]=z(t,n)||(V(t)?r:function(e){return arguments.length?t[n]=e:t[n]}))},H=function(t){return z(t,"getBoundingClientRect")||(V(t)?function(){return Xt.width=o.innerWidth,Xt.height=o.innerHeight,Xt}:function(){return dt(t)})},j=function(t,e){var n=e.s,r=e.d2,i=e.d,s=e.a;return(n="scroll"+r)&&(s=z(t,n))?s()-H(t)()[i]:V(t)?Math.max(a[n],l[n])-(o["inner"+r]||a["client"+r]||l["client"+r]):t[n]-t["offset"+r]},W=function(t,e){for(var n=0;n<S.length;n+=3)(!e||~e.indexOf(S[n+1]))&&t(S[n],S[n+1],S[n+2])},K=function(t){return"string"==typeof t},q=function(t){return"function"==typeof t},X=function(t){return"number"==typeof t},Y=function(t){return"object"==typeof t},$=function(t){return q(t)&&t()},Z=function(t,e){return function(){var n=$(t),r=$(e);return function(){$(n),$(r)}}},J=Math.abs,Q="left",tt="right",et="bottom",nt="width",rt="height",it="padding",ot="margin",st="Width",at="px",lt={s:"scrollLeft",p:Q,p2:"Left",os:tt,os2:"Right",d:nt,d2:st,a:"x",sc:function(t){return arguments.length?o.scrollTo(t,ut.sc()):o.pageXOffset||s.scrollLeft||a.scrollLeft||l.scrollLeft||0}},ut={s:"scrollTop",p:"top",p2:"Top",os:et,os2:"Bottom",d:rt,d2:"Height",a:"y",op:lt,sc:function(t){return arguments.length?o.scrollTo(lt.sc(),t):o.pageYOffset||s.scrollTop||a.scrollTop||l.scrollTop||0}},ct=function(t){return o.getComputedStyle(t)},ht=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},dt=function(t,e){var n=e&&"matrix(1, 0, 0, 1, 0, 0)"!==ct(t)[b]&&r.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return n&&n.progress(0).kill(),i},pt=function(t,e){var n=e.d2;return t["offset"+n]||t["client"+n]||0},ft=function(t){var e,n=[],r=t.labels,i=t.duration();for(e in r)n.push(r[e]/i);return n},mt=function(t,e,n,r){return n.split(",").forEach(function(n){return t(e,n,r)})},vt=function(t,e,n){return t.addEventListener(e,n,{passive:!0})},gt=function(t,e,n){return t.removeEventListener(e,n)},_t={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},bt={toggleActions:"play",anticipatePin:0},yt={top:0,left:0,center:.5,bottom:1,right:1},xt=function(t,e){if(K(t)){var n=t.indexOf("="),r=~n?+(t.charAt(n-1)+1)*parseFloat(t.substr(n+1)):0;~n&&(t.indexOf("%")>n&&(r*=e/100),t=t.substr(0,n-1)),t=r+(t in yt?yt[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},wt=function(t,e,n,r,i,o,a){var u=i.startColor,c=i.endColor,h=i.fontSize,d=i.indent,p=i.fontWeight,f=s.createElement("div"),m=V(n)||"fixed"===z(n,"pinType"),v=-1!==t.indexOf("scroller"),g=m?l:n,_=-1!==t.indexOf("start"),b=_?u:c,y="border-color:"+b+";font-size:"+h+";color:"+b+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return y+="position:"+(v&&m?"fixed;":"absolute;"),(v||!m)&&(y+=(r===ut?tt:et)+":"+(o+parseFloat(d))+"px;"),a&&(y+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),f._isStart=_,f.setAttribute("class","gsap-marker-"+t),f.style.cssText=y,f.innerText=e||0===e?t+"-"+e:t,g.children[0]?g.insertBefore(f,g.children[0]):g.appendChild(f),f._offset=f["offset"+r.op.d2],St(f,0,r,_),f},St=function(t,e,n,i){var o={display:"block"},s=n[i?"os2":"p2"],a=n[i?"p2":"os2"];t._isFlipped=i,o[n.a+"Percent"]=i?-100:0,o[n.a]=i?"1px":0,o["border"+s+st]=1,o["border"+a+st]=0,o[n.p]=e+"px",r.set(t,o)},Mt=[],Tt={},Et=function(){return d||(d=h(zt))},At=function(){d||(d=h(zt),I||Dt("scrollStart"),I=O())},Ct=function(){return!g&&!E&&!s.fullscreenElement&&c.restart(!0)},Pt={},Rt=[],Lt=[],kt=function(t){var e,n=r.ticker.frame,s=[],a=0;if(P!==n||R){for(Ft();a<Lt.length;a+=4)(e=o.matchMedia(Lt[a]).matches)!==Lt[a+3]&&(Lt[a+3]=e,e?s.push(a):Ft(1,Lt[a])||q(Lt[a+2])&&Lt[a+2]());for(Ut(),a=0;a<s.length;a++)e=s[a],C=Lt[e],Lt[e+2]=Lt[e+1](t);C=0,i&&Nt(0,1),P=n,Dt("matchMedia")}},Ot=function t(){return gt(Qt,"scrollEnd",t)||Nt(!0)},Dt=function(t){return Pt[t]&&Pt[t].map(function(t){return t()})||Rt},It=[],Ut=function(t){for(var e=0;e<It.length;e+=4)t&&It[e+3]!==t||(It[e].style.cssText=It[e+1],It[e+2].uncache=1)},Ft=function(t,e){var n;for(y=0;y<Mt.length;y++)n=Mt[y],e&&n.media!==e||(t?n.kill(1):(n.scroll.rec||(n.scroll.rec=n.scroll()),n.revert()));Ut(e),e||Dt("revert")},Nt=function(t,e){if(!I||t){var n=Dt("refreshInit");for(M&&Qt.sort(),e||Ft(),y=0;y<Mt.length;y++)Mt[y].refresh();for(n.forEach(function(t){return t&&t.render&&t.render(-1)}),y=Mt.length;y--;)Mt[y].scroll.rec=0;c.pause(),Dt("refresh")}else vt(Qt,"scrollEnd",Ot)},Bt=0,Vt=1,zt=function(){var t=Mt.length,e=O(),n=e-D>=50,r=t&&Mt[0].scroll();if(Vt=Bt>r?-1:1,Bt=r,n&&(I&&!_&&e-I>200&&(I=0,Dt("scrollEnd")),m=D,D=e),Vt<0){for(y=t;y--;)Mt[y]&&Mt[y].update(0,n);Vt=1}else for(y=0;y<t;y++)Mt[y]&&Mt[y].update(0,n);d=0},Gt=[Q,"top",et,tt,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex"],Ht=Gt.concat([nt,rt,"boxSizing","maxWidth","maxHeight","position",ot,it,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),jt=function(t,e,n,r){if(t.parentNode!==e){for(var i,o=Gt.length,s=e.style,a=t.style;o--;)s[i=Gt[o]]=n[i];s.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(s.display="inline-block"),a.bottom=a.right="auto",s.overflow="visible",s.boxSizing="border-box",s.width=pt(t,lt)+at,s.height=pt(t,ut)+at,s.padding=a.margin=a.top=a.left="0",Kt(r),a.width=a.maxWidth=n.width,a.height=a.maxHeight=n.height,a.padding=n.padding,t.parentNode.insertBefore(e,t),e.appendChild(t)}},Wt=/([A-Z])/g,Kt=function(t){if(t){var e,n,i=t.t.style,o=t.length,s=0;for((t.t._gsap||r.core.getCache(t.t)).uncache=1;s<o;s+=2)n=t[s+1],e=t[s],n?i[e]=n:i[e]&&i.removeProperty(e.replace(Wt,"-$1").toLowerCase())}},qt=function(t){for(var e=Ht.length,n=t.style,r=[],i=0;i<e;i++)r.push(Ht[i],n[Ht[i]]);return r.t=t,r},Xt={left:0,top:0},Yt=function(t,e,n,r,i,o,s,u,c,h,d,f){if(q(t)&&(t=t(u)),K(t)&&"max"===t.substr(0,3)&&(t=f+("="===t.charAt(4)?xt("0"+t.substr(3),n):0)),X(t))s&&St(s,n,r,!0);else{q(e)&&(e=e(u));var m,v,g,_=p(e)[0]||l,b=dt(_)||{},y=t.split(" ");b&&(b.left||b.top)||"none"!==ct(_).display||(g=_.style.display,_.style.display="block",b=dt(_),g?_.style.display=g:_.style.removeProperty("display")),m=xt(y[0],b[r.d]),v=xt(y[1]||"0",n),t=b[r.p]-c[r.p]-h+m+i-v,s&&St(s,v,r,n-v<20||s._isStart&&v>20),n-=n-v}if(o){var x=t+n,w=o._isStart;f="scroll"+r.d2,St(o,x,r,w&&x>20||!w&&(d?Math.max(l[f],a[f]):o.parentNode[f])<=x+1),d&&(c=dt(s),d&&(o.style[r.op.p]=c[r.op.p]-r.op.m-o._offset+at))}return Math.round(t)},$t=/(?:webkit|moz|length|cssText|inset)/i,Zt=function(t,e,n,i){if(t.parentNode!==e){var o,s,a=t.style;if(e===l){for(o in t._stOrig=a.cssText,s=ct(t))+o||$t.test(o)||!s[o]||"string"!=typeof a[o]||"0"===o||(a[o]=s[o]);a.top=n,a.left=i}else a.cssText=t._stOrig;r.core.getCache(t).uncache=1,e.appendChild(t)}},Jt=function(t,e){var n,i,o=G(t,e),s="_scroll"+e.p2,a=function e(a,l,u,c,h){var d=e.tween,p=l.onComplete,f={};return d&&d.kill(),n=Math.round(u),l[s]=a,l.modifiers=f,f[s]=function(t){return(t=Math.round(o()))!==n&&t!==i&&Math.abs(t-n)>2?(d.kill(),e.tween=0):t=u+c*d.ratio+h*d.ratio*d.ratio,i=n,n=Math.round(t)},l.onComplete=function(){e.tween=0,p&&p.call(d)},d=e.tween=r.to(t,l)};return t[s]=o,t.addEventListener("mousewheel",function(){return a.tween&&a.tween.kill()&&(a.tween=0)}),a};lt.op=ut;var Qt=function(){function t(e,n){i||t.register(r)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(e,n)}return t.prototype.init=function(e,n){if(this.progress=this.start=0,this.vars&&this.kill(1),U){var i,u,c,h,d,v,b,x,w,S,E,P,k,D,N,B,W,$,Z,Q,tt,et,nt,rt,mt,yt,St,Et,Pt,Rt,Lt,kt,Dt,It,Ut,Ft,Nt,Bt,zt,Gt=(e=ht(K(e)||X(e)||e.nodeType?{trigger:e}:e,bt)).horizontal?lt:ut,Ht=e,Wt=Ht.onUpdate,$t=Ht.toggleClass,Qt=Ht.id,te=Ht.onToggle,ee=Ht.onRefresh,ne=Ht.scrub,re=Ht.trigger,ie=Ht.pin,oe=Ht.pinSpacing,se=Ht.invalidateOnRefresh,ae=Ht.anticipatePin,le=Ht.onScrubComplete,ue=Ht.onSnapComplete,ce=Ht.once,he=Ht.snap,de=Ht.pinReparent,pe=!ne&&0!==ne,fe=p(e.scroller||o)[0],me=r.core.getCache(fe),ve=V(fe),ge="pinType"in e?"fixed"===e.pinType:ve||"fixed"===z(fe,"pinType"),_e=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],be=pe&&e.toggleActions.split(" "),ye="markers"in e?e.markers:bt.markers,xe=ve?0:parseFloat(ct(fe)["border"+Gt.p2+st])||0,we=this,Se=e.onRefreshInit&&function(){return e.onRefreshInit(we)},Me=function(t,e,n){var r=n.d,i=n.d2,s=n.a;return(s=z(t,"getBoundingClientRect"))?function(){return s()[r]}:function(){return(e?o["inner"+i]:t["client"+i])||0}}(fe,ve,Gt),Te=function(t,e){return!e||~L.indexOf(t)?H(t):function(){return Xt}}(fe,ve);we.media=C,ae*=45,Mt.push(we),we.scroller=fe,we.scroll=G(fe,Gt),d=we.scroll(),we.vars=e,n=n||e.animation,"refreshPriority"in e&&(M=1),me.tweenScroll=me.tweenScroll||{top:Jt(fe,ut),left:Jt(fe,lt)},we.tweenTo=i=me.tweenScroll[Gt.p],n&&(n.vars.lazy=!1,n._initted||!1!==n.vars.immediateRender&&!1!==e.immediateRender&&n.render(0,!0,!0),we.animation=n.pause(),n.scrollTrigger=we,(kt=X(ne)&&ne)&&(Lt=r.to(n,{ease:"power3",duration:kt,onComplete:function(){return le&&le(we)}})),Pt=0,Qt||(Qt=n.vars.id)),he&&(Y(he)||(he={snapTo:he}),"scrollBehavior"in l.style&&r.set(ve?[l,a]:fe,{scrollBehavior:"auto"}),c=q(he.snapTo)?he.snapTo:"labels"===he.snapTo?function(t){return function(e){return r.utils.snap(ft(t),e)}}(n):"labelsDirectional"===he.snapTo?(Bt=n,function(t,e){var n,r=ft(Bt);if(r.sort(function(t,e){return t-e}),e.direction>0){for(n=0;n<r.length;n++)if(r[n]>=t)return r[n];return r.pop()}for(n=r.length;n--;)if(r[n]<=t)return r[n];return r[0]}):r.utils.snap(he.snapTo),Dt=he.duration||{min:.1,max:2},Dt=Y(Dt)?f(Dt.min,Dt.max):f(Dt,Dt),It=r.delayedCall(he.delay||kt/2||.1,function(){if(Math.abs(we.getVelocity())<10&&!_){var t=n&&!pe?n.totalProgress():we.progress,e=(t-Rt)/(O()-m)*1e3||0,r=J(e/2)*e/.185,o=t+r,s=f(0,1,c(o,we)),a=we.scroll(),l=Math.round(b+s*D),u=i.tween;if(a<=x&&a>=b&&l!==a){if(u&&!u._initted&&u.data<=Math.abs(l-a))return;i(l,{duration:Dt(J(.185*Math.max(J(o-t),J(s-t))/e/.05||0)),ease:he.ease||"power3",data:Math.abs(l-a),onComplete:function(){Pt=Rt=n&&!pe?n.totalProgress():we.progress,ue&&ue(we)}},a,r*D,l-a-r*D)}}else we.isActive&&It.restart(!0)}).pause()),Qt&&(Tt[Qt]=we),re=we.trigger=p(re||ie)[0],ie=!0===ie?re:p(ie)[0],K($t)&&($t={targets:re,className:$t}),ie&&(!1===oe||oe===ot||(oe=!(!oe&&"flex"===ct(ie.parentNode).display)&&it),we.pin=ie,!1!==e.force3D&&r.set(ie,{force3D:!0}),(u=r.core.getCache(ie)).spacer?N=u.pinState:(u.spacer=$=s.createElement("div"),$.setAttribute("class","pin-spacer"+(Qt?" pin-spacer-"+Qt:"")),u.pinState=N=qt(ie)),we.spacer=$=u.spacer,Et=ct(ie),rt=Et[oe+Gt.os2],Q=r.getProperty(ie),tt=r.quickSetter(ie,Gt.a,at),jt(ie,$,Et),W=qt(ie)),ye&&(k=Y(ye)?ht(ye,_t):_t,E=wt("scroller-start",Qt,fe,Gt,k,0),P=wt("scroller-end",Qt,fe,Gt,k,0,E),Z=E["offset"+Gt.op.d2],w=wt("start",Qt,fe,Gt,k,Z),S=wt("end",Qt,fe,Gt,k,Z),ge||((zt=ve?l:fe).style.position="absolute"===ct(zt).position?"absolute":"relative",r.set([E,P],{force3D:!0}),yt=r.quickSetter(E,Gt.a,at),St=r.quickSetter(P,Gt.a,at))),we.revert=function(t){var e=!1!==t||!we.enabled,r=g;e!==h&&(e&&(Ft=Math.max(we.scroll(),we.scroll.rec||0),Ut=we.progress,Nt=n&&n.progress()),w&&[w,S,E,P].forEach(function(t){return t.style.display=e?"none":"block"}),e&&(g=1),we.update(e),g=r,ie&&(e?function(t,e,n){if(Kt(n),t.parentNode===e){var r=e.parentNode;r&&(r.insertBefore(t,e),r.removeChild(e))}}(ie,$,N):(!de||!we.isActive)&&jt(ie,$,ct(ie),mt)),h=e)},we.refresh=function(i){if(!g&&we.enabled)if(ie&&i&&I)vt(t,"scrollEnd",Ot);else{g=1,Lt&&Lt.pause(),se&&n&&n.progress(0).invalidate(),h||we.revert();for(var o,s,a,u,c,p,f,m,_,y=Me(),M=Te(),A=j(fe,Gt),C=0,R=0,L=e.end,k=e.endTrigger||re,O=e.start||(0!==e.start&&re?ie?"0 0":"0 100%":0),U=re&&Math.max(0,Mt.indexOf(we))||0,F=U;F--;)(f=Mt[F].pin)&&(f===re||f===ie)&&Mt[F].revert();for(b=Yt(O,re,y,Gt,we.scroll(),w,E,we,M,xe,ge,A)||(ie?-.001:0),q(L)&&(L=L(we)),K(L)&&!L.indexOf("+=")&&(~L.indexOf(" ")?L=(K(O)?O.split(" ")[0]:"")+L:(C=xt(L.substr(2),y),L=K(O)?O:b+C,k=re)),x=Math.max(b,Yt(L||(k?"100% 0":A),k,y,Gt,we.scroll()+C,S,P,we,M,xe,ge,A))||-.001,D=x-b||(b-=.01)&&.001,C=0,F=U;F--;)(f=(p=Mt[F]).pin)&&p.start-p._pinPush<b&&(o=p.end-p.start,f===re&&(C+=o),f===ie&&(R+=o));if(b+=C,x+=C,we._pinPush=R,w&&C&&((o={})[Gt.a]="+="+C,r.set([w,S],o)),ie)o=ct(ie),u=Gt===ut,a=we.scroll(),et=parseFloat(Q(Gt.a))+R,!A&&x>1&&((ve?l:fe).style["overflow-"+Gt.a]="scroll"),jt(ie,$,o),W=qt(ie),s=dt(ie,!0),m=ge&&G(fe,u?lt:ut)(),oe&&((mt=[oe+Gt.os2,D+R+at]).t=$,(F=oe===it?pt(ie,Gt)+D+R:0)&&mt.push(Gt.d,F+at),Kt(mt),ge&&we.scroll(Ft)),ge&&((c={top:s.top+(u?a-b:m)+at,left:s.left+(u?m:a-b)+at,boxSizing:"border-box",position:"fixed"}).width=c.maxWidth=Math.ceil(s.width)+at,c.height=c.maxHeight=Math.ceil(s.height)+at,c.margin=c.marginTop=c.marginRight=c.marginBottom=c.marginLeft="0",c.padding=o.padding,c.paddingTop=o.paddingTop,c.paddingRight=o.paddingRight,c.paddingBottom=o.paddingBottom,c.paddingLeft=o.paddingLeft,B=function(t,e,n){for(var r,i=[],o=t.length,s=n?8:0;s<o;s+=2)r=t[s],i.push(r,r in e?e[r]:t[s+1]);return i.t=t.t,i}(N,c,de)),n?(_=n._initted,T(1),n.progress(1,!0),nt=Q(Gt.a)-et+D+R,D!==nt&&B.splice(B.length-2,2),n.progress(0,!0),_||n.invalidate(),T(0)):nt=D;else if(re&&we.scroll())for(s=re.parentNode;s&&s!==l;)s._pinOffset&&(b-=s._pinOffset,x-=s._pinOffset),s=s.parentNode;for(F=0;F<U;F++)(p=Mt[F].pin)&&(p===re||p===ie)&&Mt[F].revert(!1);we.start=b,we.end=x,(d=v=we.scroll())<Ft&&we.scroll(Ft),we.revert(!1),g=0,n&&pe&&n._initted&&n.progress(Nt,!0).render(n.time(),!0,!0),Ut!==we.progress&&(Lt&&n.totalProgress(Ut,!0),we.progress=Ut,we.update()),ie&&oe&&($._pinOffset=Math.round(we.progress*nt)),ee&&ee(we)}},we.getVelocity=function(){return(we.scroll()-v)/(O()-m)*1e3||0},we.update=function(t,e){var r,o,s,a,u,c=we.scroll(),h=t?0:(c-b)/D,f=h<0?0:h>1?1:h||0,_=we.progress;if(e&&(v=d,d=c,he&&(Rt=Pt,Pt=n&&!pe?n.totalProgress():f)),ae&&!f&&ie&&!g&&!R&&I&&b<c+(c-v)/(O()-m)*ae&&(f=1e-4),f!==_&&we.enabled){if(a=(u=(r=we.isActive=!!f&&f<1)!=(!!_&&_<1))||!!f!=!!_,we.direction=f>_?1:-1,we.progress=f,pe||(!Lt||g||R?n&&n.totalProgress(f,!!g):(Lt.vars.totalProgress=f,Lt.invalidate().restart())),ie)if(t&&oe&&($.style[oe+Gt.os2]=rt),ge){if(a){if(s=!t&&f>_&&x+1>c&&c+1>=j(fe,Gt),de)if(t||!r&&!s)Zt(ie,$);else{var y=dt(ie,!0),w=c-b;Zt(ie,l,y.top+(Gt===ut?w:0)+at,y.left+(Gt===ut?0:w)+at)}Kt(r||s?B:W),nt!==D&&f<1&&r||tt(et+(1!==f||s?0:nt))}}else tt(et+nt*f);he&&!i.tween&&!g&&!R&&It.restart(!0),$t&&(u||ce&&f&&(f<1||!A))&&p($t.targets).forEach(function(t){return t.classList[r||ce?"add":"remove"]($t.className)}),Wt&&!pe&&!t&&Wt(we),a&&!g?(o=f&&!_?0:1===f?1:1===_?2:3,pe&&(s=!u&&"none"!==be[o+1]&&be[o+1]||be[o],n&&("complete"===s||"reset"===s||s in n)&&("complete"===s?n.pause().totalProgress(1):"reset"===s?n.restart(!0).pause():n[s]()),Wt&&Wt(we)),!u&&A||(te&&u&&te(we),_e[o]&&_e[o](we),ce&&(1===f?we.kill(!1,1):_e[o]=0),u||_e[o=1===f?1:3]&&_e[o](we))):pe&&Wt&&!g&&Wt(we)}St&&(yt(c+(E._isFlipped?1:0)),St(c))},we.enable=function(){we.enabled||(we.enabled=!0,vt(fe,"resize",Ct),vt(fe,"scroll",At),Se&&vt(t,"refreshInit",Se),n&&n.add?r.delayedCall(.01,function(){return b||x||we.refresh()})&&(D=.01)&&(b=x=0):we.refresh())},we.disable=function(e,n){if(we.enabled&&(!1!==e&&we.revert(),we.enabled=we.isActive=!1,n||Lt&&Lt.pause(),Ft=0,u&&(u.uncache=1),Se&&gt(t,"refreshInit",Se),It&&(It.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!ve)){for(var r=Mt.length;r--;)if(Mt[r].scroller===fe&&Mt[r]!==we)return;gt(fe,"resize",Ct),gt(fe,"scroll",At)}},we.kill=function(t,e){we.disable(t,e),Qt&&delete Tt[Qt];var r=Mt.indexOf(we);Mt.splice(r,1),r===y&&Vt>0&&y--,n&&(n.scrollTrigger=null,t&&n.render(-1),e||n.kill()),w&&[w,S,E,P].forEach(function(t){return t.parentNode.removeChild(t)}),ie&&(u&&(u.uncache=1),r=0,Mt.forEach(function(t){return t.pin===ie&&r++}),r||(u.spacer=0))},we.enable()}else this.update=this.refresh=this.kill=F},t.register=function(e){if(!i&&(r=e||B(),N()&&window.document&&(o=window,s=document,a=s.documentElement,l=s.body),r&&(p=r.utils.toArray,f=r.utils.clamp,T=r.core.suppressOverwrites||F,r.core.globals("ScrollTrigger",t),l))){h=o.requestAnimationFrame||function(t){return setTimeout(t,16)},vt(o,"mousewheel",At),u=[o,s,a,l],vt(s,"scroll",At);var n,d=l.style,m=d.borderTop;d.borderTop="1px solid #000",n=dt(l),ut.m=Math.round(n.top+ut.sc())||0,lt.m=Math.round(n.left+lt.sc())||0,m?d.borderTop=m:d.removeProperty("border-top"),v=setInterval(Et,200),r.delayedCall(.5,function(){return R=0}),vt(s,"touchcancel",F),vt(l,"touchstart",F),mt(vt,s,"pointerdown,touchstart,mousedown",function(){return _=1}),mt(vt,s,"pointerup,touchend,mouseup",function(){return _=0}),b=r.utils.checkPrefix("transform"),Ht.push(b),i=O(),c=r.delayedCall(.2,Nt).pause(),S=[s,"visibilitychange",function(){var t=o.innerWidth,e=o.innerHeight;s.hidden?(x=t,w=e):x===t&&w===e||Ct()},s,"DOMContentLoaded",Nt,o,"load",function(){return I||Nt()},o,"resize",Ct],W(vt)}return i},t.defaults=function(t){for(var e in t)bt[e]=t[e]},t.kill=function(){U=0,Mt.slice(0).forEach(function(t){return t.kill(1)})},t.config=function(t){"limitCallbacks"in t&&(A=!!t.limitCallbacks);var e=t.syncInterval;e&&clearInterval(v)||(v=e)&&setInterval(Et,e),"autoRefreshEvents"in t&&(W(gt)||W(vt,t.autoRefreshEvents||"none"),E=-1===(t.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var n=p(t)[0],r=k.indexOf(n),i=V(n);~r&&k.splice(r,i?6:2),i?L.unshift(o,e,l,e,a,e):L.unshift(n,e)},t.matchMedia=function(t){var e,n,r,i,s;for(n in t)r=Lt.indexOf(n),i=t[n],C=n,"all"===n?i():(e=o.matchMedia(n))&&(e.matches&&(s=i()),~r?(Lt[r+1]=Z(Lt[r+1],i),Lt[r+2]=Z(Lt[r+2],s)):(r=Lt.length,Lt.push(n,i,s),e.addListener?e.addListener(kt):e.addEventListener("change",kt)),Lt[r+3]=e.matches),C=0;return Lt},t.clearMatchMedia=function(t){t||(Lt.length=0),(t=Lt.indexOf(t))>=0&&Lt.splice(t,4)},t}();Qt.version="3.6.0",Qt.saveStyles=function(t){return t?p(t).forEach(function(t){if(t&&t.style){var e=It.indexOf(t);e>=0&&It.splice(e,4),It.push(t,t.style.cssText,r.core.getCache(t),C)}}):It},Qt.revert=function(t,e){return Ft(!t,e)},Qt.create=function(t,e){return new Qt(t,e)},Qt.refresh=function(t){return t?Ct():Nt(!0)},Qt.update=zt,Qt.maxScroll=function(t,e){return j(t,e?lt:ut)},Qt.getScrollFunc=function(t,e){return G(p(t)[0],e?lt:ut)},Qt.getById=function(t){return Tt[t]},Qt.getAll=function(){return Mt.slice(0)},Qt.isScrolling=function(){return!!I},Qt.addEventListener=function(t,e){var n=Pt[t]||(Pt[t]=[]);~n.indexOf(e)||n.push(e)},Qt.removeEventListener=function(t,e){var n=Pt[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},Qt.batch=function(t,e){var n,i=[],o={},s=e.interval||.016,a=e.batchMax||1e9,l=function(t,e){var n=[],i=[],o=r.delayedCall(s,function(){e(n,i),n=[],i=[]}).pause();return function(t){n.length||o.restart(!0),n.push(t.trigger),i.push(t),a<=n.length&&o.progress(1)}};for(n in e)o[n]="on"===n.substr(0,2)&&q(e[n])&&"onRefreshInit"!==n?l(0,e[n]):e[n];return q(a)&&(a=a(),vt(Qt,"refresh",function(){return a=e.batchMax()})),p(t).forEach(function(t){var e={};for(n in o)e[n]=o[n];e.trigger=t,i.push(Qt.create(e))}),i},Qt.sort=function(t){return Mt.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},B()&&r.registerPlugin(Qt)},5317:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,{$i:function(){return vt},DY:function(){return wt},Fc:function(){return O},Fo:function(){return pn},JV:function(){return dn},Ks:function(){return an},Ok:function(){return St},Pr:function(){return Tt},S5:function(){return rn},SI:function(){return tt},UI:function(){return fe},Wy:function(){return ie},Yv:function(){return bn},ZP:function(){return gn},bQ:function(){return rt},d4:function(){return et},fS:function(){return Mt},if:function(){return qe},kr:function(){return Ae},l1:function(){return ze},lC:function(){return ut},m2:function(){return K},p8:function(){return gn},r9:function(){return H},tQ:function(){return _n},xr:function(){return Ce}});var o,s,a,l,u,c,h,d,p,f,m,v,g,_,b,y,x,w,S,M,T,E,A,C,P,R,L,k,O={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},D={duration:.5,overwrite:!1,delay:0},I=1e8,U=1e-8,F=2*Math.PI,N=F/4,B=0,V=Math.sqrt,z=Math.cos,G=Math.sin,H=function(t){return"string"==typeof t},j=function(t){return"function"==typeof t},W=function(t){return"number"==typeof t},K=function(t){return void 0===t},q=function(t){return"object"==typeof t},X=function(t){return!1!==t},Y=function(){return"undefined"!=typeof window},$=function(t){return j(t)||H(t)},Z="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},J=Array.isArray,Q=/(?:-?\.?\d|\.)+/gi,tt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,et=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,nt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,rt=/[+-]=-?[.\d]+/,it=/[#\-+.]*\b[a-z\d-=+%.]+/gi,ot=/[\d.+\-=]+(?:e[-+]\d*)*/i,st={},at={},lt=function(t){return(at=Dt(t,st))&&gn},ut=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ct=function(t,e){return!e&&console.warn(t)},ht=function(t,e){return t&&(st[t]=e)&&at&&(at[t]=e)||st},dt=function(){return 0},pt={},ft=[],mt={},vt={},gt={},_t=30,bt=[],yt="",xt=function(t){var e,n,r=t[0];if(q(r)||j(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=bt.length;n--&&!bt[n].targetTest(r););e=bt[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new ze(t[n],e)))||t.splice(n,1);return t},wt=function(t){return t._gsap||xt(ae(t))[0]._gsap},St=function(t,e,n){return(n=t[e])&&j(n)?t[e]():K(n)&&t.getAttribute&&t.getAttribute(e)||n},Mt=function(t,e){return(t=t.split(",")).forEach(e)||t},Tt=function(t){return Math.round(1e5*t)/1e5||0},Et=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},At=function(t,e,n){var r,i=W(t[1]),o=(i?2:1)+(e<2?0:1),s=t[o];if(i&&(s.duration=t[1]),s.parent=n,e){for(r=s;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=X(n.vars.inherit)&&n.parent;s.immediateRender=X(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[o-1]}return s},Ct=function(){var t,e,n=ft.length,r=ft.slice(0);for(mt={},ft.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Pt=function(t,e,n,r){ft.length&&Ct(),t.render(e,n,r),ft.length&&Ct()},Rt=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(it).length<2?e:H(t)?t.trim():t},Lt=function(t){return t},kt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Ot=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},Dt=function(t,e){for(var n in e)t[n]=e[n];return t},It=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=q(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Ut=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},Ft=function(t){var e=t.parent||s,n=t.keyframes?Ot:kt;if(X(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},Nt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},Bt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Vt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},zt=function t(e){return!e||e._ts&&t(e.parent)},Gt=function(t){return t._repeat?Ht(t._tTime,t=t.duration()+t._rDelay)*t:0},Ht=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},jt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Wt=function(t){return t._end=Tt(t._start+(t._tDur/Math.abs(t._ts||t._rts||U)||0))},Kt=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Tt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Wt(t),n._dirty||Vt(n,t)),t},qt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=jt(t.rawTime(),e),(!e._dur||re(0,e.totalDuration(),n)-e._tTime>U)&&e.render(n,!0)),Vt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},Xt=function(t,e,n,r){return e.parent&&Bt(e),e._start=Tt(n+e._delay),e._end=Tt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,s=t[r];if(i)for(o=e[i];s&&s[i]>o;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=s,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||qt(t,e),t},Yt=function(t,e){return(st.ScrollTrigger||ut("scrollTrigger",e))&&st.ScrollTrigger.create(e,t)},$t=function(t,e,n,r){return Xe(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&h!==Ce.frame?(ft.push(t),t._lazy=[e,r],1):void 0:1},Zt=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Jt=function(t,e,n,r){var i=t._repeat,o=Tt(e)||0,s=t._tTime/t._tDur;return s&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:Tt(o*(i+1)+t._rDelay*i):o,s&&!r?Kt(t,t._tTime=t._tDur*s):t.parent&&Wt(t),n||Vt(t.parent,t),t},Qt=function(t){return t instanceof He?Vt(t):Jt(t,t._dur)},te={_start:0,endTime:dt},ee=function t(e,n){var r,i,o=e.labels,s=e._recent||te,a=e.duration()>=I?s.endTime(!1):e._dur;return H(n)&&(isNaN(n)||n in o)?"<"===(r=n.charAt(0))||">"===r?("<"===r?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0):(r=n.indexOf("="))<0?(n in o||(o[n]=a),o[n]):(i=+(n.charAt(r-1)+n.substr(r+1)),r>1?t(e,n.substr(0,r-1))+i:a+i):null==n?a:+n},ne=function(t,e){return t||0===t?e(t):e},re=function(t,e,n){return n<t?t:n>e?e:n},ie=function(t){if("string"!=typeof t)return"";var e=ot.exec(t);return e?t.substr(e.index+e[0].length):""},oe=[].slice,se=function(t,e){return t&&q(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&q(t[0]))&&!t.nodeType&&t!==a},ae=function(t,e){return!H(t)||e||!l&&Pe()?J(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach(function(t){var r;return H(t)&&!e||se(t,1)?(r=n).push.apply(r,ae(t)):n.push(t)})||n}(t,e):se(t)?oe.call(t,0):t?[t]:[]:oe.call(u.querySelectorAll(t),0)},le=function(t){return t.sort(function(){return.5-Math.random()})},ue=function(t){if(j(t))return t;var e=q(t)?t:{each:t},n=Ue(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},s=r>0&&r<1,a=isNaN(r)||s,l=e.axis,u=r,c=r;return H(r)?u=c={center:.5,edges:.5,end:1}[r]||0:!s&&a&&(u=r[0],c=r[1]),function(t,s,h){var d,p,f,m,v,g,_,b,y,x=(h||e).length,w=o[x];if(!w){if(!(y="auto"===e.grid?0:(e.grid||[1,I])[1])){for(_=-I;_<(_=h[y++].getBoundingClientRect().left)&&y<x;);y--}for(w=o[x]=[],d=a?Math.min(y,x)*u-.5:r%y,p=a?x*c/y-.5:r/y|0,_=0,b=I,g=0;g<x;g++)f=g%y-d,m=p-(g/y|0),w[g]=v=l?Math.abs("y"===l?m:f):V(f*f+m*m),v>_&&(_=v),v<b&&(b=v);"random"===r&&le(w),w.max=_-b,w.min=b,w.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(y>x?x-1:l?"y"===l?x/y:y:Math.max(y,x/y))||0)*("edges"===r?-1:1),w.b=x<0?i-x:i,w.u=ie(e.amount||e.each)||0,n=n&&x<0?De(n):n}return x=(w[t]-w.min)/w.max||0,Tt(w.b+(n?n(x):x)*w.v)+w.u}},ce=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/t)*t*e;return(r-r%1)/e+(W(n)?0:ie(n))}},he=function(t,e){var n,r,i=J(t);return!i&&q(t)&&(n=i=t.radius||I,t.values?(t=ae(t.values),(r=!W(t[0]))&&(n*=n)):t=ce(t.increment)),ne(e,i?j(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,s=parseFloat(r?e.x:e),a=parseFloat(r?e.y:0),l=I,u=0,c=t.length;c--;)(i=r?(i=t[c].x-s)*i+(o=t[c].y-a)*o:Math.abs(t[c]-s))<l&&(l=i,u=c);return u=!n||l<=n?t[u]:e,r||u===e||W(e)?u:u+ie(e)}:ce(t))},de=function(t,e,n,r){return ne(J(t)?!e:!0===n?!!(n=0):!r,function(){return J(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r})},pe=function(t,e,n){return ne(n,function(n){return t[~~e(n)]})},fe=function(t){for(var e,n,r,i,o=0,s="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?it:Q),s+=t.substr(o,e-o)+de(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return s+t.substr(o,t.length-o)},me=function(t,e,n,r,i){var o=e-t,s=r-n;return ne(i,function(e){return n+((e-t)/o*s||0)})},ve=function(t,e,n){var r,i,o,s=t.labels,a=I;for(r in s)(i=s[r]-e)<0==!!n&&i&&a>(i=Math.abs(i))&&(o=r,a=i);return o},ge=function(t,e,n){var r,i,o=t.vars,s=o[e];if(s)return r=o[e+"Params"],i=o.callbackScope||t,n&&ft.length&&Ct(),r?s.apply(i,r):s.call(i)},_e=function(t){return Bt(t),t.progress()<1&&ge(t,"onInterrupt"),t},be=255,ye={aqua:[0,be,be],lime:[0,be,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,be],navy:[0,0,128],white:[be,be,be],olive:[128,128,0],yellow:[be,be,0],orange:[be,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[be,0,0],pink:[be,192,203],cyan:[0,be,be],transparent:[be,be,be,0]},xe=function(t,e,n){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*be+.5|0},we=function(t,e,n){var r,i,o,s,a,l,u,c,h,d,p=t?W(t)?[t>>16,t>>8&be,t&be]:0:ye.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ye[t])p=ye[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&be,p&be,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&be,t&be]}else if("hsl"===t.substr(0,3))if(p=d=t.match(Q),e){if(~t.indexOf("="))return p=t.match(tt),n&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,a=+p[1]/100,r=2*(l=+p[2]/100)-(i=l<=.5?l*(a+1):l+a-l*a),p.length>3&&(p[3]*=1),p[0]=xe(s+1/3,r,i),p[1]=xe(s,r,i),p[2]=xe(s-1/3,r,i);else p=t.match(Q)||ye.transparent;p=p.map(Number)}return e&&!d&&(r=p[0]/be,i=p[1]/be,o=p[2]/be,l=((u=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,u===c?s=a=0:(h=u-c,a=l>.5?h/(2-u-c):h/(u+c),s=u===r?(i-o)/h+(i<o?6:0):u===i?(o-r)/h+2:(r-i)/h+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*a+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},Se=function(t){var e=[],n=[],r=-1;return t.split(Te).forEach(function(t){var i=t.match(et)||[];e.push.apply(e,i),n.push(r+=i.length+1)}),e.c=n,e},Me=function(t,e,n){var r,i,o,s,a="",l=(t+a).match(Te),u=e?"hsla(":"rgba(",c=0;if(!l)return t;if(l=l.map(function(t){return(t=we(t,e,1))&&u+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(o=Se(t),(r=n.c).join(a)!==o.c.join(a)))for(s=(i=t.replace(Te,"1").split(et)).length-1;c<s;c++)a+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(s=(i=t.split(Te)).length-1;c<s;c++)a+=i[c]+l[c];return a+i[s]},Te=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ye)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Ee=/hsl[a]?\(/,Ae=function(t){var e,n=t.join(" ");if(Te.lastIndex=0,Te.test(n))return e=Ee.test(n),t[1]=Me(t[1],e),t[0]=Me(t[0],e,Se(t[1])),!0},Ce=(y=Date.now,x=500,w=33,S=y(),M=S,E=T=1e3/240,C=function t(e){var n,r,i,o,s=y()-M,a=!0===e;if(s>x&&(S+=s-w),((n=(i=(M+=s)-S)-E)>0||a)&&(o=++g.frame,_=i-1e3*g.time,g.time=i/=1e3,E+=n+(n>=T?4:T-n),r=1),a||(f=m(t)),r)for(b=0;b<A.length;b++)A[b](i,_,o,e)},g={time:0,frame:0,tick:function(){C(!0)},deltaRatio:function(t){return _/(1e3/(t||60))},wake:function(){c&&(!l&&Y()&&(a=l=window,u=a.document||{},st.gsap=gn,(a.gsapVersions||(a.gsapVersions=[])).push(gn.version),lt(at||a.GreenSockGlobals||!a.gsap&&a||{}),v=a.requestAnimationFrame),f&&g.sleep(),m=v||function(t){return setTimeout(t,E-1e3*g.time+1|0)},p=1,C(2))},sleep:function(){(v?a.cancelAnimationFrame:clearTimeout)(f),p=0,m=dt},lagSmoothing:function(t,e){x=t||1e8,w=Math.min(e,x,0)},fps:function(t){T=1e3/(t||240),E=1e3*g.time+T},add:function(t){A.indexOf(t)<0&&A.push(t),Pe()},remove:function(t){var e;~(e=A.indexOf(t))&&A.splice(e,1)&&b>=e&&b--},_listeners:A=[]}),Pe=function(){return!p&&Ce.wake()},Re={},Le=/^[\d.\-M][\d.\-,\s]/,ke=/["']/g,Oe=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),s=o[0],a=1,l=o.length;a<l;a++)n=o[a],e=a!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[s]=isNaN(r)?r.replace(ke,"").trim():+r,s=n.substr(e+1).trim();return i},De=function(t){return function(e){return 1-t(1-e)}},Ie=function t(e,n){for(var r,i=e._first;i;)i instanceof He?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ue=function(t,e){return t&&(j(t)?t:Re[t]||function(t){var e,n,r,i,o=(t+"").split("("),s=Re[o[0]];return s&&o.length>1&&s.config?s.config.apply(null,~t.indexOf("{")?[Oe(o[1])]:(e=t,n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n),e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)).split(",").map(Rt)):Re._CE&&Le.test(t)?Re._CE("",t):s}(t))||e},Fe=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return Mt(t,function(t){for(var e in Re[t]=st[t]=o,Re[i=t.toLowerCase()]=n,o)Re[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Re[t+"."+e]=o[e]}),o},Ne=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Be=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),s=o/F*(Math.asin(1/i)||0),a=function(t){return 1===t?1:i*Math.pow(2,-10*t)*G((t-s)*o)+1},l="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Ne(a);return o=F/o,l.config=function(n,r){return t(e,n,r)},l},Ve=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Ne(r);return i.config=function(n){return t(e,n)},i};Mt("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Fe(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),Re.Linear.easeNone=Re.none=Re.Linear.easeIn,Fe("Elastic",Be("in"),Be("out"),Be()),P=7.5625,L=1/(R=2.75),Fe("Bounce",function(t){return 1-k(1-t)},k=function(t){return t<L?P*t*t:t<.7272727272727273?P*Math.pow(t-1.5/R,2)+.75:t<.9090909090909092?P*(t-=2.25/R)*t+.9375:P*Math.pow(t-2.625/R,2)+.984375}),Fe("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Fe("Circ",function(t){return-(V(1-t*t)-1)}),Fe("Sine",function(t){return 1===t?1:1-z(t*N)}),Fe("Back",Ve("in"),Ve("out"),Ve()),Re.SteppedEase=Re.steps=st.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*re(0,.99999999,t)|0)+i)*n}}},D.ease=Re["quad.out"],Mt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return yt+=t+","+t+"Params,"});var ze=function(t,e){this.id=B++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:St,this.set=e?e.getSetter:rn},Ge=function(){function t(t,e){var n=t.parent||s;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Jt(this,+t.duration,1,1),this.data=t.data,p||Ce.wake(),n&&Xt(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Jt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Pe(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Kt(this,t),!n._dp||n.parent||qt(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Xt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===U||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Pt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Gt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Gt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Ht(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?jt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(re(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=U)&&Math.abs(this._zTime)!==U))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Xt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(X(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?jt(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Qt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,Qt(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(ee(this,t),X(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,X(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-U))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise(function(n){var r=j(t)?t:Lt,i=function(){var t=e.then;e.then=null,j(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i})},e.kill=function(){_e(this)},t}();kt(Ge.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var He=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e,n)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=X(e.sortChildren),i.parent&&qt(i.parent,r(i)),e.scrollTrigger&&Yt(r(i),e.scrollTrigger),i}i(e,t);var n=e.prototype;return n.to=function(t,e,n){return new Je(t,At(arguments,0,this),ee(this,W(e)?arguments[3]:n)),this},n.from=function(t,e,n){return new Je(t,At(arguments,1,this),ee(this,W(e)?arguments[3]:n)),this},n.fromTo=function(t,e,n,r){return new Je(t,At(arguments,2,this),ee(this,W(e)?arguments[4]:r)),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Ft(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Je(t,e,ee(this,n),1),this},n.call=function(t,e,n){return Xt(this,Je.delayedCall(0,t,e),ee(this,n))},n.staggerTo=function(t,e,n,r,i,o,s){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=s,n.parent=this,new Je(t,n,ee(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,s){return n.runBackwards=1,Ft(n).immediateRender=X(n.immediateRender),this.staggerTo(t,e,n,r,i,o,s)},n.staggerFromTo=function(t,e,n,r,i,o,s,a){return r.startAt=n,Ft(r).immediateRender=X(r.immediateRender),this.staggerTo(t,e,r,i,o,s,a)},n.render=function(t,e,n){var r,i,o,a,l,u,c,h,d,p,f,m,v=this._time,g=this._dirty?this.totalDuration():this._tDur,_=this._dur,b=this!==s&&t>g-U&&t>=0?g:t<U?0:t,y=this._zTime<0!=t<0&&(this._initted||!_);if(b!==this._tTime||n||y){if(v!==this._time&&_&&(b+=this._time-v,t+=this._time-v),r=b,d=this._start,u=!(h=this._ts),y&&(_||(v=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,l=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*l+t,e,n);if(r=Tt(b%l),b===g?(a=this._repeat,r=_):((a=~~(b/l))&&a===b/l&&(r=_,a--),r>_&&(r=_)),p=Ht(this._tTime,l),!v&&this._tTime&&p!==a&&(p=a),f&&1&a&&(r=_-r,m=1),a!==p&&!this._lock){var x=f&&1&p,w=x===(f&&1&a);if(a<p&&(x=!x),v=x?0:_,this._lock=1,this.render(v||(m?0:Tt(a*l)),e,!_)._lock=0,!e&&this.parent&&ge(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),v!==this._time||u!==!this._ts)return this;if(_=this._dur,g=this._tDur,w&&(this._lock=2,v=x?_:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Ie(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,Tt(v),Tt(r)),c&&(b-=r-(r=c._start))),this._tTime=b,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,v=0),!v&&(r||!_&&t>=0)&&!e&&ge(this,"onStart"),r>=v&&t>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!u){c=0,o&&(b+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var S=t<0?t:r;i;){if(o=i._prev,(i._act||S<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(S-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(S-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!u){c=0,o&&(b+=this._zTime=S?-1e-8:U);break}}i=o}}if(c&&!e&&(this.pause(),c.render(r>=v?0:-1e-8)._zTime=r>=v?1:-1,this._ts))return this._start=d,Wt(this),this.render(t,e,n);this._onUpdate&&!e&&ge(this,"onUpdate",!0),(b===g&&g>=this.totalDuration()||!b&&v)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(b===g&&this._ts>0||!b&&this._ts<0)&&Bt(this,1),e||t<0&&!v||!b&&!v||(ge(this,b===g?"onComplete":"onReverseComplete",!0),this._prom&&!(b<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(W(e)||(e=ee(this,e)),!(t instanceof Ge)){if(J(t))return t.forEach(function(t){return n.add(t,e)}),this;if(H(t))return this.addLabel(t,e);if(!j(t))return this;t=Je.delayedCall(0,t)}return this!==t?Xt(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-I);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof Je?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return H(t)?this.removeLabel(t):j(t)?this.killTweensOf(t):(Nt(this,t),t===this._recent&&(this._recent=this._last),Vt(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Tt(Ce.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=ee(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=Je.delayedCall(0,e||dt,n);return r.data="isPause",this._hasPause=1,Xt(this,r,ee(this,t))},n.removePause=function(t){var e=this._first;for(t=ee(this,t);e;)e._start===t&&"isPause"===e.data&&Bt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)je!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=ae(t),o=this._first,s=W(e);o;)o instanceof Je?Et(o._targets,i)&&(s?(!je||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n=this,r=ee(n,t),i=e,o=i.startAt,s=i.onStart,a=i.onStartParams,l=i.immediateRender,u=Je.to(n,kt({ease:"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||U,onStart:function(){n.pause();var t=e.duration||Math.abs((r-n._time)/n.timeScale());u._dur!==t&&Jt(u,t,0,1).render(u._time,!0,!0),s&&s.apply(u,a||[])}},e));return l?u.render(0):u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,kt({startAt:{time:ee(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),ve(this,ee(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),ve(this,ee(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+U)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return Vt(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Vt(this)},n.totalDuration=function(t){var e,n,r,i=0,o=this,a=o._last,l=I;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Xt(o,a,n-a._delay,1)._lock=0):l=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-1/0),l=0),a._end>i&&a._ts&&(i=a._end),a=e;Jt(o,o===s&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(s._ts&&(Pt(s,jt(t,s)),h=Ce.frame),Ce.frame>=_t){_t+=O.autoSleep||120;var e=s._first;if((!e||!e._ts)&&O.autoSleep&&Ce._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ce.sleep()}}},e}(Ge);kt(He.prototype,{_lock:0,_hasPause:0,_forcing:0});var je,We=function(t,e,n,r,i,o,s){var a,l,u,c,h,d,p,f,m=new pn(this._pt,t,e,0,1,an,null,i),v=0,g=0;for(m.b=n,m.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=fe(r)),o&&(o(f=[n,r],t,e),n=f[0],r=f[1]),l=n.match(nt)||[];a=nt.exec(r);)c=a[0],h=r.substring(v,a.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),c!==l[g++]&&(d=parseFloat(l[g-1])||0,m._pt={_next:m._pt,p:h||1===g?h:",",s:d,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-d,m:u&&u<4?Math.round:0},v=nt.lastIndex);return m.c=v<r.length?r.substring(v,r.length):"",m.fp=s,(rt.test(r)||p)&&(m.e=0),this._pt=m,m},Ke=function(t,e,n,r,i,o,s,a,l){j(r)&&(r=r(i||0,t,o));var u,c=t[e],h="get"!==n?n:j(c)?l?t[e.indexOf("set")||!j(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():c,d=j(c)?l?en:tn:Qe;if(H(r)&&(~r.indexOf("random(")&&(r=fe(r)),"="===r.charAt(1)&&(r=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(ie(h)||0))),h!==r)return isNaN(h*r)?(!c&&!(e in t)&&ut(e,r),We.call(this,t,e,h,r,d,a||O.stringFilter,l)):(u=new pn(this._pt,t,e,+h||0,r-(h||0),"boolean"==typeof c?sn:on,0,d),l&&(u.fp=l),s&&u.modifier(s,this,t),this._pt=u)},qe=function(t,e,n,r,i,o){var s,a,l,u;if(vt[t]&&!1!==(s=new vt[t]).init(i,s.rawVars?e[t]:function(t,e,n,r,i){if(j(t)&&(t=Ye(t,i,e,n,r)),!q(t)||t.style&&t.nodeType||J(t)||Z(t))return H(t)?Ye(t,i,e,n,r):t;var o,s={};for(o in t)s[o]=Ye(t[o],i,e,n,r);return s}(e[t],r,i,o,n),n,r,o)&&(n._pt=a=new pn(n._pt,i,t,0,1,s.render,s,0,s.priority),n!==d))for(l=n._ptLookup[n._targets.indexOf(i)],u=s._props.length;u--;)l[s._props[u]]=a;return s},Xe=function t(e,n){var r,i,a,l,u,c,h,d,p,f,m,v,g,_=e.vars,b=_.ease,y=_.startAt,x=_.immediateRender,w=_.lazy,S=_.onUpdate,M=_.onUpdateParams,T=_.callbackScope,E=_.runBackwards,A=_.yoyoEase,C=_.keyframes,P=_.autoRevert,R=e._dur,L=e._startAt,k=e._targets,O=e.parent,I=O&&"nested"===O.data?O.parent._targets:k,F="auto"===e._overwrite&&!o,N=e.timeline;if(N&&(!C||!b)&&(b="none"),e._ease=Ue(b,D.ease),e._yEase=A?De(Ue(!0===A?b:A,D.ease)):0,A&&e._yoyo&&!e._repeat&&(A=e._yEase,e._yEase=e._ease,e._ease=A),!N){if(v=(d=k[0]?wt(k[0]).harness:0)&&_[d.prop],r=Ut(_,pt),L&&L.render(-1,!0).kill(),y){if(Bt(e._startAt=Je.set(k,kt({data:"isStart",overwrite:!1,parent:O,immediateRender:!0,lazy:X(w),startAt:null,delay:0,onUpdate:S,onUpdateParams:M,callbackScope:T,stagger:0},y))),x)if(n>0)P||(e._startAt=0);else if(R&&!(n<0&&L))return void(n&&(e._zTime=n))}else if(E&&R)if(L)!P&&(e._startAt=0);else if(n&&(x=!1),a=kt({overwrite:!1,data:"isFromStart",lazy:x&&X(w),immediateRender:x,stagger:0,parent:O},r),v&&(a[d.prop]=v),Bt(e._startAt=Je.set(k,a)),x){if(!n)return}else t(e._startAt,U);for(e._pt=0,w=R&&X(w)||w&&!R,i=0;i<k.length;i++){if(h=(u=k[i])._gsap||xt(k)[i]._gsap,e._ptLookup[i]=f={},mt[h.id]&&ft.length&&Ct(),m=I===k?i:I.indexOf(u),d&&!1!==(p=new d).init(u,v||r,e,m,I)&&(e._pt=l=new pn(e._pt,u,p.name,0,1,p.render,p,0,p.priority),p._props.forEach(function(t){f[t]=l}),p.priority&&(c=1)),!d||v)for(a in r)vt[a]&&(p=qe(a,r,e,m,u,I))?p.priority&&(c=1):f[a]=l=Ke.call(e,u,a,"get",r[a],m,I,0,_.stringFilter);e._op&&e._op[i]&&e.kill(u,e._op[i]),F&&e._pt&&(je=e,s.killTweensOf(u,f,e.globalTime(0)),g=!e.parent,je=0),e._pt&&w&&(mt[h.id]=1)}c&&dn(e),e._onInit&&e._onInit(e)}e._from=!N&&!!_.runBackwards,e._onUpdate=S,e._initted=(!e._op||e._pt)&&!g},Ye=function(t,e,n,r,i){return j(t)?t.call(e,n,r,i):H(t)&&~t.indexOf("random(")?fe(t):t},$e=yt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ze=($e+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Je=function(t){function e(e,n,i,a){var l;"number"==typeof n&&(i.duration=n,n=i,i=null);var u,c,h,d,p,f,m,v,g=(l=t.call(this,a?n:Ft(n),i)||this).vars,_=g.duration,b=g.delay,y=g.immediateRender,x=g.stagger,w=g.overwrite,S=g.keyframes,M=g.defaults,T=g.scrollTrigger,E=g.yoyoEase,A=l.parent,C=(J(e)||Z(e)?W(e[0]):"length"in n)?[e]:ae(e);if(l._targets=C.length?xt(C):ct("GSAP target "+e+" not found. https://greensock.com",!O.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=w,S||x||$(_)||$(b)){if(n=l.vars,(u=l.timeline=new He({data:"nested",defaults:M||{}})).kill(),u.parent=u._dp=r(l),u._start=0,S)kt(u.vars.defaults,{ease:"none"}),S.forEach(function(t){return u.to(C,t,">")});else{if(d=C.length,m=x?ue(x):dt,q(x))for(p in x)~$e.indexOf(p)&&(v||(v={}),v[p]=x[p]);for(c=0;c<d;c++){for(p in h={},n)Ze.indexOf(p)<0&&(h[p]=n[p]);h.stagger=0,E&&(h.yoyoEase=E),v&&Dt(h,v),f=C[c],h.duration=+Ye(_,r(l),c,f,C),h.delay=(+Ye(b,r(l),c,f,C)||0)-l._delay,!x&&1===d&&h.delay&&(l._delay=b=h.delay,l._start+=b,h.delay=0),u.to(f,h,m(c,f,C))}u.duration()?_=b=0:l.timeline=0}_||l.duration(_=u.duration())}else l.timeline=0;return!0!==w||o||(je=r(l),s.killTweensOf(C),je=0),A&&qt(A,r(l)),(y||!_&&!S&&l._start===Tt(A._time)&&X(y)&&zt(r(l))&&"nested"!==A.data)&&(l._tTime=-1e-8,l.render(Math.max(0,-b))),T&&Yt(r(l),T),l}i(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,s,a,l,u,c,h,d=this._time,p=this._tDur,f=this._dur,m=t>p-U&&t>=0?p:t<U?0:t;if(f){if(m!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(r=m,c=this.timeline,this._repeat){if(s=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,n);if(r=Tt(m%s),m===p?(o=this._repeat,r=f):((o=~~(m/s))&&o===m/s&&(r=f,o--),r>f&&(r=f)),(l=this._yoyo&&1&o)&&(h=this._yEase,r=f-r),a=Ht(this._tTime,s),r===d&&!n&&this._initted)return this;o!==a&&(c&&this._yEase&&Ie(c,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(Tt(s*o),!0).invalidate()._lock=0))}if(!this._initted){if($t(this,t<0?t:r,n,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,n)}for(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(h||this._ease)(r/f),this._from&&(this.ratio=u=1-u),r&&!d&&!e&&ge(this,"onStart"),i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(t<0?t:!r&&l?-1e-8:c._dur*u,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),ge(this,"onUpdate")),this._repeat&&o!==a&&this.vars.onRepeat&&!e&&this.parent&&ge(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Bt(this,1),e||t<0&&!d||!m&&!d||(ge(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,o,s,a=t.ratio,l=e<0||!e&&(!t._start&&Zt(t)||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data)?0:1,u=t._rDelay,c=0;if(u&&t._repeat&&(c=re(0,t._tDur,e),o=Ht(c,u),s=Ht(t._tTime,u),t._yoyo&&1&o&&(l=1-l),o!==s&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||r||t._zTime===U||!e&&t._zTime){if(!t._initted&&$t(t,e,r,n))return;for(s=t._zTime,t._zTime=e||(n?U:0),n||(n=e&&!s),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=c,n||ge(t,"onStart"),i=t._pt;i;)i.r(l,i.d),i=i._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&ge(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&ge(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Bt(t,1),n||(ge(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?_e(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,je&&!0!==je.vars.overwrite)._first||_e(this),this.parent&&n!==this.timeline.totalDuration()&&Jt(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,s,a,l,u,c=this._targets,h=t?ae(t):c,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(c,h))return"all"===e&&(this._pt=0),_e(this);for(r=this._op=this._op||[],"all"!==e&&(H(e)&&(a={},Mt(e,function(t){return a[t]=1}),e=a),e=function(t,e){var n,r,i,o,s=t[0]?wt(t[0]).harness:0,a=s&&s.aliases;if(!a)return e;for(r in n=Dt({},e),a)if(r in n)for(i=(o=a[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,e)),u=c.length;u--;)if(~h.indexOf(c[u]))for(a in i=d[u],"all"===e?(r[u]=e,s=i,o={}):(o=r[u]=r[u]||{},s=e),s)(l=i&&i[a])&&("kill"in l.d&&!0!==l.d.kill(a)||Nt(this,l,"_pt"),delete i[a]),"all"!==o&&(o[a]=1);return this._initted&&!this._pt&&p&&_e(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,n){return new e(t,At(arguments,1))},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,n,r){return new e(t,At(arguments,2))},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return s.killTweensOf(t,e,n)},e}(Ge);kt(Je.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Mt("staggerTo,staggerFrom,staggerFromTo",function(t){Je[t]=function(){var e=new He,n=oe.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var Qe=function(t,e,n){return t[e]=n},tn=function(t,e,n){return t[e](n)},en=function(t,e,n,r){return t[e](r.fp,n)},nn=function(t,e,n){return t.setAttribute(e,n)},rn=function(t,e){return j(t[e])?tn:K(t[e])&&t.setAttribute?nn:Qe},on=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},sn=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},an=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},ln=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},un=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},cn=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?Nt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},hn=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},dn=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},pn=function(){function t(t,e,n,r,i,o,s,a,l){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||on,this.d=s||this,this.set=a||Qe,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=hn,this.m=t,this.mt=n,this.tween=e},t}();Mt(yt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return pt[t]=1}),st.TweenMax=st.TweenLite=Je,st.TimelineLite=st.TimelineMax=He,s=new He({sortChildren:!1,defaults:D,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),O.stringFilter=Ae;var fn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){return function(t){var e=(t=!t.name&&t.default||t).name,n=j(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:dt,render:ln,add:Ke,kill:cn,modifier:un,rawVars:0},o={targetTest:0,get:0,getSetter:rn,aliases:{},register:0};if(Pe(),t!==r){if(vt[e])return;kt(r,kt(Ut(t,i),o)),Dt(r.prototype,Dt(i,Ut(t,o))),vt[r.prop=e]=r,t.targetTest&&(bt.push(r),pt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ht(e,r),t.register&&t.register(gn,r,pn)}(t)})},timeline:function(t){return new He(t)},getTweensOf:function(t,e){return s.getTweensOf(t,e)},getProperty:function(t,e,n,r){H(t)&&(t=ae(t)[0]);var i=wt(t||{}).get,o=n?Lt:Rt;return"native"===n&&(n=""),t?e?o((vt[e]&&vt[e].get||i)(t,e,n,r)):function(e,n,r){return o((vt[e]&&vt[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=ae(t)).length>1){var r=t.map(function(t){return gn.quickSetter(t,e,n)}),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=vt[e],s=wt(t),a=s.harness&&(s.harness.aliases||{})[e]||e,l=o?function(e){var r=new o;d._pt=0,r.init(t,n?e+n:e,d,0,[t]),r.render(1,r),d._pt&&ln(1,d)}:s.set(t,a);return o?l:function(e){return l(t,a,n?e+n:e,s,1)}},isTweening:function(t){return s.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ue(t.ease,D.ease)),It(D,t||{})},config:function(t){return It(O,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(t){return t&&!vt[t]&&!st[t]&&ct(e+" effect requires "+t+" plugin.")}),gt[e]=function(t,e,r){return n(ae(t),kt(e||{},i),r)},o&&(He.prototype[e]=function(t,n,r){return this.add(gt[e](t,q(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){Re[t]=Ue(e)},parseEase:function(t,e){return arguments.length?Ue(t,e):Re},getById:function(t){return s.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new He(t);for(i.smoothChildTiming=X(t.smoothChildTiming),s.remove(i),i._dp=0,i._time=i._tTime=s._time,n=s._first;n;)r=n._next,!e&&!n._dur&&n instanceof Je&&n.vars.onComplete===n._targets[0]||Xt(i,n,n._start-n._delay),n=r;return Xt(s,i,0),i},utils:{wrap:function t(e,n,r){var i=n-e;return J(e)?pe(e,t(0,e.length),n):ne(r,function(t){return(i+(t-e)%i)%i+e})},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return J(e)?pe(e,t(0,e.length-1),n):ne(r,function(t){return e+((t=(o+(t-e)%o)%o||0)>i?o-t:t)})},distribute:ue,random:de,snap:he,normalize:function(t,e,n){return me(t,e,0,1,n)},getUnit:ie,clamp:function(t,e,n){return ne(n,function(n){return re(t,e,n)})},splitColor:we,toArray:ae,mapRange:me,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||ie(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var s,a,l,u,c,h=H(e),d={};if(!0===r&&(i=1)&&(r=null),h)e={p:e},n={p:n};else if(J(e)&&!J(n)){for(l=[],u=e.length,c=u-2,a=1;a<u;a++)l.push(t(e[a-1],e[a]));u--,o=function(t){t*=u;var e=Math.min(c,~~t);return l[e](t-e)},r=n}else i||(e=Dt(J(e)?[]:{},e));if(!l){for(s in n)Ke.call(d,e,s,"get",n[s]);o=function(t){return ln(t,d)||(h?e.p:e)}}}return ne(r,o)},shuffle:le},install:lt,effects:gt,ticker:Ce,updateRoot:He.updateRoot,plugins:vt,globalTimeline:s,core:{PropTween:pn,globals:ht,Tween:Je,Timeline:He,Animation:Ge,getCache:wt,_removeLinkedListItem:Nt,suppressOverwrites:function(t){return o=t}}};Mt("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return fn[t]=Je[t]}),Ce.add(He.updateRoot),d=fn.to({},{duration:0});var mn=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},vn=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(H(n)&&(r={},Mt(n,function(t){return r[t]=1}),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=mn(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},gn=fn.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,s;for(o in e)(s=this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],r,i,0,0,o))&&(s.op=o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},vn("roundProps",ce),vn("modifiers"),vn("snap",he))||fn;Je.version=He.version=gn.version="3.6.0",c=1,Y()&&Pe(),Re.Power0,Re.Power1,Re.Power2,Re.Power3,Re.Power4,Re.Linear,Re.Quad,Re.Cubic,Re.Quart,Re.Quint,Re.Strong;var _n=Re.Elastic,bn=(Re.Back,Re.SteppedEase,Re.Bounce,Re.Sine);Re.Expo,Re.Circ},990:function(t,e,n){"use strict";n.d(e,{ZP:function(){return bt}});var r,i,o,s,a,l,u,c,h=n(5317),d={},p=180/Math.PI,f=Math.PI/180,m=Math.atan2,v=/([A-Z])/g,g=/(?:left|right|width|margin|padding|x)/i,_=/[\s,\(]\S/,b={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},y=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},x=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},w=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},S=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},M=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},T=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},E=function(t,e,n){return t.style[e]=n},A=function(t,e,n){return t.style.setProperty(e,n)},C=function(t,e,n){return t._gsap[e]=n},P=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},R=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},L=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},k="transform",O=k+"Origin",D=function(t,e){var n=i.createElementNS?i.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):i.createElement(t);return n.style?n:i.createElement(t)},I=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(v,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,F(n)||n,1)||""},U="O,Moz,ms,Ms,Webkit".split(","),F=function(t,e,n){var r=(e||a).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(U[i]+t in r););return i<0?null:(3===i?"ms":i>=0?U[i]:"")+t},N=function(){"undefined"!=typeof window&&window.document&&(r=window,i=r.document,o=i.documentElement,a=D("div")||{style:{}},l=D("div"),k=F(k),O=k+"Origin",a.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",c=!!F("perspective"),s=1)},B=function t(e){var n,r=D("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(o.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),o.removeChild(r),this.style.cssText=a,n},V=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},z=function(t){var e;try{e=t.getBBox()}catch(n){e=B.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===B||(e=B.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+V(t,["x","cx","x1"])||0,y:+V(t,["y","cy","y1"])||0,width:0,height:0}},G=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!z(t))},H=function(t,e){if(e){var n=t.style;e in d&&e!==O&&(e=k),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(v,"-$1").toLowerCase())):n.removeAttribute(e)}},j=function(t,e,n,r,i,o){var s=new h.Fo(t._pt,e,n,0,1,o?T:M);return t._pt=s,s.b=r,s.e=i,t._props.push(n),s},W={deg:1,rad:1,turn:1},K=function t(e,n,r,o){var s,l,u,c,p=parseFloat(r)||0,f=(r+"").trim().substr((p+"").length)||"px",m=a.style,v=g.test(n),_="svg"===e.tagName.toLowerCase(),b=(_?"client":"offset")+(v?"Width":"Height"),y=100,x="px"===o,w="%"===o;return o===f||!p||W[o]||W[f]?p:("px"!==f&&!x&&(p=t(e,n,r,"px")),c=e.getCTM&&G(e),!w&&"%"!==f||!d[n]&&!~n.indexOf("adius")?(m[v?"width":"height"]=y+(x?f:o),l=~n.indexOf("adius")||"em"===o&&e.appendChild&&!_?e:e.parentNode,c&&(l=(e.ownerSVGElement||{}).parentNode),l&&l!==i&&l.appendChild||(l=i.body),(u=l._gsap)&&w&&u.width&&v&&u.time===h.xr.time?(0,h.Pr)(p/u.width*y):((w||"%"===f)&&(m.position=I(e,"position")),l===e&&(m.position="static"),l.appendChild(a),s=a[b],l.removeChild(a),m.position="absolute",v&&w&&((u=(0,h.DY)(l)).time=h.xr.time,u.width=l[b]),(0,h.Pr)(x?s*p/y:s&&p?y/s*p:0))):(s=c?e.getBBox()[v?"width":"height"]:e[b],(0,h.Pr)(w?p/s*y:p/100*s)))},q=function(t,e,n,r){var i;return s||N(),e in b&&"transform"!==e&&~(e=b[e]).indexOf(",")&&(e=e.split(",")[0]),d[e]&&"transform"!==e?(i=it(t,r),i="transformOrigin"!==e?i[e]:ot(I(t,O))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Z[e]&&Z[e](t,e,n)||I(t,e)||(0,h.Ok)(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?K(t,e,i,n)+n:i},X=function(t,e,n,r){if(!n||"none"===n){var i=F(e,t,1),o=i&&I(t,i,1);o&&o!==n?(e=i,n=o):"borderColor"===e&&(n=I(t,"borderTopColor"))}var s,a,l,u,c,d,p,f,m,v,g,_,b=new h.Fo(this._pt,t.style,e,0,1,h.Ks),y=0,x=0;if(b.b=n,b.e=r,n+="","auto"==(r+="")&&(t.style[e]=r,r=I(t,e)||r,t.style[e]=n),s=[n,r],(0,h.kr)(s),r=s[1],l=(n=s[0]).match(h.d4)||[],(r.match(h.d4)||[]).length){for(;a=h.d4.exec(r);)p=a[0],m=r.substring(y,a.index),c?c=(c+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(c=1),p!==(d=l[x++]||"")&&(u=parseFloat(d)||0,g=d.substr((u+"").length),(_="="===p.charAt(1)?+(p.charAt(0)+"1"):0)&&(p=p.substr(2)),f=parseFloat(p),v=p.substr((f+"").length),y=h.d4.lastIndex-v.length,v||(v=v||h.Fc.units[e]||g,y===r.length&&(r+=v,b.e+=v)),g!==v&&(u=K(t,e,d,v)||0),b._pt={_next:b._pt,p:m||1===x?m:",",s:u,c:_?_*f:f-u,m:c&&c<4||"zIndex"===e?Math.round:0});b.c=y<r.length?r.substring(y,r.length):""}else b.r="display"===e&&"none"===r?T:M;return h.bQ.test(r)&&(b.e=0),this._pt=b,b},Y={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,s=o.style,a=e.u,l=o._gsap;if("all"===a||!0===a)s.cssText="",r=1;else for(i=(a=a.split(",")).length;--i>-1;)n=a[i],d[n]&&(r=1,n="transformOrigin"===n?O:k),H(o,n);r&&(H(o,k),l&&(l.svg&&o.removeAttribute("transform"),it(o,1),l.uncache=1))}},Z={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new h.Fo(t._pt,e,n,0,0,$);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},J=[1,0,0,1,0,0],Q={},tt=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},et=function(t){var e=I(t,k);return tt(e)?J:e.substr(7).match(h.SI).map(h.Pr)},nt=function(t,e){var n,r,i,s,a=t._gsap||(0,h.DY)(t),l=t.style,u=et(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?J:u:(u!==J||t.offsetParent||t===o||a.svg||(i=l.display,l.display="block",(n=t.parentNode)&&t.offsetParent||(s=1,r=t.nextSibling,o.appendChild(t)),u=et(t),i?l.display=i:H(t,"display"),s&&(r?n.insertBefore(t,r):n?n.appendChild(t):o.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},rt=function(t,e,n,r,i,o){var s,a,l,u=t._gsap,c=i||nt(t,!0),h=u.xOrigin||0,d=u.yOrigin||0,p=u.xOffset||0,f=u.yOffset||0,m=c[0],v=c[1],g=c[2],_=c[3],b=c[4],y=c[5],x=e.split(" "),w=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?c!==J&&(a=m*_-v*g)&&(l=w*(-v/a)+S*(m/a)-(m*y-v*b)/a,w=w*(_/a)+S*(-g/a)+(g*y-_*b)/a,S=l):(w=(s=z(t)).x+(~x[0].indexOf("%")?w/100*s.width:w),S=s.y+(~(x[1]||x[0]).indexOf("%")?S/100*s.height:S)),r||!1!==r&&u.smooth?(b=w-h,y=S-d,u.xOffset=p+(b*m+y*g)-b,u.yOffset=f+(b*v+y*_)-y):u.xOffset=u.yOffset=0,u.xOrigin=w,u.yOrigin=S,u.smooth=!!r,u.origin=e,u.originIsAbsolute=!!n,t.style[O]="0px 0px",o&&(j(o,u,"xOrigin",h,w),j(o,u,"yOrigin",d,S),j(o,u,"xOffset",p,u.xOffset),j(o,u,"yOffset",f,u.yOffset)),t.setAttribute("data-svg-origin",w+" "+S)},it=function(t,e){var n=t._gsap||new h.l1(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,s,a,l,u,d,v,g,_,b,y,x,w,S,M,T,E,A,C,P,R,L,D,U,F,N,B,V,z,H,j=t.style,W=n.scaleX<0,K="px",q="deg",X=I(t,O)||"0";return r=i=o=l=u=d=v=g=_=0,s=a=1,n.svg=!(!t.getCTM||!G(t)),x=nt(t,n.svg),n.svg&&(L=!n.uncache&&t.getAttribute("data-svg-origin"),rt(t,L||X,!!L||n.originIsAbsolute,!1!==n.smooth,x)),b=n.xOrigin||0,y=n.yOrigin||0,x!==J&&(T=x[0],E=x[1],A=x[2],C=x[3],r=P=x[4],i=R=x[5],6===x.length?(s=Math.sqrt(T*T+E*E),a=Math.sqrt(C*C+A*A),l=T||E?m(E,T)*p:0,(v=A||C?m(A,C)*p+l:0)&&(a*=Math.cos(v*f)),n.svg&&(r-=b-(b*T+y*A),i-=y-(b*E+y*C))):(H=x[6],V=x[7],F=x[8],N=x[9],B=x[10],z=x[11],r=x[12],i=x[13],o=x[14],u=(w=m(H,B))*p,w&&(L=P*(S=Math.cos(-w))+F*(M=Math.sin(-w)),D=R*S+N*M,U=H*S+B*M,F=P*-M+F*S,N=R*-M+N*S,B=H*-M+B*S,z=V*-M+z*S,P=L,R=D,H=U),d=(w=m(-A,B))*p,w&&(S=Math.cos(-w),z=C*(M=Math.sin(-w))+z*S,T=L=T*S-F*M,E=D=E*S-N*M,A=U=A*S-B*M),l=(w=m(E,T))*p,w&&(L=T*(S=Math.cos(w))+E*(M=Math.sin(w)),D=P*S+R*M,E=E*S-T*M,R=R*S-P*M,T=L,P=D),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,d=180-d),s=(0,h.Pr)(Math.sqrt(T*T+E*E+A*A)),a=(0,h.Pr)(Math.sqrt(R*R+H*H)),w=m(P,R),v=Math.abs(w)>2e-4?w*p:0,_=z?1/(z<0?-z:z):0),n.svg&&(L=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!tt(I(t,k)),L&&t.setAttribute("transform",L))),Math.abs(v)>90&&Math.abs(v)<270&&(W?(s*=-1,v+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,v+=v<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+K,n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+K,n.z=o+K,n.scaleX=(0,h.Pr)(s),n.scaleY=(0,h.Pr)(a),n.rotation=(0,h.Pr)(l)+q,n.rotationX=(0,h.Pr)(u)+q,n.rotationY=(0,h.Pr)(d)+q,n.skewX=v+q,n.skewY=g+q,n.transformPerspective=_+K,(n.zOrigin=parseFloat(X.split(" ")[2])||0)&&(j[O]=ot(X)),n.xOffset=n.yOffset=0,n.force3D=h.Fc.force3D,n.renderTransform=n.svg?dt:c?ht:at,n.uncache=0,n},ot=function(t){return(t=t.split(" "))[0]+" "+t[1]},st=function(t,e,n){var r=(0,h.Wy)(e);return(0,h.Pr)(parseFloat(e)+parseFloat(K(t,"x",n+"px",r)))+r},at=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ht(t,e)},lt="0deg",ut="0px",ct=") ",ht=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,s=n.y,a=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,m=n.scaleY,v=n.transformPerspective,g=n.force3D,_=n.target,b=n.zOrigin,y="",x="auto"===g&&t&&1!==t||!0===g;if(b&&(c!==lt||u!==lt)){var w,S=parseFloat(u)*f,M=Math.sin(S),T=Math.cos(S);S=parseFloat(c)*f,w=Math.cos(S),o=st(_,o,M*w*-b),s=st(_,s,-Math.sin(S)*-b),a=st(_,a,T*w*-b+b)}v!==ut&&(y+="perspective("+v+ct),(r||i)&&(y+="translate("+r+"%, "+i+"%) "),(x||o!==ut||s!==ut||a!==ut)&&(y+=a!==ut||x?"translate3d("+o+", "+s+", "+a+") ":"translate("+o+", "+s+ct),l!==lt&&(y+="rotate("+l+ct),u!==lt&&(y+="rotateY("+u+ct),c!==lt&&(y+="rotateX("+c+ct),h===lt&&d===lt||(y+="skew("+h+", "+d+ct),1===p&&1===m||(y+="scale("+p+", "+m+ct),_.style[k]=y||"translate(0, 0)"},dt=function(t,e){var n,r,i,o,s,a=e||this,l=a.xPercent,u=a.yPercent,c=a.x,d=a.y,p=a.rotation,m=a.skewX,v=a.skewY,g=a.scaleX,_=a.scaleY,b=a.target,y=a.xOrigin,x=a.yOrigin,w=a.xOffset,S=a.yOffset,M=a.forceCSS,T=parseFloat(c),E=parseFloat(d);p=parseFloat(p),m=parseFloat(m),(v=parseFloat(v))&&(m+=v=parseFloat(v),p+=v),p||m?(p*=f,m*=f,n=Math.cos(p)*g,r=Math.sin(p)*g,i=Math.sin(p-m)*-_,o=Math.cos(p-m)*_,m&&(v*=f,s=Math.tan(m-v),i*=s=Math.sqrt(1+s*s),o*=s,v&&(s=Math.tan(v),n*=s=Math.sqrt(1+s*s),r*=s)),n=(0,h.Pr)(n),r=(0,h.Pr)(r),i=(0,h.Pr)(i),o=(0,h.Pr)(o)):(n=g,o=_,r=i=0),(T&&!~(c+"").indexOf("px")||E&&!~(d+"").indexOf("px"))&&(T=K(b,"x",c,"px"),E=K(b,"y",d,"px")),(y||x||w||S)&&(T=(0,h.Pr)(T+y-(y*n+x*i)+w),E=(0,h.Pr)(E+x-(y*r+x*o)+S)),(l||u)&&(s=b.getBBox(),T=(0,h.Pr)(T+l/100*s.width),E=(0,h.Pr)(E+u/100*s.height)),s="matrix("+n+","+r+","+i+","+o+","+T+","+E+")",b.setAttribute("transform",s),M&&(b.style[k]=s)},pt=function(t,e,n,r,i,o){var s,a,l=360,u=(0,h.r9)(i),c=parseFloat(i)*(u&&~i.indexOf("rad")?p:1),d=o?c*o:c-r,f=r+d+"deg";return u&&("short"===(s=i.split("_")[1])&&(d%=l)!==d%180&&(d+=d<0?l:-360),"cw"===s&&d<0?d=(d+36e9)%l-~~(d/l)*l:"ccw"===s&&d>0&&(d=(d-36e9)%l-~~(d/l)*l)),t._pt=a=new h.Fo(t._pt,e,n,r,d,x),a.e=f,a.u="deg",t._props.push(n),a},ft=function(t,e,n){var r,o,s,a,u,c,p,f=l.style,m=n._gsap;for(o in f.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",f[k]=e,i.body.appendChild(l),r=it(l,1),d)(s=m[o])!==(a=r[o])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(o)<0&&(u=(0,h.Wy)(s)!==(p=(0,h.Wy)(a))?K(n,o,s,p):parseFloat(s),c=parseFloat(a),t._pt=new h.Fo(t._pt,m,o,u,c-u,y),t._pt.u=p||0,t._props.push(o));i.body.removeChild(l)};(0,h.fS)("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",o="Left",s=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map(function(n){return e<2?t+n:"border"+n+t});Z[e>1?"border"+t:t]=function(t,e,n,r,i){var o,a;if(arguments.length<4)return o=s.map(function(e){return q(t,e,n)}),5===(a=o.join(" ")).split(o[0]).length?o[0]:a;o=(r+"").split(" "),a={},s.forEach(function(t,e){return a[t]=o[e]=o[e]||o[(e-1)/2|0]}),t.init(e,a,i)}});var mt,vt,gt,_t={name:"css",register:N,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,l,u,c,p,f,m,v,g,x,M,T,E,A,C,P,R,L,O=this._props,D=t.style,I=n.vars.startAt;for(f in s||N(),e)if("autoRound"!==f&&(a=e[f],!h.$i[f]||!(0,h.if)(f,e,n,r,t,i)))if(c=typeof a,p=Z[f],"function"===c&&(c=typeof(a=a.call(n,r,t,i))),"string"===c&&~a.indexOf("random(")&&(a=(0,h.UI)(a)),p)p(this,t,f,a,n)&&(A=1);else if("--"===f.substr(0,2))o=(getComputedStyle(t).getPropertyValue(f)+"").trim(),a+="",m=(0,h.Wy)(o),(v=(0,h.Wy)(a))?m!==v&&(o=K(t,f,o,v)+v):m&&(a+=m),this.add(D,"setProperty",o,a,r,i,0,0,f);else if("undefined"!==c){if(I&&f in I?(o="function"==typeof I[f]?I[f].call(n,r,t,i):I[f],f in h.Fc.units&&!(0,h.Wy)(o)&&(o+=h.Fc.units[f]),"="===(o+"").charAt(1)&&(o=q(t,f))):o=q(t,f),u=parseFloat(o),(g="string"===c&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),l=parseFloat(a),f in b&&("autoAlpha"===f&&(1===u&&"hidden"===q(t,"visibility")&&l&&(u=0),j(this,D,"visibility",u?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==f&&"transform"!==f&&~(f=b[f]).indexOf(",")&&(f=f.split(",")[0])),x=f in d)if(M||((T=t._gsap).renderTransform&&!e.parseTransform||it(t,e.parseTransform),E=!1!==e.smoothOrigin&&T.smooth,(M=this._pt=new h.Fo(this._pt,D,k,0,1,T.renderTransform,T,0,-1)).dep=1),"scale"===f)this._pt=new h.Fo(this._pt,T,"scaleY",T.scaleY,g?g*l:l-T.scaleY),O.push("scaleY",f),f+="X";else{if("transformOrigin"===f){P=void 0,R=void 0,L=void 0,R=(P=(C=a).split(" "))[0],L=P[1]||"50%","top"!==R&&"bottom"!==R&&"left"!==L&&"right"!==L||(C=R,R=L,L=C),P[0]=Y[R]||R,P[1]=Y[L]||L,a=P.join(" "),T.svg?rt(t,a,0,E,0,this):((v=parseFloat(a.split(" ")[2])||0)!==T.zOrigin&&j(this,T,"zOrigin",T.zOrigin,v),j(this,D,f,ot(o),ot(a)));continue}if("svgOrigin"===f){rt(t,a,1,E,0,this);continue}if(f in Q){pt(this,T,f,u,a,g);continue}if("smoothOrigin"===f){j(this,T,"smooth",T.smooth,a);continue}if("force3D"===f){T[f]=a;continue}if("transform"===f){ft(this,a,t);continue}}else f in D||(f=F(f)||f);if(x||(l||0===l)&&(u||0===u)&&!_.test(a)&&f in D)l||(l=0),(m=(o+"").substr((u+"").length))!==(v=(0,h.Wy)(a)||(f in h.Fc.units?h.Fc.units[f]:m))&&(u=K(t,f,o,v)),this._pt=new h.Fo(this._pt,x?T:D,f,u,g?g*l:l-u,x||"px"!==v&&"zIndex"!==f||!1===e.autoRound?y:S),this._pt.u=v||0,m!==v&&(this._pt.b=o,this._pt.r=w);else if(f in D)X.call(this,t,f,o,a);else{if(!(f in t)){(0,h.lC)(f,a);continue}this.add(t,f,t[f],a,r,i)}O.push(f)}A&&(0,h.JV)(this)},get:q,aliases:b,getSetter:function(t,e,n){var r=b[e];return r&&r.indexOf(",")<0&&(e=r),e in d&&e!==O&&(t._gsap.x||q(t,"x"))?n&&u===n?"scale"===e?P:C:(u=n||{})&&("scale"===e?R:L):t.style&&!(0,h.m2)(t.style[e])?E:~e.indexOf("-")?A:(0,h.S5)(t,e)},core:{_removeProperty:H,_getMatrix:nt}};h.p8.utils.checkPrefix=F,mt="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",vt="rotation,rotationX,rotationY,skewX,skewY",gt=(0,h.fS)(mt+","+vt+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){d[t]=1}),(0,h.fS)(vt,function(t){h.Fc.units[t]="deg",Q[t]=1}),b[gt[13]]=mt+","+vt,(0,h.fS)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");b[e[1]]=gt[e[0]]}),(0,h.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){h.Fc.units[t]="px"}),h.p8.registerPlugin(_t);var bt=h.p8.registerPlugin(_t)||h.p8;bt.core.Tween},1766:function(t,e,n){var r;!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var s=e._howls[n]._soundById(r[i]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var s=e._howls[n]._soundById(r[i]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator?t._navigator.userAgent:"",i=r.match(/OPR\/([0-6].)/g),s=i&&parseInt(i[0].split("/")[1],10)<33,a=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),l=r.match(/Version\/(.*?) /),u=a&&l&&parseInt(l[1],10)<15;return t._codecs={mp3:!(s||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),s=0;s<o.length;s++){var a=t._howls[i]._soundById(o[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new i,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return o.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(o.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var r,i;if(t._format&&t._format[n])r=t._format[n];else{if("string"!=typeof(i=t._src[n])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(i))||(r=/\.([^.]+)$/.exec(i.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&o.codecs(r)){e=t._src[n];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&u(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var i=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(i++,r=n._sounds[s]._id);1===i?t=null:r=null}}var a=r?n._soundById(r):n._inactiveSound();if(!a)return null;if(r&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state){a._sprite=t,a._ended=!1;var l=a._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(r&&!a._paused)return e||n._loadQueue("play"),a._id;n._webAudio&&o._autoResume();var u=Math.max(0,a._seek>0?a._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-u),h=1e3*c/Math.abs(a._rate),d=n._sprite[t][0]/1e3,p=(n._sprite[t][0]+n._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=u,a._start=d,a._stop=p,a._loop=!(!a._loop&&!n._sprite[t][2])};if(!(u>=p)){var m=a._node;if(n._webAudio){var v=function(){n._playLock=!1,f(),n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;m.gain.setValueAtTime(t,o.ctx.currentTime),a._playStart=o.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,c):a._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,c),h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),e||setTimeout(function(){n._emit("play",a._id),n._loadQueue()},0)};"running"===o.state&&"interrupted"!==o.ctx.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(a._id))}else{var g=function(){m.currentTime=u,m.muted=a._muted||n._muted||o._muted||m.muted,m.volume=a._volume*o.volume(),m.playbackRate=a._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,f(),r.then(function(){n._playLock=!1,m._unlocked=!0,e?n._loadQueue():n._emit("play",a._id)}).catch(function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):e||(n._playLock=!1,f(),n._emit("play",a._id)),m.playbackRate=a._rate,m.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h):(n._endTimers[a._id]=function(){n._ended(a),m.removeEventListener("ended",n._endTimers[a._id],!1)},m.addEventListener("ended",n._endTimers[a._id],!1))}catch(t){n._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var _=window&&window.ejecta||!m.readyState&&o._navigator.isCocoonJS;if(m.readyState>=3||_)g();else{n._playLock=!0,n._state="loading";var b=function(){n._state="loaded",g(),m.removeEventListener(o._canPlayEvent,b,!1)};m.addEventListener(o._canPlayEvent,b,!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var i=e._soundById(n[r]);if(i&&!i._paused&&(i._seek=e.seek(n[r]),i._rateSeek=0,i._paused=!0,e._stopFade(n[r]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var s=n._soundById(r[i]);s&&(s._muted=t,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||t),n._emit("mute",s._id))}return n},volume:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._volume;1===i.length||2===i.length&&void 0===i[1]?r._getSoundIds().indexOf(i[0])>=0?e=parseInt(i[0],10):t=parseFloat(i[0]):i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var s=0;s<e.length;s++)(n=r._soundById(e[s]))&&(n._volume=t,i[2]||r._stopFade(e[s]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*o.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),i.volume(t,r);for(var s=i._getSoundIds(r),a=0;a<s.length;a++){var l=i._soundById(s[a]);if(l){if(r||i._stopFade(s[a]),i._webAudio&&!l._muted){var u=o.ctx.currentTime,c=u+n/1e3;l._volume=t,l._node.gain.setValueAtTime(t,u),l._node.gain.linearRampToValueAtTime(e,c)}i._startFadeInterval(l,t,e,n,s[a],void 0===r)}}return i},_startFadeInterval:function(t,e,n,r,i,o){var s=this,a=e,l=n-e,u=Math.abs(l/.01),c=Math.max(4,u>0?r/u:r),h=Date.now();t._fadeTo=n,t._interval=setInterval(function(){var i=(Date.now()-h)/r;h=Date.now(),a+=l*i,a=Math.round(100*a)/100,a=l<0?Math.max(n,a):Math.min(n,a),s._webAudio?t._volume=a:s.volume(a,t._id,!0),o&&(s._volume=a),(n<e&&a<=n||n>e&&a>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(n,t._id),s._emit("fade",t._id))},c)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),s=0;s<o.length;s++)(n=r._soundById(o[s]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(o[s])&&(r.pause(o[s],!0),r.play(o[s],!0)))));return r},rate:function(){var t,e,n,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){r._getSoundIds().indexOf(i[0])>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var s=0;s<e.length;s++)if(n=r._soundById(e[s])){r.playing(e[s])&&(n._rateSeek=r.seek(e[s]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):n._node&&(n._node.playbackRate=t);var a=r.seek(e[s]),l=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-a)/Math.abs(n._rate);!r._endTimers[e[s]]&&n._paused||(r._clearTimer(e[s]),r._endTimers[e[s]]=setTimeout(r._ended.bind(r,n),l)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)n._sounds.length&&(e=n._sounds[0]._id);else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var i=n._soundById(e);if(i){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var s=n.playing(e)?o.ctx.currentTime-i._playStart:0,a=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(a+s*Math.abs(i._rate))}return i._node.currentTime}var l=n.playing(e);l&&n.pause(e,!0),i._seek=t,i._ended=!1,n._clearTimer(e),n._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=t);var u=function(){l&&n.play(e,!0),n._emit("seek",e)};if(l&&!n._webAudio){var c=function(){n._playLock?setTimeout(c,0):u()};setTimeout(c,0)}else u()}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var r=0;r<e._sounds.length;r++)if(!e._sounds[r]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,r=e._soundById(t);return r&&(n=e._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(o._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),o._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=o._howls.indexOf(t);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===t._src||t._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return l&&i&&delete l[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var i=this["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this,i=r["_on"+t],o=0;if("number"==typeof e&&(n=e,e=null),e||n)for(o=0;o<i.length;o++){var s=n===i[o].id;if(e===i[o].fn&&s||!e&&s){i.splice(o,1);break}}else if(t)r["_on"+t]=[];else{var a=Object.keys(r);for(o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(r[a[o]])&&(r[a[o]]=[])}return r},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this,i=r["_on"+t],o=i.length-1;o>=0;o--)i[o].id&&i[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(r,i[o].fn),0),i[o].once&&r.off(t,i[o].fn,i[o].id));return r._loadQueue(t),r},_loadQueue:function(t){var e=this;if(e._queue.length>0){var n=e._queue[0];n.event===t&&(e._queue.shift(),e._loadQueue()),t||n.action()}return e},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var i=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),i)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),o._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var n=e._soundById(t);n&&n._node&&n._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new a(t)},_drain:function(){var t=this,e=t._pool,n=0,r=0;if(!(t._sounds.length<e)){for(r=0;r<t._sounds.length;r++)t._sounds[r]._ended&&n++;for(r=t._sounds.length-1;r>=0;r--){if(n<=e)return;t._sounds[r]._ended&&(t._webAudio&&t._sounds[r]._node&&t._sounds[r]._node.disconnect(0),t._sounds.splice(r,1),n--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=l[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=o._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),t._node.gain.setValueAtTime(n,o.ctx.currentTime),t._node.paused=!0,t._node.connect(o.masterGain)):o.noAudio||(t._node=o._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(o._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=n*o.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(o._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var l={},u=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(e){o.setRequestHeader(e,t._xhr.headers[e])}),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?h(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},c(o)}},c=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(l[e._src]=t,d(e,t)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(r).catch(n):o.ctx.decodeAudioData(t,r,n)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:s}}.apply(e,[]))||(t.exports=r),e.Howler=o,e.Howl=s,void 0!==n.g?(n.g.HowlerGlobal=i,n.g.Howler=o,n.g.Howl=s,n.g.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=s,window.Sound=a)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var r=this;return r.ctx&&r.ctx.listener?(e="number"!=typeof e?r._pos[1]:e,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof t?r._pos:(r._pos=[t,e,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(t,e,n,r,i,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(s._orientation=[t,e,n,r,i,o],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(t,e,n,r,i,o),s)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),s=0;s<o.length;s++){var a=r._soundById(o[s]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,i),"spatial"===i?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,r],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setPosition(t,n,r)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,r],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,r)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;t=o[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var s=i._getSoundIds(n),a=0;a<s.length;a++)if(r=i._soundById(s[a])){var l=r._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var u=r._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),e(r,"spatial"))}return i},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,e._stereo?n.stereo(e._stereo):e._pos?n.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,n._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},645:function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+p]=255&s,p+=f,s/=256,u-=8);t[n+p-f]|=128*m}},6337:function(){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=window.document,e=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},r.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},r.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(window,"resize",this._checkForIntersections,!0),i(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(window,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(r){var i=r.element,o=s(i),a=this._rootContainsTarget(i),l=r.entry,u=t&&a&&this._computeTargetAndRootIntersection(i,e),c=r.entry=new n({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:o,rootBounds:e,intersectionRect:u});l?t&&a?this._hasCrossedThreshold(l,c)&&this._queuedEntries.push(c):l&&l.isIntersecting&&this._queuedEntries.push(c):this._queuedEntries.push(c)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(e,n){if("none"!=window.getComputedStyle(e).display){for(var r,i,o,a,u,c,h,d,p=s(e),f=l(e),m=!1;!m;){var v=null,g=1==f.nodeType?window.getComputedStyle(f):{};if("none"==g.display)return;if(f==this.root||f==t?(m=!0,v=n):f!=t.body&&f!=t.documentElement&&"visible"!=g.overflow&&(v=s(f)),v&&(r=v,i=p,void 0,void 0,void 0,void 0,void 0,void 0,o=Math.max(r.top,i.top),a=Math.min(r.bottom,i.bottom),u=Math.max(r.left,i.left),d=a-o,!(p=(h=(c=Math.min(r.right,i.right))-u)>=0&&d>=0&&{top:o,bottom:a,left:u,right:c,width:h,height:d})))break;f=l(f)}return p}},r.prototype._getRootRect=function(){var e;if(this.root)e=s(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||a(t,this.root)},r.prototype._rootContainsTarget=function(e){return a(this.root||t,e)},r.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},r.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=r,window.IntersectionObserverEntry=n}function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function r(t,e){var n,r,i,o=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout(function(){n(),i=null},r))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(t,e){for(var n=e;n;){if(n==t)return!0;n=l(n)}return!1}function l(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}}()},1296:function(t,e,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),h=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return c.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==h.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=o.test(t);return n||s.test(t)?a(t.slice(2),n?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var r,i,o,s,a,l,u=0,c=!1,h=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function b(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function y(){var t=f();if(b(t))return x(t);a=setTimeout(y,function(t){var n=e-(t-l);return h?p(n,o-(t-u)):n}(t))}function x(t){return a=void 0,g&&r?_(t):(r=i=void 0,s)}function w(){var t=f(),n=b(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return function(t){return u=t,a=setTimeout(y,e),c?_(t):s}(l);if(h)return a=setTimeout(y,e),_(l)}return void 0===a&&(a=setTimeout(y,e)),s}return e=v(e)||0,m(n)&&(c=!!n.leading,o=(h="maxWait"in n)?d(v(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},w.flush=function(){return void 0===a?s:x(f())},w}},4155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,l=[],u=!1,c=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&d())}function d(){if(!u){var t=s(h);u=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},9240:function(t,e,n){"use strict";n.d(e,{xv:function(){return Q},C5:function(){return q}});var r=n(9477);function i(){var t,e=0,n=[],r=0,o=0,s=p(function(t){o||l(1,t)}),a=p(function(t){o||l(-1,t)});function l(n,r){o++;var i=0;try{r===v&&f();var s=n>0&&d(r);s?s.call(r,p(function(t){i++,l(1,t)}),p(function(t){i++,l(-1,t)})):(e=n,t=r,u())}catch(t){e||i||l(-1,t)}}function u(){r||(setTimeout(c,0),r=1)}function c(){var t=n;r=0,n=[],t.forEach(h)}function h(t){t()}function d(t){var e=t&&(m(t)||"object"==typeof t)&&t.then;return m(e)&&e}function p(t){var e=0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];e++||t.apply(this,n)}}function f(){throw new TypeError("Chaining cycle detected")}var m=function(t){return"function"==typeof t},v={then:function(r,o){var s=i();return n.push(function(){var n=e>0?r:o;if(m(n))try{var i=n(t);i===s&&f();var a=d(i);a?a.call(i,s.resolve,s.reject):s.resolve(i)}catch(t){s.reject(t)}else s[e>0?"resolve":"reject"](t)}),e&&u(),s},resolve:s,reject:a};return v}function o(){var t,e,n=new Promise(function(n,r){t=n,e=r});return{then:n.then.bind(n),resolve:t,reject:e}}n(4155),i.all=o.all=function(t){var e=0,n=[],r=s();return 0===t.length?r.resolve([]):t.forEach(function(i,o){var a=s();a.resolve(i),a.then(function(i){e++,n[o]=i,e===t.length&&r.resolve(n)},r.reject)}),r};var s="function"==typeof Promise?o:i;function a(){var t=Object.create(null);function e(r,i){var o=r.id,s=r.name,a=r.dependencies;void 0===a&&(a=[]);var l=r.init;void 0===l&&(l=function(){});var u=r.getTransferables;if(void 0===u&&(u=null),!t[o])try{a=a.map(function(n){return n&&n.isWorkerModule&&(e(n,function(t){if(t instanceof Error)throw t}),n=t[n.id].value),n}),l=n("<"+s+">.init",l),u&&(u=n("<"+s+">.getTransferables",u));var c=null;"function"==typeof l?c=l.apply(void 0,a):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:c,getTransferables:u},i(c)}catch(t){t&&t.noLog||console.error(t),i(t)}}function n(t,e){var n=void 0;self.troikaDefine=function(t){return n=t};var r=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(t){console.error(t)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",function(n){var r=n.data,i=r.messageId,o=r.action,s=r.data;try{"registerModule"===o&&e(s,function(t){t instanceof Error?postMessage({messageId:i,success:!1,error:t.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof t}})}),"callModule"===o&&function(e,n){var r,i=e.id,o=e.args;t[i]&&"function"==typeof t[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var s=(r=t[i]).value.apply(r,o);s&&"function"==typeof s.then?s.then(a,function(t){return n(t instanceof Error?t:new Error(""+t))}):a(s)}catch(t){n(t)}function a(e){try{var r=t[i].getTransferables&&t[i].getTransferables(e);r&&Array.isArray(r)&&r.length||(r=void 0),n(e,r)}catch(t){console.error(t),n(t)}}}(s,function(t,e){t instanceof Error?postMessage({messageId:i,success:!1,error:t.message}):postMessage({messageId:i,success:!0,result:t},e||void 0)})}catch(t){postMessage({messageId:i,success:!1,error:t.stack})}})}var l=function(){var t=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),t=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return l=function(){return t},t},u=0,c=0,h=!1,d=Object.create(null),p=Object.create(null),f=Object.create(null);function m(t){if(!(t&&"function"==typeof t.init||h))throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!l())return function(t){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(e){if("function"==typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(t){return t&&t._getInitResult?t._getInitResult():t}):[];var i=s.all(n).then(function(t){return r.apply(null,t)});return e._getInitResult=function(){return i},i},e}(t);null==i&&(i="#default");var o="workerModule"+ ++u,a=t.name||o,c=null;function d(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!c){c=g(i,"registerModule",d.workerModuleData);var n=function(){c=null,p[i].delete(n)};(p[i]||(p[i]=new Set)).add(n)}return c.then(function(e){if(e.isCallable)return g(i,"callModule",{id:o,args:t});throw new Error("Worker module function was called but `init` did not return a callable function")})}return e=e&&e.map(function(t){return"function"!=typeof t||t.workerModuleData||(h=!0,t=m({workerId:i,name:"<"+a+"> function dependency: "+t.name,init:"function(){return (\n"+v(t)+"\n)}"}),h=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t}),d.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:v(n),getTransferables:r&&v(r)},d}function v(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function g(t,e,n){var r=s(),i=++c;return f[i]=function(t){t.success?r.resolve(t.result):r.reject(new Error("Error in worker "+e+" call: "+t.error))},function(t){var e=d[t];if(!e){var n=v(a);(e=d[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(t){var e=t.data,n=e.messageId,r=f[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete f[n],r(e)}}return e}(t).postMessage({messageId:i,action:e,data:n}),r}var _=m({name:"Thenable",dependencies:[s],init:function(t){return t}});function b(){var t=function(t){function e(t,e,n,r,i,o,s,a,l,u){var c=1-l;u.x=c*c*c*t+3*c*c*l*n+3*c*l*l*i+l*l*l*s,u.y=c*c*c*e+3*c*c*l*r+3*c*l*l*o+l*l*l*a}function n(t,e){for(var n,r,i,o,s,a=/([MLQCZ])([^MLQCZ]*)/g;n=a.exec(t);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(t){return parseFloat(t)});switch(n[1]){case"M":o=r=l[0],s=i=l[1];break;case"L":l[0]===o&&l[1]===s||e("L",o,s,o=l[0],s=l[1]);break;case"Q":e("Q",o,s,o=l[2],s=l[3],l[0],l[1]);break;case"C":e("C",o,s,o=l[4],s=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&s===i||e("L",o,s,r,i)}}}function r(t,r,i){void 0===i&&(i=16);var o={x:0,y:0};n(t,function(t,n,s,a,l,u,c,h,d){switch(t){case"L":r(n,s,a,l);break;case"Q":for(var p=n,f=s,m=1;m<i;m++)b=s,y=c,x=l,void 0,M=1-(w=m/(i-1)),(S=o).x=M*M*n+2*M*w*u+w*w*a,S.y=M*M*b+2*M*w*y+w*w*x,r(p,f,o.x,o.y),p=o.x,f=o.y;break;case"C":for(var v=n,g=s,_=1;_<i;_++)e(n,s,u,c,h,d,a,l,_/(i-1),o),r(v,g,o.x,o.y),v=o.x,g=o.y}var b,y,x,w,S,M})}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function a(t,e){var n=t.getContext?t.getContext("webgl",s):t,r=o.get(n);if(!r){var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,a={},l={},u={},c=-1,h=[];function d(t){var e=a[t];if(!e&&!(e=a[t]=n.getExtension(t)))throw new Error(t+" not supported");return e}function p(t,e){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function f(t,e,r,o){if(!l[t]){var s={},a={},u=n.createProgram();n.attachShader(u,p(e,n.VERTEX_SHADER)),n.attachShader(u,p(r,n.FRAGMENT_SHADER)),n.linkProgram(u),l[t]={program:u,transaction:function(t){n.useProgram(u),t({setUniform:function(t,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=a[e]||(a[e]=n.getUniformLocation(u,e));n["uniform"+t].apply(n,[o].concat(r))},setAttribute:function(t,e,r,o,a){var l=s[t];l||(l=s[t]={buf:n.createBuffer(),loc:n.getAttribLocation(u,t),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,e,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,o):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),a!==l.data&&(n.bufferData(n.ARRAY_BUFFER,a,r),l.data=a)}})}}}l[t].transaction(o)}function m(t,e){c++;try{n.activeTexture(n.TEXTURE0+c);var r=u[t];r||(r=u[t]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),e(r,c)}finally{c--}}function v(t,e,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function g(){a={},l={},u={},c=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",function(t){g(),t.preventDefault()},!1),o.set(n,r={gl:n,isWebGL2:i,getExtension:d,withProgram:f,withTexture:m,withTextureFramebuffer:v,handleContextLoss:g})}e(r)}function l(t,e,n,r,o,s,l,u){void 0===l&&(l=15),void 0===u&&(u=null),a(t,function(t){var a=t.gl,c=t.withProgram;(0,t.withTexture)("copy",function(t,h){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,o,s,0,a.RGBA,a.UNSIGNED_BYTE,e),c("copy",i,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(t){var e=t.setUniform;(0,t.setAttribute)("aUV",2,a.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),e("1i","image",h),a.bindFramebuffer(a.FRAMEBUFFER,u||null),a.disable(a.BLEND),a.colorMask(8&l,4&l,2&l,1&l),a.viewport(n,r,o,s),a.scissor(n,r,o,s),a.drawArrays(a.TRIANGLES,0,3)})})})}var u=Object.freeze({__proto__:null,withWebGLContext:a,renderImageData:l,resizeWebGLCanvasWithoutClearing:function(t,e,n){var r=t.width,i=t.height;a(t,function(o){var s=o.gl,a=new Uint8Array(r*i*4);s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,a),t.width=e,t.height=n,l(s,a,0,0,r,i)})}});function c(t,e,n,i,o,s){void 0===s&&(s=1);var a=new Uint8Array(t*e),l=i[2]-i[0],u=i[3]-i[1],c=[];r(n,function(t,e,n,r){c.push({x1:t,y1:e,x2:n,y2:r,minX:Math.min(t,n),minY:Math.min(e,r),maxX:Math.max(t,n),maxY:Math.max(e,r)})}),c.sort(function(t,e){return t.maxX-e.maxX});for(var h=0;h<t;h++)for(var d=0;d<e;d++){var f=v(i[0]+l*(h+.5)/t,i[1]+u*(d+.5)/e),m=Math.pow(1-Math.abs(f)/o,s)/2;f<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),a[d*t+h]=m}return a;function v(t,e){for(var n=1/0,r=1/0,i=c.length;i--;){var o=c[i];if(o.maxX+r<=t)break;if(t+r>o.minX&&e-r<o.maxY&&e+r>o.minY){var s=p(t,e,o.x1,o.y1,o.x2,o.y2);s<n&&(n=s,r=Math.sqrt(n))}}return function(t,e){for(var n=0,r=c.length;r--;){var i=c[r];if(i.maxX<=t)break;i.y1>e!=i.y2>e&&t<(i.x2-i.x1)*(e-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(t,e)&&(r=-r),r}}function h(t,e,n,r,i,o,s,a,l,u){void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=0),d(t,e,n,r,i,o,s,null,a,l,u)}function d(t,e,n,r,i,o,s,a,u,h,d){void 0===o&&(o=1),void 0===u&&(u=0),void 0===h&&(h=0),void 0===d&&(d=0);for(var p=c(t,e,n,r,i,o),f=new Uint8Array(4*p.length),m=0;m<p.length;m++)f[4*m+d]=p[m];l(s,f,u,h,t,e,1<<3-d,a)}function p(t,e,n,r,i,o){var s=i-n,a=o-r,l=s*s+a*a,u=l?Math.max(0,Math.min(1,((t-n)*s+(e-r)*a)/l)):0,c=t-(n+u*s),h=e-(r+u*a);return c*c+h*h}var f=Object.freeze({__proto__:null,generate:c,generateIntoCanvas:h,generateIntoFramebuffer:d}),m=new Float32Array([0,0,2,0,0,2]),v=null,g=!1,_={},b=new WeakMap;function y(t){if(!g&&!M(t))throw new Error("WebGL generation not supported")}function x(t,e,n,r,i,o,s){if(void 0===o&&(o=1),void 0===s&&(s=null),!s&&!(s=v)){var l="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!l)throw new Error("OffscreenCanvas or DOM canvas not supported");s=v=l.getContext("webgl",{depth:!1})}y(s);var u=new Uint8Array(t*e*4);a(s,function(s){var a=s.gl,l=s.withTexture,c=s.withTextureFramebuffer;l("readable",function(s,l){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t,e,0,a.RGBA,a.UNSIGNED_BYTE,null),c(s,l,function(s){S(t,e,n,r,i,o,a,s,0,0,0),a.readPixels(0,0,t,e,a.RGBA,a.UNSIGNED_BYTE,u)})})});for(var c=new Uint8Array(t*e),h=0,d=0;h<u.length;h+=4)c[d++]=u[h];return c}function w(t,e,n,r,i,o,s,a,l,u){void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=0),S(t,e,n,r,i,o,s,null,a,l,u)}function S(t,e,n,o,s,l,u,c,h,d,p){void 0===l&&(l=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),y(u);var f=[];r(n,function(t,e,n,r){f.push(t,e,n,r)}),f=new Float32Array(f),a(u,function(n){var r=n.gl,a=n.isWebGL2,u=n.getExtension,v=n.withProgram,g=n.withTexture,_=n.withTextureFramebuffer,b=n.handleContextLoss;if(g("rawDistances",function(n,g){t===n._lastWidth&&e===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=t,n._lastHeight=e,0,r.RGBA,r.UNSIGNED_BYTE,null),v("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(i){var c=i.setAttribute,h=i.setUniform,d=!a&&u("ANGLE_instanced_arrays"),p=!a&&u("EXT_blend_minmax");c("aUV",2,r.STATIC_DRAW,0,m),c("aLineSegment",4,r.DYNAMIC_DRAW,1,f),h.apply(void 0,["4f","uGlyphBounds"].concat(o)),h("1f","uMaxDistance",s),h("1f","uExponent",l),_(n,g,function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,t,e),r.scissor(0,0,t,e),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,a?r.MAX:p.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),a?r.drawArraysInstanced(r.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,f.length/4)})}),v("post",i,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,m),n.setUniform("1i","tex",g),r.bindFramebuffer(r.FRAMEBUFFER,c),r.disable(r.BLEND),r.colorMask(0===p,1===p,2===p,3===p),r.viewport(h,d,t,e),r.scissor(h,d,t,e),r.drawArrays(r.TRIANGLES,0,3)})}),r.isContextLost())throw b(),new Error("webgl context lost")})}function M(t){var e=t&&t!==v?t.canvas||t:_,n=b.get(e);if(void 0===n){g=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=x(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,t);(n=o&&i.length===o.length&&o.every(function(t,e){return t===i[e]}))||(r="bad trial run results",console.info(i,o))}catch(t){n=!1,r=t.message}r&&console.warn("WebGL SDF generation not supported:",r),g=!1,b.set(e,n)}return n}var T=Object.freeze({__proto__:null,generate:x,generateIntoCanvas:w,generateIntoFramebuffer:S,isSupported:M});return t.forEachPathCommand=n,t.generate=function(t,e,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return x.apply(T,arguments)}catch(t){return console.info("WebGL SDF generation failed, falling back to JS",t),c.apply(f,arguments)}},t.generateIntoCanvas=function(t,e,n,r,i,o,s,a,l,u){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=0);try{return w.apply(T,arguments)}catch(t){return console.info("WebGL SDF generation failed, falling back to JS",t),h.apply(f,arguments)}},t.javascript=f,t.pathToLineSegments=r,t.webgl=T,t.webglUtils=u,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return t}const y=/\bvoid\s+main\s*\(\s*\)\s*{/g;function x(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(t,e){let n=r.WdD[e];return n?x(n):t})}const w=[];for(let t=0;t<256;t++)w[t]=(t<16?"0":"")+t.toString(16);const S=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let n=arguments[e];if(n)for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},M=Date.now(),T=new WeakMap,E=new Map;let A=1e10;function C(t,e){const n=function(t){const e=JSON.stringify(t,R);let n=k.get(e);return null==n&&k.set(e,n=++L),n}(e);let i=T.get(t);if(i||T.set(t,i=Object.create(null)),i[n])return new i[n];const o=`_onBeforeCompile${n}`,s=function(r){t.onBeforeCompile.call(this,r);const i=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=E[i];if(!s){const t=function({vertexShader:t,fragmentShader:e},n,r){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:s,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:c,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=n;if(i=i||"",o=o||"",s=s||"",l=l||"",u=u||"",c=c||"",(a||d)&&(t=x(t)),(h||d)&&(e=x(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),d){let n=d({vertexShader:t,fragmentShader:e});t=n.vertexShader,e=n.fragmentShader}if(h){let t=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,e=>(t.push(e),"")),c=`${h}\n${t.join("\n")}\n${c}`}if(p){const t=`\nuniform float ${p};\n`;i=t+i,l=t+l}return a&&(i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n ${a}\n}\n`,o=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${o}\n`,t=(t=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${t}\n`).replace(/\b(position|normal|uv)\b/g,(t,e,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?e:`troika_${e}_${r}`)),{vertexShader:t=P(t,r,i,o,s),fragmentShader:e=P(e,r,l,u,c)}}(r,e,n);s=E[i]=t}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,S(r.uniforms,this.uniforms),e.timeUniform&&(r.uniforms[e.timeUniform]={get value(){return Date.now()-M}}),this[o]&&this[o](r)},a=function(){return l(e.chained?t:t.clone())},l=function(r){const i=Object.create(r,u);return Object.defineProperty(i,"baseMaterial",{value:t}),Object.defineProperty(i,"id",{value:A++}),i.uuid=function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(w[255&t]+w[t>>8&255]+w[t>>16&255]+w[t>>24&255]+"-"+w[255&e]+w[e>>8&255]+"-"+w[e>>16&15|64]+w[e>>24&255]+"-"+w[63&n|128]+w[n>>8&255]+"-"+w[n>>16&255]+w[n>>24&255]+w[255&r]+w[r>>8&255]+w[r>>16&255]+w[r>>24&255]).toUpperCase()}(),i.uniforms=S({},r.uniforms,e.uniforms),i.defines=S({},r.defines,e.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=S({},r.extensions,e.extensions),i._listeners=void 0,i},u={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>s,set(t){this[o]=t}},copy:{writable:!0,configurable:!0,value:function(e){return t.copy.call(this,e),t.isShaderMaterial||t.isDerivedMaterial||(S(this.extensions,e.extensions),S(this.defines,e.defines),S(this.uniforms,r.rDY.clone(e.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const e=new t.constructor;return l(e).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=C(t.isDerivedMaterial?t.getDepthMaterial():new r.lRF({depthPacking:r.mSO}),e),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=C(t.isDerivedMaterial?t.getDistanceMaterial():new r.Lun,e),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:e,_distanceMaterial:n}=this;e&&e.dispose(),n&&n.dispose(),t.dispose.call(this)}}};return i[n]=a,new a}function P(t,e,n,r,i){return(r||i||n)&&(t=t.replace(y,`\n${n}\nvoid troikaOrigMain${e}() {`),t+=`\nvoid main() {\n ${r}\n troikaOrigMain${e}();\n ${i}\n}`),t}function R(t,e){return"uniforms"===t?void 0:"function"==typeof e?e.toString():e}let L=0;const k=new Map;r.ehD;const O=()=>(self.performance||Date).now(),D=b();let I;const U=function(){const t=[];let e=0;function n(){const r=O();for(;t.length&&O()-r<5;)t.shift()();e=t.length?setTimeout(n,0):0}return(...r)=>{const i=s();return t.push(()=>{const t=O();try{D.webgl.generateIntoCanvas(...r),i.resolve({timing:O()-t})}catch(t){i.reject(t)}}),e||(e=setTimeout(n,0)),i}}(),F=function(){const t={};let e=0;return function(n,r,i,o,s,a,l,u,c,h){const f="TroikaTextSDFGenerator_JS_"+e++%4;let v=t[f];return v||(v=t[f]={workerModule:m({name:f,workerId:f,dependencies:[b,O],init(t,e){const n=t().javascript.generate;return function(...t){const r=e();return{textureData:n(...t),timing:e()-r}}},getTransferables:t=>[t.textureData.buffer]}),requests:0,idleTimer:null}),v.requests++,clearTimeout(v.idleTimer),v.workerModule(n,r,i,o,s,a).then(({textureData:t,timing:e})=>{const i=O(),o=new Uint8Array(4*t.length);for(let e=0;e<t.length;e++)o[4*e+h]=t[e];return D.webglUtils.renderImageData(l,o,u,c,n,r,1<<3-h),e+=O()-i,0==--v.requests&&(v.idleTimer=setTimeout(()=>{!function(t){p[t]&&p[t].forEach(function(t){t()}),d[t]&&(d[t].terminate(),delete d[t])}(f)},2e3)),{timing:e}})}}(),N=D.webglUtils.resizeWebGLCanvasWithoutClearing,B=m({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(t){var e={parse:function(t){var n=e._bin,r=new Uint8Array(t);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var s=[],a=0;a<o;a++){var l=n.readUint(r,i);i+=4,s.push(e._readFont(r,l))}return s}return[e._readFont(r,0)]},_readFont:function(t,n){var r=e._bin,i=n;r.readFixed(t,n),n+=4;var o=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2;for(var s=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],a={_data:t,_offset:i},l={},u=0;u<o;u++){var c=r.readASCII(t,n,4);n+=4,r.readUint(t,n),n+=4;var h=r.readUint(t,n);n+=4;var d=r.readUint(t,n);n+=4,l[c]={offset:h,length:d}}for(u=0;u<s.length;u++){var p=s[u];l[p]&&(a[p.trim()]=e[p.trim()].parse(t,l[p].offset,l[p].length,a))}return a},_tabOffset:function(t,n,r){for(var i=e._bin,o=i.readUshort(t,r+4),s=r+12,a=0;a<o;a++){var l=i.readASCII(t,s,4);s+=4,i.readUint(t,s),s+=4;var u=i.readUint(t,s);if(s+=4,i.readUint(t,s),s+=4,l==n)return u}return 0}};e._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,n){return e._bin.readShort(t,n)/16384},readInt:function(t,n){return e._bin._view(t).getInt32(n)},readInt8:function(t,n){return e._bin._view(t).getInt8(n)},readShort:function(t,n){return e._bin._view(t).getInt16(n)},readUshort:function(t,n){return e._bin._view(t).getUint16(n)},readUshorts:function(t,n,r){for(var i=[],o=0;o<r;o++)i.push(e._bin.readUshort(t,n+2*o));return i},readUint:function(t,n){return e._bin._view(t).getUint32(n)},readUint64:function(t,n){return 4294967296*e._bin.readUint(t,n)+e._bin.readUint(t,n+4)},readASCII:function(t,e,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(t[e+i]);return r},readUnicode:function(t,e,n){for(var r="",i=0;i<n;i++){var o=t[e++]<<8|t[e++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,n,r){var i=e._bin._tdec;return i&&0==n&&r==t.length?i.decode(t):e._bin.readASCII(t,n,r)},readBytes:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(t[e+i]);return r},readASCIIArray:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[e+i]));return r},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},e._lctf={},e._lctf.parse=function(t,n,r,i,o){var s=e._bin,a={},l=n;s.readFixed(t,n),n+=4;var u=s.readUshort(t,n);n+=2;var c=s.readUshort(t,n);n+=2;var h=s.readUshort(t,n);return n+=2,a.scriptList=e._lctf.readScriptList(t,l+u),a.featureList=e._lctf.readFeatureList(t,l+c),a.lookupList=e._lctf.readLookupList(t,l+h,o),a},e._lctf.readLookupList=function(t,n,r){var i=e._bin,o=n,s=[],a=i.readUshort(t,n);n+=2;for(var l=0;l<a;l++){var u=i.readUshort(t,n);n+=2;var c=e._lctf.readLookupTable(t,o+u,r);s.push(c)}return s},e._lctf.readLookupTable=function(t,n,r){var i=e._bin,o=n,s={tabs:[]};s.ltype=i.readUshort(t,n),n+=2,s.flag=i.readUshort(t,n),n+=2;var a=i.readUshort(t,n);n+=2;for(var l=s.ltype,u=0;u<a;u++){var c=i.readUshort(t,n);n+=2;var h=r(t,l,o+c,s);s.tabs.push(h)}return s},e._lctf.numOfOnes=function(t){for(var e=0,n=0;n<32;n++)t>>>n&1&&e++;return e},e._lctf.readClassDef=function(t,n){var r=e._bin,i=[],o=r.readUshort(t,n);if(n+=2,1==o){var s=r.readUshort(t,n);n+=2;var a=r.readUshort(t,n);n+=2;for(var l=0;l<a;l++)i.push(s+l),i.push(s+l),i.push(r.readUshort(t,n)),n+=2}if(2==o){var u=r.readUshort(t,n);for(n+=2,l=0;l<u;l++)i.push(r.readUshort(t,n)),n+=2,i.push(r.readUshort(t,n)),n+=2,i.push(r.readUshort(t,n)),n+=2}return i},e._lctf.getInterval=function(t,e){for(var n=0;n<t.length;n+=3){var r=t[n],i=t[n+1];if(t[n+2],r<=e&&e<=i)return n}return-1},e._lctf.readCoverage=function(t,n){var r=e._bin,i={};i.fmt=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(t,n,o)),2==i.fmt&&(i.tab=r.readUshorts(t,n,3*o)),i},e._lctf.coverageIndex=function(t,n){var r=t.tab;if(1==t.fmt)return r.indexOf(n);if(2==t.fmt){var i=e._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},e._lctf.readFeatureList=function(t,n){var r=e._bin,i=n,o=[],s=r.readUshort(t,n);n+=2;for(var a=0;a<s;a++){var l=r.readASCII(t,n,4);n+=4;var u=r.readUshort(t,n);n+=2;var c=e._lctf.readFeatureTable(t,i+u);c.tag=l.trim(),o.push(c)}return o},e._lctf.readFeatureTable=function(t,n){var r=e._bin,i=n,o={},s=r.readUshort(t,n);n+=2,s>0&&(o.featureParams=i+s);var a=r.readUshort(t,n);n+=2,o.tab=[];for(var l=0;l<a;l++)o.tab.push(r.readUshort(t,n+2*l));return o},e._lctf.readScriptList=function(t,n){var r=e._bin,i=n,o={},s=r.readUshort(t,n);n+=2;for(var a=0;a<s;a++){var l=r.readASCII(t,n,4);n+=4;var u=r.readUshort(t,n);n+=2,o[l.trim()]=e._lctf.readScriptTable(t,i+u)}return o},e._lctf.readScriptTable=function(t,n){var r=e._bin,i=n,o={},s=r.readUshort(t,n);n+=2,o.default=e._lctf.readLangSysTable(t,i+s);var a=r.readUshort(t,n);n+=2;for(var l=0;l<a;l++){var u=r.readASCII(t,n,4);n+=4;var c=r.readUshort(t,n);n+=2,o[u.trim()]=e._lctf.readLangSysTable(t,i+c)}return o},e._lctf.readLangSysTable=function(t,n){var r=e._bin,i={};r.readUshort(t,n),n+=2,i.reqFeature=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);return n+=2,i.features=r.readUshorts(t,n,o),i},e.CFF={},e.CFF.parse=function(t,n,r){var i=e._bin;(t=new Uint8Array(t.buffer,n,r))[n=0],t[++n],t[++n],t[++n],n++;var o=[];n=e.CFF.readIndex(t,n,o);for(var s=[],a=0;a<o.length-1;a++)s.push(i.readASCII(t,n+o[a],o[a+1]-o[a]));n+=o[o.length-1];var l=[];n=e.CFF.readIndex(t,n,l);var u=[];for(a=0;a<l.length-1;a++)u.push(e.CFF.readDict(t,n+l[a],n+l[a+1]));n+=l[l.length-1];var c=u[0],h=[];n=e.CFF.readIndex(t,n,h);var d=[];for(a=0;a<h.length-1;a++)d.push(i.readASCII(t,n+h[a],h[a+1]-h[a]));if(n+=h[h.length-1],e.CFF.readSubrs(t,n,c),c.CharStrings){n=c.CharStrings,h=[],n=e.CFF.readIndex(t,n,h);var p=[];for(a=0;a<h.length-1;a++)p.push(i.readBytes(t,n+h[a],h[a+1]-h[a]));c.CharStrings=p}if(c.ROS){n=c.FDArray;var f=[];for(n=e.CFF.readIndex(t,n,f),c.FDArray=[],a=0;a<f.length-1;a++){var m=e.CFF.readDict(t,n+f[a],n+f[a+1]);e.CFF._readFDict(t,m,d),c.FDArray.push(m)}n+=f[f.length-1],n=c.FDSelect,c.FDSelect=[];var v=t[n];if(n++,3!=v)throw v;var g=i.readUshort(t,n);for(n+=2,a=0;a<g+1;a++)c.FDSelect.push(i.readUshort(t,n),t[n+2]),n+=3}return c.Encoding&&(c.Encoding=e.CFF.readEncoding(t,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=e.CFF.readCharset(t,c.charset,c.CharStrings.length)),e.CFF._readFDict(t,c,d),c},e.CFF._readFDict=function(t,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=e.CFF.readDict(t,i,i+n.Private[0]),n.Private.Subrs&&e.CFF.readSubrs(t,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},e.CFF.readSubrs=function(t,n,r){var i=e._bin,o=[];n=e.CFF.readIndex(t,n,o);var s,a=o.length;s=a<1240?107:a<33900?1131:32768,r.Bias=s,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(t,n+o[l],o[l+1]-o[l]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(t,e){for(var n=0;n<t.charset.length;n++)if(t.charset[n]==e)return n;return-1},e.CFF.glyphBySE=function(t,n){return n<0||n>255?-1:e.CFF.glyphByUnicode(t,e.CFF.tableSE[n])},e.CFF.readEncoding=function(t,n,r){e._bin;var i=[".notdef"],o=t[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var s=t[n];n++;for(var a=0;a<s;a++)i.push(t[n+a]);return i},e.CFF.readCharset=function(t,n,r){var i=e._bin,o=[".notdef"],s=t[n];if(n++,0==s)for(var a=0;a<r;a++){var l=i.readUshort(t,n);n+=2,o.push(l)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;o.length<r;){l=i.readUshort(t,n),n+=2;var u=0;for(1==s?(u=t[n],n++):(u=i.readUshort(t,n),n+=2),a=0;a<=u;a++)o.push(l),l++}}return o},e.CFF.readIndex=function(t,n,r){var i=e._bin,o=i.readUshort(t,n)+1,s=t[n+=2];if(n++,1==s)for(var a=0;a<o;a++)r.push(t[n+a]);else if(2==s)for(a=0;a<o;a++)r.push(i.readUshort(t,n+2*a));else if(3==s)for(a=0;a<o;a++)r.push(16777215&i.readUint(t,n+3*a-1));else if(1!=o)throw"unsupported offset size: "+s+", count: "+o;return(n+=o*s)-1},e.CFF.getCharString=function(t,n,r){var i=e._bin,o=t[n],s=t[n+1];t[n+2],t[n+3],t[n+4];var a=1,l=null,u=null;o<=20&&(l=o,a=1),12==o&&(l=100*o+s,a=2),21<=o&&o<=27&&(l=o,a=1),28==o&&(u=i.readShort(t,n+1),a=3),29<=o&&o<=31&&(l=o,a=1),32<=o&&o<=246&&(u=o-139,a=1),247<=o&&o<=250&&(u=256*(o-247)+s+108,a=2),251<=o&&o<=254&&(u=256*-(o-251)-s-108,a=2),255==o&&(u=i.readInt(t,n+1)/65535,a=5),r.val=null!=u?u:"o"+l,r.size=a},e.CFF.readCharString=function(t,n,r){for(var i=n+r,o=e._bin,s=[];n<i;){var a=t[n],l=t[n+1];t[n+2],t[n+3],t[n+4];var u=1,c=null,h=null;a<=20&&(c=a,u=1),12==a&&(c=100*a+l,u=2),19!=a&&20!=a||(c=a,u=2),21<=a&&a<=27&&(c=a,u=1),28==a&&(h=o.readShort(t,n+1),u=3),29<=a&&a<=31&&(c=a,u=1),32<=a&&a<=246&&(h=a-139,u=1),247<=a&&a<=250&&(h=256*(a-247)+l+108,u=2),251<=a&&a<=254&&(h=256*-(a-251)-l-108,u=2),255==a&&(h=o.readInt(t,n+1)/65535,u=5),s.push(null!=h?h:"o"+c),n+=u}return s},e.CFF.readDict=function(t,n,r){for(var i=e._bin,o={},s=[];n<r;){var a=t[n],l=t[n+1];t[n+2],t[n+3],t[n+4];var u=1,c=null,h=null;if(28==a&&(h=i.readShort(t,n+1),u=3),29==a&&(h=i.readInt(t,n+1),u=5),32<=a&&a<=246&&(h=a-139,u=1),247<=a&&a<=250&&(h=256*(a-247)+l+108,u=2),251<=a&&a<=254&&(h=256*-(a-251)-l-108,u=2),255==a)throw h=i.readInt(t,n+1)/65535,u=5,"unknown number";if(30==a){var d=[];for(u=1;;){var p=t[n+u];u++;var f=p>>4,m=15&p;if(15!=f&&d.push(f),15!=m&&d.push(m),15==m)break}for(var v="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<d.length;_++)v+=g[d[_]];h=parseFloat(v)}a<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],u=1,12==a&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2)),null!=c?(o[c]=1==s.length?s[0]:s,s=[]):s.push(h),n+=u}return o},e.cmap={},e.cmap.parse=function(t,n,r){t=new Uint8Array(t.buffer,n,r),n=0;var i=e._bin,o={};i.readUshort(t,n),n+=2;var s=i.readUshort(t,n);n+=2;var a=[];o.tables=[];for(var l=0;l<s;l++){var u=i.readUshort(t,n);n+=2;var c=i.readUshort(t,n);n+=2;var h=i.readUint(t,n);n+=4;var d="p"+u+"e"+c,p=a.indexOf(h);if(-1==p){var f;p=o.tables.length,a.push(h);var m=i.readUshort(t,h);0==m?f=e.cmap.parse0(t,h):4==m?f=e.cmap.parse4(t,h):6==m?f=e.cmap.parse6(t,h):12==m?f=e.cmap.parse12(t,h):console.debug("unknown format: "+m,u,c,h),o.tables.push(f)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=p}return o},e.cmap.parse0=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,i.map=[];for(var s=0;s<o-6;s++)i.map.push(t[n+s]);return i},e.cmap.parse4=function(t,n){var r=e._bin,i=n,o={};o.format=r.readUshort(t,n),n+=2;var s=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2;var l=a/2;o.searchRange=r.readUshort(t,n),n+=2,o.entrySelector=r.readUshort(t,n),n+=2,o.rangeShift=r.readUshort(t,n),n+=2,o.endCount=r.readUshorts(t,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(t,n,l),n+=2*l,o.idDelta=[];for(var u=0;u<l;u++)o.idDelta.push(r.readShort(t,n)),n+=2;for(o.idRangeOffset=r.readUshorts(t,n,l),n+=2*l,o.glyphIdArray=[];n<i+s;)o.glyphIdArray.push(r.readUshort(t,n)),n+=2;return o},e.cmap.parse6=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,i.firstCode=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2,i.glyphIdArray=[];for(var s=0;s<o;s++)i.glyphIdArray.push(r.readUshort(t,n)),n+=2;return i},e.cmap.parse12=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2,n+=2,r.readUint(t,n),n+=4,r.readUint(t,n),n+=4;var o=r.readUint(t,n);n+=4,i.groups=[];for(var s=0;s<o;s++){var a=n+12*s,l=r.readUint(t,a+0),u=r.readUint(t,a+4),c=r.readUint(t,a+8);i.groups.push([l,u,c])}return i},e.glyf={},e.glyf.parse=function(t,e,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},e.glyf._parseGlyf=function(t,n){var r=e._bin,i=t._data,o=e._tabOffset(i,"glyf",t._offset)+t.loca[n];if(t.loca[n]==t.loca[n+1])return null;var s={};if(s.noc=r.readShort(i,o),o+=2,s.xMin=r.readShort(i,o),o+=2,s.yMin=r.readShort(i,o),o+=2,s.xMax=r.readShort(i,o),o+=2,s.yMax=r.readShort(i,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var a=0;a<s.noc;a++)s.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;s.instructions=r.readBytes(i,o,l),o+=l;var u=s.endPts[s.noc-1]+1;for(s.flags=[],a=0;a<u;a++){var c=i[o];if(o++,s.flags.push(c),8&c){var h=i[o];o++;for(var d=0;d<h;d++)s.flags.push(c),a++}}for(s.xs=[],a=0;a<u;a++){var p=!!(2&s.flags[a]),f=!!(16&s.flags[a]);p?(s.xs.push(f?i[o]:-i[o]),o++):f?s.xs.push(0):(s.xs.push(r.readShort(i,o)),o+=2)}for(s.ys=[],a=0;a<u;a++)p=!!(4&s.flags[a]),f=!!(32&s.flags[a]),p?(s.ys.push(f?i[o]:-i[o]),o++):f?s.ys.push(0):(s.ys.push(r.readShort(i,o)),o+=2);var m=0,v=0;for(a=0;a<u;a++)m+=s.xs[a],v+=s.ys[a],s.xs[a]=m,s.ys[a]=v}else{var g;s.parts=[];do{g=r.readUshort(i,o),o+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(_),_.glyphIndex=r.readUshort(i,o),o+=2,1&g){var b=r.readShort(i,o);o+=2;var y=r.readShort(i,o);o+=2}else b=r.readInt8(i,o),o++,y=r.readInt8(i,o),o++;2&g?(_.m.tx=b,_.m.ty=y):(_.p1=b,_.p2=y),8&g?(_.m.a=_.m.d=r.readF2dot14(i,o),o+=2):64&g?(_.m.a=r.readF2dot14(i,o),o+=2,_.m.d=r.readF2dot14(i,o),o+=2):128&g&&(_.m.a=r.readF2dot14(i,o),o+=2,_.m.b=r.readF2dot14(i,o),o+=2,_.m.c=r.readF2dot14(i,o),o+=2,_.m.d=r.readF2dot14(i,o),o+=2)}while(32&g);if(256&g){var x=r.readUshort(i,o);for(o+=2,s.instr=[],a=0;a<x;a++)s.instr.push(i[o]),o++}}return s},e.GPOS={},e.GPOS.parse=function(t,n,r,i){return e._lctf.parse(t,n,r,i,e.GPOS.subt)},e.GPOS.subt=function(t,n,r,i){var o=e._bin,s=r,a={};if(a.fmt=o.readUshort(t,r),r+=2,1==n||2==n||3==n||7==n||8==n&&a.fmt<=2){var l=o.readUshort(t,r);r+=2,a.coverage=e._lctf.readCoverage(t,l+s)}if(1==n&&1==a.fmt){var u=o.readUshort(t,r);r+=2;var c=e._lctf.numOfOnes(u);0!=u&&(a.pos=e.GPOS.readValueRecord(t,r,u))}else if(2==n&&a.fmt>=1&&a.fmt<=2){u=o.readUshort(t,r),r+=2;var h=o.readUshort(t,r);r+=2,c=e._lctf.numOfOnes(u);var d=e._lctf.numOfOnes(h);if(1==a.fmt){a.pairsets=[];var p=o.readUshort(t,r);r+=2;for(var f=0;f<p;f++){var m=s+o.readUshort(t,r);r+=2;var v=o.readUshort(t,m);m+=2;for(var g=[],_=0;_<v;_++){var b=o.readUshort(t,m);m+=2,0!=u&&(T=e.GPOS.readValueRecord(t,m,u),m+=2*c),0!=h&&(E=e.GPOS.readValueRecord(t,m,h),m+=2*d),g.push({gid2:b,val1:T,val2:E})}a.pairsets.push(g)}}if(2==a.fmt){var y=o.readUshort(t,r);r+=2;var x=o.readUshort(t,r);r+=2;var w=o.readUshort(t,r);r+=2;var S=o.readUshort(t,r);for(r+=2,a.classDef1=e._lctf.readClassDef(t,s+y),a.classDef2=e._lctf.readClassDef(t,s+x),a.matrix=[],f=0;f<w;f++){var M=[];for(_=0;_<S;_++){var T=null,E=null;0!=u&&(T=e.GPOS.readValueRecord(t,r,u),r+=2*c),0!=h&&(E=e.GPOS.readValueRecord(t,r,h),r+=2*d),M.push({val1:T,val2:E})}a.matrix.push(M)}}}else{if(9==n&&1==a.fmt){var A=o.readUshort(t,r);r+=2;var C=o.readUint(t,r);if(r+=4,9==i.ltype)i.ltype=A;else if(i.ltype!=A)throw"invalid extension substitution";return e.GPOS.subt(t,i.ltype,s+C)}console.debug("unsupported GPOS table LookupType",n,"format",a.fmt)}return a},e.GPOS.readValueRecord=function(t,n,r){var i=e._bin,o=[];return o.push(1&r?i.readShort(t,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(t,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(t,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(t,n):0),n+=8&r?2:0,o},e.GSUB={},e.GSUB.parse=function(t,n,r,i){return e._lctf.parse(t,n,r,i,e.GSUB.subt)},e.GSUB.subt=function(t,n,r,i){var o=e._bin,s=r,a={};if(a.fmt=o.readUshort(t,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&a.fmt<=2||6==n&&a.fmt<=2){var l=o.readUshort(t,r);r+=2,a.coverage=e._lctf.readCoverage(t,s+l)}if(1==n&&a.fmt>=1&&a.fmt<=2){if(1==a.fmt)a.delta=o.readShort(t,r),r+=2;else if(2==a.fmt){var u=o.readUshort(t,r);r+=2,a.newg=o.readUshorts(t,r,u),r+=2*a.newg.length}}else if(4==n){a.vals=[],u=o.readUshort(t,r),r+=2;for(var c=0;c<u;c++){var h=o.readUshort(t,r);r+=2,a.vals.push(e.GSUB.readLigatureSet(t,s+h))}}else if(5==n&&2==a.fmt){if(2==a.fmt){var d=o.readUshort(t,r);r+=2,a.cDef=e._lctf.readClassDef(t,s+d),a.scset=[];var p=o.readUshort(t,r);for(r+=2,c=0;c<p;c++){var f=o.readUshort(t,r);r+=2,a.scset.push(0==f?null:e.GSUB.readSubClassSet(t,s+f))}}}else if(6==n&&3==a.fmt){if(3==a.fmt){for(c=0;c<3;c++){u=o.readUshort(t,r),r+=2;for(var m=[],v=0;v<u;v++)m.push(e._lctf.readCoverage(t,s+o.readUshort(t,r+2*v)));r+=2*u,0==c&&(a.backCvg=m),1==c&&(a.inptCvg=m),2==c&&(a.ahedCvg=m)}u=o.readUshort(t,r),r+=2,a.lookupRec=e.GSUB.readSubstLookupRecords(t,r,u)}}else{if(7==n&&1==a.fmt){var g=o.readUshort(t,r);r+=2;var _=o.readUint(t,r);if(r+=4,9==i.ltype)i.ltype=g;else if(i.ltype!=g)throw"invalid extension substitution";return e.GSUB.subt(t,i.ltype,s+_)}console.debug("unsupported GSUB table LookupType",n,"format",a.fmt)}return a},e.GSUB.readSubClassSet=function(t,n){var r=e._bin.readUshort,i=n,o=[],s=r(t,n);n+=2;for(var a=0;a<s;a++){var l=r(t,n);n+=2,o.push(e.GSUB.readSubClassRule(t,i+l))}return o},e.GSUB.readSubClassRule=function(t,n){var r=e._bin.readUshort,i={},o=r(t,n),s=r(t,n+=2);n+=2,i.input=[];for(var a=0;a<o-1;a++)i.input.push(r(t,n)),n+=2;return i.substLookupRecords=e.GSUB.readSubstLookupRecords(t,n,s),i},e.GSUB.readSubstLookupRecords=function(t,n,r){for(var i=e._bin.readUshort,o=[],s=0;s<r;s++)o.push(i(t,n),i(t,n+2)),n+=4;return o},e.GSUB.readChainSubClassSet=function(t,n){var r=e._bin,i=n,o=[],s=r.readUshort(t,n);n+=2;for(var a=0;a<s;a++){var l=r.readUshort(t,n);n+=2,o.push(e.GSUB.readChainSubClassRule(t,i+l))}return o},e.GSUB.readChainSubClassRule=function(t,n){for(var r=e._bin,i={},o=["backtrack","input","lookahead"],s=0;s<o.length;s++){var a=r.readUshort(t,n);n+=2,1==s&&a--,i[o[s]]=r.readUshorts(t,n,a),n+=2*i[o[s]].length}return a=r.readUshort(t,n),n+=2,i.subst=r.readUshorts(t,n,2*a),n+=2*i.subst.length,i},e.GSUB.readLigatureSet=function(t,n){var r=e._bin,i=n,o=[],s=r.readUshort(t,n);n+=2;for(var a=0;a<s;a++){var l=r.readUshort(t,n);n+=2,o.push(e.GSUB.readLigature(t,i+l))}return o},e.GSUB.readLigature=function(t,n){var r=e._bin,i={chain:[]};i.nglyph=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2;for(var s=0;s<o-1;s++)i.chain.push(r.readUshort(t,n)),n+=2;return i},e.head={},e.head.parse=function(t,n,r){var i=e._bin,o={};return i.readFixed(t,n),n+=4,o.fontRevision=i.readFixed(t,n),n+=4,i.readUint(t,n),n+=4,i.readUint(t,n),n+=4,o.flags=i.readUshort(t,n),n+=2,o.unitsPerEm=i.readUshort(t,n),n+=2,o.created=i.readUint64(t,n),n+=8,o.modified=i.readUint64(t,n),n+=8,o.xMin=i.readShort(t,n),n+=2,o.yMin=i.readShort(t,n),n+=2,o.xMax=i.readShort(t,n),n+=2,o.yMax=i.readShort(t,n),n+=2,o.macStyle=i.readUshort(t,n),n+=2,o.lowestRecPPEM=i.readUshort(t,n),n+=2,o.fontDirectionHint=i.readShort(t,n),n+=2,o.indexToLocFormat=i.readShort(t,n),n+=2,o.glyphDataFormat=i.readShort(t,n),n+=2,o},e.hhea={},e.hhea.parse=function(t,n,r){var i=e._bin,o={};return i.readFixed(t,n),n+=4,o.ascender=i.readShort(t,n),n+=2,o.descender=i.readShort(t,n),n+=2,o.lineGap=i.readShort(t,n),n+=2,o.advanceWidthMax=i.readUshort(t,n),n+=2,o.minLeftSideBearing=i.readShort(t,n),n+=2,o.minRightSideBearing=i.readShort(t,n),n+=2,o.xMaxExtent=i.readShort(t,n),n+=2,o.caretSlopeRise=i.readShort(t,n),n+=2,o.caretSlopeRun=i.readShort(t,n),n+=2,o.caretOffset=i.readShort(t,n),n+=2,n+=8,o.metricDataFormat=i.readShort(t,n),n+=2,o.numberOfHMetrics=i.readUshort(t,n),n+=2,o},e.hmtx={},e.hmtx.parse=function(t,n,r,i){for(var o=e._bin,s={aWidth:[],lsBearing:[]},a=0,l=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(a=o.readUshort(t,n),n+=2,l=o.readShort(t,n),n+=2),s.aWidth.push(a),s.lsBearing.push(l);return s},e.kern={},e.kern.parse=function(t,n,r,i){var o=e._bin,s=o.readUshort(t,n);if(n+=2,1==s)return e.kern.parseV1(t,n-2,r,i);var a=o.readUshort(t,n);n+=2;for(var l={glyph1:[],rval:[]},u=0;u<a;u++){n+=2,r=o.readUshort(t,n),n+=2;var c=o.readUshort(t,n);n+=2;var h=c>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=e.kern.readFormat0(t,n,l)}return l},e.kern.parseV1=function(t,n,r,i){var o=e._bin;o.readFixed(t,n),n+=4;var s=o.readUint(t,n);n+=4;for(var a={glyph1:[],rval:[]},l=0;l<s;l++){o.readUint(t,n),n+=4;var u=o.readUshort(t,n);n+=2,o.readUshort(t,n),n+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;n=e.kern.readFormat0(t,n,a)}return a},e.kern.readFormat0=function(t,n,r){var i=e._bin,o=-1,s=i.readUshort(t,n);n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2;for(var a=0;a<s;a++){var l=i.readUshort(t,n);n+=2;var u=i.readUshort(t,n);n+=2;var c=i.readShort(t,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(u),h.vals.push(c),o=l}return n},e.loca={},e.loca.parse=function(t,n,r,i){var o=e._bin,s=[],a=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==a)for(var u=0;u<l;u++)s.push(o.readUshort(t,n+(u<<1))<<1);if(1==a)for(u=0;u<l;u++)s.push(o.readUint(t,n+(u<<2)));return s},e.maxp={},e.maxp.parse=function(t,n,r){var i=e._bin,o={},s=i.readUint(t,n);return n+=4,o.numGlyphs=i.readUshort(t,n),n+=2,65536==s&&(o.maxPoints=i.readUshort(t,n),n+=2,o.maxContours=i.readUshort(t,n),n+=2,o.maxCompositePoints=i.readUshort(t,n),n+=2,o.maxCompositeContours=i.readUshort(t,n),n+=2,o.maxZones=i.readUshort(t,n),n+=2,o.maxTwilightPoints=i.readUshort(t,n),n+=2,o.maxStorage=i.readUshort(t,n),n+=2,o.maxFunctionDefs=i.readUshort(t,n),n+=2,o.maxInstructionDefs=i.readUshort(t,n),n+=2,o.maxStackElements=i.readUshort(t,n),n+=2,o.maxSizeOfInstructions=i.readUshort(t,n),n+=2,o.maxComponentElements=i.readUshort(t,n),n+=2,o.maxComponentDepth=i.readUshort(t,n),n+=2),o},e.name={},e.name.parse=function(t,n,r){var i=e._bin,o={};i.readUshort(t,n),n+=2;var s=i.readUshort(t,n);n+=2,i.readUshort(t,n);for(var a,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=n+=2,c=0;c<s;c++){var h=i.readUshort(t,n);n+=2;var d=i.readUshort(t,n);n+=2;var p=i.readUshort(t,n);n+=2;var f=i.readUshort(t,n);n+=2;var m=i.readUshort(t,n);n+=2;var v=i.readUshort(t,n);n+=2;var g,_=l[f],b=u+12*s+v;if(0==h)g=i.readUnicode(t,b,m/2);else if(3==h&&0==d)g=i.readUnicode(t,b,m/2);else if(0==d)g=i.readASCII(t,b,m);else if(1==d)g=i.readUnicode(t,b,m/2);else if(3==d)g=i.readUnicode(t,b,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;g=i.readASCII(t,b,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var y="p"+h+","+p.toString(16);null==o[y]&&(o[y]={}),o[y][void 0!==_?_:f]=g,o[y]._lang=p}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){a=x;break}return console.debug("returning name table with languageID "+o[a]._lang),o[a]},e["OS/2"]={},e["OS/2"].parse=function(t,n,r){var i=e._bin.readUshort(t,n);n+=2;var o={};if(0==i)e["OS/2"].version0(t,n,o);else if(1==i)e["OS/2"].version1(t,n,o);else if(2==i||3==i||4==i)e["OS/2"].version2(t,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;e["OS/2"].version5(t,n,o)}return o},e["OS/2"].version0=function(t,n,r){var i=e._bin;return r.xAvgCharWidth=i.readShort(t,n),n+=2,r.usWeightClass=i.readUshort(t,n),n+=2,r.usWidthClass=i.readUshort(t,n),n+=2,r.fsType=i.readUshort(t,n),n+=2,r.ySubscriptXSize=i.readShort(t,n),n+=2,r.ySubscriptYSize=i.readShort(t,n),n+=2,r.ySubscriptXOffset=i.readShort(t,n),n+=2,r.ySubscriptYOffset=i.readShort(t,n),n+=2,r.ySuperscriptXSize=i.readShort(t,n),n+=2,r.ySuperscriptYSize=i.readShort(t,n),n+=2,r.ySuperscriptXOffset=i.readShort(t,n),n+=2,r.ySuperscriptYOffset=i.readShort(t,n),n+=2,r.yStrikeoutSize=i.readShort(t,n),n+=2,r.yStrikeoutPosition=i.readShort(t,n),n+=2,r.sFamilyClass=i.readShort(t,n),n+=2,r.panose=i.readBytes(t,n,10),n+=10,r.ulUnicodeRange1=i.readUint(t,n),n+=4,r.ulUnicodeRange2=i.readUint(t,n),n+=4,r.ulUnicodeRange3=i.readUint(t,n),n+=4,r.ulUnicodeRange4=i.readUint(t,n),n+=4,r.achVendID=[i.readInt8(t,n),i.readInt8(t,n+1),i.readInt8(t,n+2),i.readInt8(t,n+3)],n+=4,r.fsSelection=i.readUshort(t,n),n+=2,r.usFirstCharIndex=i.readUshort(t,n),n+=2,r.usLastCharIndex=i.readUshort(t,n),n+=2,r.sTypoAscender=i.readShort(t,n),n+=2,r.sTypoDescender=i.readShort(t,n),n+=2,r.sTypoLineGap=i.readShort(t,n),n+=2,r.usWinAscent=i.readUshort(t,n),n+=2,r.usWinDescent=i.readUshort(t,n),n+2},e["OS/2"].version1=function(t,n,r){var i=e._bin;return n=e["OS/2"].version0(t,n,r),r.ulCodePageRange1=i.readUint(t,n),n+=4,r.ulCodePageRange2=i.readUint(t,n),n+4},e["OS/2"].version2=function(t,n,r){var i=e._bin;return n=e["OS/2"].version1(t,n,r),r.sxHeight=i.readShort(t,n),n+=2,r.sCapHeight=i.readShort(t,n),n+=2,r.usDefault=i.readUshort(t,n),n+=2,r.usBreak=i.readUshort(t,n),n+=2,r.usMaxContext=i.readUshort(t,n),n+2},e["OS/2"].version5=function(t,n,r){var i=e._bin;return n=e["OS/2"].version2(t,n,r),r.usLowerOpticalPointSize=i.readUshort(t,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(t,n),n+2},e.post={},e.post.parse=function(t,n,r){var i=e._bin,o={};return o.version=i.readFixed(t,n),n+=4,o.italicAngle=i.readFixed(t,n),n+=4,o.underlinePosition=i.readShort(t,n),n+=2,o.underlineThickness=i.readShort(t,n),n+=2,o},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(t,e){var n=t.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return e>=i.map.length?0:i.map[e];if(4==i.format){for(var o=-1,s=0;s<i.endCount.length;s++)if(e<=i.endCount[s]){o=s;break}return-1==o||i.startCount[o]>e?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[e-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:e+i.idDelta[o])}if(12==i.format){if(e>i.groups[i.groups.length-1][1])return 0;for(s=0;s<i.groups.length;s++){var a=i.groups[s];if(a[0]<=e&&e<=a[1])return a[2]+(e-a[0])}return 0}throw"unknown cmap table format "+i.format},e.U.glyphToPath=function(t,n){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[n]){var i=t.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=e.SVG.toPath(i),t.SVG.entries[n]=i),i)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},s=t.CFF,a=t.CFF.Private;if(s.ROS){for(var l=0;s.FDSelect[l+2]<=n;)l+=2;a=s.FDArray[s.FDSelect[l+1]].Private}e.U._drawCFF(t.CFF.CharStrings[n],o,s,a,r)}else t.glyf&&e.U._drawGlyf(n,t,r);return r},e.U._drawGlyf=function(t,n,r){var i=n.glyf[t];null==i&&(i=n.glyf[t]=e.glyf._parseGlyf(n,t)),null!=i&&(i.noc>-1?e.U._simpleGlyph(i,r):e.U._compoGlyph(i,n,r))},e.U._simpleGlyph=function(t,n){for(var r=0;r<t.noc;r++){for(var i=0==r?0:t.endPts[r-1]+1,o=t.endPts[r],s=i;s<=o;s++){var a=s==i?o:s-1,l=s==o?i:s+1,u=1&t.flags[s],c=1&t.flags[a],h=1&t.flags[l],d=t.xs[s],p=t.ys[s];if(s==i)if(u){if(!c){e.U.P.moveTo(n,d,p);continue}e.U.P.moveTo(n,t.xs[a],t.ys[a])}else c?e.U.P.moveTo(n,t.xs[a],t.ys[a]):e.U.P.moveTo(n,(t.xs[a]+d)/2,(t.ys[a]+p)/2);u?c&&e.U.P.lineTo(n,d,p):h?e.U.P.qcurveTo(n,d,p,t.xs[l],t.ys[l]):e.U.P.qcurveTo(n,d,p,(d+t.xs[l])/2,(p+t.ys[l])/2)}e.U.P.closePath(n)}},e.U._compoGlyph=function(t,n,r){for(var i=0;i<t.parts.length;i++){var o={cmds:[],crds:[]},s=t.parts[i];e.U._drawGlyf(s.glyphIndex,n,o);for(var a=s.m,l=0;l<o.crds.length;l+=2){var u=o.crds[l],c=o.crds[l+1];r.crds.push(u*a.a+c*a.b+a.tx),r.crds.push(u*a.c+c*a.d+a.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},e.U._getGlyphClass=function(t,n){var r=e._lctf.getInterval(n,t);return-1==r?0:n[r+2]},e.U.getPairAdjustment=function(t,n,r){var i=0,o=!1;if(t.GPOS)for(var s=t.GPOS,a=s.lookupList,l=s.featureList,u=[],c=0;c<l.length;c++){var h=l[c];if("kern"==h.tag){o=!0;for(var d=0;d<h.tab.length;d++)if(!u[h.tab[d]]){u[h.tab[d]]=!0;for(var p=a[h.tab[d]],f=0;f<p.tabs.length;f++)if(null!=p.tabs[f]){var m,v=p.tabs[f];if(!v.coverage||-1!=(m=e._lctf.coverageIndex(v.coverage,n)))if(1==p.ltype);else if(2==p.ltype){var g;if(1==v.fmt){var _=v.pairsets[m];for(c=0;c<_.length;c++)_[c].gid2==r&&(g=_[c])}else if(2==v.fmt){var b=e.U._getGlyphClass(n,v.classDef1),y=e.U._getGlyphClass(r,v.classDef2);g=v.matrix[b][y]}g&&g.val1&&g.val1[2]&&(i+=g.val1[2]),g&&g.val2&&g.val2[0]&&(i+=g.val2[0])}}}}}if(t.kern&&!o){var x=t.kern.glyph1.indexOf(n);if(-1!=x){var w=t.kern.rval[x].glyph2.indexOf(r);-1!=w&&(i+=t.kern.rval[x].vals[w])}}return i},e.U._applySubs=function(t,n,r,i){for(var o=t.length-n-1,s=0;s<r.tabs.length;s++)if(null!=r.tabs[s]){var a,l=r.tabs[s];if(!l.coverage||-1!=(a=e._lctf.coverageIndex(l.coverage,t[n])))if(1==r.ltype)t[n],1==l.fmt?t[n]=t[n]+l.delta:t[n]=l.newg[a];else if(4==r.ltype)for(var u=l.vals[a],c=0;c<u.length;c++){var h=u[c],d=h.chain.length;if(!(d>o)){for(var p=!0,f=0,m=0;m<d;m++){for(;-1==t[n+f+(1+m)];)f++;h.chain[m]!=t[n+f+(1+m)]&&(p=!1)}if(p){for(t[n]=h.nglyph,m=0;m<d+f;m++)t[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var v=e._lctf.getInterval(l.cDef,t[n]),g=l.cDef[v+2],_=l.scset[g],b=0;b<_.length;b++){var y=_[b],x=y.input;if(!(x.length>o)){for(p=!0,m=0;m<x.length;m++){var w=e._lctf.getInterval(l.cDef,t[n+1+m]);if(-1==v&&l.cDef[w+2]!=x[m]){p=!1;break}}if(p){var S=y.substLookupRecords;for(c=0;c<S.length;c+=2)S[c],S[c+1]}}}else if(6==r.ltype&&3==l.fmt){if(!e.U._glsCovered(t,l.backCvg,n-l.backCvg.length))continue;if(!e.U._glsCovered(t,l.inptCvg,n))continue;if(!e.U._glsCovered(t,l.ahedCvg,n+l.inptCvg.length))continue;var M=l.lookupRec;for(b=0;b<M.length;b+=2){v=M[b];var T=i[M[b+1]];e.U._applySubs(t,n+v,T,i)}}}},e.U._glsCovered=function(t,n,r){for(var i=0;i<n.length;i++)if(-1==e._lctf.coverageIndex(n[i],t[r+i]))return!1;return!0},e.U.glyphsToPath=function(t,n,r){for(var i={cmds:[],crds:[]},o=0,s=0;s<n.length;s++){var a=n[s];if(-1!=a){for(var l=s<n.length-1&&-1!=n[s+1]?n[s+1]:0,u=e.U.glyphToPath(t,a),c=0;c<u.crds.length;c+=2)i.crds.push(u.crds[c]+o),i.crds.push(u.crds[c+1]);for(r&&i.cmds.push(r),c=0;c<u.cmds.length;c++)i.cmds.push(u.cmds[c]);r&&i.cmds.push("X"),o+=t.hmtx.aWidth[a],s<n.length-1&&(o+=e.U.getPairAdjustment(t,a,l))}}return i},e.U.P={},e.U.P.moveTo=function(t,e,n){t.cmds.push("M"),t.crds.push(e,n)},e.U.P.lineTo=function(t,e,n){t.cmds.push("L"),t.crds.push(e,n)},e.U.P.curveTo=function(t,e,n,r,i,o,s){t.cmds.push("C"),t.crds.push(e,n,r,i,o,s)},e.U.P.qcurveTo=function(t,e,n,r,i){t.cmds.push("Q"),t.crds.push(e,n,r,i)},e.U.P.closePath=function(t){t.cmds.push("Z")},e.U._drawCFF=function(t,n,r,i,o){for(var s=n.stack,a=n.nStems,l=n.haveWidth,u=n.width,c=n.open,h=0,d=n.x,p=n.y,f=0,m=0,v=0,g=0,_=0,b=0,y=0,x=0,w=0,S=0,M={val:0,size:0};h<t.length;){e.CFF.getCharString(t,h,M);var T=M.val;if(h+=M.size,"o1"==T||"o18"==T)s.length%2!=0&&!l&&(u=s.shift()+i.nominalWidthX),a+=s.length>>1,s.length=0,l=!0;else if("o3"==T||"o23"==T)s.length%2!=0&&!l&&(u=s.shift()+i.nominalWidthX),a+=s.length>>1,s.length=0,l=!0;else if("o4"==T)s.length>1&&!l&&(u=s.shift()+i.nominalWidthX,l=!0),c&&e.U.P.closePath(o),p+=s.pop(),e.U.P.moveTo(o,d,p),c=!0;else if("o5"==T)for(;s.length>0;)d+=s.shift(),p+=s.shift(),e.U.P.lineTo(o,d,p);else if("o6"==T||"o7"==T)for(var E=s.length,A="o6"==T,C=0;C<E;C++){var P=s.shift();A?d+=P:p+=P,A=!A,e.U.P.lineTo(o,d,p)}else if("o8"==T||"o24"==T){E=s.length;for(var R=0;R+6<=E;)f=d+s.shift(),m=p+s.shift(),v=f+s.shift(),g=m+s.shift(),d=v+s.shift(),p=g+s.shift(),e.U.P.curveTo(o,f,m,v,g,d,p),R+=6;"o24"==T&&(d+=s.shift(),p+=s.shift(),e.U.P.lineTo(o,d,p))}else{if("o11"==T)break;if("o1234"==T||"o1235"==T||"o1236"==T||"o1237"==T)"o1234"==T&&(m=p,v=(f=d+s.shift())+s.shift(),S=g=m+s.shift(),b=g,x=p,d=(y=(_=(w=v+s.shift())+s.shift())+s.shift())+s.shift(),e.U.P.curveTo(o,f,m,v,g,w,S),e.U.P.curveTo(o,_,b,y,x,d,p)),"o1235"==T&&(f=d+s.shift(),m=p+s.shift(),v=f+s.shift(),g=m+s.shift(),w=v+s.shift(),S=g+s.shift(),_=w+s.shift(),b=S+s.shift(),y=_+s.shift(),x=b+s.shift(),d=y+s.shift(),p=x+s.shift(),s.shift(),e.U.P.curveTo(o,f,m,v,g,w,S),e.U.P.curveTo(o,_,b,y,x,d,p)),"o1236"==T&&(f=d+s.shift(),m=p+s.shift(),v=f+s.shift(),S=g=m+s.shift(),b=g,y=(_=(w=v+s.shift())+s.shift())+s.shift(),x=b+s.shift(),d=y+s.shift(),e.U.P.curveTo(o,f,m,v,g,w,S),e.U.P.curveTo(o,_,b,y,x,d,p)),"o1237"==T&&(f=d+s.shift(),m=p+s.shift(),v=f+s.shift(),g=m+s.shift(),w=v+s.shift(),S=g+s.shift(),_=w+s.shift(),b=S+s.shift(),y=_+s.shift(),x=b+s.shift(),Math.abs(y-d)>Math.abs(x-p)?d=y+s.shift():p=x+s.shift(),e.U.P.curveTo(o,f,m,v,g,w,S),e.U.P.curveTo(o,_,b,y,x,d,p));else if("o14"==T){if(s.length>0&&!l&&(u=s.shift()+r.nominalWidthX,l=!0),4==s.length){var L=s.shift(),k=s.shift(),O=s.shift(),D=s.shift(),I=e.CFF.glyphBySE(r,O),U=e.CFF.glyphBySE(r,D);e.U._drawCFF(r.CharStrings[I],n,r,i,o),n.x=L,n.y=k,e.U._drawCFF(r.CharStrings[U],n,r,i,o)}c&&(e.U.P.closePath(o),c=!1)}else if("o19"==T||"o20"==T)s.length%2!=0&&!l&&(u=s.shift()+i.nominalWidthX),a+=s.length>>1,s.length=0,l=!0,h+=a+7>>3;else if("o21"==T)s.length>2&&!l&&(u=s.shift()+i.nominalWidthX,l=!0),p+=s.pop(),d+=s.pop(),c&&e.U.P.closePath(o),e.U.P.moveTo(o,d,p),c=!0;else if("o22"==T)s.length>1&&!l&&(u=s.shift()+i.nominalWidthX,l=!0),d+=s.pop(),c&&e.U.P.closePath(o),e.U.P.moveTo(o,d,p),c=!0;else if("o25"==T){for(;s.length>6;)d+=s.shift(),p+=s.shift(),e.U.P.lineTo(o,d,p);f=d+s.shift(),m=p+s.shift(),v=f+s.shift(),g=m+s.shift(),d=v+s.shift(),p=g+s.shift(),e.U.P.curveTo(o,f,m,v,g,d,p)}else if("o26"==T)for(s.length%2&&(d+=s.shift());s.length>0;)f=d,m=p+s.shift(),d=v=f+s.shift(),p=(g=m+s.shift())+s.shift(),e.U.P.curveTo(o,f,m,v,g,d,p);else if("o27"==T)for(s.length%2&&(p+=s.shift());s.length>0;)m=p,v=(f=d+s.shift())+s.shift(),g=m+s.shift(),d=v+s.shift(),p=g,e.U.P.curveTo(o,f,m,v,g,d,p);else if("o10"==T||"o29"==T){var F="o10"==T?i:r;if(0==s.length)console.debug("error: empty stack");else{var N=s.pop(),B=F.Subrs[N+F.Bias];n.x=d,n.y=p,n.nStems=a,n.haveWidth=l,n.width=u,n.open=c,e.U._drawCFF(B,n,r,i,o),d=n.x,p=n.y,a=n.nStems,l=n.haveWidth,u=n.width,c=n.open}}else if("o30"==T||"o31"==T){var V=s.length,z=(R=0,"o31"==T);for(R+=V-(E=-3&V);R<E;)z?(m=p,v=(f=d+s.shift())+s.shift(),p=(g=m+s.shift())+s.shift(),E-R==5?(d=v+s.shift(),R++):d=v,z=!1):(f=d,m=p+s.shift(),v=f+s.shift(),g=m+s.shift(),d=v+s.shift(),E-R==5?(p=g+s.shift(),R++):p=g,z=!0),e.U.P.curveTo(o,f,m,v,g,d,p),R+=4}else{if("o"==(T+"").charAt(0))throw console.debug("Unknown operation: "+T,t),T;s.push(T)}}}n.x=d,n.y=p,n.nStems=a,n.haveWidth=l,n.width=u,n.open=c};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr},function(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),o=0;o<31;++o)i[o]=e+=1<<t[o-1];var s=new r(i[30]);for(o=1;o<30;++o)for(var a=i[o];a<i[o+1];++a)s[a]=a-i[o]<<5|o;return[i,s]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var h=a(o,0)[0],d=new n(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(t,e,r){for(var i=t.length,o=0,s=new n(e);o<i;++o)++s[t[o]-1];var a,l=new n(e);for(o=0;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;if(r){a=new n(1<<e);var u=15-e;for(o=0;o<i;++o)if(t[o])for(var c=o<<4|t[o],h=e-t[o],p=l[t[o]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)a[d[p]>>>u]=c}else for(a=new n(i),o=0;o<i;++o)t[o]&&(a[o]=d[l[t[o]-1]++]>>>15-t[o]);return a},v=new e(288);for(p=0;p<144;++p)v[p]=8;for(p=144;p<256;++p)v[p]=9;for(p=256;p<280;++p)v[p]=7;for(p=280;p<288;++p)v[p]=8;var g=new e(32);for(p=0;p<32;++p)g[p]=5;var _=m(v,9,1),b=m(g,5,1),y=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},x=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},w=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(t,e,n){var r=new Error(e||S[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,M),!n)throw r;return r},T=function(t,a,l){var c=t.length;if(!c||l&&!l.l&&c<5)return a||new e(0);var d=!a||l,p=!l||l.i;l||(l={}),a||(a=new e(3*c));var f,v=function(t){var n=a.length;if(t>n){var r=new e(Math.max(2*n,t));r.set(a),a=r}},g=l.f||0,S=l.p||0,T=l.b||0,E=l.l,A=l.d,C=l.m,P=l.n,R=8*c;do{if(!E){l.f=g=x(t,S,1);var L=x(t,S+1,3);if(S+=3,!L){var k=t[(H=((f=S)/8|0)+(7&f&&1)+4)-4]|t[H-3]<<8,O=H+k;if(O>c){p&&M(0);break}d&&v(T+k),a.set(t.subarray(H,O),T),l.b=T+=k,l.p=S=8*O;continue}if(1==L)E=_,A=b,C=9,P=5;else if(2==L){var D=x(t,S,31)+257,I=x(t,S+10,15)+4,U=D+x(t,S+5,31)+1;S+=14;for(var F=new e(U),N=new e(19),B=0;B<I;++B)N[s[B]]=x(t,S+3*B,7);S+=3*I;var V=y(N),z=(1<<V)-1,G=m(N,V,1);for(B=0;B<U;){var H,j=G[x(t,S,z)];if(S+=15&j,(H=j>>>4)<16)F[B++]=H;else{var W=0,K=0;for(16==H?(K=3+x(t,S,3),S+=2,W=F[B-1]):17==H?(K=3+x(t,S,7),S+=3):18==H&&(K=11+x(t,S,127),S+=7);K--;)F[B++]=W}}var q=F.subarray(0,D),X=F.subarray(D);C=y(q),P=y(X),E=m(q,C,1),A=m(X,P,1)}else M(1);if(S>R){p&&M(0);break}}d&&v(T+131072);for(var Y=(1<<C)-1,$=(1<<P)-1,Z=S;;Z=S){var J=(W=E[w(t,S)&Y])>>>4;if((S+=15&W)>R){p&&M(0);break}if(W||M(2),J<256)a[T++]=J;else{if(256==J){Z=S,E=null;break}var Q=J-254;if(J>264){var tt=i[B=J-257];Q=x(t,S,(1<<tt)-1)+u[B],S+=tt}var et=A[w(t,S)&$],nt=et>>>4;if(et||M(3),S+=15&et,X=h[nt],nt>3&&(tt=o[nt],X+=w(t,S)&(1<<tt)-1,S+=tt),S>R){p&&M(0);break}d&&v(T+131072);for(var rt=T+Q;T<rt;T+=4)a[T]=a[T-X],a[T+1]=a[T+1-X],a[T+2]=a[T+2-X],a[T+3]=a[T+3-X];T=rt}}l.l=E,l.p=Z,l.b=T,E&&(g=1,l.m=C,l.d=A,l.n=P)}while(!g);return T==a.length?a:function(t,i,o){(null==i||i<0)&&(i=0),(null==o||o>t.length)&&(o=t.length);var s=new(t instanceof n?n:t instanceof r?r:e)(o-i);return s.set(t.subarray(i,o)),s}(a,0,T)},E=new e(0),A="undefined"!=typeof TextDecoder&&new TextDecoder;try{A.decode(E,{stream:!0})}catch(t){}return t.convert_streams=function(t){var e=new DataView(t),n=0;function r(){var t=e.getUint16(n);return n+=2,t}function i(){var t=e.getUint32(n);return n+=4,t}function o(t){g.setUint16(_,t),_+=2}function s(t){g.setUint32(_,t),_+=4}for(var a={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=a.numTables;)l++;l--;for(var u=16*Math.pow(2,l),c=16*a.numTables-u,h=12,d=[],p=0;p<a.numTables;p++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var f,m=new Uint8Array(12+16*d.length+d.reduce(function(t,e){return t+e.origLength+4},0)),v=m.buffer,g=new DataView(v),_=0;return s(a.flavor),o(a.numTables),o(u),o(l),o(c),d.forEach(function(t){s(t.tag),s(t.origChecksum),s(h),s(t.origLength),t.outOffset=h,(h+=t.origLength)%4!=0&&(h+=4-h%4)}),d.forEach(function(e){var n,r=t.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var i=new Uint8Array(e.origLength);n=new Uint8Array(r,2),T(n,i)}else i=new Uint8Array(r);m.set(i,e.outOffset);var o=0;(h=e.outOffset+e.origLength)%4!=0&&(o=4-h%4),m.set(new Uint8Array(o).buffer,e.outOffset+e.origLength),f=h+o}),v.slice(0,f)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams},function(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function o(t){if(!i){const t={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let e in r){let n=0;r[e].split(",").forEach(r=>{let[o,s]=r.split("+");o=parseInt(o,36),s=s?parseInt(s,36):0,i.set(n+=o,t[e]);for(let r=s;r--;)i.set(++n,t[e])})}}return i.get(t)||32}const s=[null,"isol","init","fina","medi"];function a(t){const e=new Uint8Array(t.length);let n=32,r=1,i=-1;for(let s=0;s<t.length;s++){const a=t.codePointAt(s);let l=0|o(a),u=1;8&l||(21&n?22&l?(u=3,1!==r&&3!==r||e[i]++):33&l&&(2!==r&&4!==r||e[i]--):34&n&&(2!==r&&4!==r||e[i]--),r=e[s]=u,n=l,i=s,a>65535&&s++)}return e}function l(e){const r=Object.create(null),i={unitsPerEm:e.head.unitsPerEm,ascender:e.hhea.ascender,descender:e.hhea.descender,forEachGlyph(o,l,u,c){let h=0;const d=1/i.unitsPerEm*l,p=function(e,n){const r=[];for(let i=0;i<n.length;i++){const o=n.codePointAt(i);o>65535&&i++,r.push(t.U.codeToGlyph(e,o))}const i=e.GSUB;if(i){const{lookupList:e,featureList:o}=i;let l;const u=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,c=[];o.forEach(i=>{if(u.test(i.tag))for(let o=0;o<i.tab.length;o++){if(c[i.tab[o]])continue;c[i.tab[o]]=!0;const u=e[i.tab[o]],h=/^(isol|init|fina|medi)$/.test(i.tag);h&&!l&&(l=a(n));for(let n=0;n<r.length;n++)l&&h&&s[l[n]]!==i.tag||t.U._applySubs(r,n,u,e)}})}return r}(e,o);let f=0,m=-1;return p.forEach((i,s)=>{if(-1!==i){let o=r[i];if(!o){const{cmds:s,crds:a}=t.U.glyphToPath(e,i);let l,u,c,h,d="",p=0;for(let t=0,e=s.length;t<e;t++){const e=n[s[t]];d+=s[t];for(let t=1;t<=e;t++)d+=(t>1?",":"")+a[p++]}if(a.length){l=u=1/0,c=h=-1/0;for(let t=0,e=a.length;t<e;t+=2){let e=a[t],n=a[t+1];e<l&&(l=e),n<u&&(u=n),e>c&&(c=e),n>h&&(h=n)}}else l=c=u=h=0;o=r[i]={index:i,advanceWidth:e.hmtx.aWidth[i],xMin:l,yMin:u,xMax:c,yMax:h,path:d,pathCommandCount:s.length}}-1!==m&&(h+=t.U.getPairAdjustment(e,m,i)*d),c.call(null,o,h,f),o.advanceWidth&&(h+=o.advanceWidth*d),u&&(h+=u*l),m=i}f+=o.codePointAt(f)>65535?2:1}),h}};return i}return function(n){const r=new Uint8Array(n,0,4),i=t._bin.readASCII(r,0,4);if("wOFF"===i)n=e(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return l(t.parse(n)[0])}}],init:(t,e,n)=>n(t(),e())}),V={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},z=new r.Ilk;let G=!1;function H(){return(self.performance||Date).now()}const j=Object.create(null);function W(t,e){G=!0,t=function(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}({},t);const n=H();if(t.font=function(t){return X||(X="undefined"==typeof document?{}:document.createElement("a")),X.href=t,X.href}(t.font||V.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||V.sdfGlyphSize,null!=t.colorRanges){let e={};for(let n in t.colorRanges)if(t.colorRanges.hasOwnProperty(n)){let r=t.colorRanges[n];"number"!=typeof r&&(r=z.set(r).getHex()),e[n]=r}t.colorRanges=e}Object.freeze(t);const{textureWidth:i,sdfExponent:o}=V,{sdfGlyphSize:a}=t,l=i/a*4;let u=j[a];if(!u){const t=document.createElement("canvas");t.width=i,t.height=256*a/l,u=j[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:t,sdfTexture:new r.xEZ(t,void 0,void 0,void 0,r.wem,r.wem),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,function(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",e=>{console.log("Context Lost",e),e.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",e=>{console.log("Context Restored",e),t.contextLost=!1;const n=[];t.glyphsByFont.forEach(e=>{e.forEach(e=>{n.push(K(e,t,!0))})}),s.all(n).then(()=>{Y(t),t.sdfTexture.needsUpdate=!0})})}(u)}const{sdfTexture:c,sdfCanvas:h}=u;let d=u.glyphsByFont.get(t.font);d||u.glyphsByFont.set(t.font,d=new Map),Z(t).then(r=>{const{glyphIds:p,glyphPositions:f,fontSize:m,unitsPerEm:v,timings:g}=r,_=[],b=new Float32Array(4*p.length),y=m/v;let x=0,w=0;const S=H();p.forEach((t,e)=>{let n=d.get(t);if(!n){const{path:e,pathBounds:i}=r.glyphData[t],o=Math.max(i[2]-i[0],i[3]-i[1])/a*(V.sdfMargin*a+.5),s=u.glyphCount++,l=[i[0]-o,i[1]-o,i[2]+o,i[3]+o];d.set(t,n={path:e,atlasIndex:s,sdfViewBox:l}),_.push(n)}const{sdfViewBox:i}=n,o=f[w++],s=f[w++];b[x++]=o+i[0]*y,b[x++]=s+i[1]*y,b[x++]=o+i[2]*y,b[x++]=s+i[3]*y,p[e]=n.atlasIndex}),g.quads=(g.quads||0)+(H()-S);const M=H();g.sdf={};const T=h.height,E=Math.ceil(u.glyphCount/l),A=Math.pow(2,Math.ceil(Math.log2(E*a)));A>T&&(console.info(`Increasing SDF texture size ${T}->${A}`),N(h,i,A),c.dispose()),s.all(_.map(e=>K(e,u,t.gpuAccelerateSDF).then(({timing:t})=>{g.sdf[e.atlasIndex]=t}))).then(()=>{_.length&&!u.contextLost&&(Y(u),c.needsUpdate=!0),g.sdfTotal=H()-M,g.total=H()-n,e(Object.freeze({parameters:t,sdfTexture:c,sdfGlyphSize:a,sdfExponent:o,glyphBounds:b,glyphAtlasIndices:p,glyphColors:r.glyphColors,caretPositions:r.caretPositions,caretHeight:r.caretHeight,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),r.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[t,e,n,i]=r.blockBounds;return[n-t,i-e]}}))})}),s.all([]).then(()=>{var t;u.contextLost||(t=h)._warm||(D.webgl.isSupported(t),t._warm=!0)})}function K({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},s){if(o)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=V,u=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(e/4);return function(t,e,n,r,i,o,s,a,l,u,c=!0){return c?U(t,e,n,r,i,o,s,a,l,u).then(null,c=>(I||(console.warn("WebGL SDF generation failed, falling back to JS",c),I=!0),F(t,e,n,r,i,o,s,a,l,u))):F(t,e,n,r,i,o,s,a,l,u)}(r,r,t,n,u,l,i,c%(a/r)*r,Math.floor(c/(a/r))*r,e%4,s)}function q({font:t,characters:e,sdfGlyphSize:n},r){W({font:t,sdfGlyphSize:n,text:Array.isArray(e)?e.join("\n"):""+e},r)}let X;function Y(t){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,o=t.sdfCanvas.getContext("webgl");let s=n.image.data;s&&s.length===r*i*4||(s=new Uint8Array(r*i*4),n.image={width:r,height:i,data:s},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,s)}}const $=m({name:"Typesetter",dependencies:[V,B,function(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(e,n){e||(e=r);let o=i[e];o?o.pending?o.pending.push(n):n(o):(i[e]={pending:[n]},function(e,n){!function i(){const o=t=>{console.error(`Failure loading font ${e}${e===r?"":"; trying fallback"}`,t),e!==r&&(e=r,i())};try{const r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)o(new Error(r.statusText));else if(r.status>0)try{const e=t(r.response);n(e)}catch(t){o(t)}},r.onerror=o,r.send()}catch(t){o(t)}}()}(e,t=>{let n=i[e].pending;i[e]=t,n.forEach(e=>e(t))}))}function u({text:t="",font:n=r,sdfGlyphSize:i=64,fontSize:u=1,letterSpacing:f=0,lineHeight:m="normal",maxWidth:v=o,direction:g,textAlign:_="left",textIndent:b=0,whiteSpace:y="normal",overflowWrap:x="normal",anchorX:w=0,anchorY:S=0,includeCaretPositions:M=!1,chunkedBoundsSize:T=8192,colorRanges:E=null},A,C=!1){const P=d(),R={fontLoad:0,typesetting:0};t.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),u=+u,f=+f,v=+v,m=m||"normal",b=+b,l(n,n=>{const r=isFinite(v);let i=null,l=null,L=null,k=null,O=null,D=null,I=null,U=0,F=0,N="nowrap"!==y;const{ascender:B,descender:V,unitsPerEm:z}=n;R.fontLoad=d()-P;const G=d(),H=u/z;"normal"===m&&(m=(B-V)/z);const j=((m*=u)-(B-V)*H)/2,W=-(B*H+j),K=Math.min(m,(B-V)*H),q=(B+V)/2*H-K/2;let X=b,Y=new p;const $=[Y];n.forEachGlyph(t,u,f,(e,n,i)=>{const o=t.charAt(i),l=e.advanceWidth*H,c=Y.count;let h;if("isEmpty"in e||(e.isWhitespace=!!o&&/\s/.test(o),e.canBreakAfter=!!o&&a.test(o),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax||s.test(o)),e.isWhitespace||e.isEmpty||F++,N&&r&&!e.isWhitespace&&n+l+X>v&&c){if(Y.glyphAt(c-1).glyphObj.canBreakAfter)h=new p,X=-n;else for(let t=c;t--;){if(0===t&&"break-word"===x){h=new p,X=-n;break}if(Y.glyphAt(t).glyphObj.canBreakAfter){h=Y.splitAt(t+1);const e=h.glyphAt(0).x;X-=e;for(let t=h.count;t--;)h.glyphAt(t).x-=e;break}}h&&(Y.isSoftWrapped=!0,Y=h,$.push(Y),U=v)}let d=Y.glyphAt(Y.count);d.glyphObj=e,d.x=n+X,d.width=l,d.charIndex=i,"\n"===o&&(Y=new p,$.push(Y),X=-(n+l+f*u)+b)}),$.forEach(t=>{for(let e=t.count;e--;){let{glyphObj:n,x:r,width:i}=t.glyphAt(e);if(!n.isWhitespace)return t.width=r+i,void(t.width>U&&(U=t.width))}});let Z=0,J=0;if(w&&("number"==typeof w?Z=-w:"string"==typeof w&&(Z=-U*("left"===w?0:"center"===w?.5:"right"===w?1:c(w)))),S)if("number"==typeof S)J=-S;else if("string"==typeof S){let t=$.length*m;J="top"===S?0:"top-baseline"===S?-W:"middle"===S?t/2:"bottom"===S?t:"bottom-baseline"===S?t-j+V*H:c(S)*t}if(!C){const r=e.getEmbeddingLevels(t,g);i=new Uint16Array(F),l=new Float32Array(2*F),L={},D=[o,o,-1/0,-1/0],I=[];let s=W;M&&(O=new Float32Array(3*t.length)),E&&(k=new Uint8Array(3*F));let a,u,c=0,d=-1,p=-1;if($.forEach((f,v)=>{let{count:g,width:b}=f;if(g>0){let m=0;for(let t=g;t--&&f.glyphAt(t).glyphObj.isWhitespace;)m++;let v=0,y=0;if("center"===_)v=(U-b)/2;else if("right"===_)v=U-b;else if("justify"===_&&f.isSoftWrapped){let t=0;for(let e=g-m;e--;)f.glyphAt(e).glyphObj.isWhitespace&&t++;y=(U-b)/t}if(y||v){let t=0;for(let e=0;e<g;e++){let n=f.glyphAt(e);const r=n.glyphObj;n.x+=v+t,0!==y&&r.isWhitespace&&e<g-m&&(t+=y,n.width+=y)}}const x=e.getReorderSegments(t,r,f.glyphAt(0).charIndex,f.glyphAt(f.count-1).charIndex);for(let t=0;t<x.length;t++){const[e,n]=x[t];let r=1/0,i=-1/0;for(let t=0;t<g;t++)if(f.glyphAt(t).charIndex>=e){let e=t,o=t;for(;o<g;o++){let t=f.glyphAt(o);if(t.charIndex>n)break;o<g-m&&(r=Math.min(r,t.x),i=Math.max(i,t.x+t.width))}for(let t=e;t<o;t++){const e=f.glyphAt(t);e.x=i-(e.x+e.width-r)}break}}let w;const S=t=>w=t;for(let m=0;m<g;m++){let v=f.glyphAt(m);w=v.glyphObj;const g=w.index,_=1&r.levels[v.charIndex];if(_){const r=e.getMirroredCharacter(t[v.charIndex]);r&&n.forEachGlyph(r,0,0,S)}if(M){const{charIndex:t}=v,e=v.x+Z,n=v.x+v.width+Z;O[3*t]=_?n:e,O[3*t+1]=_?e:n,O[3*t+2]=s+q+J;const r=t-d;r>1&&h(O,d,r),d=t}if(E){const{charIndex:t}=v;for(;t>p;)p++,E.hasOwnProperty(p)&&(u=E[p])}if(!w.isWhitespace&&!w.isEmpty){const t=c++;L[g]||(L[g]={path:w.path,pathBounds:[w.xMin,w.yMin,w.xMax,w.yMax]});const e=v.x+Z,n=s+J;l[2*t]=e,l[2*t+1]=n;const r=e+w.xMin*H,h=n+w.yMin*H,d=e+w.xMax*H,p=n+w.yMax*H;r<D[0]&&(D[0]=r),h<D[1]&&(D[1]=h),d>D[2]&&(D[2]=d),p>D[3]&&(D[3]=p),t%T==0&&(a={start:t,end:t,rect:[o,o,-1/0,-1/0]},I.push(a)),a.end++;const f=a.rect;if(r<f[0]&&(f[0]=r),h<f[1]&&(f[1]=h),d>f[2]&&(f[2]=d),p>f[3]&&(f[3]=p),i[t]=g,E){const e=3*t;k[e]=u>>16&255,k[e+1]=u>>8&255,k[e+2]=255&u}}}}s-=m}),O){const e=t.length-d;e>1&&h(O,d,e)}}R.typesetting=d()-G,A({glyphIds:i,glyphPositions:l,glyphData:L,caretPositions:O,caretHeight:K,glyphColors:k,chunkedBounds:I,fontSize:u,unitsPerEm:z,ascender:B*H,descender:V*H,lineHeight:m,topBaseline:W,blockBounds:[Z,J-$.length*m,Z+U,J],visibleBounds:D,timings:R})})}function c(t){let e=t.match(/^([\d.]+)%$/),n=e?parseFloat(e[1]):NaN;return isNaN(n)?0:n/100}function h(t,e,n){const r=t[3*e],i=t[3*e+1],o=t[3*e+2],s=(i-r)/n;for(let i=0;i<n;i++){const n=3*(e+i);t[n]=r+s*i,t[n+1]=r+s*(i+1),t[n+2]=o}}function d(){return(self.performance||Date).now()}function p(){this.data=[]}const f=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/f.length)},glyphAt(t){let e=p.flyweight;return e.data=this.data,e.index=t,e},splitAt(t){let e=new p;return e.data=this.data.splice(t*f.length),e}},p.flyweight=f.reduce((t,e,n,r)=>(Object.defineProperty(t,e,{get(){return this.data[this.index*f.length+n]},set(t){this.data[this.index*f.length+n]=t}}),t),{data:null,index:0}),{typeset:u,measure:function(t,e){u(t,t=>{const[n,r,i,o]=t.blockBounds;e({width:i-n,height:o-r})},{metricsOnly:!0})},loadFont:l}},function(){return function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(e).forEach(function(t,e){n[t]=1<<e+1,r[n[t]]=t}),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,s=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,a=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|a,u=null;function c(t){return function(){if(!u){u=new Map;var t=function(t){if(e.hasOwnProperty(t)){var r=0;e[t].split(",").forEach(function(e){var i=e.split("+"),o=i[0],s=i[1];o=parseInt(o,36),s=s?parseInt(s,36):0,u.set(r+=o,n[t]);for(var a=0;a<s;a++)u.set(++r,n[t])})}};for(var r in e)t(r)}}(),u.get(t.codePointAt(0))||n.L}var h,d,p;function f(t,e){var n,r=0,i=new Map,o=e&&new Map;return t.split(",").forEach(function t(s){if(-1!==s.indexOf("+"))for(var a=+s;a--;)t(n);else{n=s;var l=s.split(">"),u=l[0],c=l[1];u=String.fromCodePoint(r+=parseInt(u,36)),c=String.fromCodePoint(r+=parseInt(c,36)),i.set(u,c),e&&o.set(c,u)}}),{map:i,reverseMap:o}}function m(){if(!h){var t=f("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0),e=t.map,n=t.reverseMap;h=e,d=n,p=f("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function v(t){return m(),h.get(t)||null}function g(t){return m(),d.get(t)||null}function _(t){return m(),p.get(t)||null}var b,y=n.L,x=n.R,w=n.EN,S=n.ES,M=n.ET,T=n.AN,E=n.CS,A=n.B,C=n.S,P=n.ON,R=n.BN,L=n.NSM,k=n.AL,O=n.LRO,D=n.RLO,I=n.LRE,U=n.RLE,F=n.PDF,N=n.LRI,B=n.RLI,V=n.FSI,z=n.PDI;function G(t){return function(){if(!b){var t=f("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),e=t.map;t.reverseMap.forEach(function(t,n){e.set(n,t)}),b=e}}(),b.get(t)||null}function H(t,e,n,r){var i=t.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return e.paragraphs.forEach(function(i){var s=Math.max(n,i.start),a=Math.min(r,i.end);if(s<a){for(var u=e.levels.slice(s,a+1),h=a;h>=s&&c(t[h])&l;h--)u[h]=i.level;for(var d=i.level,p=1/0,f=0;f<u.length;f++){var m=u[f];m>d&&(d=m),m<p&&(p=1|m)}for(var v=d;v>=p;v--)for(var g=0;g<u.length;g++)if(u[g]>=v){for(var _=g;g+1<u.length&&u[g+1]>=v;)g++;g>_&&o.push([_+n,g+n])}}}),o}function j(t,e,n,r){for(var i=H(t,e,n,r),o=[],s=0;s<t.length;s++)o[s]=s;return i.forEach(function(t){for(var e=t[0],n=t[1],r=o.slice(e,n+1),i=r.length;i--;)o[n-i]=r[i]}),o}return t.closingToOpeningBracket=g,t.getBidiCharType=c,t.getBidiCharTypeName=function(t){return r[c(t)]},t.getCanonicalBracket=_,t.getEmbeddingLevels=function(t,e){for(var n=new Uint32Array(t.length),r=0;r<t.length;r++)n[r]=c(t[r]);var u=new Map;function h(t,e){var r=n[t];n[t]=e,u.set(r,u.get(r)-1),r&s&&u.set(s,u.get(s)-1),u.set(e,(u.get(e)||0)+1),e&s&&u.set(s,(u.get(s)||0)+1)}for(var d=new Uint8Array(t.length),p=new Map,f=[],m=null,b=0;b<t.length;b++)m||f.push(m={start:b,end:t.length-1,level:"rtl"===e?1:"ltr"===e?0:ze(b,!1)}),n[b]&A&&(m.end=b,m=null);for(var G=U|I|D|O|i|z|F|A,H=function(t){return t+(1&t?1:2)},j=function(t){return t+(1&t?2:1)},W=0;W<f.length;W++){var K=[{_level:(m=f[W]).level,_override:0,_isolate:0}],q=void 0,X=0,Y=0,$=0;u.clear();for(var Z=m.start;Z<=m.end;Z++){var J=n[Z];if(q=K[K.length-1],u.set(J,(u.get(J)||0)+1),J&s&&u.set(s,(u.get(s)||0)+1),J&G)if(J&(U|I)){d[Z]=q._level;var Q=(J===U?j:H)(q._level);Q<=125&&!X&&!Y?K.push({_level:Q,_override:0,_isolate:0}):X||Y++}else if(J&(D|O)){d[Z]=q._level;var tt=(J===D?j:H)(q._level);tt<=125&&!X&&!Y?K.push({_level:tt,_override:J&D?x:y,_isolate:0}):X||Y++}else if(J&i){J&V&&(J=1===ze(Z+1,!0)?B:N),d[Z]=q._level,q._override&&h(Z,q._override);var et=(J===B?j:H)(q._level);et<=125&&0===X&&0===Y?($++,K.push({_level:et,_override:0,_isolate:1,_isolInitIndex:Z})):X++}else if(J&z){if(X>0)X--;else if($>0){for(Y=0;!K[K.length-1]._isolate;)K.pop();var nt=K[K.length-1]._isolInitIndex;null!=nt&&(p.set(nt,Z),p.set(Z,nt)),K.pop(),$--}q=K[K.length-1],d[Z]=q._level,q._override&&h(Z,q._override)}else J&F?(0===X&&(Y>0?Y--:!q._isolate&&K.length>1&&(K.pop(),q=K[K.length-1])),d[Z]=q._level):J&A&&(d[Z]=m.level);else d[Z]=q._level,q._override&&J!==R&&h(Z,q._override)}for(var rt=[],it=null,ot=m.start;ot<=m.end;ot++){var st=n[ot];if(!(st&a)){var at=d[ot],lt=st&i,ut=st===z;it&&at===it._level?(it._end=ot,it._endsWithIsolInit=lt):rt.push(it={_start:ot,_end:ot,_level:at,_startsWithPDI:ut,_endsWithIsolInit:lt})}}for(var ct=[],ht=0;ht<rt.length;ht++){var dt=rt[ht];if(!dt._startsWithPDI||dt._startsWithPDI&&!p.has(dt._start)){for(var pt=[it=dt],ft=void 0;it&&it._endsWithIsolInit&&null!=(ft=p.get(it._end));)for(var mt=ht+1;mt<rt.length;mt++)if(rt[mt]._start===ft){pt.push(it=rt[mt]);break}for(var vt=[],gt=0;gt<pt.length;gt++)for(var _t=pt[gt],bt=_t._start;bt<=_t._end;bt++)vt.push(bt);for(var yt=d[vt[0]],xt=m.level,wt=vt[0]-1;wt>=0;wt--)if(!(n[wt]&a)){xt=d[wt];break}var St=vt[vt.length-1],Mt=d[St],Tt=m.level;if(!(n[St]&i))for(var Et=St+1;Et<=m.end;Et++)if(!(n[Et]&a)){Tt=d[Et];break}ct.push({_seqIndices:vt,_sosType:Math.max(xt,yt)%2?x:y,_eosType:Math.max(Tt,Mt)%2?x:y})}}for(var At=0;At<ct.length;At++){var Ct=ct[At],Pt=Ct._seqIndices,Rt=Ct._sosType,Lt=Ct._eosType;if(u.get(L))for(var kt=0;kt<Pt.length;kt++){var Ot=Pt[kt];if(n[Ot]&L){for(var Dt=Rt,It=kt-1;It>=0;It--)if(!(n[Pt[It]]&a)){Dt=n[Pt[It]];break}h(Ot,Dt&(i|z)?P:Dt)}}if(u.get(w))for(var Ut=0;Ut<Pt.length;Ut++){var Ft=Pt[Ut];if(n[Ft]&w)for(var Nt=Ut-1;Nt>=-1;Nt--){var Bt=-1===Nt?Rt:n[Pt[Nt]];if(Bt&o){Bt===k&&h(Ft,T);break}}}if(u.get(k))for(var Vt=0;Vt<Pt.length;Vt++){var zt=Pt[Vt];n[zt]&k&&h(zt,x)}if(u.get(S)||u.get(E))for(var Gt=1;Gt<Pt.length-1;Gt++){var Ht=Pt[Gt];if(n[Ht]&(S|E)){for(var jt=0,Wt=0,Kt=Gt-1;Kt>=0&&(jt=n[Pt[Kt]])&a;Kt--);for(var qt=Gt+1;qt<Pt.length&&(Wt=n[Pt[qt]])&a;qt++);jt===Wt&&(n[Ht]===S?jt===w:jt&(w|T))&&h(Ht,jt)}}if(u.get(w))for(var Xt=0;Xt<Pt.length;Xt++){var Yt=Pt[Xt];if(n[Yt]&w){for(var $t=Xt-1;$t>=0&&n[Pt[$t]]&(M|a);$t--)h(Pt[$t],w);for(var Zt=Xt+1;Zt<Pt.length&&n[Pt[Zt]]&(M|a);Zt++)h(Pt[Zt],w)}}if(u.get(M)||u.get(S)||u.get(E))for(var Jt=0;Jt<Pt.length;Jt++){var Qt=Pt[Jt];if(n[Qt]&(M|S|E)){h(Qt,P);for(var te=Jt-1;te>=0&&n[Pt[te]]&a;te--)h(Pt[te],P);for(var ee=Jt+1;ee<Pt.length&&n[Pt[ee]]&a;ee++)h(Pt[ee],P)}}if(u.get(w))for(var ne=0,re=Rt;ne<Pt.length;ne++){var ie=Pt[ne],oe=n[ie];oe&w?re===y&&h(ie,y):oe&o&&(re=oe)}if(u.get(s)){for(var se=x|w|T,ae=se|y,le=[],ue=[],ce=0;ce<Pt.length;ce++)if(n[Pt[ce]]&s){var he=t[Pt[ce]],de=void 0;if(null!==v(he)){if(!(ue.length<63))break;ue.push({char:he,seqIndex:ce})}else if(null!==(de=g(he)))for(var pe=ue.length-1;pe>=0;pe--){var fe=ue[pe].char;if(fe===de||fe===g(_(he))||v(_(fe))===he){le.push([ue[pe].seqIndex,ce]),ue.length=pe;break}}}le.sort(function(t,e){return t[0]-e[0]});for(var me=0;me<le.length;me++){for(var ve=le[me],ge=ve[0],_e=ve[1],be=!1,ye=0,xe=ge+1;xe<_e;xe++){var we=Pt[xe];if(n[we]&ae){be=!0;var Se=n[we]&se?x:y;if(Se===He(we)){ye=Se;break}}}if(be&&!ye){ye=Rt;for(var Me=ge-1;Me>=0;Me--){var Te=Pt[Me];if(n[Te]&ae){var Ee=n[Te]&se?x:y;ye=Ee!==He(Te)?Ee:He(Te);break}}}if(ye){if(n[Pt[ge]]=n[Pt[_e]]=ye,ye!==He(Pt[ge]))for(var Ae=ge+1;Ae<Pt.length;Ae++)if(!(n[Pt[Ae]]&a)){c(t[Pt[Ae]])&L&&(n[Pt[Ae]]=ye);break}if(ye!==He(Pt[_e]))for(var Ce=_e+1;Ce<Pt.length;Ce++)if(!(n[Pt[Ce]]&a)){c(t[Pt[Ce]])&L&&(n[Pt[Ce]]=ye);break}}}for(var Pe=0;Pe<Pt.length;Pe++)if(n[Pt[Pe]]&s){for(var Re=Pe,Le=Pe,ke=Rt,Oe=Pe-1;Oe>=0;Oe--){if(!(n[Pt[Oe]]&a)){ke=n[Pt[Oe]]&se?x:y;break}Re=Oe}for(var De=Lt,Ie=Pe+1;Ie<Pt.length;Ie++){if(!(n[Pt[Ie]]&(s|a))){De=n[Pt[Ie]]&se?x:y;break}Le=Ie}for(var Ue=Re;Ue<=Le;Ue++)n[Pt[Ue]]=ke===De?ke:He(Pt[Ue]);Pe=Le}}}for(var Fe=m.start;Fe<=m.end;Fe++){var Ne=d[Fe],Be=n[Fe];if(1&Ne?Be&(y|w|T)&&d[Fe]++:Be&x?d[Fe]++:Be&(T|w)&&(d[Fe]+=2),Be&a&&(d[Fe]=0===Fe?m.level:d[Fe-1]),Fe===m.end||c(t[Fe])&(C|A))for(var Ve=Fe;Ve>=0&&c(t[Ve])&l;Ve--)d[Ve]=m.level}}return{levels:d,paragraphs:f};function ze(e,r){for(var o=e;o<t.length;o++){var s=n[o];if(s&(x|k))return 1;if(s&(A|y)||r&&s===z)return 0;if(s&i){var a=Ge(o);o=-1===a?t.length:a}}return 0}function Ge(e){for(var r=1,o=e+1;o<t.length;o++){var s=n[o];if(s&A)break;if(s&z){if(0==--r)return o}else s&i&&r++}return-1}function He(t){return 1&d[t]?x:y}},t.getMirroredCharacter=G,t.getMirroredCharactersMap=function(t,e,n,r){var i=t.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,s=n;s<=r;s++)if(1&e[s]){var a=G(t[s]);null!==a&&o.set(s,a)}return o},t.getReorderSegments=H,t.getReorderedIndices=j,t.getReorderedString=function(t,e,n,r){var i=j(t,e,n,r),o=[].concat(t);return i.forEach(function(n,r){o[r]=(1&e.levels[n]?G(t[n]):null)||t[n]}),o.join("")},t.openingToClosingBracket=v,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),Z=m({name:"Typesetter",dependencies:[$,_],init:(t,e)=>function(n){const r=new e;return t.typeset(n,r.resolve),r},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),J=(()=>{const t={},e="aTroikaGlyphIndex";class n extends r.L5s{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new r.aLr,this.boundingBox=new r.ZzF}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const e=this.getIndex().count;this.setDrawRange(t===r._Li?e/2:0,t===r.ehD?e:e/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let n=function(e){let n=t[e];if(!n){const i=new r.BKK(1,1,e,e),o=i.clone(),s=i.attributes,a=o.attributes,l=new r.u9r,u=s.uv.count;for(let t=0;t<u;t++)a.position.array[3*t]*=-1,a.normal.array[3*t+2]*=-1;["position","normal","uv"].forEach(t=>{l.setAttribute(t,new r.a$l([...s[t].array,...a[t].array],s[t].itemSize))}),l.setIndex([...i.index.array,...o.index.array.map(t=>t+u)]),l.translate(.5,.5,0),n=t[e]=l}return n}(e);["position","normal","uv"].forEach(t=>{this.attributes[t]=n.attributes[t].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,n,r,s,a){i(this,"aTroikaGlyphBounds",t,4),i(this,e,n,1),i(this,"aTroikaGlyphColor",a,3),this._blockBounds=r,this._chunkedBounds=s,o(this,n.length),this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:e,boundingBox:n}=this;if(e){const{PI:r,floor:i,min:o,max:s,sin:a,cos:l}=Math,u=r/2,c=2*r,h=Math.abs(e),d=t[0]/h,p=t[2]/h,f=i((d+u)/c)!==i((p+u)/c)?-h:o(a(d)*h,a(p)*h),m=i((d-u)/c)!==i((p-u)/c)?h:s(a(d)*h,a(p)*h),v=i((d+r)/c)!==i((p+r)/c)?2*h:s(h-l(d)*h,h-l(p)*h);n.min.set(f,t[1],e<0?-v:0),n.max.set(m,t[3],e<0?0:v)}else n.min.set(t[0],t[1],0),n.max.set(t[2],t[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let n=this.getAttribute(e).count,r=this._chunkedBounds;if(r)for(let e=r.length;e--;){n=r[e].end;let i=r[e].rect;if(i[1]<t.w&&i[3]>t.y&&i[0]<t.z&&i[2]>t.x)break}o(this,n)}}function i(t,e,n,i){const o=t.getAttribute(e);n?o&&o.array.length===n.length?(o.array.set(n),o.needsUpdate=!0):(t.setAttribute(e,new r.lb7(n,i)),delete t._maxInstanceCount,t.dispose()):o&&t.deleteAttribute(e)}function o(t,e){t[t.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=e}return n.prototype.setAttribute||(n.prototype.setAttribute=function(t,e){return this.attributes[t]=e,this}),n})(),Q=(()=>{const t=new r.vBJ({color:16777215,side:r.ehD,transparent:!0}),e=8421504,n=new r.yGw,i=new r.Pa4,o=new r.Pa4,s=[],a=new r.Pa4,l="+x+y";function u(t){return Array.isArray(t)?t[0]:t}let c=()=>{const e=new r.Kj0(new r.BKK(1,1),t);return c=()=>e,e},h=()=>{const e=new r.Kj0(new r.BKK(1,1,32,1),t);return h=()=>e,e};const d={type:"syncstart"},p={type:"synccomplete"},f=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],m=f.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class v extends r.Kj0{constructor(){super(new J,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=l,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(d),W({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(t=>t&&t())})),this.dispatchEvent(p),t&&t()})))}onBeforeRender(t,e,n,i,o,s){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=r.Wl3}onAfterRender(t,e,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=t.clone());if(e&&e.baseMaterial===n||(e=this._derivedMaterial=function(t){const e=C(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new r.FM8},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new r.Ltg(0,0,0,0)},uTroikaClipRect:{value:new r.Ltg(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new r.FM8},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new r.Ilk},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new r.Vkp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n float angle = position.x / rad;\n position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n normal.xz = vec2(sin(angle), cos(angle));\n}\n \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n // Inverse of exponential encoding in webgl-sdf-generator\n \n float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n \n #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n #else\n return vTroikaGlyphDimensions.x / 64.0;\n #endif\n}\n\nfloat troikaGetFragDistValue() {\n vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n // Extrapolate distance when outside bounds:\n distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n \n\n return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n float alpha = step(-distanceOffset, -distance);\n #else\n\n float alpha = smoothstep(\n distanceOffset + aaDist,\n distanceOffset - aaDist,\n distance\n );\n #endif\n\n return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n -uTroikaStrokeWidth - aaDist,\n -uTroikaStrokeWidth + aaDist,\n fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n discard;\n}\n",customRewriter({vertexShader:t,fragmentShader:e}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(e)&&(e=e.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(t)||(t=t.replace(y,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:e}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}(n),n.addEventListener("dispose",function t(){n.removeEventListener("dispose",t),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",function n(){e.removeEventListener("dispose",n),t.dispose()})),[t,e]}return e}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return u(this.material).getDepthMaterial()}get customDistanceMaterial(){return u(this.material).getDistanceMaterial()}_prepareForRender(t){const s=t.isTextOutlineMaterial,u=t.uniforms,c=this.textRenderInfo;if(c){const{sdfTexture:t,blockBounds:n}=c;u.uTroikaSDFTexture.value=t,u.uTroikaSDFTextureSize.value.set(t.image.width,t.image.height),u.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,u.uTroikaSDFExponent.value=c.sdfExponent,u.uTroikaTotalBounds.value.fromArray(n),u.uTroikaUseGlyphColors.value=!s&&!!c.glyphColors;let r,i,o,a=0,l=0,h=0,d=0,p=0;if(s){let{outlineWidth:t,outlineOffsetX:e,outlineOffsetY:n,outlineBlur:i,outlineOpacity:o}=this;a=this._parsePercent(t)||0,l=Math.max(0,this._parsePercent(i)||0),r=o,d=this._parsePercent(e)||0,p=this._parsePercent(n)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(o=this.strokeColor,u.uTroikaStrokeColor.value.set(null==o?e:o),i=this.strokeOpacity,null==i&&(i=1)),r=this.fillOpacity;u.uTroikaDistanceOffset.value=a,u.uTroikaPositionOffset.value.set(d,p),u.uTroikaBlurRadius.value=l,u.uTroikaStrokeWidth.value=h,u.uTroikaStrokeOpacity.value=i,u.uTroikaFillOpacity.value=null==r?1:r,u.uTroikaCurveRadius.value=this.curveRadius||0;let f=this.clipRect;if(f&&Array.isArray(f)&&4===f.length)u.uTroikaClipRect.value.fromArray(f);else{const t=100*(this.fontSize||.1);u.uTroikaClipRect.value.set(n[0]-t,n[1]-t,n[2]+t,n[3]+t)}this.geometry.applyClipRect(u.uTroikaClipRect.value)}u.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const h=s?this.outlineColor||0:this.color;if(null==h)delete t.color;else{const e=t.hasOwnProperty("color")?t.color:t.color=new r.Ilk;h===e._input&&"object"!=typeof h||e.set(e._input=h)}let d=this.orientation||l;if(d!==t._orientation){let e=u.uTroikaOrient.value;d=d.replace(/[^-+xyz]/g,"");let r=d!==l&&d.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,t,s,l,u]=r;i.set(0,0,0)[s]="-"===t?1:-1,o.set(0,0,0)[u]="-"===l?-1:1,n.lookAt(a,i.cross(o),o),e.setFromMatrix4(n)}else e.identity();t._orientation=d}}_parsePercent(t){if("string"==typeof t){let e=t.match(/^(-?[\d.]+)%$/),n=e?parseFloat(e[1]):NaN;t=(isNaN(n)?0:n/100)*this.fontSize}return t}localPositionToTextCoords(t,e=new r.FM8){e.copy(t);const n=this.curveRadius;return n&&(e.x=Math.atan2(t.x,Math.abs(n)-Math.abs(t.z))*Math.abs(n)),e}worldPositionToTextCoords(t,e=new r.FM8){return i.copy(t),this.localPositionToTextCoords(this.worldToLocal(i),e)}raycast(t,e){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?h():c(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let t=0;t<u.count;t++){let e=i[0]+u.getX(t)*(i[2]-i[0]);const n=i[1]+u.getY(t)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(e/r)*r,e=Math.sin(e/r)*r),l.setXYZ(t,e,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,s.length=0,o.raycast(t,s);for(let t=0;t<s.length;t++)s[t].object=this,e.push(s[t])}}copy(t){const e=this.geometry;return super.copy(t),this.geometry=e,m.forEach(e=>{this[e]=t[e]}),this}clone(){return(new this.constructor).copy(this)}}f.forEach(t=>{const e="_private_"+t;Object.defineProperty(v.prototype,t,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});let g=!1;return Object.defineProperty(v.prototype,"anchor",{get(){return this._deprecated_anchor},set(t){this._deprecated_anchor=t,g||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),g=!0),Array.isArray(t)?(this.anchorX=100*(+t[0]||0)+"%",this.anchorY=100*(+t[1]||0)+"%"):this.anchorX=this.anchorY=0}}),v})();new WeakMap,new WeakMap},670:function(t,e){!function(t){"use strict";const e="tp";function n(t,e){return Object.keys(e).reduce((n,r)=>{if(void 0===n)return;const i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0},{})}function r(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function i(t){return{custom:e=>r(e)(t),boolean:r(t=>"boolean"==typeof t?t:void 0)(t),number:r(t=>"number"==typeof t?t:void 0)(t),string:r(t=>"string"==typeof t?t:void 0)(t),function:r(t=>"function"==typeof t?t:void 0)(t),constant:e=>r(t=>t===e?e:void 0)(t),raw:r(t=>t)(t),object:e=>r(t=>{if(function(t){return null!==t&&"object"==typeof t}(t))return n(t,e)})(t),array:e=>r(t=>{if(Array.isArray(t))return function(t,e){return t.reduce((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0},[])}(t,e)})(t)}}const o={optional:i(!0),required:i(!1)};function s(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())})}function a(t){return s(this,void 0,void 0,function*(){const e=new Image;return e.crossOrigin="anonymous",new Promise(n=>{e.src=t,e.onload=()=>{n(e)}})})}function l(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);const n=new Image;return new Promise(t=>{e.toBlob(e=>{n.src=URL.createObjectURL(e),n.onload=()=>{t(n)}})})}const u=function(t){return(n,r)=>[e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}("img");class c{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(u()),e.viewProps.bindClassModifiers(this.element),this.input=t.createElement("input"),this.input.classList.add(u("input")),this.input.setAttribute("type","file"),this.input.setAttribute("accept",e.extensions.join(",")),this.element.appendChild(this.input),this.image_=t.createElement("img"),this.image_.classList.add(u("image")),this.image_.classList.add(u(`image_${e.imageFit}`)),this.element.classList.add(u("area_root")),this.element.appendChild(this.image_)}changeImage(t){this.image_.src=t}changeDraggingState(t){const e=this.element;t?null==e||e.classList.add(u("area_dragging")):null==e||e.classList.remove(u("area_dragging"))}}class h{constructor(t,e){this.placeholderImage=null,this.value=e.value,this.viewProps=e.viewProps,this.view=new c(t,{viewProps:this.viewProps,extensions:e.extensions,imageFit:e.imageFit}),this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.viewProps.handleDispose(()=>{this.view.input.removeEventListener("change",this.onFile),this.view.input.removeEventListener("drop",this.onDrop),this.view.input.removeEventListener("dragover",this.onDragOver),this.view.input.removeEventListener("dragleave",this.onDragLeave)}),this.value.emitter.on("change",this.handleValueChange.bind(this)),this.handleValueChange()}onFile(t){const e=(null==t?void 0:t.target).files;if(!e||!e.length)return;const n=e[0],r=URL.createObjectURL(n);this.setValue(r),this.updateImage(r)}onDrop(t){return s(this,void 0,void 0,function*(){t.preventDefault();try{const{dataTransfer:e}=t,n=null==e?void 0:e.files[0];if(n){const t=URL.createObjectURL(n);this.updateImage(t),this.setValue(t)}else{const t=null==e?void 0:e.getData("url");if(!t)throw new Error("No url");a(t).then(t=>s(this,void 0,void 0,function*(){const e=yield l(t);this.updateImage(e.src),this.setValue(e)}))}}catch(t){console.error("Could not parse the dropped image",t)}finally{this.view.changeDraggingState(!1)}})}onDragOver(t){t.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}handleImage(t){return s(this,void 0,void 0,function*(){if(t instanceof HTMLImageElement)l(t).then(t=>{this.updateImage(t.src)});else if("string"==typeof t){let e="";try{if("placeholder"===t)throw new Error("placeholder");new URL(t),e=(yield a(t)).src}catch(t){e=(yield this.handlePlaceholderImage()).src}finally{this.updateImage(e),this.setValue(e)}}})}updateImage(t){this.view.changeImage(t)}setValue(t){return s(this,void 0,void 0,function*(){t instanceof HTMLImageElement?this.value.setRawValue(t):t?this.value.setRawValue(yield a(t)):this.value.setRawValue(yield this.handlePlaceholderImage())})}handleValueChange(){this.handleImage(this.value.rawValue)}handlePlaceholderImage(){return s(this,void 0,void 0,function*(){return this.placeholderImage||(this.placeholderImage=yield function(){const t=document.createElement("canvas");t.width=128,t.height=64;const e=t.getContext("2d");return e.fillStyle="#222",e.fillRect(0,0,t.width,t.height),e.fillStyle="#ddd",e.font="monospaced",e.textAlign="center",e.textBaseline="middle",e.fillText("No image",.5*t.width,.5*t.height),new Promise(e=>{t.toBlob(t=>{const n=new Image;n.src=URL.createObjectURL(t),n.onload=()=>{e(n)}})})}()),this.placeholderImage})}}const d=[".jpg",".png",".gif"],p={id:"input-image",type:"input",css:".tp-imgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-imgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-imgv:hover{background-color:var(--in-bg-h)}.tp-imgv:focus{background-color:var(--in-bg-f)}.tp-imgv:active{background-color:var(--in-bg-a)}.tp-imgv:disabled{opacity:0.5}:root{--tp-plugin-image-dragging-color: hsla(230, 100%, 66%, 1.00)}.tp-imgv{cursor:pointer;display:grid;height:calc(var(--bld-us) * 3);overflow:hidden;position:relative}.tp-imgv.tp-v-disabled{opacity:0.5}.tp-imgv_input{width:100%;height:100%;opacity:0}.tp-imgv_image{width:100%;height:100%;position:absolute;pointer-events:none;border:0}.tp-imgv_image_contain{-o-object-fit:contain;object-fit:contain}.tp-imgv_image_cover{-o-object-fit:cover;object-fit:cover}.tp-imgv_area_root{transition:opacity 0.16s ease-in-out}.tp-imgv_area_dragging{border:2px dashed var(--tp-plugin-image-dragging-color);border-radius:6px;opacity:0.6}",accept(t,e){if(!(t instanceof HTMLImageElement||"string"==typeof t))return null;const n=o,r=function(t,e){const n=o.required.object(e)(t);return n.succeeded?n.value:void 0}(e,{view:n.required.constant("input-image"),acceptUrl:n.optional.boolean,imageFit:n.optional.custom(t=>"contain"===t||"cover"===t?t:void 0),extensions:n.optional.array(n.required.string)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>t=>t instanceof HTMLImageElement?""===t.src?"placeholder":t.src:"string"==typeof t?t:"placeholder",writer:t=>(t,e)=>{t.write(e)}},controller(t){var e,n;return new h(t.document,{value:t.value,imageFit:null!==(e=t.params.imageFit)&&void 0!==e?e:"cover",viewProps:t.viewProps,extensions:null!==(n=t.params.extensions)&&void 0!==n?n:d})}};t.plugin=p,Object.defineProperty(t,"__esModule",{value:!0})}(e)},6498:function(t,e){!function(t){"use strict";class e{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class r extends n{constructor(t,e,n,r){super(t),this.value=e,this.presetKey=n,this.last=null==r||r}}class i extends n{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class o extends n{constructor(t,e){super(t),this.expanded=e}}function s(t){return null==t}function a(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const l={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class u{constructor(t){var e;this.message=null!==(e=l[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new u({type:"alreadydisposed"})}static notBindable(){return new u({type:"notbindable"})}static propertyNotFound(t){return new u({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new u({type:"shouldneverhappen"})}}class c{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!c.isBindable(n))throw u.notBindable();if(!(t in n))throw u.propertyNotFound(t);n[t]=e}}class h extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const r=e.bind(this);return this.controller_.valueController.emitter.on(t,()=>{r(new n(this))}),this}}class d{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter(t=>t.handler!==e)),this}emit(t,e){const n=this.observers_[t];n&&n.forEach(t=>{t.handler(e)})}}const p="tp";function f(t){return(e,n)=>[p,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function m(t){return t.rawValue}function v(t,e){t.emitter.on("change",function(t,e){return n=>e(t(n))}(m,e)),e(t.rawValue)}function g(t,e,n){v(t.value(e),n)}function _(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function b(t,e){v(t,t=>{e.textContent=null!=t?t:""})}const y=f("btn");class x{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(y()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(y("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(y("t")),b(e.props.value("title"),r),this.buttonElement.appendChild(r)}}class w{constructor(t,e){this.emitter=new d,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new x(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class S{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new d,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}class M{constructor(t){this.emitter=new d,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function T(t,e){const n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new S(t,e):new M(t)}class E{constructor(t){this.emitter=new d,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(t){return Object.keys(t).reduce((e,n)=>Object.assign(e,{[n]:T(t[n])}),{})}static fromObject(t){const e=this.createCore(t);return new E(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function A(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function C(t){return{custom:e=>A(e)(t),boolean:A(t=>"boolean"==typeof t?t:void 0)(t),number:A(t=>"number"==typeof t?t:void 0)(t),string:A(t=>"string"==typeof t?t:void 0)(t),function:A(t=>"function"==typeof t?t:void 0)(t),constant:e=>A(t=>t===e?e:void 0)(t),raw:A(t=>t)(t),object:e=>A(t=>{if(function(t){return null!==t&&"object"==typeof t}(t))return function(t,e){return Object.keys(e).reduce((n,r)=>{if(void 0===n)return;const i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0},{})}(t,e)})(t),array:e=>A(t=>{if(Array.isArray(t))return function(t,e){return t.reduce((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0},[])}(t,e)})(t)}}const P={optional:C(!0),required:C(!1)};function R(t,e){const n=P.required.object(e)(t);return n.succeeded?n.value:void 0}const L=f(""),k={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class O{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(t=>{e.classList.remove(L(void 0,k[t]))}),this.blade.get("positions").forEach(t=>{e.classList.add(L(void 0,k[t]))})}),this.viewProps.handleDispose(()=>{!function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(e)})}get parent(){return this.parent_}}const D="http://www.w3.org/2000/svg";function I(t){t.offsetHeight}function U(t){return void 0!==t.ontouchstart}function F(){return new Function("return this")()}function N(t){return"document"in F()?t.getContext("2d"):null}const B={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function V(t,e){const n=t.createElementNS(D,"svg");return n.innerHTML=B[e],n}function z(t,e,n){t.insertBefore(e,t.children[n])}function G(t){t.parentElement&&t.parentElement.removeChild(t)}function H(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function j(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const W=f("lbl");class K{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(W()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(W("l")),g(e.props,"label",e=>{s(e)?this.element.classList.add(W(void 0,"nol")):(this.element.classList.remove(W(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(n),n.appendChild(function(t,e){const n=t.createDocumentFragment();return e.split("\n").map(e=>t.createTextNode(e)).forEach((e,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)}),n}(t,e)))}),this.element.appendChild(n),this.labelElement=n;const r=t.createElement("div");r.classList.add(W("v")),this.element.appendChild(r),this.valueElement=r}}class q extends O{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new K(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const X={id:"button",type:"blade",accept(t){const e=P,n=R(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:t=>new q(t.document,{blade:t.blade,props:E.fromObject({label:t.params.label}),valueController:new w(t.document,{props:E.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof q&&t.controller.valueController instanceof w?new h(t.controller):null};class Y extends O{constructor(t){super(t),this.value=t.value}}function $(){return new E({positions:T([],{equals:a})})}class Z extends E{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=E.createCore(e);return new Z(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!s(t)?`${t}px`:"auto"}bindExpandedClass(t,e){g(this,"expanded",()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)})}}function J(t,e){e.style.height=t.styleHeight}function Q(t,e){t.value("expanded").emitter.on("beforechange",()=>{t.set("completed",!1),s(t.get("expandedHeight"))&&t.set("expandedHeight",function(t,e){let n=0;return function(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),I(e),n=e.clientHeight,t.set("temporaryExpanded",null),I(e)}),n}(t,e)),t.set("shouldFixHeight",!0),I(e)}),t.emitter.on("change",()=>{J(t,e)}),J(t,e),e.addEventListener("transitionend",e=>{"height"===e.propertyName&&(t.set("shouldFixHeight",!1),t.set("expandedHeight",null),t.set("completed",!0))})}class tt extends e{constructor(t,e){super(t),this.rackApi_=e}}class et{constructor(t){this.emitter=new d,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw u.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const r=this.extract_(t);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(t=>{this.cache_.add(t)})),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class nt extends e{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new d,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new r(this,e,this.controller_.binding.target.presetKey,t.options.last)})}}class rt extends q{constructor(t,e){super(t,e),this.binding=e.binding}}class it extends e{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new d,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new i(this,e,this.controller_.binding.target.presetKey)})}}class ot extends q{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function st(t){return t instanceof ut?t.apiSet_:t instanceof tt?t.rackApi_.apiSet_:null}function at(t,e){const n=t.find(t=>t.controller_===e);if(!n)throw u.shouldNeverHappen();return n}function lt(t,e,n){if(!c.isBindable(t))throw u.notBindable();return new c(t,e,n)}class ut extends e{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new d,this.apiSet_=new et(st),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach(t=>{this.setUpApi_(t)})}get children(){return this.controller_.rack.children.map(t=>at(this.apiSet_,t))}addInput(t,e,n){const r=n||{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(i,lt(t,e,r.presetKey),r),s=new nt(o);return this.add(s,r.index)}addMonitor(t,e,n){const r=n||{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(i,lt(t,e),r),s=new it(o);return this.add(s,r.index)}addFolder(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}addButton(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}addSeparator(t){return function(t,e){const n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}(this,t)}addTab(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find(e=>e.controller_===t.controller_);return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),r=this.pool_.createBladeApi(n);return this.add(r,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}setUpApi_(t){this.apiSet_.find(e=>e.controller_===t)||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=at(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof rt){const n=at(this.apiSet_,e),i=e.binding;this.emitter_.emit("change",{event:new r(n,i.target.read(),i.target.presetKey,t.options.last)})}else if(e instanceof Y){const n=at(this.apiSet_,e);this.emitter_.emit("change",{event:new r(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof ot))throw u.shouldNeverHappen();const e=at(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new i(e,n.target.read(),n.target.presetKey)})}}class ct extends tt{constructor(t,e){super(t,new ut(t.rackController,e)),this.emitter_=new d,this.controller_.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",{event:new o(this,t.sender.rawValue)})}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",{event:t})}),this.rackApi_.on("update",t=>{this.emitter_.emit("update",{event:t})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class ht extends O{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class dt{constructor(t,e){const n=f(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function pt(t){return t instanceof vt?t.rack:t instanceof ht?t.rackController.rack:null}function ft(t){const e=pt(t);return e?e.bcSet_:null}class mt{constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new d,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new et(ft),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(e=>e instanceof t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof rt)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof ot)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof Y)n.value.emitter.on("change",this.onChildValueChange_);else{const t=pt(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof rt)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof ot)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof Y)n.value.emitter.off("change",this.onChildValueChange_);else{const t=pt(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter(t=>!t.viewProps.get("hidden")),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach(t=>{const r=[];t===e&&(r.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||r.push("veryfirst")),t===n&&(r.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||r.push("verylast")),t.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildInputChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof rt&&r.binding===e)return r}return null}(this.find(rt),t.sender);if(!e)throw u.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof ot&&r.binding===e)return r}return null}(this.find(ot),t.sender);if(!e)throw u.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof Y&&r.value===e)return r}return null}(this.find(Y),t.sender);if(!e)throw u.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class vt extends O{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new dt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new mt(e.root?void 0:e.blade);n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(t){t.isRoot&&z(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&G(t.bladeController.view.element)}}const gt=f("cnt");class _t{constructor(t,e){this.className_=f(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),gt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),g(this.foldable_,"completed",_(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),g(e.props,"title",t=>{s(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(this.className_("t")),b(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const i=t.createElement("div");i.classList.add(this.className_("m")),this.buttonElement.appendChild(i);const o=e.containerElement;o.classList.add(this.className_("c")),this.element.appendChild(o),this.containerElement=o}}class bt extends ht{constructor(t,e){var n;const r=Z.create(null===(n=e.expanded)||void 0===n||n),i=new vt(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:i,view:new _t(t,{containerElement:i.view.element,foldable:r,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=r,Q(this.foldable,this.view.containerElement),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const yt={id:"folder",type:"blade",accept(t){const e=P,n=R(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:t=>new bt(t.document,{blade:t.blade,expanded:t.params.expanded,props:E.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof bt?new ct(t.controller,t.pool):null};class xt extends Y{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new K(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class wt extends e{}const St=f("spr");class Mt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(St()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(St("r")),this.element.appendChild(n)}}class Tt extends O{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Mt(t,{viewProps:e.viewProps})}))}}const Et={id:"separator",type:"blade",accept(t){const e=R(t,{view:P.required.constant("separator")});return e?{params:e}:null},controller:t=>new Tt(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof Tt?new wt(t.controller):null},At=f("");function Ct(t,e){return _(t,At(void 0,e))}class Pt extends E{constructor(t){super(t)}static create(t){var e,n;const r=null!=t?t:{},i={disabled:null!==(e=r.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=r.hidden)&&void 0!==n&&n},o=E.createCore(i);return new Pt(o)}bindClassModifiers(t){g(this,"disabled",Ct(t,"disabled")),g(this,"hidden",Ct(t,"hidden"))}bindDisabled(t){g(this,"disabled",e=>{t.disabled=e})}bindTabIndex(t){g(this,"disabled",e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}}const Rt=f("tbi");class Lt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Rt()),e.viewProps.bindClassModifiers(this.element),g(e.props,"selected",t=>{t?this.element.classList.add(Rt(void 0,"sel")):this.element.classList.remove(Rt(void 0,"sel"))});const n=t.createElement("button");n.classList.add(Rt("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(Rt("t")),b(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class kt{constructor(t,e){this.emitter=new d,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Lt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Ot{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new kt(t,{props:e.itemProps,viewProps:Pt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new vt(t,{blade:$(),viewProps:Pt.create()}),this.props=e.props,g(this.props,"selected",t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Dt{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class It extends tt{constructor(t,e){super(t,new ut(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new d,this.pageApiMap_=new Map,this.rackApi_.on("change",t=>{this.emitter_.emit("change",{event:t})}),this.rackApi_.on("update",t=>{this.emitter_.emit("update",{event:t})}),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(t=>{this.setUpPageApi_(t)})}get pages(){return this.controller_.pageSet.items.map(t=>{const e=this.pageApiMap_.get(t);if(!e)throw u.shouldNeverHappen();return e})}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new Ot(e,{itemProps:E.fromObject({selected:!1,title:t.title}),props:E.fromObject({selected:!1})});this.controller_.add(n,t.index);const r=this.pageApiMap_.get(n);if(!r)throw u.shouldNeverHappen();return r}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find(e=>e.controller_===t.contentController);if(!e)throw u.shouldNeverHappen();const n=new Dt(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw u.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const Ut=f("tab");class Ft{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ut(),gt()),e.viewProps.bindClassModifiers(this.element),v(e.empty,_(this.element,Ut(void 0,"nop")));const n=t.createElement("div");n.classList.add(Ut("i")),this.element.appendChild(n),this.itemsElement=n;const r=e.contentsElement;r.classList.add(Ut("c")),this.element.appendChild(r),this.contentsElement=r}}class Nt extends ht{constructor(t,e){const n=new vt(t,{blade:e.blade,viewProps:e.viewProps}),r=T(!0);super({blade:e.blade,rackController:n,view:new Ft(t,{contentsElement:n.view.element,empty:r,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new et(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=r,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;z(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;G(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex(t=>t.props.get("selected"));t<0?this.pageSet_.items.forEach((t,e)=>{t.props.set("selected",0===e)}):this.pageSet_.items.forEach((e,n)=>{e.props.set("selected",n===t)})}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex(e=>e.props.value("selected")===t.sender);this.pageSet_.items.forEach((t,n)=>{t.props.set("selected",n===e)})}else this.keepSelection_()}}const Bt={id:"tab",type:"blade",accept(t){const e=P,n=R(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new Nt(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new Ot(t.document,{itemProps:E.fromObject({selected:!1,title:n.title}),props:E.fromObject({selected:!1})});e.add(r)}),e},api:t=>t.controller instanceof Nt?new It(t.controller,t.pool):null};class Vt{constructor(){this.disabled=!1,this.emitter=new d}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class zt{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new d,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Gt{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((t,e)=>e.constrain(t),t)}}function Ht(t,e){if(t instanceof e)return t;if(t instanceof Gt){const n=t.constraints.reduce((t,n)=>t||(n instanceof e?n:null),null);if(n)return n}return null}class jt{constructor(t){this.options=t}constrain(t){const e=this.options;return 0===e.length||e.filter(e=>e.value===t).length>0?t:e[0].value}}class Wt{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return s(this.minValue)||(e=Math.max(e,this.minValue)),s(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class Kt{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const qt=f("lst");class Xt{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(qt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(qt("s")),g(this.props_,"options",e=>{H(n),e.forEach((e,r)=>{const i=t.createElement("option");i.dataset.index=String(r),i.textContent=e.text,i.value=String(e.value),n.appendChild(i)})}),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const r=t.createElement("div");r.classList.add(qt("m")),r.appendChild(V(t,"dropdown")),this.element.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Yt{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Xt(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget.selectedOptions.item(0);if(!e)return;const n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}const $t=f("pop");class Zt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add($t()),e.viewProps.bindClassModifiers(this.element),v(e.shows,_(this.element,$t(void 0,"v")))}}class Jt{constructor(t,e){this.shows=T(!1),this.viewProps=e.viewProps,this.view=new Zt(t,{shows:this.shows,viewProps:this.viewProps})}}const Qt=f("txt");class te{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Qt()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(Qt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ee{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new te(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);s(n)||(this.value.rawValue=n),this.view.refresh()}}function ne(t){return"false"!==t&&!!t}function re(t){return function(t){return String(t)}(t)}class ie{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const oe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class se{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=oe[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ae={"+":t=>t,"-":t=>-t,"~":t=>~t};class le{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=ae[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function ue(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(""!==i)return i}return""}}function ce(t,e){var n;const r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function he(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function de(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const r=function(t,e){const n=he(t,e);if(""!==n)return n;const r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";const i=he(t,e+=1);return""===i?"":r+i}(t,e);return""===r?"":n+r}function pe(t,e){const n=t.substr(e,1);if("0"===n)return n;const r=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=r.length,""===r?"":r+he(t,e)}const fe=ue([function(t,e){const n=pe(t,e);if(e+=n.length,""===n)return"";const r=t.substr(e,1);if(e+=r.length,"."!==r)return"";const i=he(t,e);return n+r+i+de(t,e+=i.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=he(t,e);return e+=r.length,""===r?"":n+r+de(t,e)},function(t,e){const n=pe(t,e);return e+=n.length,""===n?"":n+de(t,e)}]);const me=ue([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const r=function(t,e){var n;const r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const r=function(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const r=function(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r}]),ve=ue([me,fe]);function ge(t,e){return function(t,e){const n=ve(t,e);return e+=n.length,""===n?null:{evaluable:new ie(n),cursor:e}}(t,e)||function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const r=ye(t,e);if(!r)return null;e=r.cursor,e+=ce(t,e).length;const i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}(t,e)}function _e(t,e,n){n+=ce(e,n).length;const r=t.filter(t=>e.startsWith(t,n))[0];return r?(n+=r.length,{cursor:n+=ce(e,n).length,operator:r}):null}const be=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>function(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const i=_e(e,n,r);if(!i)break;r=i.cursor;const s=t(n,r);if(!s)return null;r=s.cursor,o=new se(i.operator,o,s.evaluable)}return o?{cursor:r,evaluable:o}:null}}(t,e),function t(e,n){const r=ge(e,n);if(r)return r;const i=e.substr(n,1);if(n+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const o=t(e,n);return o?{cursor:n=o.cursor,evaluable:new le(i,o.evaluable)}:null});function ye(t,e){return e+=ce(t,e).length,be(t,e)}function xe(t){var e;const n=function(t){const e=ye(t,0);return e?e.cursor+ce(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function we(t){if("number"==typeof t)return t;if("string"==typeof t){const e=xe(t);if(!s(e))return e}return 0}function Se(t){return String(t)}function Me(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const Te=Me(0);function Ee(t){return Te(t)+"%"}function Ae(t){return String(t)}function Ce(t){return t}function Pe(t,e){for(;t.length<e;)t.push(void 0)}function Re(t){const e=[];return Pe(e,t),T(e)}function Le(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function ke({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(t){i||(i=!0,t(),i=!1)}t.emitter.on("change",r=>{o(()=>{e.setRawValue(n(t,e),r.options)})}),e.emitter.on("change",i=>{o(()=>{t.setRawValue(r(t,e),i.options)}),o(()=>{e.setRawValue(n(t,e),i.options)})}),o(()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})})}function Oe(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function De(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function Ie(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Ue(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Fe(t,e){const n=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+r.left),y:t.pageY-((n&&n.scrollY||0)+r.top)}}class Ne{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new d,t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Fe(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Fe(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Fe(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Be(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function Ve(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ze(t,e,n){return Math.min(Math.max(t,e),n)}function Ge(t,e){return(t%e+e)%e}const He=f("txt");class je{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(He(),He(void 0,"num")),e.arrayPosition&&this.element.classList.add(He(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(He("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(He()),this.inputElement.classList.add(He("i"));const r=t.createElement("div");r.classList.add(He("k")),this.element.appendChild(r),this.knobElement=r;const i=t.createElementNS(D,"svg");i.classList.add(He("g")),this.knobElement.appendChild(i);const o=t.createElementNS(D,"path");o.classList.add(He("gb")),i.appendChild(o),this.guideBodyElem_=o;const s=t.createElementNS(D,"path");s.classList.add(He("gh")),i.appendChild(s),this.guideHeadElem_=s;const a=t.createElement("div");a.classList.add(f("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(He(void 0,"drg"));this.element.classList.add(He(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=ze(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class We{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=T(null),this.view=new je(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new Ne(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);s(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=Oe(this.baseStep_,De(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Oe(this.baseStep_,De(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ke=f("sld");class qe{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ke()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ke("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const r=t.createElement("div");r.classList.add(Ke("k")),this.trackElement.appendChild(r),this.knobElement=r,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=ze(Be(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class Xe{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new qe(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ne(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Be(ze(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Oe(this.baseStep_,Ie(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Oe(this.baseStep_,Ie(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ye=f("sldtxt");class $e{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ye());const n=t.createElement("div");n.classList.add(Ye("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Ye("t")),this.textView_=e.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class Ze{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Xe(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new We(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new $e(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Je(t,e){t.write(e)}function Qe(t){const e=P;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function tn(t){if("inline"===t||"popup"===t)return t}function en(t){const e=P;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function nn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function rn(t){return s(t)?null:new jt(nn(t))}function on(t){const e=t?Ht(t,jt):null;return e?e.options:null}function sn(t,e){const n=t&&Ht(t,Kt);return n?Ve(n.step):Math.max(Ve(e),2)}function an(t){const e=function(t){const e=t?Ht(t,Kt):null;return e?e.step:null}(t);return null!=e?e:1}function ln(t,e){var n;const r=t&&Ht(t,Kt),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}const un=f("ckb");class cn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(un()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(un("l")),this.element.appendChild(n);const r=t.createElement("input");r.classList.add(un("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,e.viewProps.bindDisabled(this.inputElement);const i=t.createElement("div");i.classList.add(un("w")),n.appendChild(i);const o=V(t,"check");i.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class hn{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new cn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked}}const dn={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=R(e,{options:P.optional.custom(Qe)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ne,constraint:t=>function(t){const e=[],n=rn(t.options);return n&&e.push(n),new Gt(e)}(t.params),writer:t=>Je},controller:t=>{var e;const n=t.document,r=t.value,i=t.constraint;return i&&Ht(i,jt)?new Yt(n,{props:E.fromObject({options:null!==(e=on(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new hn(n,{value:r,viewProps:t.viewProps})}},pn=f("col");class fn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pn()),e.foldable.bindExpandedClass(this.element,pn(void 0,"expanded")),g(e.foldable,"completed",_(this.element,pn(void 0,"cpl")));const n=t.createElement("div");n.classList.add(pn("h")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(pn("s")),n.appendChild(r),this.swatchElement=r;const i=t.createElement("div");if(i.classList.add(pn("t")),n.appendChild(i),this.textElement=i,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(pn("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function mn(t,e,n){const r=Ge(t,360),i=ze(e/100,0,1),o=ze(n/100,0,1),s=o*i,a=s*(1-Math.abs(r/60%2-1)),l=o-s;let u,c,h;return[u,c,h]=r>=0&&r<60?[s,a,0]:r>=60&&r<120?[a,s,0]:r>=120&&r<180?[0,s,a]:r>=180&&r<240?[0,a,s]:r>=240&&r<300?[a,0,s]:[s,0,a],[255*(u+l),255*(c+l),255*(h+l)]}function vn(t){return[t[0],t[1],t[2]]}function gn(t,e){return[t[0],t[1],t[2],e]}const _n={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==r?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){const r=(t%360+360)%360,i=ze(e/100,0,1),o=ze(n/100,0,1),s=(1-Math.abs(2*o-1))*i,a=s*(1-Math.abs(r/60%2-1)),l=o-s/2;let u,c,h;return[u,c,h]=r>=0&&r<60?[s,a,0]:r>=60&&r<120?[a,s,0]:r>=120&&r<180?[0,s,a]:r>=180&&r<240?[0,a,s]:r>=240&&r<300?[a,0,s]:[s,0,a],[255*(u+l),255*(c+l),255*(h+l)]}},hsv:{hsl:function(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,0!==r?e*n/r:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:mn},rgb:{hsl:function(t,e,n){const r=ze(t/255,0,1),i=ze(e/255,0,1),o=ze(n/255,0,1),s=Math.max(r,i,o),a=Math.min(r,i,o),l=s-a;let u=0,c=0;const h=(a+s)/2;return 0!==l&&(c=l/(1-Math.abs(s+a-1)),u=r===s?(i-o)/l:i===s?2+(o-r)/l:4+(r-i)/l,u=u/6+(u<0?1:0)),[360*u,100*c,100*h]},hsv:function(t,e,n){const r=ze(t/255,0,1),i=ze(e/255,0,1),o=ze(n/255,0,1),s=Math.max(r,i,o),a=s-Math.min(r,i,o);let l;return l=0===a?0:s===r?((i-o)/a%6+6)%6*60:s===i?60*((o-r)/a+2):60*((r-i)/a+4),[l,100*(0===s?0:a/s),100*s]},rgb:(t,e,n)=>[t,e,n]}};const bn={hsl:t=>{var e;return[Ge(t[0],360),ze(t[1],0,100),ze(t[2],0,100),ze(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[Ge(t[0],360),ze(t[1],0,100),ze(t[2],0,100),ze(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[ze(t[0],0,255),ze(t[1],0,255),ze(t[2],0,255),ze(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function yn(t,e){return"object"==typeof t&&!s(t)&&e in t&&"number"==typeof t[e]}class xn{constructor(t,e){this.mode_=e,this.comps_=bn[e](t)}static black(){return new xn([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new xn(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return yn(t,"r")&&yn(t,"g")&&yn(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&yn(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const n=t.comps_,r=e.comps_;for(let t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}get mode(){return this.mode_}getComponents(t){return gn(function(t,e,n){return _n[e][n](...t)}(vn(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const wn=f("colp");class Sn{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(wn());const n=t.createElement("div");n.classList.add(wn("hsv"));const r=t.createElement("div");r.classList.add(wn("sv")),this.svPaletteView_=e.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);const i=t.createElement("div");i.classList.add(wn("h")),this.hPaletteView_=e.hPaletteView,i.appendChild(this.hPaletteView_.element),n.appendChild(i),this.element.appendChild(n);const o=t.createElement("div");if(o.classList.add(wn("rgb")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(wn("a"));const r=t.createElement("div");r.classList.add(wn("ap")),r.appendChild(this.alphaViews_.palette.element),n.appendChild(r);const i=t.createElement("div");i.classList.add(wn("at")),i.appendChild(this.alphaViews_.text.element),n.appendChild(i),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(t=>t.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Mn(t){const e=P;return R(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(tn)})}function Tn(t){return t?.1:1}function En(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const An={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Cn(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return An[r](n)}const Pn={"func.rgb":t=>{const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[En(e[1],255),En(e[2],255),En(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new xn(n,"rgb")},"func.rgba":t=>{const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[En(e[1],255),En(e[2],255),En(e[3],255),En(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new xn(n,"rgb")},"func.hsl":t=>{const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Cn(e[1]),En(e[2],100),En(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new xn(n,"hsl")},"func.hsla":t=>{const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Cn(e[1]),En(e[2],100),En(e[3],100),En(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new xn(n,"hsl")},"hex.rgb":t=>{const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new xn([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new xn([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":t=>{const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new xn([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Be(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new xn([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Be(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Rn(t){return Object.keys(Pn).reduce((e,n)=>e||((0,Pn[n])(t)?n:null),null)}const Ln=t=>{const e=Rn(t);return e?Pn[e](t):null};function kn(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function On(t){if("string"==typeof t){const e=Ln(t);if(e)return e}return xn.black()}function Dn(t){const e=ze(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function In(t,e="#"){return`${e}${vn(t.getComponents("rgb")).map(Dn).join("")}`}function Un(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(Dn).join("")}`}function Fn(t){const e=Me(0);return`rgb(${vn(t.getComponents("rgb")).map(t=>e(t)).join(", ")})`}function Nn(t){const e=Me(2),n=Me(0);return`rgba(${t.getComponents("rgb").map((t,r)=>(3===r?e:n)(t)).join(", ")})`}const Bn={"func.hsl":function(t){const e=[Me(0),Ee,Ee];return`hsl(${vn(t.getComponents("hsl")).map((t,n)=>e[n](t)).join(", ")})`},"func.hsla":function(t){const e=[Me(0),Ee,Ee,Me(2)];return`hsla(${t.getComponents("hsl").map((t,n)=>e[n](t)).join(", ")})`},"func.rgb":Fn,"func.rgba":Nn,"hex.rgb":In,"hex.rgba":Un};function Vn(t){return Bn[t]}const zn=f("apl");class Gn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(zn()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(zn("b")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(zn("c")),n.appendChild(r),this.colorElem_=r;const i=t.createElement("div");i.classList.add(zn("m")),this.element.appendChild(i),this.markerElem_=i;const o=t.createElement("div");o.classList.add(zn("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new xn([e[0],e[1],e[2],0],"rgb"),r=new xn([e[0],e[1],e[2],255],"rgb"),i=["to right",Nn(n),Nn(r)];this.colorElem_.style.background=`linear-gradient(${i.join(",")})`,this.previewElem_.style.backgroundColor=Nn(t);const o=Be(e[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class Hn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Gn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ne(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,r=this.value.rawValue,[i,o,s]=r.getComponents("hsv");this.value.setRawValue(new xn([i,o,s,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Oe(Tn(!0),Ie(t));if(0===e)return;const n=this.value.rawValue,[r,i,o,s]=n.getComponents("hsv");this.value.setRawValue(new xn([r,i,o,s+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Oe(Tn(!0),Ie(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const jn=f("coltxt");class Wn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(jn());const n=t.createElement("div");n.classList.add(jn("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((e,n)=>{const r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e},t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(jn("ms")),n.appendChild(this.modeSelectElement);const r=t.createElement("div");r.classList.add(jn("mm")),r.appendChild(V(t,"dropdown")),n.appendChild(r),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(jn("w")),this.element.appendChild(i),this.textsElem_=i,this.textViews_=e.textViews,this.applyTextViews_(),v(e.colorMode,t=>{this.modeElem_.value=t})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){H(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach(e=>{const n=t.createElement("div");n.classList.add(jn("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)})}}const Kn=Me(0),qn={rgb:()=>new Wt({min:0,max:255}),hsl:t=>new Wt(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new Wt(0===t?{min:0,max:360}:{min:0,max:100})};function Xn(t,e,n){return new We(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:Tn(!1),parser:e.parser,props:E.fromObject({draggingScale:1,formatter:Kn}),value:T(0,{constraint:qn[e.colorMode](n)}),viewProps:e.viewProps})}class Yn{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=T(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Wn(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},n=[Xn(t,e,0),Xn(t,e,1),Xn(t,e,2)];return n.forEach((t,e)=>{ke({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(t,n)=>{const r=this.colorMode.rawValue,i=t.rawValue.getComponents(r);return i[e]=n.rawValue,new xn(gn(vn(i),i[3]),r)}})}),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const $n=f("hpl");class Zn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add($n()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add($n("c")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add($n("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Fn(new xn([e,100,100],"hsv"));const n=Be(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Jn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Zn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ne(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Be(t.point.x,0,t.bounds.width,0,360),r=this.value.rawValue,[,i,o,s]=r.getComponents("hsv");this.value.setRawValue(new xn([n,i,o,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Oe(Tn(!1),Ie(t));if(0===e)return;const n=this.value.rawValue,[r,i,o,s]=n.getComponents("hsv");this.value.setRawValue(new xn([r+e,i,o,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Oe(Tn(!1),Ie(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Qn=f("svp");class tr{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Qn()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(Qn("c")),this.element.appendChild(n),this.canvasElement=n;const r=t.createElement("div");r.classList.add(Qn("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=N(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,i=t.getImageData(0,0,n,r),o=i.data;for(let t=0;t<r;t++)for(let i=0;i<n;i++){const s=Be(i,0,n,0,100),a=Be(t,0,r,100,0),l=mn(e[0],s,a),u=4*(t*n+i);o[u]=l[0],o[u+1]=l[1],o[u+2]=l[2],o[u+3]=255}t.putImageData(i,0,0);const s=Be(e[1],0,100,0,100);this.markerElem_.style.left=`${s}%`;const a=Be(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}}class er{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new tr(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ne(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Be(t.point.x,0,t.bounds.width,0,100),r=Be(t.point.y,0,t.bounds.height,100,0),[i,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new xn([i,n,r,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Ue(t.key)&&t.preventDefault();const[e,n,r,i]=this.value.rawValue.getComponents("hsv"),o=Tn(!1),s=Oe(o,Ie(t)),a=Oe(o,De(t));0===s&&0===a||this.value.setRawValue(new xn([e,n+s,r+a,i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Tn(!1),n=Oe(e,Ie(t)),r=Oe(e,De(t));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class nr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Jn(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new er(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Hn(t,{value:this.value,viewProps:this.viewProps}),text:new We(t,{parser:xe,baseStep:.1,props:E.fromObject({draggingScale:.01,formatter:Me(2)}),value:T(0,{constraint:new Wt({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ke({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new xn(n,t.rawValue.mode)}}),this.textC_=new Yn(t,{parser:xe,value:this.value,viewProps:this.viewProps}),this.view=new Sn(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const rr=f("colsw");class ir{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(rr()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(rr("sw")),this.element.appendChild(n),this.swatchElem_=n;const r=t.createElement("button");r.classList.add(rr("b")),e.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Un(t)}onValueChange_(){this.update_()}}class or{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ir(t,{value:this.value,viewProps:this.viewProps})}}class sr{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Z.create(e.expanded),this.swatchC_=new or(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new ee(t,{parser:e.parser,props:E.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new fn(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new Jt(t,{viewProps:this.viewProps}):null;const r=new nr(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),ke({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Q(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=j(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!U(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function ar(t){return xn.isColorObject(t)?xn.fromObject(t):xn.black()}function lr(t){return vn(t.getComponents("rgb")).reduce((t,e)=>t<<8|255&Math.floor(e),0)}function ur(t){return t.getComponents("rgb").reduce((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e),0)>>>0}function cr(t){return"number"!=typeof t?xn.black():function(t){return new xn([t>>16&255,t>>8&255,255&t],"rgb")}(t)}function hr(t){return"number"!=typeof t?xn.black():function(t){return new xn([t>>24&255,t>>16&255,t>>8&255,Be(255&t,0,255,0,1)],"rgb")}(t)}function dr(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function pr(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function fr(t){return"alpha"in t&&!0===t.alpha}function mr(t){return t?t=>Un(t,"0x"):t=>In(t,"0x")}const vr={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const n=Mn(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>fr(t.params)?hr:cr,equals:xn.equals,writer:t=>function(t){const e=t?ur:lr;return(t,n)=>{Je(t,e(n))}}(fr(t.params))},controller:t=>{const e=fr(t.params),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=n&&n,formatter:mr(e),parser:Ln,pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};const gr={id:"input-color-object",type:"input",accept:(t,e)=>{if(!xn.isColorObject(t))return null;const n=Mn(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>ar,equals:xn.equals,writer:t=>function(t){return t?dr:pr}(function(t){return xn.isRgbaColorObject(t)}(t.initialValue))},controller:t=>{const e=xn.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0,i=e?Un:In;return new sr(t.document,{expanded:null!=n&&n,formatter:i,parser:Ln,pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},_r={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!Rn(t))return null;const n=Mn(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>On,equals:xn.equals,writer:t=>{const e=Rn(t.initialValue);if(!e)throw u.shouldNeverHappen();return function(t){const e=Vn(t);return(t,n)=>{Je(t,e(n))}}(e)}},controller:t=>{const e=Rn(t.initialValue);if(!e)throw u.shouldNeverHappen();const n=Vn(e),r="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=r&&r,formatter:n,parser:Ln,pickerLayout:null!=i?i:"popup",supportsAlpha:kn(e),value:t.value,viewProps:t.viewProps})}};class br{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((t,e)=>{var n,r;return null!==(r=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==r?r:t});return this.asm_.fromComponents(e)}}const yr=f("pndtxt");class xr{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(yr()),this.textViews.forEach(e=>{const n=t.createElement("div");n.classList.add(yr("a")),n.appendChild(e.element),this.element.appendChild(n)})}}class wr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,r)=>function(t,e,n){return new We(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:T(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,r)),this.acs_.forEach((t,n)=>{ke({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,r)=>{const i=e.assembly.toComponents(t.rawValue);return i[n]=r.rawValue,e.assembly.fromComponents(i)}})}),this.view=new xr(t,{textViews:this.acs_.map(t=>t.view)})}}function Sr(t){const e=[],n=function(t){return"step"in t&&!s(t.step)?new Kt(t.step):null}(t);n&&e.push(n);const r=function(t){return"max"in t&&!s(t.max)||"min"in t&&!s(t.min)?new Wt({max:t.max,min:t.min}):null}(t);r&&e.push(r);const i=rn(t.options);return i&&e.push(i),new Gt(e)}function Mr(t){const[e,n]=function(t){const e=t?Ht(t,Wt):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}(t);return[null!=e?e:0,null!=n?n:100]}const Tr={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=P,r=R(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(Qe),step:n.optional.number});return r?{initialValue:t,params:r}:null},binding:{reader:t=>we,constraint:t=>Sr(t.params),writer:t=>Je},controller:t=>{var e,n;const r=t.value,i=t.constraint;if(i&&Ht(i,jt))return new Yt(t.document,{props:E.fromObject({options:null!==(e=on(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps});const o=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:Me(sn(i,r.rawValue));if(i&&Ht(i,Wt)){const[e,n]=Mr(i);return new Ze(t.document,{baseStep:an(i),parser:xe,sliderProps:E.fromObject({maxValue:n,minValue:e}),textProps:E.fromObject({draggingScale:ln(i,r.rawValue),formatter:o}),value:r,viewProps:t.viewProps})}return new We(t.document,{baseStep:an(i),parser:xe,props:E.fromObject({draggingScale:ln(i,r.rawValue),formatter:o}),value:r,viewProps:t.viewProps})}};class Er{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(s(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Ar={toComponents:t=>t.getComponents(),fromComponents:t=>new Er(...t)},Cr=f("p2d");class Pr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Cr()),e.viewProps.bindClassModifiers(this.element),v(e.expanded,_(this.element,Cr(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Cr("h")),this.element.appendChild(n);const r=t.createElement("button");r.classList.add(Cr("b")),r.appendChild(V(t,"p2dpad")),e.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;const i=t.createElement("div");if(i.classList.add(Cr("t")),n.appendChild(i),this.textElement=i,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Cr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Rr=f("p2dp");class Lr{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(Rr()),"popup"===e.layout&&this.element.classList.add(Rr(void 0,"p"));const n=t.createElement("div");n.classList.add(Rr("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const r=t.createElementNS(D,"svg");r.classList.add(Rr("g")),this.padElement.appendChild(r),this.svgElem_=r;const i=t.createElementNS(D,"line");i.classList.add(Rr("ax")),i.setAttributeNS(null,"x1","0"),i.setAttributeNS(null,"y1","50%"),i.setAttributeNS(null,"x2","100%"),i.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(i);const o=t.createElementNS(D,"line");o.classList.add(Rr("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const s=t.createElementNS(D,"line");s.classList.add(Rr("l")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(s),this.lineElem_=s;const a=t.createElement("div");a.classList.add(Rr("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,r=Be(t,-n,+n,0,100),i=Be(e,-n,+n,0,100),o=this.invertsY_?100-i:i;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function kr(t,e,n){return[Oe(e[0],Ie(t)),Oe(e[1],De(t))*(n?1:-1)]}class Or{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Lr(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ne(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,r=Be(t.point.x,0,t.bounds.width,-n,+n),i=Be(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Er(r,i),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Ue(t.key)&&t.preventDefault();const[e,n]=kr(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new Er(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=kr(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Dr{constructor(t,e){var n,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Z.create(e.expanded),this.popC_="popup"===e.pickerLayout?new Jt(t,{viewProps:this.viewProps}):null;const i=new Or(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.textC_=new wr(t,{assembly:Ar,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Pr(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ke({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Q(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=j(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!U(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function Ir(t){return Er.isObject(t)?new Er(t.x,t.y):new Er}function Ur(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Fr(t){if(!t)return;const e=[];return s(t.step)||e.push(new Kt(t.step)),s(t.max)&&s(t.min)||e.push(new Wt({max:t.max,min:t.min})),new Gt(e)}function Nr(t,e){const n=t&&Ht(t,Wt);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));const r=an(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function Br(t,e){const n=e instanceof br?e.components[0]:void 0,r=e instanceof br?e.components[1]:void 0,i=Nr(n,t.x),o=Nr(r,t.y);return Math.max(i,o)}function Vr(t,e){return{baseStep:an(e),constraint:e,textProps:E.fromObject({draggingScale:ln(e,t),formatter:Me(sn(e,t))})}}function zr(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Gr={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Er.isObject(t))return null;const n=P,r=R(e,{expanded:n.optional.boolean,picker:n.optional.custom(tn),x:n.optional.custom(en),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Ir,constraint:t=>function(t){return new br({assembly:Ar,components:[Fr("x"in t?t.x:void 0),Fr("y"in t?t.y:void 0)]})}(t.params),equals:Er.equals,writer:t=>Ur},controller:t=>{const e=t.document,n=t.value,r=t.constraint;if(!(r instanceof br))throw u.shouldNeverHappen();const i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0;return new Dr(e,{axes:[Vr(n.rawValue.x,r.components[0]),Vr(n.rawValue.y,r.components[1])],expanded:null!=i&&i,invertsY:zr(t.params),maxValue:Br(n.rawValue,r),parser:xe,pickerLayout:null!=o?o:"popup",value:n,viewProps:t.viewProps})}};class Hr{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(s(t))return!1;const e=t.x,n=t.y,r=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const jr={toComponents:t=>t.getComponents(),fromComponents:t=>new Hr(...t)};function Wr(t){return Hr.isObject(t)?new Hr(t.x,t.y,t.z):new Hr}function Kr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function qr(t){if(!t)return;const e=[];return s(t.step)||e.push(new Kt(t.step)),s(t.max)&&s(t.min)||e.push(new Wt({max:t.max,min:t.min})),new Gt(e)}function Xr(t,e){return{baseStep:an(e),constraint:e,textProps:E.fromObject({draggingScale:ln(e,t),formatter:Me(sn(e,t))})}}const Yr={id:"input-point3d",type:"input",accept:(t,e)=>{if(!Hr.isObject(t))return null;const n=P,r=R(e,{x:n.optional.custom(en),y:n.optional.custom(en),z:n.optional.custom(en)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Wr,constraint:t=>function(t){return new br({assembly:jr,components:[qr("x"in t?t.x:void 0),qr("y"in t?t.y:void 0),qr("z"in t?t.z:void 0)]})}(t.params),equals:Hr.equals,writer:t=>Kr},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof br))throw u.shouldNeverHappen();return new wr(t.document,{assembly:jr,axes:[Xr(e.rawValue.x,n.components[0]),Xr(e.rawValue.y,n.components[1]),Xr(e.rawValue.z,n.components[2])],parser:xe,value:e,viewProps:t.viewProps})}};class $r{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.z=n,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(s(t))return!1;const e=t.x,n=t.y,r=t.z,i=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Zr={toComponents:t=>t.getComponents(),fromComponents:t=>new $r(...t)};function Jr(t){return $r.isObject(t)?new $r(t.x,t.y,t.z,t.w):new $r}function Qr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function ti(t){if(!t)return;const e=[];return s(t.step)||e.push(new Kt(t.step)),s(t.max)&&s(t.min)||e.push(new Wt({max:t.max,min:t.min})),new Gt(e)}const ei={id:"input-point4d",type:"input",accept:(t,e)=>{if(!$r.isObject(t))return null;const n=P,r=R(e,{x:n.optional.custom(en),y:n.optional.custom(en),z:n.optional.custom(en),w:n.optional.custom(en)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Jr,constraint:t=>function(t){return new br({assembly:Zr,components:[ti("x"in t?t.x:void 0),ti("y"in t?t.y:void 0),ti("z"in t?t.z:void 0),ti("w"in t?t.w:void 0)]})}(t.params),equals:$r.equals,writer:t=>Qr},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof br))throw u.shouldNeverHappen();return new wr(t.document,{assembly:Zr,axes:e.rawValue.getComponents().map((t,e)=>function(t,e){return{baseStep:an(e),constraint:e,textProps:E.fromObject({draggingScale:ln(e,t),formatter:Me(sn(e,t))})}}(t,n.components[e])),parser:xe,value:e,viewProps:t.viewProps})}};const ni={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=R(e,{options:P.optional.custom(Qe)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ae,constraint:t=>function(t){const e=[],n=rn(t.options);return n&&e.push(n),new Gt(e)}(t.params),writer:t=>Je},controller:t=>{var e;const n=t.document,r=t.value,i=t.constraint;return i&&Ht(i,jt)?new Yt(n,{props:E.fromObject({options:null!==(e=on(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new ee(n,{parser:t=>t,props:E.fromObject({formatter:Ce}),value:r,viewProps:t.viewProps})}},ri={defaultInterval:200,defaultLineCount:3},ii=f("mll");class oi{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(ii()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(ii("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach(t=>{void 0!==t&&n.push(this.formatter_(t))}),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class si{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new oi(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const ai=f("sgl");class li{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(ai()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(ai("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class ui{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new li(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const ci={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=R(e,{lineCount:P.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ne},controller:t=>{var e;return 1===t.value.rawValue.length?new ui(t.document,{formatter:re,value:t.value,viewProps:t.viewProps}):new si(t.document,{formatter:re,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ri.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class hi{constructor(){this.emitter=new d,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const di=f("grl");class pi{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(di()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(D,"svg");n.classList.add(di("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(D,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const i=t.createElement("div");i.classList.add(di("t"),f("tt")()),this.element.appendChild(i),this.tooltipElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach((o,s)=>{if(void 0===o)return;const a=Be(s,0,e,0,t.width),l=Be(o,n,r,t.height,0);i.push([a,l].join(","))}),this.lineElem_.setAttributeNS(null,"points",i.join(" "));const o=this.tooltipElem_,s=this.value.rawValue[this.cursor_.index];if(void 0===s)return void o.classList.remove(di("t","a"));const a=Be(this.cursor_.index,0,e,0,t.width),l=Be(s,n,r,t.height,0);o.style.left=`${a}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(s)}`,o.classList.contains(di("t","a"))||(o.classList.add(di("t","a"),di("t","in")),I(o),o.classList.remove(di("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class fi{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new hi,this.view=new pi(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),U(t)){const t=new Ne(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Be(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(Be(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}function mi(t){return"format"in t&&!s(t.format)?t.format:Me(2)}function vi(t){return"view"in t&&"graph"===t.view}const gi={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=P,r=R(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return r?{initialValue:t,params:r}:null},binding:{defaultBufferSize:t=>vi(t)?64:1,reader:t=>we},controller:t=>vi(t.params)?function(t){var e,n,r;return new fi(t.document,{formatter:mi(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ri.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in t.params?t.params.min:null)&&void 0!==r?r:0,value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new ui(t.document,{formatter:mi(t.params),value:t.value,viewProps:t.viewProps}):new si(t.document,{formatter:mi(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ri.defaultLineCount,value:t.value,viewProps:t.viewProps})}(t)},_i={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=P,r=R(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Ae},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new si(t.document,{formatter:Ce,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ri.defaultLineCount,value:n,viewProps:t.viewProps}):new ui(t.document,{formatter:Ce,value:n,viewProps:t.viewProps})}};class bi{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new d,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}class yi{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new d,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=function(t,e){const n=[...Le(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Pe(n,t.length),n}(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}function xi(t,e){return 0===e?new Vt:new zt(t,null!=e?e:ri.defaultInterval)}class wi{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(s(e.read()))throw new u({context:{key:e.key},type:"nomatchingcontroller"});const r=this.pluginsMap_.inputs.reduce((r,i)=>r||function(t,e){const n=t.accept(e.target.read(),e.params);if(s(n))return null;const r=P,i={target:e.target,initialValue:n.initialValue,params:n.params},o=t.binding.reader(i),a=t.binding.constraint?t.binding.constraint(i):void 0,l=T(o(n.initialValue),{constraint:a,equals:t.binding.equals}),u=new bi({reader:o,target:e.target,value:l,writer:t.binding.writer(i)}),c=r.optional.boolean(e.params.disabled).value,h=r.optional.boolean(e.params.hidden).value,d=t.controller({constraint:a,document:e.document,initialValue:n.initialValue,params:n.params,value:u.value,viewProps:Pt.create({disabled:c,hidden:h})}),p=r.optional.string(e.params.label).value;return new rt(e.document,{binding:u,blade:$(),props:E.fromObject({label:p||e.target.key}),valueController:d})}(i,{document:t,target:e,params:n}),null);if(r)return r;throw new u({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const r=this.pluginsMap_.monitors.reduce((r,i)=>r||function(t,e){var n,r,i;const o=P,a=t.accept(e.target.read(),e.params);if(s(a))return null;const l={target:e.target,initialValue:a.initialValue,params:a.params},u=t.binding.reader(l),c=null!==(r=null!==(n=o.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(a.params))&&void 0!==r?r:1,h=o.optional.number(e.params.interval).value,d=new yi({reader:u,target:e.target,ticker:xi(e.document,h),value:Re(c)}),p=o.optional.boolean(e.params.disabled).value,f=o.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:a.params,value:d.value,viewProps:Pt.create({disabled:p,hidden:f})}),v=null!==(i=o.optional.string(e.params.label).value)&&void 0!==i?i:e.target.key;return new ot(e.document,{binding:d,blade:$(),props:E.fromObject({label:v}),valueController:m})}(i,{document:t,params:n,target:e}),null);if(r)return r;throw new u({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce((n,r)=>n||function(t,e){const n=t.accept(e.params);if(!n)return null;const r=P.optional.boolean(e.params.disabled).value,i=P.optional.boolean(e.params.hidden).value;return t.controller({blade:$(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r,hidden:i}),viewProps:Pt.create({disabled:r,hidden:i})})}(r,{document:t,params:e}),null);if(!n)throw new u({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof rt)return new nt(t);if(t instanceof ot)return new it(t);if(t instanceof vt)return new ut(t,this);const e=this.pluginsMap_.blades.reduce((e,n)=>e||n.api({controller:t,pool:this}),null);if(!e)throw u.shouldNeverHappen();return e}}class Si extends e{constructor(t){super(t),this.emitter_=new d,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class Mi extends e{constructor(t){super(t),this.emitter_=new d,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class Ti extends e{constructor(t){super(t),this.emitter_=new d,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}const Ei={id:"list",type:"blade",accept(t){const e=P,n=R(t,{options:e.required.custom(Qe),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new Yt(t.document,{props:E.fromObject({options:nn(t.params.options)}),value:T(t.params.value),viewProps:t.viewProps});return new xt(t.document,{blade:t.blade,props:E.fromObject({label:t.params.label}),valueController:e})},api:t=>t.controller instanceof xt&&t.controller.valueController instanceof Yt?new Si(t.controller):null};class Ai extends ct{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){(function(t,e){t.forEach(t=>{const n=e[t.presetKey];void 0!==n&&t.write(n)})})(this.controller_.rackController.rack.find(rt).map(t=>t.binding.target),t),this.refresh()}exportPreset(){return function(t){return t.reduce((t,e)=>Object.assign(t,{[e.presetKey]:e.read()}),{})}(this.controller_.rackController.rack.find(rt).map(t=>t.binding.target))}refresh(){this.controller_.rackController.rack.find(rt).forEach(t=>{t.binding.read()}),this.controller_.rackController.rack.find(ot).forEach(t=>{t.binding.read()})}}class Ci extends bt{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Pi={id:"slider",type:"blade",accept(t){const e=P,n=R(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const r=null!==(e=t.params.value)&&void 0!==e?e:0,i=new Ze(t.document,{baseStep:1,parser:xe,sliderProps:E.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:E.fromObject({draggingScale:ln(void 0,r),formatter:null!==(n=t.params.format)&&void 0!==n?n:Se}),value:T(r),viewProps:t.viewProps});return new xt(t.document,{blade:t.blade,props:E.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof xt&&t.controller.valueController instanceof Ze?new Mi(t.controller):null},Ri={id:"text",type:"blade",accept(t){const e=P,n=R(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new ee(t.document,{parser:t.params.parse,props:E.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:T(t.params.value),viewProps:t.viewProps});return new xt(t.document,{blade:t.blade,props:E.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof xt&&t.controller.valueController instanceof ee?new Ti(t.controller):null};function Li(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}const ki=new class{constructor(t){const[e,n]=t.split("-"),r=e.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("3.0.5");t.BladeApi=e,t.ButtonApi=h,t.FolderApi=ct,t.InputBindingApi=nt,t.ListApi=Si,t.MonitorBindingApi=it,t.Pane=class extends Ai{constructor(t){var e;const n=t||{},r=null!==(e=n.document)&&void 0!==e?e:F().document,i=function(){const t=new wi;return[Gr,Yr,ei,ni,Tr,_r,gr,vr,dn,ci,_i,gi,X,yt,Et,Bt].forEach(e=>{t.register(e)}),t}();super(new Ci(r,{expanded:n.expanded,blade:$(),props:E.fromObject({title:n.title}),viewProps:Pt.create()}),i),this.pool_=i,this.containerElem_=n.container||function(t){const e=t.createElement("div");return e.classList.add(f("dfw")()),t.body&&t.body.appendChild(e),e}(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw u.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw u.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(t=>{this.pool_.register(t),this.embedPluginStyle_(t)})}embedPluginStyle_(t){t.css&&Li(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){Li(this.document,"default",".tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(0,0,0,0.2));--in-bg-a: var(--tp-input-background-color-active, rgba(0,0,0,0.35));--in-bg-f: var(--tp-input-background-color-focus, rgba(0,0,0,0.3));--in-bg-h: var(--tp-input-background-color-hover, rgba(0,0,0,0.25));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:calc(var(--cnt-h-p) + 8px);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:'';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:'';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:'';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}"),this.pool_.getAll().forEach(t=>{this.embedPluginStyle_(t)}),this.registerPlugin({plugins:[Pi,Ei,Bt,Ri]})}},t.SeparatorApi=wt,t.SliderApi=Mi,t.TabApi=It,t.TabPageApi=Dt,t.TextApi=Ti,t.TpChangeEvent=r,t.VERSION=ki,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9477:function(t,e,n){"use strict";n.d(e,{Aip:function(){return Vs},BKK:function(){return ar},CJI:function(){return rn},CP7:function(){return No},D1R:function(){return w},EB7:function(){return Es},EJi:function(){return Hs},F5T:function(){return sn},FIo:function(){return zs},FM8:function(){return _t},IEO:function(){return Zo},ILR:function(){return U},IOt:function(){return J},Ilk:function(){return kt},JOQ:function(){return er},JUT:function(){return Gt},Kj0:function(){return Bn},L5s:function(){return La},Ltg:function(){return Bt},Lun:function(){return To},M8C:function(){return gt},N$j:function(){return $o},NMF:function(){return W},OdW:function(){return ts},OoA:function(){return v},Ox3:function(){return Pa},PMe:function(){return wa},Pa4:function(){return jt},QRU:function(){return ka},ROQ:function(){return As},SPe:function(){return ss},SUY:function(){return Oa},Syv:function(){return j},TOt:function(){return Bs},TUv:function(){return Yo},TlE:function(){return cn},Tme:function(){return Ke},TyD:function(){return g},USm:function(){return Le},UY4:function(){return _s},UlW:function(){return q},V1s:function(){return Kn},Vkp:function(){return bt},VzW:function(){return T},WMw:function(){return a},WdD:function(){return lr},Wid:function(){return Gs},Wl3:function(){return r},YLQ:function(){return _},YT8:function(){return Ds},ZAu:function(){return Lo},Zp0:function(){return Ra},ZzF:function(){return qt},_12:function(){return ar},_AM:function(){return F},_C8:function(){return Zs},_Li:function(){return i},_fP:function(){return Ht},a$l:function(){return pn},aH4:function(){return b},aLr:function(){return de},aNw:function(){return pa},av9:function(){return k},blk:function(){return gs},bsb:function(){return H},cLu:function(){return E},cPb:function(){return qn},cek:function(){return Aa},dSO:function(){return h},dUE:function(){return ia},dd2:function(){return Vt},dpR:function(){return ma},eaV:function(){return N},ehD:function(){return o},ejS:function(){return vs},ekQ:function(){return z},fO1:function(){return Ts},fto:function(){return B},hEm:function(){return L},iKG:function(){return gr},iLg:function(){return sa},iMs:function(){return za},iUV:function(){return Va},iWj:function(){return ir},jFi:function(){return s},jyz:function(){return Wn},kB5:function(){return Ho},kaV:function(){return js},knz:function(){return $},l0P:function(){return V},lRF:function(){return Mo},lb7:function(){return es},m7l:function(){return ua},mSO:function(){return Z},nls:function(){return as},ptH:function(){return G},qyh:function(){return x},rDY:function(){return jn},rnI:function(){return Y},rpg:function(){return f},u9r:function(){return xn},uWy:function(){return m},vBJ:function(){return an},vpT:function(){return zo},wem:function(){return y},wk1:function(){return C},woe:function(){return Ss},wuA:function(){return O},x12:function(){return ps},xEZ:function(){return Nt},xsS:function(){return Vo},yC1:function(){return la},yGw:function(){return xe},ybr:function(){return Bo},ywz:function(){return S},z$h:function(){return X}});const r=0,i=1,o=2,s=0,a=2,l=100,u=301,c=302,h=303,d=304,p=306,f=1e3,m=1001,v=1002,g=1003,_=1004,b=1005,y=1006,x=1007,w=1008,S=1009,M=1014,T=1015,E=1016,A=1020,C=1023,P=1026,R=1027,L=1028,k=1030,O=33776,D=33777,I=33778,U=33779,F=35840,N=35842,B=36196,V=37492,z=37496,G=37808,H=36492,j=2300,W=2301,K=2302,q=1,X=2,Y=3e3,$=3001,Z=3201,J=0,Q="srgb",tt="srgb-linear",et=7680,nt=35044,rt="300 es",it=1035;class ot{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const st=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let at=1234567;const lt=Math.PI/180,ut=180/Math.PI;function ct(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(st[255&t]+st[t>>8&255]+st[t>>16&255]+st[t>>24&255]+"-"+st[255&e]+st[e>>8&255]+"-"+st[e>>16&15|64]+st[e>>24&255]+"-"+st[63&n|128]+st[n>>8&255]+"-"+st[n>>16&255]+st[n>>24&255]+st[255&r]+st[r>>8&255]+st[r>>16&255]+st[r>>24&255]).toLowerCase()}function ht(t,e,n){return Math.max(e,Math.min(n,t))}function dt(t,e){return(t%e+e)%e}function pt(t,e,n){return(1-n)*t+n*e}function ft(t){return!(t&t-1)&&0!==t}function mt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function vt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var gt=Object.freeze({__proto__:null,DEG2RAD:lt,RAD2DEG:ut,generateUUID:ct,clamp:ht,euclideanModulo:dt,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:pt,damp:function(t,e,n,r){return pt(t,e,1-Math.exp(-n*r))},pingpong:function(t,e=1){return e-Math.abs(dt(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(at=t);let e=at+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*lt},radToDeg:function(t){return t*ut},isPowerOfTwo:ft,ceilPowerOfTwo:mt,floorPowerOfTwo:vt,setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),u=o((e+r)/2),c=s((e+r)/2),h=o((e-r)/2),d=s((e-r)/2),p=o((r-e)/2),f=s((r-e)/2);switch(i){case"XYX":t.set(a*c,l*h,l*d,a*u);break;case"YZY":t.set(l*d,a*c,l*h,a*u);break;case"ZXZ":t.set(l*h,l*d,a*c,a*u);break;case"XZX":t.set(a*c,l*f,l*p,a*u);break;case"YXY":t.set(l*p,a*c,l*f,a*u);break;case"ZYZ":t.set(l*f,l*p,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}});class _t{constructor(t=0,e=0){_t.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bt{constructor(){bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,o,s,a,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=s,u[3]=e,u[4]=i,u[5]=a,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],_=r[4],b=r[7],y=r[2],x=r[5],w=r[8];return i[0]=o*f+s*g+a*y,i[3]=o*m+s*_+a*x,i[6]=o*v+s*b+a*w,i[1]=l*f+u*g+c*y,i[4]=l*m+u*_+c*x,i[7]=l*v+u*b+c*w,i[2]=h*f+d*g+p*y,i[5]=h*m+d*_+p*x,i[8]=h*v+d*b+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8];return e*o*u-e*s*l-n*i*u+n*s*a+r*i*l-r*o*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=u*o-s*l,h=s*a-u*i,d=l*i-o*a,p=e*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=c*f,t[1]=(r*l-u*n)*f,t[2]=(s*n-r*o)*f,t[3]=h*f,t[4]=(u*e-r*a)*f,t[5]=(r*i-s*e)*f,t[6]=d*f,t[7]=(n*a-l*e)*f,t[8]=(o*e-n*i)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+t,-r*l,r*a,-r*(-l*o+a*s)+s+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],s=r[6],a=r[1],l=r[4],u=r[7];return r[0]=e*i+n*a,r[3]=e*o+n*l,r[6]=e*s+n*u,r[1]=-n*i+e*a,r[4]=-n*o+e*l,r[7]=-n*s+e*u,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function yt(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}function xt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function wt(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function St(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Mt={[Q]:{[tt]:wt},[tt]:{[Q]:St}},Tt={legacyMode:!0,get workingColorSpace(){return tt},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(Mt[e]&&void 0!==Mt[e][n]){const r=Mt[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Et={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},At={r:0,g:0,b:0},Ct={h:0,s:0,l:0},Pt={h:0,s:0,l:0};function Rt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Lt(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class kt{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e="srgb"){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Tt.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r="srgb-linear"){return this.r=t,this.g=e,this.b=n,Tt.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r="srgb-linear"){if(t=dt(t,1),e=ht(e,0,1),n=ht(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Rt(i,r,t+1/3),this.g=Rt(i,r,t),this.b=Rt(i,r,t-1/3)}return Tt.toWorkingColorSpace(this,r),this}setStyle(t,e="srgb"){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Tt.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Tt.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100;return n(t[4]),this.setHSL(r,i,o,e)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,Tt.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,Tt.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e="srgb"){const n=Et[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=wt(t.r),this.g=wt(t.g),this.b=wt(t.b),this}copyLinearToSRGB(t){return this.r=St(t.r),this.g=St(t.g),this.b=St(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t="srgb"){return Tt.fromWorkingColorSpace(Lt(this,At),t),ht(255*At.r,0,255)<<16^ht(255*At.g,0,255)<<8^ht(255*At.b,0,255)}getHexString(t="srgb"){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e="srgb-linear"){Tt.fromWorkingColorSpace(Lt(this,At),e);const n=At.r,r=At.g,i=At.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const u=(s+o)/2;if(s===o)a=0,l=0;else{const t=o-s;switch(l=u<=.5?t/(o+s):t/(2-o-s),o){case n:a=(r-i)/t+(r<i?6:0);break;case r:a=(i-n)/t+2;break;case i:a=(n-r)/t+4}a/=6}return t.h=a,t.s=l,t.l=u,t}getRGB(t,e="srgb-linear"){return Tt.fromWorkingColorSpace(Lt(this,At),e),t.r=At.r,t.g=At.g,t.b=At.b,t}getStyle(t="srgb"){return Tt.fromWorkingColorSpace(Lt(this,At),t),t!==Q?`color(${t} ${At.r} ${At.g} ${At.b})`:`rgb(${255*At.r|0},${255*At.g|0},${255*At.b|0})`}offsetHSL(t,e,n){return this.getHSL(Ct),Ct.h+=t,Ct.s+=e,Ct.l+=n,this.setHSL(Ct.h,Ct.s,Ct.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Ct),t.getHSL(Pt);const n=pt(Ct.h,Pt.h,e),r=pt(Ct.s,Pt.s,e),i=pt(Ct.l,Pt.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Ot;kt.NAMES=Et;class Dt{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Ot&&(Ot=xt("canvas")),Ot.width=t.width,Ot.height=t.height;const n=Ot.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ot}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=xt("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*wt(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*wt(e[t]/255)):e[t]=wt(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class It{constructor(t=null){this.isSource=!0,this.uuid=ct(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Ut(r[e].image)):t.push(Ut(r[e]))}else t=Ut(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Ut(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Dt.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ft=0;class Nt extends ot{constructor(t=Nt.DEFAULT_IMAGE,e=Nt.DEFAULT_MAPPING,n=m,r=m,i=y,o=w,s=C,a=S,l=1,u=Y){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ft++}),this.uuid=ct(),this.name="",this.source=new It(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case f:t.x=t.x-Math.floor(t.x);break;case m:t.x=t.x<0?0:1;break;case v:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case f:t.y=t.y-Math.floor(t.y);break;case m:t.y=t.y<0?0:1;break;case v:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Nt.DEFAULT_IMAGE=null,Nt.DEFAULT_MAPPING=300;class Bt{constructor(t=0,e=0,n=0,r=1){Bt.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,s=.1,a=t.elements,l=a[0],u=a[4],c=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],v=a[10];if(Math.abs(u-h)<o&&Math.abs(c-f)<o&&Math.abs(p-m)<o){if(Math.abs(u+h)<s&&Math.abs(c+f)<s&&Math.abs(p+m)<s&&Math.abs(l+d+v-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(d+1)/2,g=(v+1)/2,_=(u+h)/4,b=(c+f)/4,y=(p+m)/4;return t>a&&t>g?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=_/n,i=b/n):a>g?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=_/r,i=y/r):g<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=b/i,r=y/i),this.set(n,r,i,e),this}let g=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(m-p)/g,this.y=(c-f)/g,this.z=(h-u)/g,this.w=Math.acos((l+d+v-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vt extends ot{constructor(t,e,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Bt(0,0,t,e),this.scissorTest=!1,this.viewport=new Bt(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new Nt(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:y,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new It(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zt extends Nt{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=g,this.minFilter=g,this.wrapR=m,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gt extends Nt{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=g,this.minFilter=g,this.wrapR=m,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ht{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,s){let a=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===s)return t[e+0]=a,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===s)return t[e+0]=h,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(c!==f||a!==h||l!==d||u!==p){let t=1-s;const e=a*h+l*d+u*p+c*f,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*t+h*i,l=l*t+d*i,u=u*t+p*i,c=c*t+f*i,t===1-s){const t=1/Math.sqrt(a*a+l*l+u*u+c*c);a*=t,l*=t,u*=t,c*=t}}t[e]=a,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],u=n[r+3],c=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return t[e]=s*p+u*c+a*d-l*h,t[e+1]=a*p+u*h+l*c-s*d,t[e+2]=l*p+u*d+s*h-a*c,t[e+3]=u*p-s*c-a*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,s=Math.cos,a=Math.sin,l=s(n/2),u=s(r/2),c=s(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(o){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],s=e[5],a=e[9],l=e[2],u=e[6],c=e[10],h=n+s+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-a)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>s&&n>c){const t=2*Math.sqrt(1+n-s-c);this._w=(u-a)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(s>c){const t=2*Math.sqrt(1+s-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(a+u)/t}else{const t=2*Math.sqrt(1+c-n-s);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(a+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ht(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,l=e._z,u=e._w;return this._x=n*u+o*s+r*l-i*a,this._y=r*u+o*a+i*s-n*l,this._z=i*u+o*l+n*a-r*s,this._w=o*u-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),u=Math.atan2(l,s),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class jt{constructor(t=0,e=0,n=0){jt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Kt.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Kt.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*r-s*n,u=a*n+s*e-i*r,c=a*r+i*n-o*e,h=-i*e-o*n-s*r;return this.x=l*a+h*-i+u*-s-c*-o,this.y=u*a+h*-o+c*-i-l*-s,this.z=c*a+h*-s+l*-o-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Wt.copy(this).projectOnVector(t),this.sub(Wt)}reflect(t){return this.sub(Wt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(ht(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Wt=new jt,Kt=new Ht;class qt{constructor(t=new jt(1/0,1/0,1/0),e=new jt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=t.length;a<l;a+=3){const l=t[a],u=t[a+1],c=t[a+2];l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>s&&(s=c)}return this.min.set(e,n,r),this.max.set(i,o,s),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=t.count;a<l;a++){const l=t.getX(a),u=t.getY(a),c=t.getZ(a);l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>s&&(s=c)}return this.min.set(e,n,r),this.max.set(i,o,s),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Yt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)Yt.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Yt)}else null===n.boundingBox&&n.computeBoundingBox(),$t.copy(n.boundingBox),$t.applyMatrix4(t.matrixWorld),this.union($t);const r=t.children;for(let t=0,n=r.length;t<n;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Yt),Yt.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(re),ie.subVectors(this.max,re),Zt.subVectors(t.a,re),Jt.subVectors(t.b,re),Qt.subVectors(t.c,re),te.subVectors(Jt,Zt),ee.subVectors(Qt,Jt),ne.subVectors(Zt,Qt);let e=[0,-te.z,te.y,0,-ee.z,ee.y,0,-ne.z,ne.y,te.z,0,-te.x,ee.z,0,-ee.x,ne.z,0,-ne.x,-te.y,te.x,0,-ee.y,ee.x,0,-ne.y,ne.x,0];return!!ae(e,Zt,Jt,Qt,ie)&&(e=[1,0,0,0,1,0,0,0,1],!!ae(e,Zt,Jt,Qt,ie)&&(oe.crossVectors(te,ee),e=[oe.x,oe.y,oe.z],ae(e,Zt,Jt,Qt,ie)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Yt.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Yt).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Xt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Xt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Xt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Xt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Xt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Xt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Xt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Xt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Xt)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Xt=[new jt,new jt,new jt,new jt,new jt,new jt,new jt,new jt],Yt=new jt,$t=new qt,Zt=new jt,Jt=new jt,Qt=new jt,te=new jt,ee=new jt,ne=new jt,re=new jt,ie=new jt,oe=new jt,se=new jt;function ae(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){se.fromArray(t,o);const s=i.x*Math.abs(se.x)+i.y*Math.abs(se.y)+i.z*Math.abs(se.z),a=e.dot(se),l=n.dot(se),u=r.dot(se);if(Math.max(-Math.max(a,l,u),Math.min(a,l,u))>s)return!1}return!0}const le=new qt,ue=new jt,ce=new jt,he=new jt;class de{constructor(t=new jt,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):le.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){he.subVectors(t,this.center);const e=he.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(he.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?ce.set(0,0,1).multiplyScalar(t.radius):ce.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ue.copy(t.center).add(ce)),this.expandByPoint(ue.copy(t.center).sub(ce)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const pe=new jt,fe=new jt,me=new jt,ve=new jt,ge=new jt,_e=new jt,be=new jt;class ye{constructor(t=new jt,e=new jt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,pe)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=pe.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(pe.copy(this.direction).multiplyScalar(e).add(this.origin),pe.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){fe.copy(t).add(e).multiplyScalar(.5),me.copy(e).sub(t).normalize(),ve.copy(this.origin).sub(fe);const i=.5*t.distanceTo(e),o=-this.direction.dot(me),s=ve.dot(this.direction),a=-ve.dot(me),l=ve.lengthSq(),u=Math.abs(1-o*o);let c,h,d,p;if(u>0)if(c=o*a-s,h=o*s-a,p=i*u,c>=0)if(h>=-p)if(h<=p){const t=1/u;c*=t,h*=t,d=c*(c+o*h+2*s)+h*(o*c+h+2*a)+l}else h=i,c=Math.max(0,-(o*h+s)),d=-c*c+h*(h+2*a)+l;else h=-i,c=Math.max(0,-(o*h+s)),d=-c*c+h*(h+2*a)+l;else h<=-p?(c=Math.max(0,-(-o*i+s)),h=c>0?-i:Math.min(Math.max(-i,-a),i),d=-c*c+h*(h+2*a)+l):h<=p?(c=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+l):(c=Math.max(0,-(o*i+s)),h=c>0?i:Math.min(Math.max(-i,-a),i),d=-c*c+h*(h+2*a)+l);else h=o>0?-i:i,c=Math.max(0,-(o*h+s)),d=-c*c+h*(h+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(me).multiplyScalar(h).add(fe),d}intersectSphere(t,e){pe.subVectors(t.center,this.origin);const n=pe.dot(this.direction),r=pe.dot(pe)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return s<0&&a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,s,a;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(s=(t.min.z-h.z)*c,a=(t.max.z-h.z)*c):(s=(t.max.z-h.z)*c,a=(t.min.z-h.z)*c),n>a||s>r?null:((s>n||n!=n)&&(n=s),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,pe)}intersectTriangle(t,e,n,r,i){ge.subVectors(e,t),_e.subVectors(n,t),be.crossVectors(ge,_e);let o,s=this.direction.dot(be);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}ve.subVectors(this.origin,t);const a=o*this.direction.dot(_e.crossVectors(ve,_e));if(a<0)return null;const l=o*this.direction.dot(ge.cross(ve));if(l<0)return null;if(a+l>s)return null;const u=-o*ve.dot(be);return u<0?null:this.at(u/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class xe{constructor(){xe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,i,o,s,a,l,u,c,h,d,p,f,m){const v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=s,v[13]=a,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new xe).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/we.setFromMatrixColumn(t,0).length(),i=1/we.setFromMatrixColumn(t,1).length(),o=1/we.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=s*u,i=s*c;e[0]=a*u,e[4]=-a*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-s*a,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*a}else if("YXZ"===t.order){const t=a*u,n=a*c,r=l*u,i=l*c;e[0]=t+i*s,e[4]=r*s-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=o*a}else if("ZXY"===t.order){const t=a*u,n=a*c,r=l*u,i=l*c;e[0]=t-i*s,e[4]=-o*c,e[8]=r+n*s,e[1]=n+r*s,e[5]=o*u,e[9]=i-t*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){const t=o*u,n=o*c,r=s*u,i=s*c;e[0]=a*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=a*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-s*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=s*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Me,t,Te)}lookAt(t,e,n){const r=this.elements;return Ce.subVectors(t,e),0===Ce.lengthSq()&&(Ce.z=1),Ce.normalize(),Ee.crossVectors(n,Ce),0===Ee.lengthSq()&&(1===Math.abs(n.z)?Ce.x+=1e-4:Ce.z+=1e-4,Ce.normalize(),Ee.crossVectors(n,Ce)),Ee.normalize(),Ae.crossVectors(Ce,Ee),r[0]=Ee.x,r[4]=Ae.x,r[8]=Ce.x,r[1]=Ee.y,r[5]=Ae.y,r[9]=Ce.y,r[2]=Ee.z,r[6]=Ae.z,r[10]=Ce.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],_=n[7],b=n[11],y=n[15],x=r[0],w=r[4],S=r[8],M=r[12],T=r[1],E=r[5],A=r[9],C=r[13],P=r[2],R=r[6],L=r[10],k=r[14],O=r[3],D=r[7],I=r[11],U=r[15];return i[0]=o*x+s*T+a*P+l*O,i[4]=o*w+s*E+a*R+l*D,i[8]=o*S+s*A+a*L+l*I,i[12]=o*M+s*C+a*k+l*U,i[1]=u*x+c*T+h*P+d*O,i[5]=u*w+c*E+h*R+d*D,i[9]=u*S+c*A+h*L+d*I,i[13]=u*M+c*C+h*k+d*U,i[2]=p*x+f*T+m*P+v*O,i[6]=p*w+f*E+m*R+v*D,i[10]=p*S+f*A+m*L+v*I,i[14]=p*M+f*C+m*k+v*U,i[3]=g*x+_*T+b*P+y*O,i[7]=g*w+_*E+b*R+y*D,i[11]=g*S+_*A+b*L+y*I,i[15]=g*M+_*C+b*k+y*U,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+i*a*c-r*l*c-i*s*h+n*l*h+r*s*d-n*a*d)+t[7]*(+e*a*d-e*l*h+i*o*h-r*o*d+r*l*u-i*a*u)+t[11]*(+e*l*c-e*s*d-i*o*c+n*o*d+i*s*u-n*l*u)+t[15]*(-r*s*u-e*a*c+e*s*h+r*o*c-n*o*h+n*a*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],v=t[15],g=c*m*l-f*h*l+f*a*d-s*m*d-c*a*v+s*h*v,_=p*h*l-u*m*l-p*a*d+o*m*d+u*a*v-o*h*v,b=u*f*l-p*c*l+p*s*d-o*f*d-u*s*v+o*c*v,y=p*c*a-u*f*a-p*s*h+o*f*h+u*s*m-o*c*m,x=e*g+n*_+r*b+i*y;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return t[0]=g*w,t[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*v-n*h*v)*w,t[2]=(s*m*i-f*a*i+f*r*l-n*m*l-s*r*v+n*a*v)*w,t[3]=(c*a*i-s*h*i-c*r*l+n*h*l+s*r*d-n*a*d)*w,t[4]=_*w,t[5]=(u*m*i-p*h*i+p*r*d-e*m*d-u*r*v+e*h*v)*w,t[6]=(p*a*i-o*m*i-p*r*l+e*m*l+o*r*v-e*a*v)*w,t[7]=(o*h*i-u*a*i+u*r*l-e*h*l-o*r*d+e*a*d)*w,t[8]=b*w,t[9]=(p*c*i-u*f*i-p*n*d+e*f*d+u*n*v-e*c*v)*w,t[10]=(o*f*i-p*s*i+p*n*l-e*f*l-o*n*v+e*s*v)*w,t[11]=(u*s*i-o*c*i-u*n*l+e*c*l+o*n*d-e*s*d)*w,t[12]=y*w,t[13]=(u*f*r-p*c*r+p*n*h-e*f*h-u*n*m+e*c*m)*w,t[14]=(p*s*r-o*f*r-p*n*a+e*f*a+o*n*m-e*s*m)*w,t[15]=(o*c*r-u*s*r+u*n*a-e*c*a-o*n*h+e*s*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,l=i*o,u=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,u*s+n,u*a-r*o,0,l*a-r*s,u*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,l=i+i,u=o+o,c=s+s,h=i*l,d=i*u,p=i*c,f=o*u,m=o*c,v=s*c,g=a*l,_=a*u,b=a*c,y=n.x,x=n.y,w=n.z;return r[0]=(1-(f+v))*y,r[1]=(d+b)*y,r[2]=(p-_)*y,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(p+_)*w,r[9]=(m-g)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=we.set(r[0],r[1],r[2]).length();const o=we.set(r[4],r[5],r[6]).length(),s=we.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Se.copy(this);const a=1/i,l=1/o,u=1/s;return Se.elements[0]*=a,Se.elements[1]*=a,Se.elements[2]*=a,Se.elements[4]*=l,Se.elements[5]*=l,Se.elements[6]*=l,Se.elements[8]*=u,Se.elements[9]*=u,Se.elements[10]*=u,e.setFromRotationMatrix(Se),n.x=i,n.y=o,n.z=s,this}makePerspective(t,e,n,r,i,o){const s=this.elements,a=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,o){const s=this.elements,a=1/(e-t),l=1/(n-r),u=1/(o-i),c=(e+t)*a,h=(n+r)*l,d=(o+i)*u;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const we=new jt,Se=new xe,Me=new jt(0,0,0),Te=new jt(1,1,1),Ee=new jt,Ae=new jt,Ce=new jt,Pe=new xe,Re=new Ht;class Le{constructor(t=0,e=0,n=0,r=Le.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(ht(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ht(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(ht(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-ht(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(ht(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-ht(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Pe.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Pe,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Re.setFromEuler(this),this.setFromQuaternion(Re,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Le.DefaultOrder="XYZ",Le.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ke{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Oe=0;const De=new jt,Ie=new Ht,Ue=new xe,Fe=new jt,Ne=new jt,Be=new jt,Ve=new Ht,ze=new jt(1,0,0),Ge=new jt(0,1,0),He=new jt(0,0,1),je={type:"added"},We={type:"removed"};class Ke extends ot{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Oe++}),this.uuid=ct(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ke.DefaultUp.clone();const t=new jt,e=new Le,n=new Ht,r=new jt(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new xe},normalMatrix:{value:new bt}}),this.matrix=new xe,this.matrixWorld=new xe,this.matrixAutoUpdate=Ke.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ke,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ie.setFromAxisAngle(t,e),this.quaternion.multiply(Ie),this}rotateOnWorldAxis(t,e){return Ie.setFromAxisAngle(t,e),this.quaternion.premultiply(Ie),this}rotateX(t){return this.rotateOnAxis(ze,t)}rotateY(t){return this.rotateOnAxis(Ge,t)}rotateZ(t){return this.rotateOnAxis(He,t)}translateOnAxis(t,e){return De.copy(t).applyQuaternion(this.quaternion),this.position.add(De.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ze,t)}translateY(t){return this.translateOnAxis(Ge,t)}translateZ(t){return this.translateOnAxis(He,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ue.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Fe.copy(t):Fe.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ne.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ue.lookAt(Ne,Fe,this.up):Ue.lookAt(Fe,Ne,this.up),this.quaternion.setFromRotationMatrix(Ue),r&&(Ue.extractRotation(r.matrixWorld),Ie.setFromRotationMatrix(Ue),this.quaternion.premultiply(Ie.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(je)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(We)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(We)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ue.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ue.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ue),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ne,t,Be),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ne,Ve,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),s=o(t.images),a=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Ke.DefaultUp=new jt(0,1,0),Ke.DefaultMatrixAutoUpdate=!0;const qe=new jt,Xe=new jt,Ye=new jt,$e=new jt,Ze=new jt,Je=new jt,Qe=new jt,tn=new jt,en=new jt,nn=new jt;class rn{constructor(t=new jt,e=new jt,n=new jt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),qe.subVectors(t,e),r.cross(qe);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){qe.subVectors(r,e),Xe.subVectors(n,e),Ye.subVectors(t,e);const o=qe.dot(qe),s=qe.dot(Xe),a=qe.dot(Ye),l=Xe.dot(Xe),u=Xe.dot(Ye),c=o*l-s*s;if(0===c)return i.set(-2,-1,-1);const h=1/c,d=(l*a-s*u)*h,p=(o*u-s*a)*h;return i.set(1-d-p,p,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,$e),$e.x>=0&&$e.y>=0&&$e.x+$e.y<=1}static getUV(t,e,n,r,i,o,s,a){return this.getBarycoord(t,e,n,r,$e),a.set(0,0),a.addScaledVector(i,$e.x),a.addScaledVector(o,$e.y),a.addScaledVector(s,$e.z),a}static isFrontFacing(t,e,n,r){return qe.subVectors(n,e),Xe.subVectors(t,e),qe.cross(Xe).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return qe.subVectors(this.c,this.b),Xe.subVectors(this.a,this.b),.5*qe.cross(Xe).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return rn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return rn.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return rn.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return rn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return rn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,s;Ze.subVectors(r,n),Je.subVectors(i,n),tn.subVectors(t,n);const a=Ze.dot(tn),l=Je.dot(tn);if(a<=0&&l<=0)return e.copy(n);en.subVectors(t,r);const u=Ze.dot(en),c=Je.dot(en);if(u>=0&&c<=u)return e.copy(r);const h=a*c-u*l;if(h<=0&&a>=0&&u<=0)return o=a/(a-u),e.copy(n).addScaledVector(Ze,o);nn.subVectors(t,i);const d=Ze.dot(nn),p=Je.dot(nn);if(p>=0&&d<=p)return e.copy(i);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),e.copy(n).addScaledVector(Je,s);const m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return Qe.subVectors(i,r),s=(c-u)/(c-u+(d-p)),e.copy(r).addScaledVector(Qe,s);const v=1/(m+f+h);return o=f*v,s=h*v,e.copy(n).addScaledVector(Ze,o).addScaledVector(Je,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let on=0;class sn extends ot{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:on++}),this.uuid=ct(),this.name="",this.type="Material",this.blending=1,this.side=r,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=l,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=et,this.stencilZFail=et,this.stencilZPass=et,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==r&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class an extends sn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ln=new jt,un=new _t;class cn{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=nt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new kt),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new _t),e[n++]=i.x,e[n++]=i.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new jt),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Bt),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)un.fromBufferAttribute(this,e),un.applyMatrix3(t),this.setXY(e,un.x,un.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)ln.fromBufferAttribute(this,e),ln.applyMatrix3(t),this.setXYZ(e,ln.x,ln.y,ln.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ln.fromBufferAttribute(this,e),ln.applyMatrix4(t),this.setXYZ(e,ln.x,ln.y,ln.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ln.fromBufferAttribute(this,e),ln.applyNormalMatrix(t),this.setXYZ(e,ln.x,ln.y,ln.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ln.fromBufferAttribute(this,e),ln.transformDirection(t),this.setXYZ(e,ln.x,ln.y,ln.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==nt&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class hn extends cn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class dn extends cn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class pn extends cn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let fn=0;const mn=new xe,vn=new Ke,gn=new jt,_n=new qt,bn=new qt,yn=new jt;class xn extends ot{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fn++}),this.uuid=ct(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(yt(t)?dn:hn)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new bt).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return mn.makeRotationFromQuaternion(t),this.applyMatrix4(mn),this}rotateX(t){return mn.makeRotationX(t),this.applyMatrix4(mn),this}rotateY(t){return mn.makeRotationY(t),this.applyMatrix4(mn),this}rotateZ(t){return mn.makeRotationZ(t),this.applyMatrix4(mn),this}translate(t,e,n){return mn.makeTranslation(t,e,n),this.applyMatrix4(mn),this}scale(t,e,n){return mn.makeScale(t,e,n),this.applyMatrix4(mn),this}lookAt(t){return vn.lookAt(t),vn.updateMatrix(),this.applyMatrix4(vn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gn).negate(),this.translate(gn.x,gn.y,gn.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new pn(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new qt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new jt(-1/0,-1/0,-1/0),new jt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];_n.setFromBufferAttribute(n),this.morphTargetsRelative?(yn.addVectors(this.boundingBox.min,_n.min),this.boundingBox.expandByPoint(yn),yn.addVectors(this.boundingBox.max,_n.max),this.boundingBox.expandByPoint(yn)):(this.boundingBox.expandByPoint(_n.min),this.boundingBox.expandByPoint(_n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new de);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new jt,1/0);if(t){const n=this.boundingSphere.center;if(_n.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];bn.setFromBufferAttribute(n),this.morphTargetsRelative?(yn.addVectors(_n.min,bn.min),_n.expandByPoint(yn),yn.addVectors(_n.max,bn.max),_n.expandByPoint(yn)):(_n.expandByPoint(bn.min),_n.expandByPoint(bn.max))}_n.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)yn.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(yn));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],s=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)yn.fromBufferAttribute(o,e),s&&(gn.fromBufferAttribute(t,e),yn.add(gn)),r=Math.max(r,n.distanceToSquared(yn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new cn(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,l=[],u=[];for(let t=0;t<s;t++)l[t]=new jt,u[t]=new jt;const c=new jt,h=new jt,d=new jt,p=new _t,f=new _t,m=new _t,v=new jt,g=new jt;function _(t,e,n){c.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),p.fromArray(o,2*t),f.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(c),d.sub(c),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),g.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(v),l[e].add(v),l[n].add(v),u[t].add(g),u[e].add(g),u[n].add(g))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)_(n[t+0],n[t+1],n[t+2])}const y=new jt,x=new jt,w=new jt,S=new jt;function M(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];y.copy(e),y.sub(w.multiplyScalar(w.dot(e))).normalize(),x.crossVectors(S,e);const n=x.dot(u[t])<0?-1:1;a[4*t]=y.x,a[4*t+1]=y.y,a[4*t+2]=y.z,a[4*t+3]=n}for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)M(n[t+0]),M(n[t+1]),M(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new cn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new jt,i=new jt,o=new jt,s=new jt,a=new jt,l=new jt,u=new jt,c=new jt;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(u),a.add(u),l.add(u),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,s=e.count;t<s;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,o=t.attributes[r],s=o.array,a=o.itemSize*e,l=Math.min(s.length,i.length-a);for(let t=0,e=a;t<l;t++,e++)i[e]=s[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)yn.fromBufferAttribute(t,e),yn.normalize(),t.setXYZ(e,yn.x,yn.y,yn.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let s=0,a=0;for(let i=0,l=e.length;i<l;i++){s=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)o[a++]=n[s++]}return new cn(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new xn,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],s=i[r];for(let e=0,r=s.length;e<r;e++){const r=t(s[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];o.push(r.toJSON(t.data))}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const wn=new xe,Sn=new ye,Mn=new de,Tn=new jt,En=new jt,An=new jt,Cn=new jt,Pn=new jt,Rn=new jt,Ln=new jt,kn=new jt,On=new jt,Dn=new _t,In=new _t,Un=new _t,Fn=new jt,Nn=new jt;class Bn extends Ke{constructor(t=new xn,e=new an){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mn.copy(n.boundingSphere),Mn.applyMatrix4(i),!1===t.ray.intersectsSphere(Mn))return;if(wn.copy(i).invert(),Sn.copy(t.ray).applyMatrix4(wn),null!==n.boundingBox&&!1===Sn.intersectsBox(n.boundingBox))return;let o;const s=n.index,a=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,d=n.groups,p=n.drawRange;if(null!==s)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],f=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(s.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3){const r=s.getX(n),d=s.getX(n+1),p=s.getX(n+2);o=Vn(this,f,t,Sn,a,l,u,c,h,r,d,p),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else for(let n=Math.max(0,p.start),i=Math.min(s.count,p.start+p.count);n<i;n+=3){const i=s.getX(n),d=s.getX(n+1),p=s.getX(n+2);o=Vn(this,r,t,Sn,a,l,u,c,h,i,d,p),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],s=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3)o=Vn(this,s,t,Sn,a,l,u,c,h,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}else for(let n=Math.max(0,p.start),i=Math.min(a.count,p.start+p.count);n<i;n+=3)o=Vn(this,r,t,Sn,a,l,u,c,h,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}function Vn(t,e,n,r,s,a,l,u,c,h,d,p){Tn.fromBufferAttribute(s,h),En.fromBufferAttribute(s,d),An.fromBufferAttribute(s,p);const f=t.morphTargetInfluences;if(a&&f){Ln.set(0,0,0),kn.set(0,0,0),On.set(0,0,0);for(let t=0,e=a.length;t<e;t++){const e=f[t],n=a[t];0!==e&&(Cn.fromBufferAttribute(n,h),Pn.fromBufferAttribute(n,d),Rn.fromBufferAttribute(n,p),l?(Ln.addScaledVector(Cn,e),kn.addScaledVector(Pn,e),On.addScaledVector(Rn,e)):(Ln.addScaledVector(Cn.sub(Tn),e),kn.addScaledVector(Pn.sub(En),e),On.addScaledVector(Rn.sub(An),e)))}Tn.add(Ln),En.add(kn),An.add(On)}t.isSkinnedMesh&&(t.boneTransform(h,Tn),t.boneTransform(d,En),t.boneTransform(p,An));const m=function(t,e,n,r,s,a,l,u){let c;if(c=e.side===i?r.intersectTriangle(l,a,s,!0,u):r.intersectTriangle(s,a,l,e.side!==o,u),null===c)return null;Nn.copy(u),Nn.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(Nn);return h<n.near||h>n.far?null:{distance:h,point:Nn.clone(),object:t}}(t,e,n,r,Tn,En,An,Fn);if(m){u&&(Dn.fromBufferAttribute(u,h),In.fromBufferAttribute(u,d),Un.fromBufferAttribute(u,p),m.uv=rn.getUV(Fn,Tn,En,An,Dn,In,Un,new _t)),c&&(Dn.fromBufferAttribute(c,h),In.fromBufferAttribute(c,d),Un.fromBufferAttribute(c,p),m.uv2=rn.getUV(Fn,Tn,En,An,Dn,In,Un,new _t));const t={a:h,b:d,c:p,normal:new jt,materialIndex:0};rn.getNormal(Tn,En,An,t.normal),m.face=t}return m}class zn extends xn{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],u=[],c=[];let h=0,d=0;function p(t,e,n,r,i,o,p,f,m,v,g){const _=o/m,b=p/v,y=o/2,x=p/2,w=f/2,S=m+1,M=v+1;let T=0,E=0;const A=new jt;for(let o=0;o<M;o++){const s=o*b-x;for(let a=0;a<S;a++){const h=a*_-y;A[t]=h*r,A[e]=s*i,A[n]=w,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=f>0?1:-1,u.push(A.x,A.y,A.z),c.push(a/m),c.push(1-o/v),T+=1}}for(let t=0;t<v;t++)for(let e=0;e<m;e++){const n=h+e+S*t,r=h+e+S*(t+1),i=h+(e+1)+S*(t+1),o=h+(e+1)+S*t;a.push(n,r,o),a.push(r,i,o),E+=6}s.addGroup(d,E,g),d+=E,h+=T}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new pn(l,3)),this.setAttribute("normal",new pn(u,3)),this.setAttribute("uv",new pn(c,2))}static fromJSON(t){return new zn(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Gn(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Hn(t){const e={};for(let n=0;n<t.length;n++){const r=Gn(t[n]);for(const t in r)e[t]=r[t]}return e}const jn={clone:Gn,merge:Hn};class Wn extends sn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Gn(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Kn extends Ke{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xe,this.projectionMatrix=new xe,this.projectionMatrixInverse=new xe}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class qn extends Kn{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*ut*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*lt*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*ut*Math.atan(Math.tan(.5*lt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*lt*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/s,r*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Xn=90;class Yn extends Ke{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new qn(Xn,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new jt(1,0,0)),this.add(r);const i=new qn(Xn,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new jt(-1,0,0)),this.add(i);const o=new qn(Xn,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new jt(0,1,0)),this.add(o);const s=new qn(Xn,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new jt(0,-1,0)),this.add(s);const a=new qn(Xn,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new jt(0,0,1)),this.add(a);const l=new qn(Xn,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new jt(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,s,a,l]=this.children,u=t.getRenderTarget(),c=t.toneMapping,h=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=c,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class $n extends Nt{constructor(t,e,n,r,i,o,s,a,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:u,n,r,i,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Zn extends Vt{constructor(t,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new $n(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:y}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",o="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new zn(5,5,5),l=new Wn({name:"CubemapFromEquirect",uniforms:Gn(n),vertexShader:r,fragmentShader:o,side:i,blending:s});l.uniforms.tEquirect.value=e;const u=new Bn(a,l),c=e.minFilter;return e.minFilter===w&&(e.minFilter=y),new Yn(1,10,this).update(t,u),e.minFilter=c,u.geometry.dispose(),u.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)}}const Jn=new jt,Qn=new jt,tr=new bt;class er{constructor(t=new jt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Jn.subVectors(n,e).cross(Qn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Jn),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||tr.getNormalMatrix(t),r=this.coplanarPoint(Jn).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const nr=new de,rr=new jt;class ir{constructor(t=new er,e=new er,n=new er,r=new er,i=new er,o=new er){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],_=n[15];return e[0].setComponents(s-r,c-a,f-h,_-m).normalize(),e[1].setComponents(s+r,c+a,f+h,_+m).normalize(),e[2].setComponents(s+i,c+l,f+d,_+v).normalize(),e[3].setComponents(s-i,c-l,f-d,_-v).normalize(),e[4].setComponents(s-o,c-u,f-p,_-g).normalize(),e[5].setComponents(s+o,c+u,f+p,_+g).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),nr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(nr)}intersectsSprite(t){return nr.center.set(0,0,0),nr.radius=.7071067811865476,nr.applyMatrix4(t.matrixWorld),this.intersectsSphere(nr)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(rr.x=r.normal.x>0?t.max.x:t.min.x,rr.y=r.normal.y>0?t.max.y:t.min.y,rr.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(rr)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function or(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function sr(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,s=t.createBuffer();let a;if(t.bindBuffer(r,s),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(function(e,r,i){const o=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1)}(o.buffer,e,i),o.version=e.version)}}}class ar extends xn{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,s=Math.floor(n),a=Math.floor(r),l=s+1,u=a+1,c=t/s,h=e/a,d=[],p=[],f=[],m=[];for(let t=0;t<u;t++){const e=t*h-o;for(let n=0;n<l;n++){const r=n*c-i;p.push(r,-e,0),f.push(0,0,1),m.push(n/s),m.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<s;e++){const n=e+l*t,r=e+l*(t+1),i=e+1+l*(t+1),o=e+1+l*t;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new pn(p,3)),this.setAttribute("normal",new pn(f,3)),this.setAttribute("uv",new pn(m,2))}static fromJSON(t){return new ar(t.width,t.height,t.widthSegments,t.heightSegments)}}const lr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n float x2 = x * x;\n float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660, 0.0556434,\n\t\t-1.5371385, 1.8760108, -0.2040259,\n\t\t-0.4985314, 0.0415560, 1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3( 0, 1, 0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3( 1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108, 1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605, 1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ur={common:{diffuse:{value:new kt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new bt},uv2Transform:{value:new bt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bt}},sprite:{diffuse:{value:new kt(16777215)},opacity:{value:1},center:{value:new _t(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bt}}},cr={basic:{uniforms:Hn([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.fog]),vertexShader:lr.meshbasic_vert,fragmentShader:lr.meshbasic_frag},lambert:{uniforms:Hn([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.fog,ur.lights,{emissive:{value:new kt(0)}}]),vertexShader:lr.meshlambert_vert,fragmentShader:lr.meshlambert_frag},phong:{uniforms:Hn([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,ur.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:lr.meshphong_vert,fragmentShader:lr.meshphong_frag},standard:{uniforms:Hn([ur.common,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.roughnessmap,ur.metalnessmap,ur.fog,ur.lights,{emissive:{value:new kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag},toon:{uniforms:Hn([ur.common,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.gradientmap,ur.fog,ur.lights,{emissive:{value:new kt(0)}}]),vertexShader:lr.meshtoon_vert,fragmentShader:lr.meshtoon_frag},matcap:{uniforms:Hn([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,{matcap:{value:null}}]),vertexShader:lr.meshmatcap_vert,fragmentShader:lr.meshmatcap_frag},points:{uniforms:Hn([ur.points,ur.fog]),vertexShader:lr.points_vert,fragmentShader:lr.points_frag},dashed:{uniforms:Hn([ur.common,ur.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lr.linedashed_vert,fragmentShader:lr.linedashed_frag},depth:{uniforms:Hn([ur.common,ur.displacementmap]),vertexShader:lr.depth_vert,fragmentShader:lr.depth_frag},normal:{uniforms:Hn([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,{opacity:{value:1}}]),vertexShader:lr.meshnormal_vert,fragmentShader:lr.meshnormal_frag},sprite:{uniforms:Hn([ur.sprite,ur.fog]),vertexShader:lr.sprite_vert,fragmentShader:lr.sprite_frag},background:{uniforms:{uvTransform:{value:new bt},t2D:{value:null}},vertexShader:lr.background_vert,fragmentShader:lr.background_frag},cube:{uniforms:Hn([ur.envmap,{opacity:{value:1}}]),vertexShader:lr.cube_vert,fragmentShader:lr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lr.equirect_vert,fragmentShader:lr.equirect_frag},distanceRGBA:{uniforms:Hn([ur.common,ur.displacementmap,{referencePosition:{value:new jt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lr.distanceRGBA_vert,fragmentShader:lr.distanceRGBA_frag},shadow:{uniforms:Hn([ur.lights,ur.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:lr.shadow_vert,fragmentShader:lr.shadow_frag}};function hr(t,e,n,o,s,a){const l=new kt(0);let u,c,h=!0===s?0:1,d=null,f=0,m=null;function v(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,a)}return{getClearColor:function(){return l},setClearColor:function(t,e=1){l.set(t),h=e,v(l,h)},getClearAlpha:function(){return h},setClearAlpha:function(t){h=t,v(l,h)},render:function(n,s){let a=!1,g=!0===s.isScene?s.background:null;g&&g.isTexture&&(g=e.get(g));const _=t.xr,b=_.getSession&&_.getSession();b&&"additive"===b.environmentBlendMode&&(g=null),null===g?v(l,h):g&&g.isColor&&(v(g,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===p)?(void 0===c&&(c=new Bn(new zn(1,1,1),new Wn({name:"BackgroundCubeMaterial",uniforms:Gn(cr.cube.uniforms),vertexShader:cr.cube.vertexShader,fragmentShader:cr.cube.fragmentShader,side:i,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(c)),c.material.uniforms.envMap.value=g,c.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,d===g&&f===g.version&&m===t.toneMapping||(c.material.needsUpdate=!0,d=g,f=g.version,m=t.toneMapping),c.layers.enableAll(),n.unshift(c,c.geometry,c.material,0,0,null)):g&&g.isTexture&&(void 0===u&&(u=new Bn(new ar(2,2),new Wn({name:"BackgroundMaterial",uniforms:Gn(cr.background.uniforms),vertexShader:cr.background.vertexShader,fragmentShader:cr.background.fragmentShader,side:r,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(u)),u.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),u.material.uniforms.uvTransform.value.copy(g.matrix),d===g&&f===g.version&&m===t.toneMapping||(u.material.needsUpdate=!0,d=g,f=g.version,m=t.toneMapping),u.layers.enableAll(),n.unshift(u,u.geometry,u.material,0,0,null))}}}function dr(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=p(null);let u=l,c=!1;function h(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function d(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function p(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function f(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){v(t,0)}function v(n,i){const o=u.newAttributes,s=u.enabledAttributes,a=u.attributeDivisors;o[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),a[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i)}function g(){const e=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function _(e,n,i,o,s,a){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,s,a):t.vertexAttribIPointer(e,n,i,s,a)}function b(){y(),c=!0,u!==l&&(u=l,h(u.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,b,y){let x=!1;if(s){const e=function(e,n,i){const s=!0===i.wireframe;let l=a[e.id];void 0===l&&(l={},a[e.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[s];return void 0===c&&(c=p(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),u[s]=c),c}(b,d,l);u!==e&&(u=e,h(u.object)),x=function(t,e,n,r){const i=u.attributes,o=e.attributes;let s=0;const a=n.getAttributes();for(const e in a)if(a[e].location>=0){const n=i[e];let r=o[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;s++}return u.attributesNum!==s||u.index!==r}(i,b,d,y),x&&function(t,e,n,r){const i={},o=e.attributes;let s=0;const a=n.getAttributes();for(const e in a)if(a[e].location>=0){let n=o[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[e]=r,s++}u.attributes=i,u.attributesNum=s,u.index=r}(i,b,d,y)}else{const t=!0===l.wireframe;u.geometry===b.id&&u.program===d.id&&u.wireframe===t||(u.geometry=b.id,u.program=d.id,u.wireframe=t,x=!0)}null!==y&&n.update(y,34963),(x||c)&&(c=!1,function(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;f();const l=a.attributes,u=s.getAttributes(),c=o.defaultAttributeValues;for(const e in u){const r=u[e];if(r.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const e=o.normalized,s=o.itemSize,l=n.get(o);if(void 0===l)continue;const u=l.buffer,c=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)v(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)_(r.location+t,s/r.locationSize,c,e,l*h,(d+s/r.locationSize*t)*h)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)v(r.location+t,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)_(r.location+t,s/r.locationSize,c,e,s*h,s/r.locationSize*t*h)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}g()}(i,l,d,b),null!==y&&t.bindBuffer(34963,n.get(y).buffer))},reset:b,resetDefaultState:y,dispose:function(){b();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)d(r[t].object),delete r[t];delete n[t.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:g}}function pr(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,s,a){if(0===a)return;let l,u;if(i)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,r,s,a),n.update(s,o,a)}}function fr(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=o||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),v=t.getParameter(36348),g=t.getParameter(36349),_=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:_&&b,maxSamples:o?t.getParameter(36183):0}}function mr(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new er,a=new bt,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)s.copy(t[e]).applyMatrix4(i,a),s.normal.toArray(u,n),u[n+3]=s.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const s=0!==t.length||e||0!==r||i;return i=e,n=c(t,o,0),r=t.length,s},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,u()},this.setState=function(e,s,a){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!i||null===h||0===h.length||o&&!p)o?c(null):u();else{const t=o?0:r,e=4*t;let i=f.clippingState||null;l.value=i,i=c(h,s,e,a);for(let t=0;t!==e;++t)i[t]=n[t];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function vr(t){let e=new WeakMap;function n(t,e){return e===h?t.mapping=u:e===d&&(t.mapping=c),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===h||o===d){if(e.has(i))return n(e.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const s=new Zn(o.height/2);return s.fromEquirectangularTexture(t,i),e.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}cr.physical={uniforms:Hn([cr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _t(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new kt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new kt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new kt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag};class gr extends Kn{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const _r=[.125,.215,.35,.446,.526,.582],br=new gr,yr=new kt;let xr=null;const wr=(1+Math.sqrt(5))/2,Sr=1/wr,Mr=[new jt(1,1,1),new jt(-1,1,1),new jt(1,1,-1),new jt(-1,1,-1),new jt(0,wr,Sr),new jt(0,wr,-Sr),new jt(Sr,0,wr),new jt(-Sr,0,wr),new jt(wr,Sr,0),new jt(-wr,Sr,0)];class Tr{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){xr=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Pr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Cr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(xr),t.scissorTest=!1,Ar(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===u||t.mapping===c?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),xr=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:y,minFilter:y,generateMipmaps:!1,type:E,format:C,encoding:Y,depthBuffer:!1},r=Er(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Er(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const o=t-4+1+_r.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>t-4?a=_r[s-t+4-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,p=6,f=3,m=2,v=1,g=new Float32Array(f*p*d),_=new Float32Array(m*p*d),b=new Float32Array(v*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(r,f*p*t),_.set(h,m*p*t);const i=[t,t,t,t,t,t];b.set(i,v*p*t)}const y=new xn;y.setAttribute("position",new cn(g,f)),y.setAttribute("uv",new cn(_,m)),y.setAttribute("faceIndex",new cn(b,v)),e.push(y),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(20),i=new jt(0,1,0);return new Wn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:s,depthTest:!1,depthWrite:!1})}(r,t,e)}return r}_compileMaterial(t){const e=new Bn(this._lodPlanes[0],t);this._renderer.compile(e,br)}_sceneToCubeUV(t,e,n,r){const o=new qn(90,1,e,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(yr),l.toneMapping=0,l.autoClear=!1;const h=new an({name:"PMREM.Background",side:i,depthWrite:!1,depthTest:!1}),d=new Bn(new zn,h);let p=!1;const f=t.background;f?f.isColor&&(h.color.copy(f),t.background=null,p=!0):(h.color.copy(yr),p=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(o.up.set(0,s[e],0),o.lookAt(a[e],0,0)):1===n?(o.up.set(0,0,s[e]),o.lookAt(0,a[e],0)):(o.up.set(0,s[e],0),o.lookAt(0,0,a[e]));const i=this._cubeSize;Ar(r,n*i,e>2?i:0,i,i),l.setRenderTarget(r),p&&l.render(d,o),l.render(t,o)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=c,l.autoClear=u,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===u||t.mapping===c;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Pr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Cr());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Bn(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const s=this._cubeSize;Ar(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(o,br)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),r=Mr[(e-1)%Mr.length];this._blur(t,e-1,e,n,r)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Bn(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let v=0;for(let t=0;t<20;++t){const e=t/p,n=Math.exp(-e*e/2);m.push(n),0===t?v+=n:t<f&&(v+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/v;c.envMap.value=t.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===o,s&&(c.poleAxis.value=s);const{_lodMax:g}=this;c.dTheta.value=d,c.mipInt.value=g-n;const _=this._sizeLods[r];Ar(e,3*_*(r>g-4?r-g+4:0),4*(this._cubeSize-_),3*_,2*_),a.setRenderTarget(e),a.render(u,br)}}function Er(t,e,n){const r=new Vt(t,e,n);return r.texture.mapping=p,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ar(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Cr(){return new Wn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:s,depthTest:!1,depthWrite:!1})}function Pr(){return new Wn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:s,depthTest:!1,depthWrite:!1})}function Rr(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,s=o===h||o===d,a=o===u||o===c;if(s||a){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===n&&(n=new Tr(t)),r=s?n.fromEquirectangular(i,r):n.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const o=i.image;if(s&&o&&o.height>0||a&&o&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(o)){null===n&&(n=new Tr(t));const o=s?n.fromEquirectangular(i):n.fromCubemap(i);return e.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Lr(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function kr(t,e,n,r){const i={},o=new WeakMap;function s(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const t in a.attributes)e.remove(a.attributes[t]);a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(e.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const a=new(yt(n)?dn:hn)(n,1);a.version=s;const l=o.get(t);l&&e.remove(l),o.set(t,a)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let t=0,r=n.length;t<r;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return o.get(t)}}}function Or(t,e,n,r){const i=r.isWebGL2;let o,s,a;this.setMode=function(t){o=t},this.setIndex=function(t){s=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,s,e*a),n.update(r,o,1)},this.renderInstances=function(r,l,u){if(0===u)return;let c,h;if(i)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,l,s,r*a,u),n.update(l,o,u)}}function Dr(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ir(t,e){return t[0]-e[0]}function Ur(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Fr(t,e){let n=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function Nr(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new Bt,a=[];for(let t=0;t<8;t++)a[t]=[t,0];return{update:function(l,u,c,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,f=void 0!==p?p.length:0;let m=o.get(u);if(void 0===m||m.count!==f){void 0!==m&&m.texture.dispose();const _=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,y=void 0!==u.morphAttributes.color,x=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],S=u.morphAttributes.color||[];let M=0;!0===_&&(M=1),!0===b&&(M=2),!0===y&&(M=3);let E=u.attributes.position.count*M,A=1;E>e.maxTextureSize&&(A=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const C=new Float32Array(E*A*4*f),P=new zt(C,E,A,f);P.type=T,P.needsUpdate=!0;const R=4*M;for(let k=0;k<f;k++){const O=x[k],D=w[k],I=S[k],U=E*A*4*k;for(let F=0;F<O.count;F++){const N=F*R;!0===_&&(s.fromBufferAttribute(O,F),!0===O.normalized&&Fr(s,O),C[U+N+0]=s.x,C[U+N+1]=s.y,C[U+N+2]=s.z,C[U+N+3]=0),!0===b&&(s.fromBufferAttribute(D,F),!0===D.normalized&&Fr(s,D),C[U+N+4]=s.x,C[U+N+5]=s.y,C[U+N+6]=s.z,C[U+N+7]=0),!0===y&&(s.fromBufferAttribute(I,F),!0===I.normalized&&Fr(s,I),C[U+N+8]=s.x,C[U+N+9]=s.y,C[U+N+10]=s.z,C[U+N+11]=4===I.itemSize?s.w:1)}}function L(){P.dispose(),o.delete(u),u.removeEventListener("dispose",L)}m={count:f,texture:P,size:new _t(E,A)},o.set(u,m),u.addEventListener("dispose",L)}let v=0;for(let B=0;B<d.length;B++)v+=d[B];const g=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(t,"morphTargetBaseInfluence",g),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const V=void 0===d?0:d.length;let z=r[u.id];if(void 0===z||z.length!==V){z=[];for(let K=0;K<V;K++)z[K]=[K,0];r[u.id]=z}for(let q=0;q<V;q++){const X=z[q];X[0]=q,X[1]=d[q]}z.sort(Ur);for(let Y=0;Y<8;Y++)Y<V&&z[Y][1]?(a[Y][0]=z[Y][0],a[Y][1]=z[Y][1]):(a[Y][0]=Number.MAX_SAFE_INTEGER,a[Y][1]=0);a.sort(Ir);const G=u.morphAttributes.position,H=u.morphAttributes.normal;let j=0;for(let $=0;$<8;$++){const Z=a[$],J=Z[0],Q=Z[1];J!==Number.MAX_SAFE_INTEGER&&Q?(G&&u.getAttribute("morphTarget"+$)!==G[J]&&u.setAttribute("morphTarget"+$,G[J]),H&&u.getAttribute("morphNormal"+$)!==H[J]&&u.setAttribute("morphNormal"+$,H[J]),i[$]=Q,j+=Q):(G&&!0===u.hasAttribute("morphTarget"+$)&&u.deleteAttribute("morphTarget"+$),H&&!0===u.hasAttribute("morphNormal"+$)&&u.deleteAttribute("morphNormal"+$),i[$]=0)}const W=u.morphTargetsRelative?1:1-j;h.getUniforms().setValue(t,"morphTargetBaseInfluence",W),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function Br(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const s=r.render.frame,a=t.geometry,l=e.get(t,a);return i.get(l)!==s&&(e.update(l),i.set(l,s)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const Vr=new Nt,zr=new zt,Gr=new Gt,Hr=new $n,jr=[],Wr=[],Kr=new Float32Array(16),qr=new Float32Array(9),Xr=new Float32Array(4);function Yr(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=jr[i];if(void 0===o&&(o=new Float32Array(i),jr[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function $r(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Zr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Jr(t,e){let n=Wr[e];void 0===n&&(n=new Int32Array(e),Wr[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Qr(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ti(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if($r(n,e))return;t.uniform2fv(this.addr,e),Zr(n,e)}}function ei(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if($r(n,e))return;t.uniform3fv(this.addr,e),Zr(n,e)}}function ni(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if($r(n,e))return;t.uniform4fv(this.addr,e),Zr(n,e)}}function ri(t,e){const n=this.cache,r=e.elements;if(void 0===r){if($r(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Zr(n,e)}else{if($r(n,r))return;Xr.set(r),t.uniformMatrix2fv(this.addr,!1,Xr),Zr(n,r)}}function ii(t,e){const n=this.cache,r=e.elements;if(void 0===r){if($r(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Zr(n,e)}else{if($r(n,r))return;qr.set(r),t.uniformMatrix3fv(this.addr,!1,qr),Zr(n,r)}}function oi(t,e){const n=this.cache,r=e.elements;if(void 0===r){if($r(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Zr(n,e)}else{if($r(n,r))return;Kr.set(r),t.uniformMatrix4fv(this.addr,!1,Kr),Zr(n,r)}}function si(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ai(t,e){const n=this.cache;$r(n,e)||(t.uniform2iv(this.addr,e),Zr(n,e))}function li(t,e){const n=this.cache;$r(n,e)||(t.uniform3iv(this.addr,e),Zr(n,e))}function ui(t,e){const n=this.cache;$r(n,e)||(t.uniform4iv(this.addr,e),Zr(n,e))}function ci(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function hi(t,e){const n=this.cache;$r(n,e)||(t.uniform2uiv(this.addr,e),Zr(n,e))}function di(t,e){const n=this.cache;$r(n,e)||(t.uniform3uiv(this.addr,e),Zr(n,e))}function pi(t,e){const n=this.cache;$r(n,e)||(t.uniform4uiv(this.addr,e),Zr(n,e))}function fi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Vr,i)}function mi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Gr,i)}function vi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Hr,i)}function gi(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||zr,i)}function _i(t,e){t.uniform1fv(this.addr,e)}function bi(t,e){const n=Yr(e,this.size,2);t.uniform2fv(this.addr,n)}function yi(t,e){const n=Yr(e,this.size,3);t.uniform3fv(this.addr,n)}function xi(t,e){const n=Yr(e,this.size,4);t.uniform4fv(this.addr,n)}function wi(t,e){const n=Yr(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Si(t,e){const n=Yr(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Mi(t,e){const n=Yr(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ti(t,e){t.uniform1iv(this.addr,e)}function Ei(t,e){t.uniform2iv(this.addr,e)}function Ai(t,e){t.uniform3iv(this.addr,e)}function Ci(t,e){t.uniform4iv(this.addr,e)}function Pi(t,e){t.uniform1uiv(this.addr,e)}function Ri(t,e){t.uniform2uiv(this.addr,e)}function Li(t,e){t.uniform3uiv(this.addr,e)}function ki(t,e){t.uniform4uiv(this.addr,e)}function Oi(t,e,n){const r=e.length,i=Jr(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.setTexture2D(e[t]||Vr,i[t])}function Di(t,e,n){const r=e.length,i=Jr(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.setTexture3D(e[t]||Gr,i[t])}function Ii(t,e,n){const r=e.length,i=Jr(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.setTextureCube(e[t]||Hr,i[t])}function Ui(t,e,n){const r=e.length,i=Jr(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.setTexture2DArray(e[t]||zr,i[t])}class Fi{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Qr;case 35664:return ti;case 35665:return ei;case 35666:return ni;case 35674:return ri;case 35675:return ii;case 35676:return oi;case 5124:case 35670:return si;case 35667:case 35671:return ai;case 35668:case 35672:return li;case 35669:case 35673:return ui;case 5125:return ci;case 36294:return hi;case 36295:return di;case 36296:return pi;case 35678:case 36198:case 36298:case 36306:case 35682:return fi;case 35679:case 36299:case 36307:return mi;case 35680:case 36300:case 36308:case 36293:return vi;case 36289:case 36303:case 36311:case 36292:return gi}}(e.type)}}class Ni{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return _i;case 35664:return bi;case 35665:return yi;case 35666:return xi;case 35674:return wi;case 35675:return Si;case 35676:return Mi;case 5124:case 35670:return Ti;case 35667:case 35671:return Ei;case 35668:case 35672:return Ai;case 35669:case 35673:return Ci;case 5125:return Pi;case 36294:return Ri;case 36295:return Li;case 36296:return ki;case 35678:case 36198:case 36298:case 36306:case 35682:return Oi;case 35679:case 36299:case 36307:return Di;case 35680:case 36300:case 36308:case 36293:return Ii;case 36289:case 36303:case 36311:case 36292:return Ui}}(e.type)}}class Bi{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const Vi=/(\w+)(\])?(\[|\.)?/g;function zi(t,e){t.seq.push(e),t.map[e.id]=e}function Gi(t,e,n){const r=t.name,i=r.length;for(Vi.lastIndex=0;;){const o=Vi.exec(r),s=Vi.lastIndex;let a=o[1];const l="]"===o[2],u=o[3];if(l&&(a|=0),void 0===u||"["===u&&s+2===i){zi(n,void 0===u?new Fi(a,t,e):new Ni(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new Bi(a),zi(n,t)),n=t}}}class Hi{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);Gi(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function ji(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let Wi=0;function Ki(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let t=i;t<o;t++){const i=t+1;r.push(`${i===e?">":" "} ${i}: ${n[t]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function qi(t,e){const n=function(t){switch(t){case Y:return["Linear","( value )"];case $:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xi(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yi(t){return""!==t}function $i(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Zi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ji=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qi(t){return t.replace(Ji,to)}function to(t,e){const n=lr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Qi(n)}const eo=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,no=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ro(t){return t.replace(no,oo).replace(eo,io)}function io(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),oo(t,e,n,r)}function oo(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function so(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ao(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case u:case c:e="ENVMAP_TYPE_CUBE";break;case p:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),d=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===c&&(e="ENVMAP_MODE_REFRACTION"),e}(n),f=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yi).join("\n")}(n),g=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),_=i.createProgram();let b,y,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[g].filter(Yi).join("\n"),b.length>0&&(b+="\n"),y=[v,g].filter(Yi).join("\n"),y.length>0&&(y+="\n")):(b=[so(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yi).join("\n"),y=[v,so(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?lr.tonemapping_pars_fragment:"",0!==n.toneMapping?Xi("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",lr.encodings_pars_fragment,qi("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Yi).join("\n")),s=Qi(s),s=$i(s,n),s=Zi(s,n),a=Qi(a),a=$i(a,n),a=Zi(a,n),s=ro(s),a=ro(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,y=["#define varying in",n.glslVersion===rt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===rt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const w=x+y+a,S=ji(i,35633,x+b+s),M=ji(i,35632,w);if(i.attachShader(_,S),i.attachShader(_,M),void 0!==n.index0AttributeName?i.bindAttribLocation(_,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(_).trim(),e=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(M).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(_,35714)){r=!1;const e=Ki(i,S,"vertex"),n=Ki(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:b},fragmentShader:{log:n,prefix:y}})}let T,E;return i.deleteShader(S),i.deleteShader(M),this.getUniforms=function(){return void 0===T&&(T=new Hi(i,_)),T},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let s=1;35674===r.type&&(s=2),35675===r.type&&(s=3),35676===r.type&&(s=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}(i,_)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=Wi++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=S,this.fragmentShader=M,this}let lo=0;class uo{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new co(t);e.set(t,n)}return e.get(t)}}class co{constructor(t){this.id=lo++,this.code=t,this.usedTimes=0}}function ho(t,e,n,r,s,a,l){const u=new ke,c=new uo,h=[],d=s.isWebGL2,f=s.logarithmicDepthBuffer,m=s.vertexTextures;let v=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,u,h,_,b){const y=_.fog,x=b.geometry,w=a.isMeshStandardMaterial?_.environment:null,S=(a.isMeshStandardMaterial?n:e).get(a.envMap||w),M=S&&S.mapping===p?S.image.height:null,T=g[a.type];null!==a.precision&&(v=s.getMaxPrecision(a.precision),v!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",v,"instead."));const E=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,A=void 0!==E?E.length:0;let C,P,R,L,k=0;if(void 0!==x.morphAttributes.position&&(k=1),void 0!==x.morphAttributes.normal&&(k=2),void 0!==x.morphAttributes.color&&(k=3),T){const t=cr[T];C=t.vertexShader,P=t.fragmentShader}else C=a.vertexShader,P=a.fragmentShader,c.update(a),R=c.getVertexShaderID(a),L=c.getFragmentShaderID(a);const O=t.getRenderTarget(),D=a.alphaTest>0,I=a.clearcoat>0,U=a.iridescence>0;return{isWebGL2:d,shaderID:T,shaderName:a.type,vertexShader:C,fragmentShader:P,defines:a.defines,customVertexShaderID:R,customFragmentShaderID:L,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:v,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:m,outputEncoding:null===O?t.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:Y,map:!!a.map,matcap:!!a.matcap,envMap:!!S,envMapMode:S&&S.mapping,envMapCubeUVHeight:M,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:a.normalMapType===J,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===$,clearcoat:I,clearcoatMap:I&&!!a.clearcoatMap,clearcoatRoughnessMap:I&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!a.clearcoatNormalMap,iridescence:U,iridescenceMap:U&&!!a.iridescenceMap,iridescenceThicknessMap:U&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:D,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!x.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:A,morphTextureStride:k,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===o,flipSided:a.side===i,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){u.disableAll(),e.isWebGL2&&u.enable(0),e.supportsVertexTextures&&u.enable(1),e.instancing&&u.enable(2),e.instancingColor&&u.enable(3),e.map&&u.enable(4),e.matcap&&u.enable(5),e.envMap&&u.enable(6),e.lightMap&&u.enable(7),e.aoMap&&u.enable(8),e.emissiveMap&&u.enable(9),e.bumpMap&&u.enable(10),e.normalMap&&u.enable(11),e.objectSpaceNormalMap&&u.enable(12),e.tangentSpaceNormalMap&&u.enable(13),e.clearcoat&&u.enable(14),e.clearcoatMap&&u.enable(15),e.clearcoatRoughnessMap&&u.enable(16),e.clearcoatNormalMap&&u.enable(17),e.iridescence&&u.enable(18),e.iridescenceMap&&u.enable(19),e.iridescenceThicknessMap&&u.enable(20),e.displacementMap&&u.enable(21),e.specularMap&&u.enable(22),e.roughnessMap&&u.enable(23),e.metalnessMap&&u.enable(24),e.gradientMap&&u.enable(25),e.alphaMap&&u.enable(26),e.alphaTest&&u.enable(27),e.vertexColors&&u.enable(28),e.vertexAlphas&&u.enable(29),e.vertexUvs&&u.enable(30),e.vertexTangents&&u.enable(31),e.uvsVertexOnly&&u.enable(32),e.fog&&u.enable(33),t.push(u.mask),u.disableAll(),e.useFog&&u.enable(0),e.flatShading&&u.enable(1),e.logarithmicDepthBuffer&&u.enable(2),e.skinning&&u.enable(3),e.morphTargets&&u.enable(4),e.morphNormals&&u.enable(5),e.morphColors&&u.enable(6),e.premultipliedAlpha&&u.enable(7),e.shadowMapEnabled&&u.enable(8),e.physicallyCorrectLights&&u.enable(9),e.doubleSided&&u.enable(10),e.flipSided&&u.enable(11),e.useDepthPacking&&u.enable(12),e.dithering&&u.enable(13),e.specularIntensityMap&&u.enable(14),e.specularColorMap&&u.enable(15),e.transmission&&u.enable(16),e.transmissionMap&&u.enable(17),e.thicknessMap&&u.enable(18),e.sheen&&u.enable(19),e.sheenColorMap&&u.enable(20),e.sheenRoughnessMap&&u.enable(21),e.decodeVideoTexture&&u.enable(22),e.opaque&&u.enable(23),t.push(u.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=g[t.type];let n;if(e){const t=cr[e];n=jn.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=h.length;t<e;t++){const e=h[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new ao(t,n,e,a),h.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}},releaseShaderCache:function(t){c.remove(t)},programs:h,dispose:function(){c.dispose()}}}function po(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function fo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function mo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function vo(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,s,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,s,a,l,u){const c=o(t,e,s,a,l,u);s.transmission>0?r.push(c):!0===s.transparent?i.push(c):n.push(c)},unshift:function(t,e,s,a,l,u){const c=o(t,e,s,a,l,u);s.transmission>0?r.unshift(c):!0===s.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||fo),r.length>1&&r.sort(e||mo),i.length>1&&i.sort(e||mo)}}}function go(){let t=new WeakMap;return{get:function(e,n){let r;return!1===t.has(e)?(r=new vo,t.set(e,[r])):n>=t.get(e).length?(r=new vo,t.get(e).push(r)):r=t.get(e)[n],r},dispose:function(){t=new WeakMap}}}function _o(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new jt,color:new kt};break;case"SpotLight":n={position:new jt,direction:new jt,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new jt,color:new kt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new jt,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":n={color:new kt,position:new jt,halfWidth:new jt,halfHeight:new jt}}return t[e.id]=n,n}}}let bo=0;function yo(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function xo(t,e){const n=new _o,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)i.probe.push(new jt);const o=new jt,s=new xe,a=new xe;return{setup:function(o,s){let a=0,l=0,u=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,h=0,d=0,p=0,f=0,m=0,v=0,g=0;o.sort(yo);const _=!0!==s?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],s=e.color,b=e.intensity,y=e.distance,x=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=s.r*b*_,l+=s.g*b*_,u+=s.b*b*_;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=x,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(b*_),t.distance=y,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=x,i.spotShadowMatrix[d]=e.shadow.matrix,g++}i.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=x,i.pointShadowMatrix[h]=e.shadow.matrix,v++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*_),t.groundColor.copy(e.groundColor).multiplyScalar(b*_),i.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=ur.LTC_FLOAT_1,i.rectAreaLTC2=ur.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=ur.LTC_HALF_1,i.rectAreaLTC2=ur.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=u;const b=i.hash;b.directionalLength===c&&b.pointLength===h&&b.spotLength===d&&b.rectAreaLength===p&&b.hemiLength===f&&b.numDirectionalShadows===m&&b.numPointShadows===v&&b.numSpotShadows===g||(i.directional.length=c,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=v,i.spotShadowMatrix.length=g,b.directionalLength=c,b.pointLength=h,b.spotLength=d,b.rectAreaLength=p,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=v,b.numSpotShadows=g,i.version=bo++)},setupView:function(t,e){let n=0,r=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(d.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const t=i.rectArea[u];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),a.identity(),s.copy(d.matrixWorld),s.premultiply(h),a.extractRotation(s),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),u++}else if(d.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const t=i.hemi[c];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(h),c++}}},state:i}}function wo(t,e){const n=new xo(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function So(t,e){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new wo(t,e),n.set(r,[o])):i>=n.get(r).length?(o=new wo(t,e),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class Mo extends sn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class To extends sn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new jt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Eo(t,e,n){let a=new ir;const l=new _t,u=new _t,c=new Bt,h=new Mo({depthPacking:Z}),d=new To,p={},f=n.maxTextureSize,m={0:i,1:r,2:o},v=new Wn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _t},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new xn;b.setAttribute("position",new cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Bn(b,v),x=this;function w(n,r){const i=e.update(y);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Vt(l.x,l.y)),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,v,y,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,_,y,null)}function S(e,n,r,i,o,s){let a=null;const l=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(a=void 0!==l?l:!0===r.isPointLight?d:h,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const t=a.uuid,e=n.uuid;let r=p[t];void 0===r&&(r={},p[t]=r);let i=r[e];void 0===i&&(i=a.clone(),r[e]=i),a=i}return a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===s?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:m[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(a.referencePosition.setFromMatrixPosition(r.matrixWorld),a.nearDistance=i,a.farDistance=o),a}function M(n,r,i,o,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||a.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);const r=e.update(n),a=n.material;if(Array.isArray(a)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],c=a[u.materialIndex];if(c&&c.visible){const e=S(n,c,o,i.near,i.far,s);t.renderBufferDirect(i,null,r,e,n,u)}}}else if(a.visible){const e=S(n,a,o,i.near,i.far,s);t.renderBufferDirect(i,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)M(l[t],r,i,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,r){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===e.length)return;const i=t.getRenderTarget(),o=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(s),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.shadow;if(void 0===s){console.warn("THREE.WebGLShadowMap:",o,"has no shadow.");continue}if(!1===s.autoUpdate&&!1===s.needsUpdate)continue;l.copy(s.mapSize);const h=s.getFrameExtents();if(l.multiply(h),u.copy(s.mapSize),(l.x>f||l.y>f)&&(l.x>f&&(u.x=Math.floor(f/h.x),l.x=u.x*h.x,s.mapSize.x=u.x),l.y>f&&(u.y=Math.floor(f/h.y),l.y=u.y*h.y,s.mapSize.y=u.y)),null===s.map){const t=3!==this.type?{minFilter:g,magFilter:g}:{};s.map=new Vt(l.x,l.y,t),s.map.texture.name=o.name+".shadowMap",s.camera.updateProjectionMatrix()}t.setRenderTarget(s.map),t.clear();const p=s.getViewportCount();for(let t=0;t<p;t++){const e=s.getViewport(t);c.set(u.x*e.x,u.y*e.y,u.x*e.z,u.y*e.w),d.viewport(c),s.updateMatrices(o,t),a=s.getFrustum(),M(n,r,s.camera,o,this.type)}!0!==s.isPointLightShadow&&3===this.type&&w(s,r),s.needsUpdate=!1}x.needsUpdate=!1,t.setRenderTarget(i,o,h)}}function Ao(t,e,n){const r=n.isWebGL2,u=new function(){let e=!1;const n=new Bt;let r=null;const i=new Bt(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s,a){!0===a&&(e*=s,r*=s,o*=s),n.set(e,r,o,s),!1===i.equals(n)&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},c=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?W(2929):K(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},h=new function(){let e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,u=null;return{setTest:function(t){e||(t?W(2960):K(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&l===r||(t.stencilOp(e,n,r),s=e,a=n,l=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,u=null}}},d=new WeakMap,p=new WeakMap;let f={},m={},v=new WeakMap,g=[],_=null,b=!1,y=null,x=null,w=null,S=null,M=null,T=null,E=null,A=!1,C=null,P=null,R=null,L=null,k=null;const O=t.getParameter(35661);let D=!1,I=0;const U=t.getParameter(7938);-1!==U.indexOf("WebGL")?(I=parseFloat(/^WebGL (\d)/.exec(U)[1]),D=I>=1):-1!==U.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),D=I>=2);let F=null,N={};const B=t.getParameter(3088),V=t.getParameter(2978),z=(new Bt).fromArray(B),G=(new Bt).fromArray(V);function H(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,i);return o}const j={};function W(e){!0!==f[e]&&(t.enable(e),f[e]=!0)}function K(e){!1!==f[e]&&(t.disable(e),f[e]=!1)}j[3553]=H(3553,3553,1),j[34067]=H(34067,34069,6),u.setClear(0,0,0,1),c.setClear(1),h.setClear(0),W(2929),c.setFunc(3),$(!1),Z(1),W(2884),Y(s);const q={[l]:32774,101:32778,102:32779};if(r)q[103]=32775,q[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(q[103]=t.MIN_EXT,q[104]=t.MAX_EXT)}const X={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Y(e,n,r,i,o,u,c,h){if(e!==s){if(!1===b&&(W(3042),b=!0),5===e)o=o||n,u=u||r,c=c||i,n===x&&o===M||(t.blendEquationSeparate(q[n],q[o]),x=n,M=o),r===w&&i===S&&u===T&&c===E||(t.blendFuncSeparate(X[r],X[i],X[u],X[c]),w=r,S=i,T=u,E=c),y=e,A=null;else if(e!==y||h!==A){if(x===l&&M===l||(t.blendEquation(32774),x=l,M=l),h)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case a:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case a:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}w=null,S=null,T=null,E=null,y=e,A=h}}else!0===b&&(K(3042),b=!1)}function $(e){C!==e&&(e?t.frontFace(2304):t.frontFace(2305),C=e)}function Z(e){0!==e?(W(2884),e!==P&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):K(2884),P=e}function J(e,n,r){e?(W(32823),L===n&&k===r||(t.polygonOffset(n,r),L=n,k=r)):K(32823)}function Q(e){void 0===e&&(e=33984+O-1),F!==e&&(t.activeTexture(e),F=e)}return{buffers:{color:u,depth:c,stencil:h},enable:W,disable:K,bindFramebuffer:function(e,n){return m[e]!==n&&(t.bindFramebuffer(e,n),m[e]=n,r&&(36009===e&&(m[36160]=n),36160===e&&(m[36009]=n)),!0)},drawBuffers:function(r,i){let o=g,s=!1;if(r)if(o=v.get(i),void 0===o&&(o=[],v.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,n=t.length;e<n;e++)o[e]=36064+e;o.length=t.length,s=!0}}else 36064!==o[0]&&(o[0]=36064,s=!0);else 1029!==o[0]&&(o[0]=1029,s=!0);s&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(e){return _!==e&&(t.useProgram(e),_=e,!0)},setBlending:Y,setMaterial:function(t,e){t.side===o?K(2884):W(2884);let n=t.side===i;e&&(n=!n),$(n),1===t.blending&&!1===t.transparent?Y(s):Y(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),u.setMask(t.colorWrite);const r=t.stencilWrite;h.setTest(r),r&&(h.setMask(t.stencilWriteMask),h.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),h.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),J(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?W(32926):K(32926)},setFlipSided:$,setCullFace:Z,setLineWidth:function(e){e!==R&&(D&&t.lineWidth(e),R=e)},setPolygonOffset:J,setScissorTest:function(t){t?W(3089):K(3089)},activeTexture:Q,bindTexture:function(e,n){null===F&&Q();let r=N[F];void 0===r&&(r={type:void 0,texture:void 0},N[F]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||j[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=N[F];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=p.get(n);void 0===r&&(r=new WeakMap,p.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=p.get(n).get(e);d.get(e)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),d.set(e,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===z.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),z.copy(e))},viewport:function(e){!1===G.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),G.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},F=null,N={},m={},v=new WeakMap,g=[],_=null,b=!1,y=null,x=null,w=null,S=null,M=null,T=null,E=null,A=!1,C=null,P=null,R=null,L=null,k=null,z.set(0,0,t.canvas.width,t.canvas.height),G.set(0,0,t.canvas.width,t.canvas.height),u.reset(),c.reset(),h.reset()}}}function Co(t,e,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),L=new WeakMap;let k;const O=new WeakMap;let D=!1;try{D="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function I(t,e){return D?new OffscreenCanvas(t,e):xt("canvas")}function U(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?vt:Math.floor,o=r(i*t.width),s=r(i*t.height);void 0===k&&(k=I(o,s));const a=n?I(o,s):k;return a.width=o,a.height=s,a.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function F(t){return ft(t.width)&&ft(t.height)}function N(t,e){return t.generateMipmaps&&e&&t.minFilter!==g&&t.minFilter!==y}function B(e){t.generateMipmap(e)}function V(n,r,i,o,s=!1){if(!1===a)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===$&&!1===s?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function z(t,e,n){return!0===N(t,n)||t.isFramebufferTexture&&t.minFilter!==g&&t.minFilter!==y?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function G(t){return t===g||t===_||t===b?9728:9729}function H(t){const e=t.target;e.removeEventListener("dispose",H),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=O.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&W(t),0===Object.keys(i).length&&O.delete(n)}r.remove(t)}(e),e.isVideoTexture&&L.delete(e)}function j(e){const n=e.target;n.removeEventListener("dispose",j),function(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),s.memory.textures--),r.remove(n[e])}r.remove(n),r.remove(e)}(n)}function W(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete O.get(i)[n.__cacheKey],s.memory.textures--}let K=0;function q(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=s.render.frame;L.get(t)!==e&&(L.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void tt(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}const X={[f]:10497,[m]:33071,[v]:33648},Z={[g]:9728,[_]:9984,[b]:9986,[y]:9729,[x]:9985,[w]:9987};function J(n,o,s){if(s?(t.texParameteri(n,10242,X[o.wrapS]),t.texParameteri(n,10243,X[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,X[o.wrapR]),t.texParameteri(n,10240,Z[o.magFilter]),t.texParameteri(n,10241,Z[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===m&&o.wrapT===m||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,G(o.magFilter)),t.texParameteri(n,10241,G(o.minFilter)),o.minFilter!==g&&o.minFilter!==y&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(o.type===T&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&o.type===E&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function Q(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",H));const i=n.source;let o=O.get(i);void 0===o&&(o={},O.set(i,o));const a=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&W(n)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return r}function tt(e,r,i){let s=3553;r.isDataArrayTexture&&(s=35866),r.isData3DTexture&&(s=32879);const l=Q(e,r),u=r.source;if(n.activeTexture(33984+i),n.bindTexture(s,e.__webglTexture),u.version!==u.__currentVersion||!0===l){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!a&&(t.wrapS!==m||t.wrapT!==m||t.minFilter!==g&&t.minFilter!==y)}(r)&&!1===F(r.image);let i=U(r.image,e,!1,c);i=at(r,i);const h=F(i)||a,d=o.convert(r.format,r.encoding);let p,f=o.convert(r.type),v=V(r.internalFormat,d,f,r.encoding,r.isVideoTexture);J(s,r,h);const _=r.mipmaps,b=a&&!0!==r.isVideoTexture,x=void 0===u.__currentVersion||!0===l,w=z(r,i,h);if(r.isDepthTexture)v=6402,a?v=r.type===T?36012:r.type===M?33190:r.type===A?35056:33189:r.type===T&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===P&&6402===v&&1012!==r.type&&r.type!==M&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=M,f=o.convert(r.type)),r.format===R&&6402===v&&(v=34041,r.type!==A&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=A,f=o.convert(r.type))),x&&(b?n.texStorage2D(3553,1,v,i.width,i.height):n.texImage2D(3553,0,v,i.width,i.height,0,d,f,null));else if(r.isDataTexture)if(_.length>0&&h){b&&x&&n.texStorage2D(3553,w,v,_[0].width,_[0].height);for(let t=0,e=_.length;t<e;t++)p=_[t],b?n.texSubImage2D(3553,t,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,t,v,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1}else b?(x&&n.texStorage2D(3553,w,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,d,f,i.data)):n.texImage2D(3553,0,v,i.width,i.height,0,d,f,i.data);else if(r.isCompressedTexture){b&&x&&n.texStorage2D(3553,w,v,_[0].width,_[0].height);for(let t=0,e=_.length;t<e;t++)p=_[t],r.format!==C?null!==d?b?n.compressedTexSubImage2D(3553,t,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(3553,t,v,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(3553,t,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,t,v,p.width,p.height,0,d,f,p.data)}else if(r.isDataArrayTexture)b?(x&&n.texStorage3D(35866,w,v,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(35866,0,v,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isData3DTexture)b?(x&&n.texStorage3D(32879,w,v,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(32879,0,v,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isFramebufferTexture){if(x)if(b)n.texStorage2D(3553,w,v,i.width,i.height);else{let t=i.width,e=i.height;for(let r=0;r<w;r++)n.texImage2D(3553,r,v,t,e,0,d,f,null),t>>=1,e>>=1}}else if(_.length>0&&h){b&&x&&n.texStorage2D(3553,w,v,_[0].width,_[0].height);for(let t=0,e=_.length;t<e;t++)p=_[t],b?n.texSubImage2D(3553,t,0,0,d,f,p):n.texImage2D(3553,t,v,d,f,p);r.generateMipmaps=!1}else b?(x&&n.texStorage2D(3553,w,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,d,f,i)):n.texImage2D(3553,0,v,d,f,i);N(r,h)&&B(s),u.__currentVersion=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function et(e,i,s,a,l){const u=o.convert(s.format,s.encoding),c=o.convert(s.type),h=V(s.internalFormat,u,c,s.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,e),st(i)?d.framebufferTexture2DMultisampleEXT(36160,a,l,r.get(s).__webglTexture,0,ot(i)):t.framebufferTexture2D(36160,a,l,r.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function nt(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||st(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===T?i=36012:e.type===M&&(i=33190));const r=ot(n);st(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=ot(n);r&&!1===st(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):st(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const s=e[i],a=o.convert(s.format,s.encoding),l=o.convert(s.type),u=V(s.internalFormat,a,l,s.encoding),c=ot(n);r&&!1===st(n)?t.renderbufferStorageMultisample(36161,c,u,n.width,n.height):st(n)?d.renderbufferStorageMultisampleEXT(36161,c,u,n.width,n.height):t.renderbufferStorage(36161,u,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function rt(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),q(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,s=ot(i);if(i.depthTexture.format===P)st(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==R)throw new Error("Unknown depthTexture format");st(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):t.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),nt(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),nt(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function ot(t){return Math.min(h,t.samples)}function st(t){const n=r.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function at(t,n){const r=t.encoding,i=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===it||r!==Y&&(r===$?!1===a?!0===e.has("EXT_sRGB")&&i===C?(t.format=it,t.minFilter=y,t.generateMipmaps=!1):n=Dt.sRGBToLinear(n):i===C&&o===S||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const t=K;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),K+=1,t},this.resetTextureUnits=function(){K=0},this.setTexture2D=q,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?tt(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?tt(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,i){const s=r.get(e);e.version>0&&s.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;const s=Q(e,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),l.version!==l.__currentVersion||!0===s){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,c=[];for(let t=0;t<6;t++)c[t]=e||i?i?r.image[t].image:r.image[t]:U(r.image[t],!1,!0,u),c[t]=at(r,c[t]);const h=c[0],d=F(h)||a,p=o.convert(r.format,r.encoding),f=o.convert(r.type),m=V(r.internalFormat,p,f,r.encoding),v=a&&!0!==r.isVideoTexture,g=void 0===l.__currentVersion||!0===s;let _,b=z(r,h,d);if(J(34067,r,d),e){v&&g&&n.texStorage2D(34067,b,m,h.width,h.height);for(let t=0;t<6;t++){_=c[t].mipmaps;for(let e=0;e<_.length;e++){const i=_[e];r.format!==C?null!==p?v?n.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(34069+t,e,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+t,e,m,i.width,i.height,0,p,f,i.data)}}}else{_=r.mipmaps,v&&g&&(_.length>0&&b++,n.texStorage2D(34067,b,m,c[0].width,c[0].height));for(let t=0;t<6;t++)if(i){v?n.texSubImage2D(34069+t,0,0,0,c[t].width,c[t].height,p,f,c[t].data):n.texImage2D(34069+t,0,m,c[t].width,c[t].height,0,p,f,c[t].data);for(let e=0;e<_.length;e++){const r=_[e].image[t].image;v?n.texSubImage2D(34069+t,e+1,0,0,r.width,r.height,p,f,r.data):n.texImage2D(34069+t,e+1,m,r.width,r.height,0,p,f,r.data)}}else{v?n.texSubImage2D(34069+t,0,0,0,p,f,c[t]):n.texImage2D(34069+t,0,m,p,f,c[t]);for(let e=0;e<_.length;e++){const r=_[e];v?n.texSubImage2D(34069+t,e+1,0,0,p,f,r.image[t]):n.texImage2D(34069+t,e+1,m,p,f,r.image[t])}}}N(r,d)&&B(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(s,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture))},this.rebindTextures=function(t,e,n){const i=r.get(t);void 0!==e&&et(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&rt(t)},this.setupRenderTarget=function(e){const l=e.texture,u=r.get(e),c=r.get(l);e.addEventListener("dispose",j),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=F(e)||a;if(h){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(u.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&e.samples>0&&!1===st(e)){const r=d?l:[l];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];u.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer[n]);const s=o.convert(i.format,i.encoding),a=o.convert(i.type),l=V(i.internalFormat,s,a,i.encoding),c=ot(e);t.renderbufferStorageMultisample(36161,c,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,u.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),nt(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,c.__webglTexture),J(34067,l,p);for(let t=0;t<6;t++)et(u.__webglFramebuffer[t],e,l,36064,34069+t);N(l,p)&&B(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=r.get(o);n.bindTexture(3553,s.__webglTexture),J(3553,o,p),et(u.__webglFramebuffer,e,o,36064+i,3553),N(o,p)&&B(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,c.__webglTexture),J(t,l,p),et(u.__webglFramebuffer,e,l,36064,t),N(l,p)&&B(t),n.unbindTexture()}e.depthBuffer&&rt(e)},this.updateRenderTargetMipmap=function(t){const e=F(t)||a,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,s=i.length;o<s;o++){const s=i[o];if(N(s,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(s).__webglTexture;n.bindTexture(e,i),B(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(a&&e.samples>0&&!1===st(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,s=e.height;let a=16384;const l=[],u=e.stencilBuffer?33306:36096,c=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),e.depthBuffer&&l.push(u);const d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024)),h&&t.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(36008,[u]),t.invalidateFramebuffer(36009,[u])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,o,s,0,0,o,s,a,9728),p&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,c.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,o,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=et,this.useMultisampledRTT=st}function Po(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===S)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(n===M)return 5125;if(n===T)return 5126;if(n===E)return r?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===C)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(n===P)return 6402;if(n===R)return 34041;if(n===L)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===it)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(n===k)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===O||n===D||n===I||n===U)if(i===$){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===O)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===D)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===I)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===U)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===O)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===D)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===I)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===U)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===F||35841===n||n===N||35843===n){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===F)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===N)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===B)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===V||n===z){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===V)return i===$?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===z)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===G||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===G)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===$?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===H){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===H)return i===$?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===A?r?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class Ro extends qn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Lo extends Ke{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ko={type:"move"};class Oo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new jt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new jt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new jt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new jt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const t=new Lo;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[r.jointName]=t,l.add(t)}const i=l.joints[r.jointName];null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,u=.005;l.inputState.pinching&&s>a+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=a-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(ko)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class Do extends Nt{constructor(t,e,n,r,i,o,s,a,l,u){if((u=void 0!==u?u:P)!==P&&u!==R)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===P&&(n=M),void 0===n&&u===R&&(n=A),super(null,r,i,o,s,a,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:g,this.minFilter=void 0!==a?a:g,this.flipY=!1,this.generateMipmaps=!1}}class Io extends ot{constructor(t,e){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=null,l=null,u=null,c=null,h=null,d=null;const p=e.getContextAttributes();let f=null,m=null;const v=[],g=[],_=new qn;_.layers.enable(1),_.viewport=new Bt;const b=new qn;b.layers.enable(2),b.viewport=new Bt;const y=[_,b],x=new Ro;x.layers.enable(1),x.layers.enable(2);let w=null,T=null;function E(t){const e=g.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function L(){r.removeEventListener("select",E),r.removeEventListener("selectstart",E),r.removeEventListener("selectend",E),r.removeEventListener("squeeze",E),r.removeEventListener("squeezestart",E),r.removeEventListener("squeezeend",E),r.removeEventListener("end",L),r.removeEventListener("inputsourceschange",k);for(let t=0;t<v.length;t++){const e=g[t];null!==e&&(g[t]=null,v[t].disconnect(e))}w=null,T=null,t.setRenderTarget(f),h=null,c=null,u=null,r=null,m=null,F.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=g.indexOf(n);r>=0&&(g[r]=null,v[r].dispatchEvent({type:"disconnected",data:n}))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=g.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=g.length){g.push(n),r=t;break}if(null===g[t]){g[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new Oo,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new Oo,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new Oo,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||o},this.setReferenceSpace=function(t){a=t},this.getBaseLayer=function(){return null!==c?c:h},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(f=t.getRenderTarget(),r.addEventListener("select",E),r.addEventListener("selectstart",E),r.addEventListener("selectend",E),r.addEventListener("squeeze",E),r.addEventListener("squeezestart",E),r.addEventListener("squeezeend",E),r.addEventListener("end",L),r.addEventListener("inputsourceschange",k),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:h}),m=new Vt(h.framebufferWidth,h.framebufferHeight,{format:C,type:S,encoding:t.outputEncoding})}else{let n=null,o=null,s=null;p.depth&&(s=p.stencil?35056:33190,n=p.stencil?R:P,o=p.stencil?A:M);const a={colorFormat:32856,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,e),c=u.createProjectionLayer(a),r.updateRenderState({layers:[c]}),m=new Vt(c.textureWidth,c.textureHeight,{format:C,type:S,depthTexture:new Do(c.textureWidth,c.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0}),t.properties.get(m).__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),a=null,o=await r.requestReferenceSpace(s),F.setContext(r),F.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const O=new jt,D=new jt;function I(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;x.near=b.near=_.near=t.near,x.far=b.far=_.far=t.far,w===x.near&&T===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,T=x.far);const e=t.parent,n=x.cameras;I(x,e);for(let t=0;t<n.length;t++)I(n[t],e);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),t.position.copy(x.position),t.quaternion.copy(x.quaternion),t.scale.copy(x.scale),t.matrix.copy(x.matrix),t.matrixWorld.copy(x.matrixWorld);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){O.setFromMatrixPosition(e.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const r=O.distanceTo(D),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=s*c,p=s*h,f=r/(-c+h),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const v=s+f,g=a+f,_=d-m,b=p+(r-m),y=l*a/g*v,x=u*a/g*v;t.projectionMatrix.makePerspective(_,b,y,x,v,g)}(x,_,b):x.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)};let U=null;const F=new or;F.setAnimationLoop(function(e,n){if(l=n.getViewerPose(a||o),d=n,null!==l){const e=l.views;null!==h&&(t.setRenderTargetFramebuffer(m,h.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==h)o=h.getViewport(i);else{const e=u.getViewSubImage(c,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(m,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let s=y[r];void 0===s&&(s=new qn,s.layers.enable(r),s.viewport=new Bt,y[r]=s),s.matrix.fromArray(i.transform.matrix),s.projectionMatrix.fromArray(i.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&x.matrix.copy(s.matrix),!0===n&&x.cameras.push(s)}}for(let t=0;t<v.length;t++){const e=g[t],r=v[t];null!==e&&void 0!==r&&r.update(e,n,a||o)}U&&U(e,n),d=null}),this.setAnimationLoop=function(t){U=t},this.dispose=function(){}}}function Uo(t,e){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===i&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===i&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const o=e.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e}let s,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.roughnessMap?s=r.roughnessMap:r.metalnessMap?s=r.metalnessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap?s=r.emissiveMap:r.clearcoatMap?s=r.clearcoatMap:r.clearcoatNormalMap?s=r.clearcoatNormalMap:r.clearcoatRoughnessMap?s=r.clearcoatRoughnessMap:r.iridescenceMap?s=r.iridescenceMap:r.iridescenceThicknessMap?s=r.iridescenceThicknessMap:r.specularIntensityMap?s=r.specularIntensityMap:r.specularColorMap?s=r.specularColorMap:r.transmissionMap?s=r.transmissionMap:r.thicknessMap?s=r.thicknessMap:r.sheenColorMap?s=r.sheenColorMap:r.sheenRoughnessMap&&(s=r.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,o,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(t,r):r.isMeshToonMaterial?(n(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(n(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(n(t,r),function(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===i&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap)),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,r,a)):r.isMeshMatcapMaterial?(n(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?n(t,r):r.isMeshDistanceMaterial?(n(t,r),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?n(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,o,s):r.isSpriteMaterial?function(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Fo(t,e,n,r){let i={},o={},s=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(t,e,n){const r=t.value;if(void 0===n[e])return n[e]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=n[e];if(!1===t.equals(r))return t.copy(r),!0}return!1}function u(t){const e=t.value,n={boundary:0,storage:0};return"number"==typeof e?(n.boundary=4,n.storage=4):e.isVector2?(n.boundary=8,n.storage=8):e.isVector3||e.isColor?(n.boundary=16,n.storage=12):e.isVector4?(n.boundary=16,n.storage=16):e.isMatrix3?(n.boundary=48,n.storage=48):e.isMatrix4?(n.boundary=64,n.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),n}function c(e){const n=e.target;n.removeEventListener("dispose",c);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,h){let d=i[n.id];void 0===d&&(function(t){const e=t.uniforms;let n=0;let r=0;for(let t=0,i=e.length;t<i;t++){const i=e[t],o=u(i);if(i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,t>0){r=n%16;0!==r&&16-r-o.boundary<0&&(n+=16-r,i.__offset=n)}n+=o.storage}r=n%16,r>0&&(n+=16-r),t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<a;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,i,o),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));const p=h.program;r.updateUBOMapping(n,p);const f=e.render.frame;o[n.id]!==f&&(function(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(35345,n);for(let e=0,n=r.length;e<n;e++){const n=r[e];if(!0===l(n,e,o)){const e=n.value,r=n.__offset;"number"==typeof e?(n.__data[0]=e,t.bufferSubData(35345,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):e.toArray(n.__data),t.bufferSubData(35345,r,n.__data))}}t.bindBuffer(35345,null)}(n),o[n.id]=f)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},o={}}}}function No(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:function(){const t=xt("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,s=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,l=void 0!==t.antialias&&t.antialias,u=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",d=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let p;p=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let f=null,m=null;const v=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Y,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const _=this;let b=!1,y=0,x=0,M=null,A=-1,P=null;const R=new Bt,L=new Bt;let k=null,O=e.width,D=e.height,I=1,U=null,F=null;const N=new Bt(0,0,O,D),B=new Bt(0,0,O,D);let V=!1;const z=new ir;let G=!1,H=!1,j=null;const W=new xe,K=new _t,q=new jt,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===M?I:1}let Z,J,Q,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,ht,dt,pt,ft,mt,gt,bt,yt,wt,St,Mt=n;function Tt(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:s,stencil:a,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r143"),e.addEventListener("webglcontextlost",Ct,!1),e.addEventListener("webglcontextrestored",Pt,!1),e.addEventListener("webglcontextcreationerror",Rt,!1),null===Mt){const e=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&e.shift(),Mt=Tt(e,t),null===Mt)throw Tt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Mt.getShaderPrecisionFormat&&(Mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Et(){Z=new Lr(Mt),J=new fr(Mt,Z,t),Z.init(J),yt=new Po(Mt,Z,J),Q=new Ao(Mt,Z,J),tt=new Dr,et=new po,nt=new Co(Mt,Z,Q,et,J,yt,tt),rt=new vr(_),it=new Rr(_),ot=new sr(Mt,J),wt=new dr(Mt,Z,ot,J),st=new kr(Mt,ot,tt,wt),at=new Br(Mt,st,ot,tt),mt=new Nr(Mt,J,nt),dt=new mr(et),lt=new ho(_,rt,it,Z,J,wt,dt),ut=new Uo(_,et),ct=new go,ht=new So(Z,J),ft=new hr(_,rt,Q,at,p,u),pt=new Eo(_,at,J),St=new Fo(Mt,tt,J,Q),gt=new pr(Mt,Z,tt,J),bt=new Or(Mt,Z,tt,J),tt.programs=lt.programs,_.capabilities=J,_.extensions=Z,_.properties=et,_.renderLists=ct,_.shadowMap=pt,_.state=Q,_.info=tt}Et();const At=new Io(_,Mt);function Ct(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Pt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=tt.autoReset,e=pt.enabled,n=pt.autoUpdate,r=pt.needsUpdate,i=pt.type;Et(),tt.autoReset=t,pt.enabled=e,pt.autoUpdate=n,pt.needsUpdate=r,pt.type=i}function Rt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Lt(t){const e=t.target;e.removeEventListener("dispose",Lt),function(t){(function(t){const e=et.get(t).programs;void 0!==e&&(e.forEach(function(t){lt.releaseProgram(t)}),t.isShaderMaterial&&lt.releaseShaderCache(t))})(t),et.remove(t)}(e)}this.xr=At,this.getContext=function(){return Mt},this.getContextAttributes=function(){return Mt.getContextAttributes()},this.forceContextLoss=function(){const t=Z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(t){void 0!==t&&(I=t,this.setSize(O,D,!1))},this.getSize=function(t){return t.set(O,D)},this.setSize=function(t,n,r){At.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=t,D=n,e.width=Math.floor(t*I),e.height=Math.floor(n*I),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(O*I,D*I).floor()},this.setDrawingBufferSize=function(t,n,r){O=t,D=n,I=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(R)},this.getViewport=function(t){return t.copy(N)},this.setViewport=function(t,e,n,r){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,n,r),Q.viewport(R.copy(N).multiplyScalar(I).floor())},this.getScissor=function(t){return t.copy(B)},this.setScissor=function(t,e,n,r){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,r),Q.scissor(L.copy(B).multiplyScalar(I).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(t){Q.setScissorTest(V=t)},this.setOpaqueSort=function(t){U=t},this.setTransparentSort=function(t){F=t},this.getClearColor=function(t){return t.copy(ft.getClearColor())},this.setClearColor=function(){ft.setClearColor.apply(ft,arguments)},this.getClearAlpha=function(){return ft.getClearAlpha()},this.setClearAlpha=function(){ft.setClearAlpha.apply(ft,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),Mt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ct,!1),e.removeEventListener("webglcontextrestored",Pt,!1),e.removeEventListener("webglcontextcreationerror",Rt,!1),ct.dispose(),ht.dispose(),et.dispose(),rt.dispose(),it.dispose(),at.dispose(),wt.dispose(),St.dispose(),lt.dispose(),At.dispose(),At.removeEventListener("sessionstart",Ot),At.removeEventListener("sessionend",Dt),j&&(j.dispose(),j=null),It.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=X);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=function(t,e,n,r,i){!0!==e.isScene&&(e=X),nt.resetTextureUnits();const o=e.fog,s=r.isMeshStandardMaterial?e.environment:null,a=null===M?_.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:Y,l=(r.isMeshStandardMaterial?it:rt).get(r.envMap||s),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,f=r.toneMapped?_.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==v?v.length:0,b=et.get(r),y=m.state.lights;if(!0===G&&(!0===H||t!==P)){const e=t===P&&r.id===A;dt.setState(r,t,e)}let x=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==y.state.version||b.outputEncoding!==a||i.isInstancedMesh&&!1===b.instancing?x=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?x=!0:i.isSkinnedMesh||!0!==b.skinning?b.envMap!==l||!0===r.fog&&b.fog!==o?x=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===dt.numPlanes&&b.numIntersection===dt.numIntersection?(b.vertexAlphas!==u||b.vertexTangents!==c||b.morphTargets!==h||b.morphNormals!==d||b.morphColors!==p||b.toneMapping!==f||!0===J.isWebGL2&&b.morphTargetsCount!==g)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,b.__version=r.version);let w=b.currentProgram;!0===x&&(w=Gt(r,e,i));let S=!1,T=!1,E=!1;const C=w.getUniforms(),R=b.uniforms;if(Q.useProgram(w.program)&&(S=!0,T=!0,E=!0),r.id!==A&&(A=r.id,T=!0),S||P!==t){if(C.setValue(Mt,"projectionMatrix",t.projectionMatrix),J.logarithmicDepthBuffer&&C.setValue(Mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),P!==t&&(P=t,T=!0,E=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=C.map.cameraPosition;void 0!==e&&e.setValue(Mt,q.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(Mt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&C.setValue(Mt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){C.setOptional(Mt,i,"bindMatrix"),C.setOptional(Mt,i,"bindMatrixInverse");const t=i.skeleton;t&&(J.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),C.setValue(Mt,"boneTexture",t.boneTexture,nt),C.setValue(Mt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const L=n.morphAttributes;var k,O;if((void 0!==L.position||void 0!==L.normal||void 0!==L.color&&!0===J.isWebGL2)&&mt.update(i,n,r,w),(T||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,C.setValue(Mt,"receiveShadow",i.receiveShadow)),T&&(C.setValue(Mt,"toneMappingExposure",_.toneMappingExposure),b.needsLights&&(O=E,(k=R).ambientLightColor.needsUpdate=O,k.lightProbe.needsUpdate=O,k.directionalLights.needsUpdate=O,k.directionalLightShadows.needsUpdate=O,k.pointLights.needsUpdate=O,k.pointLightShadows.needsUpdate=O,k.spotLights.needsUpdate=O,k.spotLightShadows.needsUpdate=O,k.rectAreaLights.needsUpdate=O,k.hemisphereLights.needsUpdate=O),o&&!0===r.fog&&ut.refreshFogUniforms(R,o),ut.refreshMaterialUniforms(R,r,I,D,j),Hi.upload(Mt,b.uniformsList,R,nt)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Hi.upload(Mt,b.uniformsList,R,nt),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&C.setValue(Mt,"center",i.center),C.setValue(Mt,"modelViewMatrix",i.modelViewMatrix),C.setValue(Mt,"normalMatrix",i.normalMatrix),C.setValue(Mt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(J.isWebGL2){const n=t[e];St.update(n,w),St.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}(t,e,n,r,i);Q.setMaterial(r,s);let l=n.index;const u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let c,h=1;!0===r.wireframe&&(l=st.getWireframeAttribute(n),h=2),wt.setup(i,r,a,n,l);let d=gt;null!==l&&(c=ot.get(l),d=bt,d.setIndex(c));const p=null!==l?l.count:u.count,f=n.drawRange.start*h,v=n.drawRange.count*h,g=null!==o?o.start*h:0,b=null!==o?o.count*h:1/0,y=Math.max(f,g),x=Math.min(p,f+v,g+b)-1,w=Math.max(0,x-y+1);if(0!==w){if(i.isMesh)!0===r.wireframe?(Q.setLineWidth(r.wireframeLinewidth*$()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Q.setLineWidth(t*$()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,w,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,w,t)}else d.render(y,w)}},this.compile=function(t,e){m=ht.get(t),m.init(),g.push(m),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))}),m.setupLights(_.physicallyCorrectLights),t.traverse(function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)Gt(n[r],t,e);else Gt(n,t,e)}),g.pop(),m=null};let kt=null;function Ot(){It.stop()}function Dt(){It.start()}const It=new or;function Ut(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||z.intersectsSprite(t)){r&&q.setFromMatrixPosition(t.matrixWorld).applyMatrix4(W);const e=at.update(t),i=t.material;i.visible&&f.push(t,e,i,n,q.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==tt.render.frame&&(t.skeleton.update(),t.skeleton.frame=tt.render.frame),!t.frustumCulled||z.intersectsObject(t))){r&&q.setFromMatrixPosition(t.matrixWorld).applyMatrix4(W);const e=at.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&f.push(t,e,a,n,q.z,s)}}else i.visible&&f.push(t,e,i,n,q.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)Ut(i[t],e,n,r)}function Ft(t,e,n,r){const i=t.opaque,o=t.transmissive,s=t.transparent;m.setupLightsView(n),o.length>0&&function(t,e,n){const r=J.isWebGL2;null===j&&(j=new Vt(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?E:S,minFilter:w,samples:r&&!0===l?4:0})),_.getDrawingBufferSize(K),r?j.setSize(K.x,K.y):j.setSize(vt(K.x),vt(K.y));const i=_.getRenderTarget();_.setRenderTarget(j),_.clear();const o=_.toneMapping;_.toneMapping=0,Nt(t,e,n),_.toneMapping=o,nt.updateMultisampleRenderTarget(j),nt.updateRenderTargetMipmap(j),_.setRenderTarget(i)}(i,e,n),r&&Q.viewport(R.copy(r)),i.length>0&&Nt(i,e,n),o.length>0&&Nt(o,e,n),s.length>0&&Nt(s,e,n),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Nt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.object,a=o.geometry,l=null===r?o.material:r,u=o.group;s.layers.test(n.layers)&&zt(s,e,n,a,l,u)}}function zt(t,e,n,s,a,l){t.onBeforeRender(_,e,n,s,a,l),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),a.onBeforeRender(_,e,n,s,t,l),!0===a.transparent&&a.side===o?(a.side=i,a.needsUpdate=!0,_.renderBufferDirect(n,e,s,a,t,l),a.side=r,a.needsUpdate=!0,_.renderBufferDirect(n,e,s,a,t,l),a.side=o):_.renderBufferDirect(n,e,s,a,t,l),t.onAfterRender(_,e,n,s,a,l)}function Gt(t,e,n){!0!==e.isScene&&(e=X);const r=et.get(t),i=m.state.lights,o=m.state.shadowsArray,s=i.state.version,a=lt.getParameters(t,i.state,o,e,n),l=lt.getProgramCacheKey(a);let u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?it:rt).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",Lt),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===s)return Ht(t,a),c}else a.uniforms=lt.getUniforms(t),t.onBuild(n,a,_),t.onBeforeCompile(a,_),c=lt.acquireProgram(a,l),u.set(l,c),r.uniforms=a.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=dt.uniform),Ht(t,a),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=c.getUniforms(),p=Hi.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Ht(t,e){const n=et.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}It.setAnimationLoop(function(t){kt&&kt(t)}),"undefined"!=typeof self&&It.setContext(self),this.setAnimationLoop=function(t){kt=t,At.setAnimationLoop(t),null===t?It.stop():It.start()},At.addEventListener("sessionstart",Ot),At.addEventListener("sessionend",Dt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===At.enabled&&!0===At.isPresenting&&(!0===At.cameraAutoUpdate&&At.updateCamera(e),e=At.getCamera()),!0===t.isScene&&t.onBeforeRender(_,t,e,M),m=ht.get(t,g.length),m.init(),g.push(m),W.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),z.setFromProjectionMatrix(W),H=this.localClippingEnabled,G=dt.init(this.clippingPlanes,H,e),f=ct.get(t,v.length),f.init(),v.push(f),Ut(t,e,0,_.sortObjects),f.finish(),!0===_.sortObjects&&f.sort(U,F),!0===G&&dt.beginShadows();const n=m.state.shadowsArray;if(pt.render(n,t,e),!0===G&&dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ft.render(f,t),m.setupLights(_.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Ft(f,t,r,r.viewport)}}else Ft(f,t,e);null!==M&&(nt.updateMultisampleRenderTarget(M),nt.updateRenderTargetMipmap(M)),!0===t.isScene&&t.onAfterRender(_,t,e),wt.resetDefaultState(),A=-1,P=null,g.pop(),m=g.length>0?g[g.length-1]:null,v.pop(),f=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(t,e,n){et.get(t.texture).__webglTexture=e,et.get(t.depthTexture).__webglTexture=n;const r=et.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=et.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){M=t,y=e,x=n;let r=!0;if(t){const e=et.get(t);void 0!==e.__useDefaultFramebuffer?(Q.bindFramebuffer(36160,null),r=!1):void 0===e.__webglFramebuffer?nt.setupRenderTarget(t):e.__hasExternalTextures&&nt.rebindTextures(t,et.get(t.texture).__webglTexture,et.get(t.depthTexture).__webglTexture)}let i=null,o=!1,s=!1;if(t){const n=t.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(s=!0);const r=et.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=r[e],o=!0):i=J.isWebGL2&&t.samples>0&&!1===nt.useMultisampledRTT(t)?et.get(t).__webglMultisampledFramebuffer:r,R.copy(t.viewport),L.copy(t.scissor),k=t.scissorTest}else R.copy(N).multiplyScalar(I).floor(),L.copy(B).multiplyScalar(I).floor(),k=V;if(Q.bindFramebuffer(36160,i)&&J.drawBuffers&&r&&Q.drawBuffers(t,i),Q.viewport(R),Q.scissor(L),Q.setScissorTest(k),o){const r=et.get(t.texture);Mt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(s){const r=et.get(t.texture),i=e||0;Mt.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}A=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=et.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){Q.bindFramebuffer(36160,a);try{const s=t.texture,a=s.format,l=s.type;if(a!==C&&yt.convert(a)!==Mt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===E&&(Z.has("EXT_color_buffer_half_float")||J.isWebGL2&&Z.has("EXT_color_buffer_float"));if(!(l===S||yt.convert(l)===Mt.getParameter(35738)||l===T&&(J.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Mt.readPixels(e,n,r,i,yt.convert(a),yt.convert(l),o)}finally{const t=null!==M?et.get(M).__webglFramebuffer:null;Q.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);nt.setTexture2D(e,0),Mt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,o),Q.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,s=yt.convert(n.format),a=yt.convert(n.type);nt.setTexture2D(n,0),Mt.pixelStorei(37440,n.flipY),Mt.pixelStorei(37441,n.premultiplyAlpha),Mt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?Mt.texSubImage2D(3553,r,t.x,t.y,i,o,s,a,e.image.data):e.isCompressedTexture?Mt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):Mt.texSubImage2D(3553,r,t.x,t.y,s,a,e.image),0===r&&n.generateMipmaps&&Mt.generateMipmap(3553),Q.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=yt.convert(r.format),u=yt.convert(r.type);let c;if(r.isData3DTexture)nt.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");nt.setTexture2DArray(r,0),c=35866}Mt.pixelStorei(37440,r.flipY),Mt.pixelStorei(37441,r.premultiplyAlpha),Mt.pixelStorei(3317,r.unpackAlignment);const h=Mt.getParameter(3314),d=Mt.getParameter(32878),p=Mt.getParameter(3316),f=Mt.getParameter(3315),m=Mt.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;Mt.pixelStorei(3314,v.width),Mt.pixelStorei(32878,v.height),Mt.pixelStorei(3316,t.min.x),Mt.pixelStorei(3315,t.min.y),Mt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?Mt.texSubImage3D(c,i,e.x,e.y,e.z,o,s,a,l,u,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Mt.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,s,a,l,v.data)):Mt.texSubImage3D(c,i,e.x,e.y,e.z,o,s,a,l,u,v),Mt.pixelStorei(3314,h),Mt.pixelStorei(32878,d),Mt.pixelStorei(3316,p),Mt.pixelStorei(3315,f),Mt.pixelStorei(32877,m),0===i&&r.generateMipmaps&&Mt.generateMipmap(c),Q.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?nt.setTextureCube(t,0):t.isData3DTexture?nt.setTexture3D(t,0):t.isDataArrayTexture?nt.setTexture2DArray(t,0):nt.setTexture2D(t,0),Q.unbindTexture()},this.resetState=function(){y=0,x=0,M=null,Q.reset(),wt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends No{}).prototype.isWebGL1Renderer=!0;class Bo{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new kt(t),this.near=e,this.far=n}clone(){return new Bo(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Vo extends Ke{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}class zo{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=nt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ct()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ct()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ct()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Go=new jt;class Ho{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Go.fromBufferAttribute(this,e),Go.applyMatrix4(t),this.setXYZ(e,Go.x,Go.y,Go.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Go.fromBufferAttribute(this,e),Go.applyNormalMatrix(t),this.setXYZ(e,Go.x,Go.y,Go.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Go.fromBufferAttribute(this,e),Go.transformDirection(t),this.setXYZ(e,Go.x,Go.y,Go.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new cn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ho(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const jo=new jt,Wo=new Bt,Ko=new Bt,qo=new jt,Xo=new xe;class Yo extends Bn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new xe,this.bindMatrixInverse=new xe}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Bt,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;Wo.fromBufferAttribute(r.attributes.skinIndex,t),Ko.fromBufferAttribute(r.attributes.skinWeight,t),jo.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const r=Ko.getComponent(t);if(0!==r){const i=Wo.getComponent(t);Xo.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(qo.copy(jo).applyMatrix4(Xo),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}class $o extends Ke{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Zo extends Nt{constructor(t=null,e=1,n=1,r,i,o,s,a,l=g,u=g,c,h){super(null,o,s,a,l,u,r,i,c,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Jo=new xe,Qo=new xe;class ts{constructor(t=[],e=[]){this.uuid=ct(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new xe)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new xe;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:Qo;Jo.multiplyMatrices(i,e[r]),Jo.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new ts(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=mt(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Zo(e,t,t,C,T);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new $o),this.bones.push(i),this.boneInverses.push((new xe).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}}class es extends cn{constructor(t,e,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const ns=new xe,rs=new xe,is=[],os=new Bn;class ss extends Bn{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new es(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(os.geometry=this.geometry,os.material=this.material,void 0!==os.material)for(let i=0;i<r;i++){this.getMatrixAt(i,ns),rs.multiplyMatrices(n,ns),os.matrixWorld=rs,os.raycast(t,is);for(let t=0,n=is.length;t<n;t++){const n=is[t];n.instanceId=i,n.object=this,e.push(n)}is.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new es(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class as extends sn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ls=new jt,us=new jt,cs=new xe,hs=new ye,ds=new de;class ps extends Ke{constructor(t=new xn,e=new as){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)ls.fromBufferAttribute(e,t-1),us.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=ls.distanceTo(us);t.setAttribute("lineDistance",new pn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ds.copy(n.boundingSphere),ds.applyMatrix4(r),ds.radius+=i,!1===t.ray.intersectsSphere(ds))return;cs.copy(r).invert(),hs.copy(t.ray).applyMatrix4(cs);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new jt,u=new jt,c=new jt,h=new jt,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p)for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=d){const r=p.getX(n),i=p.getX(n+1);if(l.fromBufferAttribute(f,r),u.fromBufferAttribute(f,i),hs.distanceSqToSegment(l,u,h,c)>a)continue;h.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(h);o<t.near||o>t.far||e.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=d){if(l.fromBufferAttribute(f,n),u.fromBufferAttribute(f,n+1),hs.distanceSqToSegment(l,u,h,c)>a)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const fs=new jt,ms=new jt;class vs extends ps{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)fs.fromBufferAttribute(e,t),ms.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+fs.distanceTo(ms);t.setAttribute("lineDistance",new pn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gs extends ps{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class _s extends sn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const bs=new xe,ys=new ye,xs=new de,ws=new jt;class Ss extends Ke{constructor(t=new xn,e=new _s){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xs.copy(n.boundingSphere),xs.applyMatrix4(r),xs.radius+=i,!1===t.ray.intersectsSphere(xs))return;bs.copy(r).invert(),ys.copy(t.ray).applyMatrix4(bs);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=n.index,u=n.attributes.position;if(null!==l)for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);ws.fromBufferAttribute(u,i),Ms(ws,i,a,r,t,e,this)}else for(let n=Math.max(0,o.start),i=Math.min(u.count,o.start+o.count);n<i;n++)ws.fromBufferAttribute(u,n),Ms(ws,n,a,r,t,e,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Ms(t,e,n,r,i,o,s){const a=ys.distanceSqToPoint(t);if(a<n){const n=new jt;ys.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:s})}}class Ts extends Nt{constructor(t,e,n,r,i,o,s,a,l){super(t,e,n,r,i,o,s,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:y,this.magFilter=void 0!==i?i:y,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){u.needsUpdate=!0,t.requestVideoFrameCallback(e)})}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Es extends Nt{constructor(t,e,n,r,i,o,s,a,l,u,c,h){super(null,o,s,a,l,u,r,i,c,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class As extends Nt{constructor(t,e,n,r,i,o,s,a,l){super(t,e,n,r,i,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Cs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let s,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(i-1)}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=e||(o.isVector2?new _t:new jt);return a.copy(s).sub(o).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new jt,r=[],i=[],o=[],s=new jt,a=new xe;for(let e=0;e<=t;e++){const n=e/t;r[e]=this.getTangentAt(n,new jt)}i[0]=new jt,o[0]=new jt;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),o[e]=o[e-1].clone(),s.crossVectors(r[e-1],r[e]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(ht(r[e-1].dot(r[e]),-1,1));i[e].applyMatrix4(a.makeRotationAxis(s,t))}o[e].crossVectors(r[e],i[e])}if(!0===e){let e=Math.acos(ht(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}function Ps(){let t=0,e=0,n=0,r=0;function i(i,o,s,a){t=i,e=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,s,a){let l=(e-t)/o-(n-t)/(o+s)+(n-e)/s,u=(n-e)/s-(r-e)/(s+a)+(r-n)/a;l*=s,u*=s,i(e,n,l,u)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}const Rs=new jt,Ls=new Ps,ks=new Ps,Os=new Ps;class Ds extends Cs{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new jt){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let s,a,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===u&&l===i-1&&(l=i-2,u=1),this.closed||l>0?s=r[(l-1)%i]:(Rs.subVectors(r[0],r[1]).add(r[0]),s=Rs);const c=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(Rs.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Rs),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Ls.initNonuniformCatmullRom(s.x,c.x,h.x,a.x,e,n,r),ks.initNonuniformCatmullRom(s.y,c.y,h.y,a.y,e,n,r),Os.initNonuniformCatmullRom(s.z,c.z,h.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(Ls.initCatmullRom(s.x,c.x,h.x,a.x,this.tension),ks.initCatmullRom(s.y,c.y,h.y,a.y,this.tension),Os.initCatmullRom(s.z,c.z,h.z,a.z,this.tension));return n.set(Ls.calc(u),ks.calc(u),Os.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new jt).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}const Is=new jt,Us=new jt,Fs=new jt,Ns=new rn;class Bs extends xn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,r=Math.pow(10,n),i=Math.cos(lt*e),o=t.getIndex(),s=t.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},d=[];for(let t=0;t<a;t+=3){o?(l[0]=o.getX(t),l[1]=o.getX(t+1),l[2]=o.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:a}=Ns;if(e.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),Ns.getNormal(Fs),c[0]=`${Math.round(e.x*r)},${Math.round(e.y*r)},${Math.round(e.z*r)}`,c[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,c[2]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],r=c[e],o=Ns[u[t]],s=Ns[u[e]],a=`${n}_${r}`,p=`${r}_${n}`;p in h&&h[p]?(Fs.dot(h[p].normal)<=i&&(d.push(o.x,o.y,o.z),d.push(s.x,s.y,s.z)),h[p]=null):a in h||(h[a]={index0:l[t],index1:l[e],normal:Fs.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:n}=h[t];Is.fromBufferAttribute(s,e),Us.fromBufferAttribute(s,n),d.push(Is.x,Is.y,Is.z),d.push(Us.x,Us.y,Us.z)}this.setAttribute("position",new pn(d,3))}}}class Vs extends xn{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const u=[],c=new jt,h=new jt,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const v=[],g=d/n;let _=0;0==d&&0==o?_=.5/e:d==n&&a==Math.PI&&(_=-.5/e);for(let n=0;n<=e;n++){const a=n/e;c.x=-t*Math.cos(r+a*i)*Math.sin(o+g*s),c.y=t*Math.cos(o+g*s),c.z=t*Math.sin(r+a*i)*Math.sin(o+g*s),p.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(a+_,1-g),v.push(l++)}u.push(v)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const e=u[t][r+1],i=u[t][r],s=u[t+1][r],l=u[t+1][r+1];(0!==t||o>0)&&d.push(e,i,l),(t!==n-1||a<Math.PI)&&d.push(i,s,l)}this.setIndex(d),this.setAttribute("position",new pn(p,3)),this.setAttribute("normal",new pn(f,3)),this.setAttribute("uv",new pn(m,2))}static fromJSON(t){return new Vs(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class zs extends Wn{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Gs extends sn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=J,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Hs extends Gs{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ht(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class js extends sn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new kt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=J,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Ws(t,e,n){return qs(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Ks(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function qs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Xs(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort(function(e,n){return t[e]-t[n]}),n}function Ys(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,s=0;s!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[s++]=t[r+n]}return i}function $s(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let s=o[r];if(void 0!==s)if(Array.isArray(s))do{s=o[r],void 0!==s&&(e.push(o.time),n.push.apply(n,s)),o=t[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[r],void 0!==s&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{s=o[r],void 0!==s&&(e.push(o.time),n.push(s)),o=t[i++]}while(void 0!==o)}class Zs{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Js extends Zs{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:i=t,s=2*e-n;break;case 2402:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=t,a=2*n-e;break;case 2402:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,_=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let t=0;t!==s;++t)i[t]=v*o[u+t]+g*o[l+t]+_*o[a+t]+b*o[c+t];return i}}class Qs extends Zs{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,u=(n-e)/(r-e),c=1-u;for(let t=0;t!==s;++t)i[t]=o[l+t]*c+o[a+t]*u;return i}}class ta extends Zs{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class ea{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ks(e,this.TimeBufferType),this.values=Ks(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Ks(t.times,Array),values:Ks(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new ta(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Qs(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Js(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case j:e=this.InterpolantFactoryMethodDiscrete;break;case W:e=this.InterpolantFactoryMethodLinear;break;case K:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return j;case this.InterpolantFactoryMethodLinear:return W;case this.InterpolantFactoryMethodSmooth:return K}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=Ws(n,i,o),this.values=Ws(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&qs(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=Ws(this.times),e=Ws(this.values),n=this.getValueSize(),r=this.getInterpolation()===K,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s];if(a!==t[s+1]&&(1!==s||a!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,o=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const r=s*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,s=0;s!==n;++s)e[r+s]=e[t+s];++o}return o!==t.length?(this.times=Ws(t,0,o),this.values=Ws(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Ws(this.times,0),e=Ws(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}ea.prototype.TimeBufferType=Float32Array,ea.prototype.ValueBufferType=Float32Array,ea.prototype.DefaultInterpolation=W;class na extends ea{}na.prototype.ValueTypeName="bool",na.prototype.ValueBufferType=Array,na.prototype.DefaultInterpolation=j,na.prototype.InterpolantFactoryMethodLinear=void 0,na.prototype.InterpolantFactoryMethodSmooth=void 0;class ra extends ea{}ra.prototype.ValueTypeName="color";class ia extends ea{}ia.prototype.ValueTypeName="number";class oa extends Zs{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(r-e);let l=t*s;for(let t=l+s;l!==t;l+=4)Ht.slerpFlat(i,0,o,l-s,o,l,a);return i}}class sa extends ea{InterpolantFactoryMethodLinear(t){return new oa(this.times,this.values,this.getValueSize(),t)}}sa.prototype.ValueTypeName="quaternion",sa.prototype.DefaultInterpolation=W,sa.prototype.InterpolantFactoryMethodSmooth=void 0;class aa extends ea{}aa.prototype.ValueTypeName="string",aa.prototype.ValueBufferType=Array,aa.prototype.DefaultInterpolation=j,aa.prototype.InterpolantFactoryMethodLinear=void 0,aa.prototype.InterpolantFactoryMethodSmooth=void 0;class la extends ea{}la.prototype.ValueTypeName="vector";class ua{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=ct(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,i=n.length;t!==i;++t)e.push(ca(n[t]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=n.length;t!==r;++t)e.push(ea.toJSON(n[t]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let t=0;t<i;t++){let s=[],a=[];s.push((t+i-1)%i,t,(t+1)%i),a.push(0,1,0);const l=Xs(s);s=Ys(s,1,l),a=Ys(a,1,l),r||0!==s[0]||(s.push(i),a.push(a[0])),o.push(new ia(".morphTargetInfluences["+e[t].name+"]",s,a).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(i);if(o&&o.length>1){const t=o[1];let e=r[t];e||(r[t]=e=[]),e.push(n)}}const o=[];for(const t in r)o.push(this.CreateFromMorphTargetSequence(t,r[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],s=[];$s(n,o,s,r),0!==o.length&&i.push(new t(e,o,s))}},r=[],i=t.name||"default",o=t.fps||30,s=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const i=l[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new ia(".morphTargetInfluence["+n+"]",t,o))}a=t.length*o}else{const o=".bones["+e[t].name+"]";n(la,o+".position",i,"pos",r),n(sa,o+".quaternion",i,"rot",r),n(la,o+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,a,r,s)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ca(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ia;case"vector":case"vector2":case"vector3":case"vector4":return la;case"color":return ra;case"quaternion":return sa;case"bool":case"boolean":return na;case"string":return aa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];$s(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const ha={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};const da=new class{constructor(t,e,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}};class pa{constructor(t){this.manager=void 0!==t?t:da,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,i){n.load(t,r,e,i)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Error;class fa extends pa{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=ha.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;const s=xt("img");function a(){u(),ha.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){u(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function u(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class ma extends pa{constructor(t){super(t)}load(t,e,n,r){const i=new Nt,o=new fa(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i}}class va extends Ke{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new kt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const ga=new xe,_a=new jt,ba=new jt;class ya{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _t(512,512),this.map=null,this.mapPass=null,this.matrix=new xe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ir,this._frameExtents=new _t(1,1),this._viewportCount=1,this._viewports=[new Bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;_a.setFromMatrixPosition(t.matrixWorld),e.position.copy(_a),ba.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(ba),e.updateMatrixWorld(),ga.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ga),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class xa extends ya{constructor(){super(new qn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*ut*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class wa extends va{constructor(t,e,n=0,r=Math.PI/3,i=0,o=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ke.DefaultUp),this.updateMatrix(),this.target=new Ke,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new xa}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Sa=new xe,Ma=new jt,Ta=new jt;class Ea extends ya{constructor(){super(new qn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _t(4,2),this._viewportCount=6,this._viewports=[new Bt(2,1,1,1),new Bt(0,1,1,1),new Bt(3,1,1,1),new Bt(1,1,1,1),new Bt(3,0,1,1),new Bt(1,0,1,1)],this._cubeDirections=[new jt(1,0,0),new jt(-1,0,0),new jt(0,0,1),new jt(0,0,-1),new jt(0,1,0),new jt(0,-1,0)],this._cubeUps=[new jt(0,1,0),new jt(0,1,0),new jt(0,1,0),new jt(0,1,0),new jt(0,0,1),new jt(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Ma.setFromMatrixPosition(t.matrixWorld),n.position.copy(Ma),Ta.copy(n.position),Ta.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Ta),n.updateMatrixWorld(),r.makeTranslation(-Ma.x,-Ma.y,-Ma.z),Sa.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sa)}}class Aa extends va{constructor(t,e,n=0,r=1){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Ea}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Ca extends ya{constructor(){super(new gr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Pa extends va{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ke.DefaultUp),this.updateMatrix(),this.target=new Ke,this.shadow=new Ca}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Ra{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class La extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class ka extends pa{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=ha.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){ha.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),i.manager.itemStart(t)}}class Oa{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Da(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Da();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Da(){return("undefined"==typeof performance?Date:performance).now()}const Ia=new RegExp("[\\[\\]\\.:\\/]","g"),Ua="[^\\[\\]\\.:\\/]",Fa="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Na=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ua)+/(WCOD+)?/.source.replace("WCOD",Fa)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ua)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ua)+"$"),Ba=["material","materials","bones"];class Va{constructor(t,e,n){this.path=e,this.parsedPath=n||Va.parseTrackName(e),this.node=Va.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Va.Composite(t,e,n):new Va(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ia,"")}static parseTrackName(t){const e=Na.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Ba.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=Va.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Va.Composite=class{constructor(t,e,n){const r=n||Va.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Va.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Va.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Va.prototype.GetterByBindingType=[Va.prototype._getValue_direct,Va.prototype._getValue_array,Va.prototype._getValue_arrayElement,Va.prototype._getValue_toArray],Va.prototype.SetterByBindingTypeAndVersioning=[[Va.prototype._setValue_direct,Va.prototype._setValue_direct_setNeedsUpdate,Va.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Va.prototype._setValue_array,Va.prototype._setValue_array_setNeedsUpdate,Va.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Va.prototype._setValue_arrayElement,Va.prototype._setValue_arrayElement_setNeedsUpdate,Va.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Va.prototype._setValue_fromArray,Va.prototype._setValue_fromArray_setNeedsUpdate,Va.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class za{constructor(t,e,n=0,r=1/0){this.ray=new ye(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new ke,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Ha(t,this,n,e),n.sort(Ga),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)Ha(t[r],this,n,e);return n.sort(Ga),n}}function Ga(t,e){return t.distance-e.distance}function Ha(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Ha(r[t],e,n,!0)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"143"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="143")},7150:function(t,e,n){"use strict";n.r(e),n.d(e,{KHR_DF_CHANNEL_RGBSDA_ALPHA:function(){return et},KHR_DF_CHANNEL_RGBSDA_BLUE:function(){return J},KHR_DF_CHANNEL_RGBSDA_DEPTH:function(){return tt},KHR_DF_CHANNEL_RGBSDA_GREEN:function(){return Z},KHR_DF_CHANNEL_RGBSDA_RED:function(){return $},KHR_DF_CHANNEL_RGBSDA_STENCIL:function(){return Q},KHR_DF_FLAG_ALPHA_PREMULTIPLIED:function(){return _},KHR_DF_FLAG_ALPHA_STRAIGHT:function(){return g},KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:function(){return l},KHR_DF_MODEL_ASTC:function(){return m},KHR_DF_MODEL_ETC1:function(){return p},KHR_DF_MODEL_ETC1S:function(){return v},KHR_DF_MODEL_ETC2:function(){return f},KHR_DF_MODEL_RGBSDA:function(){return d},KHR_DF_MODEL_UNSPECIFIED:function(){return h},KHR_DF_PRIMARIES_ACES:function(){return j},KHR_DF_PRIMARIES_ACESCC:function(){return W},KHR_DF_PRIMARIES_ADOBERGB:function(){return Y},KHR_DF_PRIMARIES_BT2020:function(){return G},KHR_DF_PRIMARIES_BT601_EBU:function(){return V},KHR_DF_PRIMARIES_BT601_SMPTE:function(){return z},KHR_DF_PRIMARIES_BT709:function(){return B},KHR_DF_PRIMARIES_CIEXYZ:function(){return H},KHR_DF_PRIMARIES_DISPLAYP3:function(){return X},KHR_DF_PRIMARIES_NTSC1953:function(){return K},KHR_DF_PRIMARIES_PAL525:function(){return q},KHR_DF_PRIMARIES_UNSPECIFIED:function(){return N},KHR_DF_SAMPLE_DATATYPE_EXPONENT:function(){return it},KHR_DF_SAMPLE_DATATYPE_FLOAT:function(){return nt},KHR_DF_SAMPLE_DATATYPE_LINEAR:function(){return ot},KHR_DF_SAMPLE_DATATYPE_SIGNED:function(){return rt},KHR_DF_TRANSFER_ACESCC:function(){return I},KHR_DF_TRANSFER_ACESCCT:function(){return U},KHR_DF_TRANSFER_ADOBERGB:function(){return F},KHR_DF_TRANSFER_BT1886:function(){return E},KHR_DF_TRANSFER_DCIP3:function(){return L},KHR_DF_TRANSFER_HLG_EOTF:function(){return C},KHR_DF_TRANSFER_HLG_OETF:function(){return A},KHR_DF_TRANSFER_ITU:function(){return w},KHR_DF_TRANSFER_LINEAR:function(){return y},KHR_DF_TRANSFER_NTSC:function(){return S},KHR_DF_TRANSFER_PAL625_EOTF:function(){return O},KHR_DF_TRANSFER_PAL_OETF:function(){return k},KHR_DF_TRANSFER_PQ_EOTF:function(){return P},KHR_DF_TRANSFER_PQ_OETF:function(){return R},KHR_DF_TRANSFER_SLOG:function(){return M},KHR_DF_TRANSFER_SLOG2:function(){return T},KHR_DF_TRANSFER_SRGB:function(){return x},KHR_DF_TRANSFER_ST240:function(){return D},KHR_DF_TRANSFER_UNSPECIFIED:function(){return b},KHR_DF_VENDORID_KHRONOS:function(){return u},KHR_DF_VERSION:function(){return c},KHR_SUPERCOMPRESSION_BASISLZ:function(){return o},KHR_SUPERCOMPRESSION_NONE:function(){return i},KHR_SUPERCOMPRESSION_ZLIB:function(){return a},KHR_SUPERCOMPRESSION_ZSTD:function(){return s},KTX2Container:function(){return Or},VK_FORMAT_A1R5G5B5_UNORM_PACK16:function(){return ft},VK_FORMAT_A2B10G10R10_SINT_PACK32:function(){return Jt},VK_FORMAT_A2B10G10R10_SNORM_PACK32:function(){return $t},VK_FORMAT_A2B10G10R10_UINT_PACK32:function(){return Zt},VK_FORMAT_A2B10G10R10_UNORM_PACK32:function(){return Yt},VK_FORMAT_A2R10G10B10_SINT_PACK32:function(){return Xt},VK_FORMAT_A2R10G10B10_SNORM_PACK32:function(){return Kt},VK_FORMAT_A2R10G10B10_UINT_PACK32:function(){return qt},VK_FORMAT_A2R10G10B10_UNORM_PACK32:function(){return Wt},VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:function(){return kr},VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:function(){return Lr},VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:function(){return Cr},VK_FORMAT_ASTC_10x10_SRGB_BLOCK:function(){return Xn},VK_FORMAT_ASTC_10x10_UNORM_BLOCK:function(){return qn},VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:function(){return Tr},VK_FORMAT_ASTC_10x5_SRGB_BLOCK:function(){return Gn},VK_FORMAT_ASTC_10x5_UNORM_BLOCK:function(){return zn},VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:function(){return Er},VK_FORMAT_ASTC_10x6_SRGB_BLOCK:function(){return jn},VK_FORMAT_ASTC_10x6_UNORM_BLOCK:function(){return Hn},VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:function(){return Ar},VK_FORMAT_ASTC_10x8_SRGB_BLOCK:function(){return Kn},VK_FORMAT_ASTC_10x8_UNORM_BLOCK:function(){return Wn},VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:function(){return Pr},VK_FORMAT_ASTC_12x10_SRGB_BLOCK:function(){return $n},VK_FORMAT_ASTC_12x10_UNORM_BLOCK:function(){return Yn},VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:function(){return Rr},VK_FORMAT_ASTC_12x12_SRGB_BLOCK:function(){return Jn},VK_FORMAT_ASTC_12x12_UNORM_BLOCK:function(){return Zn},VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:function(){return gr},VK_FORMAT_ASTC_4x4_SRGB_BLOCK:function(){return En},VK_FORMAT_ASTC_4x4_UNORM_BLOCK:function(){return Tn},VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:function(){return _r},VK_FORMAT_ASTC_5x4_SRGB_BLOCK:function(){return Cn},VK_FORMAT_ASTC_5x4_UNORM_BLOCK:function(){return An},VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:function(){return br},VK_FORMAT_ASTC_5x5_SRGB_BLOCK:function(){return Rn},VK_FORMAT_ASTC_5x5_UNORM_BLOCK:function(){return Pn},VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:function(){return yr},VK_FORMAT_ASTC_6x5_SRGB_BLOCK:function(){return kn},VK_FORMAT_ASTC_6x5_UNORM_BLOCK:function(){return Ln},VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:function(){return xr},VK_FORMAT_ASTC_6x6_SRGB_BLOCK:function(){return Dn},VK_FORMAT_ASTC_6x6_UNORM_BLOCK:function(){return On},VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:function(){return wr},VK_FORMAT_ASTC_8x5_SRGB_BLOCK:function(){return Un},VK_FORMAT_ASTC_8x5_UNORM_BLOCK:function(){return In},VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:function(){return Sr},VK_FORMAT_ASTC_8x6_SRGB_BLOCK:function(){return Nn},VK_FORMAT_ASTC_8x6_UNORM_BLOCK:function(){return Fn},VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:function(){return Mr},VK_FORMAT_ASTC_8x8_SRGB_BLOCK:function(){return Vn},VK_FORMAT_ASTC_8x8_UNORM_BLOCK:function(){return Bn},VK_FORMAT_B10G11R11_UFLOAT_PACK32:function(){return He},VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:function(){return rr},VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:function(){return lr},VK_FORMAT_B4G4R4A4_UNORM_PACK16:function(){return ut},VK_FORMAT_B5G5R5A1_UNORM_PACK16:function(){return pt},VK_FORMAT_B5G6R5_UNORM_PACK16:function(){return ht},VK_FORMAT_B8G8R8A8_SINT:function(){return Ht},VK_FORMAT_B8G8R8A8_SNORM:function(){return zt},VK_FORMAT_B8G8R8A8_SRGB:function(){return jt},VK_FORMAT_B8G8R8A8_UINT:function(){return Gt},VK_FORMAT_B8G8R8A8_UNORM:function(){return Vt},VK_FORMAT_B8G8R8_SINT:function(){return Ot},VK_FORMAT_B8G8R8_SNORM:function(){return Lt},VK_FORMAT_B8G8R8_SRGB:function(){return Dt},VK_FORMAT_B8G8R8_UINT:function(){return kt},VK_FORMAT_B8G8R8_UNORM:function(){return Rt},VK_FORMAT_BC1_RGBA_SRGB_BLOCK:function(){return en},VK_FORMAT_BC1_RGBA_UNORM_BLOCK:function(){return tn},VK_FORMAT_BC1_RGB_SRGB_BLOCK:function(){return Qe},VK_FORMAT_BC1_RGB_UNORM_BLOCK:function(){return Je},VK_FORMAT_BC2_SRGB_BLOCK:function(){return rn},VK_FORMAT_BC2_UNORM_BLOCK:function(){return nn},VK_FORMAT_BC3_SRGB_BLOCK:function(){return sn},VK_FORMAT_BC3_UNORM_BLOCK:function(){return on},VK_FORMAT_BC4_SNORM_BLOCK:function(){return ln},VK_FORMAT_BC4_UNORM_BLOCK:function(){return an},VK_FORMAT_BC5_SNORM_BLOCK:function(){return cn},VK_FORMAT_BC5_UNORM_BLOCK:function(){return un},VK_FORMAT_BC6H_SFLOAT_BLOCK:function(){return dn},VK_FORMAT_BC6H_UFLOAT_BLOCK:function(){return hn},VK_FORMAT_BC7_SRGB_BLOCK:function(){return fn},VK_FORMAT_BC7_UNORM_BLOCK:function(){return pn},VK_FORMAT_D16_UNORM:function(){return We},VK_FORMAT_D16_UNORM_S8_UINT:function(){return Ye},VK_FORMAT_D24_UNORM_S8_UINT:function(){return $e},VK_FORMAT_D32_SFLOAT:function(){return qe},VK_FORMAT_D32_SFLOAT_S8_UINT:function(){return Ze},VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:function(){return je},VK_FORMAT_EAC_R11G11_SNORM_BLOCK:function(){return Mn},VK_FORMAT_EAC_R11G11_UNORM_BLOCK:function(){return Sn},VK_FORMAT_EAC_R11_SNORM_BLOCK:function(){return wn},VK_FORMAT_EAC_R11_UNORM_BLOCK:function(){return xn},VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:function(){return _n},VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:function(){return gn},VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:function(){return yn},VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:function(){return bn},VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:function(){return vn},VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:function(){return mn},VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:function(){return nr},VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:function(){return ar},VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:function(){return pr},VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:function(){return ur},VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:function(){return fr},VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:function(){return cr},VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:function(){return mr},VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:function(){return hr},VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:function(){return vr},VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:function(){return dr},VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:function(){return er},VK_FORMAT_R10X6G10X6_UNORM_2PACK16:function(){return tr},VK_FORMAT_R10X6_UNORM_PACK16:function(){return Qn},VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:function(){return sr},VK_FORMAT_R12X4G12X4_UNORM_2PACK16:function(){return or},VK_FORMAT_R12X4_UNORM_PACK16:function(){return ir},VK_FORMAT_R16G16B16A16_SFLOAT:function(){return _e},VK_FORMAT_R16G16B16A16_SINT:function(){return ge},VK_FORMAT_R16G16B16A16_SNORM:function(){return me},VK_FORMAT_R16G16B16A16_UINT:function(){return ve},VK_FORMAT_R16G16B16A16_UNORM:function(){return fe},VK_FORMAT_R16G16B16_SFLOAT:function(){return pe},VK_FORMAT_R16G16B16_SINT:function(){return de},VK_FORMAT_R16G16B16_SNORM:function(){return ce},VK_FORMAT_R16G16B16_UINT:function(){return he},VK_FORMAT_R16G16B16_UNORM:function(){return ue},VK_FORMAT_R16G16_SFLOAT:function(){return le},VK_FORMAT_R16G16_SINT:function(){return ae},VK_FORMAT_R16G16_SNORM:function(){return oe},VK_FORMAT_R16G16_UINT:function(){return se},VK_FORMAT_R16G16_UNORM:function(){return ie},VK_FORMAT_R16_SFLOAT:function(){return re},VK_FORMAT_R16_SINT:function(){return ne},VK_FORMAT_R16_SNORM:function(){return te},VK_FORMAT_R16_UINT:function(){return ee},VK_FORMAT_R16_UNORM:function(){return Qt},VK_FORMAT_R32G32B32A32_SFLOAT:function(){return Re},VK_FORMAT_R32G32B32A32_SINT:function(){return Pe},VK_FORMAT_R32G32B32A32_UINT:function(){return Ce},VK_FORMAT_R32G32B32_SFLOAT:function(){return Ae},VK_FORMAT_R32G32B32_SINT:function(){return Ee},VK_FORMAT_R32G32B32_UINT:function(){return Te},VK_FORMAT_R32G32_SFLOAT:function(){return Me},VK_FORMAT_R32G32_SINT:function(){return Se},VK_FORMAT_R32G32_UINT:function(){return we},VK_FORMAT_R32_SFLOAT:function(){return xe},VK_FORMAT_R32_SINT:function(){return ye},VK_FORMAT_R32_UINT:function(){return be},VK_FORMAT_R4G4B4A4_UNORM_PACK16:function(){return lt},VK_FORMAT_R4G4_UNORM_PACK8:function(){return at},VK_FORMAT_R5G5B5A1_UNORM_PACK16:function(){return dt},VK_FORMAT_R5G6B5_UNORM_PACK16:function(){return ct},VK_FORMAT_R64G64B64A64_SFLOAT:function(){return Ge},VK_FORMAT_R64G64B64A64_SINT:function(){return ze},VK_FORMAT_R64G64B64A64_UINT:function(){return Ve},VK_FORMAT_R64G64B64_SFLOAT:function(){return Be},VK_FORMAT_R64G64B64_SINT:function(){return Ne},VK_FORMAT_R64G64B64_UINT:function(){return Fe},VK_FORMAT_R64G64_SFLOAT:function(){return Ue},VK_FORMAT_R64G64_SINT:function(){return Ie},VK_FORMAT_R64G64_UINT:function(){return De},VK_FORMAT_R64_SFLOAT:function(){return Oe},VK_FORMAT_R64_SINT:function(){return ke},VK_FORMAT_R64_UINT:function(){return Le},VK_FORMAT_R8G8B8A8_SINT:function(){return Nt},VK_FORMAT_R8G8B8A8_SNORM:function(){return Ut},VK_FORMAT_R8G8B8A8_SRGB:function(){return Bt},VK_FORMAT_R8G8B8A8_UINT:function(){return Ft},VK_FORMAT_R8G8B8A8_UNORM:function(){return It},VK_FORMAT_R8G8B8_SINT:function(){return Ct},VK_FORMAT_R8G8B8_SNORM:function(){return Et},VK_FORMAT_R8G8B8_SRGB:function(){return Pt},VK_FORMAT_R8G8B8_UINT:function(){return At},VK_FORMAT_R8G8B8_UNORM:function(){return Tt},VK_FORMAT_R8G8_SINT:function(){return St},VK_FORMAT_R8G8_SNORM:function(){return xt},VK_FORMAT_R8G8_SRGB:function(){return Mt},VK_FORMAT_R8G8_UINT:function(){return wt},VK_FORMAT_R8G8_UNORM:function(){return yt},VK_FORMAT_R8_SINT:function(){return _t},VK_FORMAT_R8_SNORM:function(){return vt},VK_FORMAT_R8_SRGB:function(){return bt},VK_FORMAT_R8_UINT:function(){return gt},VK_FORMAT_R8_UNORM:function(){return mt},VK_FORMAT_S8_UINT:function(){return Xe},VK_FORMAT_UNDEFINED:function(){return st},VK_FORMAT_X8_D24_UNORM_PACK32:function(){return Ke},read:function(){return Vr},write:function(){return Hr}});var r=n(8764).lW;const i=0,o=1,s=2,a=3,l=0,u=0,c=2,h=0,d=1,p=160,f=161,m=162,v=163,g=0,_=1,b=0,y=1,x=2,w=3,S=4,M=5,T=6,E=7,A=8,C=9,P=10,R=11,L=12,k=13,O=14,D=15,I=16,U=17,F=18,N=0,B=1,V=2,z=3,G=4,H=5,j=6,W=7,K=8,q=9,X=10,Y=11,$=0,Z=1,J=2,Q=13,tt=14,et=15,nt=128,rt=64,it=32,ot=16,st=0,at=1,lt=2,ut=3,ct=4,ht=5,dt=6,pt=7,ft=8,mt=9,vt=10,gt=13,_t=14,bt=15,yt=16,xt=17,wt=20,St=21,Mt=22,Tt=23,Et=24,At=27,Ct=28,Pt=29,Rt=30,Lt=31,kt=34,Ot=35,Dt=36,It=37,Ut=38,Ft=41,Nt=42,Bt=43,Vt=44,zt=45,Gt=48,Ht=49,jt=50,Wt=58,Kt=59,qt=62,Xt=63,Yt=64,$t=65,Zt=68,Jt=69,Qt=70,te=71,ee=74,ne=75,re=76,ie=77,oe=78,se=81,ae=82,le=83,ue=84,ce=85,he=88,de=89,pe=90,fe=91,me=92,ve=95,ge=96,_e=97,be=98,ye=99,xe=100,we=101,Se=102,Me=103,Te=104,Ee=105,Ae=106,Ce=107,Pe=108,Re=109,Le=110,ke=111,Oe=112,De=113,Ie=114,Ue=115,Fe=116,Ne=117,Be=118,Ve=119,ze=120,Ge=121,He=122,je=123,We=124,Ke=125,qe=126,Xe=127,Ye=128,$e=129,Ze=130,Je=131,Qe=132,tn=133,en=134,nn=135,rn=136,on=137,sn=138,an=139,ln=140,un=141,cn=142,hn=143,dn=144,pn=145,fn=146,mn=147,vn=148,gn=149,_n=150,bn=151,yn=152,xn=153,wn=154,Sn=155,Mn=156,Tn=157,En=158,An=159,Cn=160,Pn=161,Rn=162,Ln=163,kn=164,On=165,Dn=166,In=167,Un=168,Fn=169,Nn=170,Bn=171,Vn=172,zn=173,Gn=174,Hn=175,jn=176,Wn=177,Kn=178,qn=179,Xn=180,Yn=181,$n=182,Zn=183,Jn=184,Qn=1000156007,tr=1000156008,er=1000156009,nr=1000156010,rr=1000156011,ir=1000156017,or=1000156018,sr=1000156019,ar=1000156020,lr=1000156021,ur=1000054e3,cr=1000054001,hr=1000054002,dr=1000054003,pr=1000054004,fr=1000054005,mr=1000054006,vr=1000054007,gr=1000066e3,_r=1000066001,br=1000066002,yr=1000066003,xr=1000066004,wr=1000066005,Sr=1000066006,Mr=1000066007,Tr=1000066008,Er=1000066009,Ar=1000066010,Cr=1000066011,Pr=1000066012,Rr=1000066013,Lr=100034e4,kr=1000340001;class Or{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Dr{constructor(t,e,n,r){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=r,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==e&&r<t;)r++,this._offset++;return r<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const Ir=new Uint8Array([0]),Ur=[171,75,84,88,32,50,48,187,13,10,26,10];function Fr(t){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):r.from(t)}function Nr(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):r.from(t).toString("utf8")}function Br(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let r=0;for(const e of t)n.set(new Uint8Array(e),r),r+=e.byteLength;return n}function Vr(t){const e=new Uint8Array(t.buffer,t.byteOffset,Ur.length);if(e[0]!==Ur[0]||e[1]!==Ur[1]||e[2]!==Ur[2]||e[3]!==Ur[3]||e[4]!==Ur[4]||e[5]!==Ur[5]||e[6]!==Ur[6]||e[7]!==Ur[7]||e[8]!==Ur[8]||e[9]!==Ur[9]||e[10]!==Ur[10]||e[11]!==Ur[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Or,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new Dr(t,Ur.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();const o=i._nextUint32();n.supercompressionScheme=i._nextUint32();const s=i._nextUint32(),a=i._nextUint32(),l=i._nextUint32(),u=i._nextUint32(),c=i._nextUint64(),h=i._nextUint64(),d=new Dr(t,Ur.length+r,3*o*8,!0);for(let e=0;e<o;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new Dr(t,s,a,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let t=0;t<m;t++){const e={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=p._nextInt32(),e.sampleUpper=p._nextInt32()):(e.sampleLower=p._nextUint32(),e.sampleUpper=p._nextUint32()),f.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(f);const v=new Dr(t,l,u,!0);for(;v._offset<u;){const t=v._nextUint32(),e=v._scan(t),r=Nr(e),i=v._scan(t-e.byteLength);n.keyValue[r]=r.match(/^ktx/i)?Nr(i):i,v._offset%4&&v._skip(4-v._offset%4)}if(h<=0)return n;const g=new Dr(t,c,h,!0),_=g._nextUint16(),b=g._nextUint16(),y=g._nextUint32(),x=g._nextUint32(),w=g._nextUint32(),S=g._nextUint32(),M=[];for(let t=0;t<o;t++)M.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});const T=c+g._offset,E=T+y,A=E+x,C=A+w,P=new Uint8Array(t.buffer,t.byteOffset+T,y),R=new Uint8Array(t.buffer,t.byteOffset+E,x),L=new Uint8Array(t.buffer,t.byteOffset+A,w),k=new Uint8Array(t.buffer,t.byteOffset+C,S);return n.globalData={endpointCount:_,selectorCount:b,imageDescs:M,endpointsData:P,selectorsData:R,tablesData:L,extendedData:k},n}function zr(){return(zr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}const Gr={keepWriter:!1};function Hr(t,e={}){e=zr({},Gr,e);let n=new ArrayBuffer(0);if(t.globalData){const e=new ArrayBuffer(20+5*t.globalData.imageDescs.length*4),r=new DataView(e);r.setUint16(0,t.globalData.endpointCount,!0),r.setUint16(2,t.globalData.selectorCount,!0),r.setUint32(4,t.globalData.endpointsData.byteLength,!0),r.setUint32(8,t.globalData.selectorsData.byteLength,!0),r.setUint32(12,t.globalData.tablesData.byteLength,!0),r.setUint32(16,t.globalData.extendedData.byteLength,!0);for(let e=0;e<t.globalData.imageDescs.length;e++){const n=t.globalData.imageDescs[e];r.setUint32(20+5*e*4+0,n.imageFlags,!0),r.setUint32(20+5*e*4+4,n.rgbSliceByteOffset,!0),r.setUint32(20+5*e*4+8,n.rgbSliceByteLength,!0),r.setUint32(20+5*e*4+12,n.alphaSliceByteOffset,!0),r.setUint32(20+5*e*4+16,n.alphaSliceByteLength,!0)}n=Br([e,t.globalData.endpointsData,t.globalData.selectorsData,t.globalData.tablesData,t.globalData.extendedData])}const r=[];let i=t.keyValue;e.keepWriter||(i=zr({},t.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const t in i){const e=i[t],n=Fr(t),o="string"==typeof e?Fr(e):e,s=n.byteLength+1+o.byteLength+1,a=s%4?4-s%4:0;r.push(Br([new Uint32Array([s]),n,Ir,o,Ir,new Uint8Array(a).fill(0)]))}const o=Br(r);if(1!==t.dataFormatDescriptor.length||0!==t.dataFormatDescriptor[0].descriptorType)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const s=t.dataFormatDescriptor[0],a=new ArrayBuffer(28+16*s.samples.length),l=new DataView(a),u=24+16*s.samples.length;if(l.setUint32(0,a.byteLength,!0),l.setUint16(4,s.vendorId,!0),l.setUint16(6,s.descriptorType,!0),l.setUint16(8,s.versionNumber,!0),l.setUint16(10,u,!0),l.setUint8(12,s.colorModel),l.setUint8(13,s.colorPrimaries),l.setUint8(14,s.transferFunction),l.setUint8(15,s.flags),!Array.isArray(s.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");l.setUint8(16,s.texelBlockDimension[0]),l.setUint8(17,s.texelBlockDimension[1]),l.setUint8(18,s.texelBlockDimension[2]),l.setUint8(19,s.texelBlockDimension[3]);for(let t=0;t<8;t++)l.setUint8(20+t,s.bytesPlane[t]);for(let t=0;t<s.samples.length;t++){const e=s.samples[t],n=28+16*t;if(e.channelID)throw new Error("channelID has been renamed to channelType.");l.setUint16(n+0,e.bitOffset,!0),l.setUint8(n+2,e.bitLength),l.setUint8(n+3,e.channelType),l.setUint8(n+4,e.samplePosition[0]),l.setUint8(n+5,e.samplePosition[1]),l.setUint8(n+6,e.samplePosition[2]),l.setUint8(n+7,e.samplePosition[3]),64&e.channelType?(l.setInt32(n+8,e.sampleLower,!0),l.setInt32(n+12,e.sampleUpper,!0)):(l.setUint32(n+8,e.sampleLower,!0),l.setUint32(n+12,e.sampleUpper,!0))}const c=Ur.length+68+3*t.levels.length*8,h=c+a.byteLength;let d=n.byteLength>0?h+o.byteLength:0;d%8&&(d+=8-d%8);const p=[],f=new DataView(new ArrayBuffer(3*t.levels.length*8));let m=(d||h+o.byteLength)+n.byteLength;for(let e=0;e<t.levels.length;e++){const n=t.levels[e];p.push(n.levelData),f.setBigUint64(24*e+0,BigInt(m),!0),f.setBigUint64(24*e+8,BigInt(n.levelData.byteLength),!0),f.setBigUint64(24*e+16,BigInt(n.uncompressedByteLength),!0),m+=n.levelData.byteLength}const v=new ArrayBuffer(68),g=new DataView(v);return g.setUint32(0,t.vkFormat,!0),g.setUint32(4,t.typeSize,!0),g.setUint32(8,t.pixelWidth,!0),g.setUint32(12,t.pixelHeight,!0),g.setUint32(16,t.pixelDepth,!0),g.setUint32(20,t.layerCount,!0),g.setUint32(24,t.faceCount,!0),g.setUint32(28,t.levels.length,!0),g.setUint32(32,t.supercompressionScheme,!0),g.setUint32(36,c,!0),g.setUint32(40,a.byteLength,!0),g.setUint32(44,h,!0),g.setUint32(48,o.byteLength,!0),g.setBigUint64(52,BigInt(n.byteLength>0?d:0),!0),g.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(Br([new Uint8Array(Ur).buffer,v,f.buffer,a,o,d>0?new ArrayBuffer(d-(h+o.byteLength)):new ArrayBuffer(0),n,...p]))}},441:function(t,e,n){"use strict";n.d(e,{a:function(){return s}});var r=n(9477);const i=new r.CJI,o=new r.Pa4;class s{constructor(t){let e=t.geometry;if(!e.isBufferGeometry||3!==e.attributes.position.itemSize)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.positionAttribute,e=this.weightAttribute,n=new Float32Array(t.count/3);for(let r=0;r<t.count;r+=3){let o=1;e&&(o=e.getX(r)+e.getX(r+1)+e.getX(r+2)),i.a.fromBufferAttribute(t,r),i.b.fromBufferAttribute(t,r+1),i.c.fromBufferAttribute(t,r+2),o*=i.getArea(),n[r/3]=o}this.distribution=new Float32Array(t.count/3);let r=0;for(let t=0;t<n.length;t++)r+=n[t],this.distribution[t]=r;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e,n){const r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,t,e,n)}binarySearch(t){const e=this.distribution;let n=0,r=e.length-1,i=-1;for(;n<=r;){const o=Math.ceil((n+r)/2);if(0===o||e[o-1]<=t&&e[o]>t){i=o;break}t<e[o]?r=o-1:n=o+1}return i}sampleFace(t,e,n,r){let s=this.randomFunction(),a=this.randomFunction();return s+a>1&&(s=1-s,a=1-a),i.a.fromBufferAttribute(this.positionAttribute,3*t),i.b.fromBufferAttribute(this.positionAttribute,3*t+1),i.c.fromBufferAttribute(this.positionAttribute,3*t+2),e.set(0,0,0).addScaledVector(i.a,s).addScaledVector(i.b,a).addScaledVector(i.c,1-(s+a)),void 0!==n&&i.getNormal(n),void 0!==r&&void 0!==this.colorAttribute&&(i.a.fromBufferAttribute(this.colorAttribute,3*t),i.b.fromBufferAttribute(this.colorAttribute,3*t+1),i.c.fromBufferAttribute(this.colorAttribute,3*t+2),o.set(0,0,0).addScaledVector(i.a,s).addScaledVector(i.b,a).addScaledVector(i.c,1-(s+a)),r.r=o.x,r.g=o.y,r.b=o.z),this}}},8606:function(t,e,n){"use strict";n.d(e,{xC:function(){return u}});var r=n(9477),i=n(1154),o=n(7531),s=n(8304);class a extends s.w{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class l extends s.w{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class u{constructor(t,e){if(this.renderer=t,void 0===e){const n=t.getSize(new r.FM8);this._pixelRatio=t.getPixelRatio(),this._width=n.width,this._height=n.height,(e=new r.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i.C&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.T&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.T(i.C),this.clock=new r.SUY}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let e=0,r=this.passes.length;e<r;e++){const r=this.passes[e];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(e),r.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),r.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==a&&(r instanceof a?n=!0:r instanceof l&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new r.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let t=0;t<this.passes.length;t++)this.passes[t].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}new r.iKG(-1,1,1,-1,0,1);const c=new r.u9r;c.setAttribute("position",new r.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),c.setAttribute("uv",new r.a$l([0,2,0,0,2,0],2))},8304:function(t,e,n){"use strict";n.d(e,{T:function(){return a},w:function(){return i}});var r=n(9477);class i{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const o=new r.iKG(-1,1,1,-1,0,1),s=new r.u9r;s.setAttribute("position",new r.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),s.setAttribute("uv",new r.a$l([0,2,0,0,2,0],2));class a{constructor(t){this._mesh=new r.Kj0(s,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,o)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}},4458:function(t,e,n){"use strict";n.d(e,{C:function(){return o}});var r=n(9477),i=n(8304);class o extends i.w{constructor(t,e,n,i,o){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Ilk}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}},5184:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var r=n(9477),i=n(8304),o=n(1154);class s extends i.w{constructor(t){super(),void 0===o.C&&console.error("THREE.SavePass relies on CopyShader");const e=o.C;this.textureID="tDiffuse",this.uniforms=r.rDY.clone(e.uniforms),this.material=new r.jyz({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderTarget=t,void 0===this.renderTarget&&(this.renderTarget=new r.dd2(window.innerWidth,window.innerHeight),this.renderTarget.texture.name="SavePass.rt"),this.needsSwap=!1,this.fsQuad=new i.T(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),t.setRenderTarget(this.renderTarget),this.clear&&t.clear(),this.fsQuad.render(t)}}},7531:function(t,e,n){"use strict";n.d(e,{T:function(){return o}});var r=n(9477),i=n(8304);class o extends i.w{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof r.jyz?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=r.rDY.clone(t.uniforms),this.material=new r.jyz({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new i.T(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}},1154:function(t,e,n){"use strict";n.d(e,{C:function(){return r}});const r={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"}},185:function(t,e,n){"use strict";n.d(e,{C:function(){return r}});const r={uniforms:{tDiffuse:{value:null},resolution:{value:new(n(9477).FM8)(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File: es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email: gameworks@nvidia.com\n\t// Site: http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t// * Redistributions of source code must retain the above copyright\n\t// notice, this list of conditions and the following disclaimer.\n\t// * Redistributions in binary form must reproduce the above copyright\n\t// notice, this list of conditions and the following disclaimer in the\n\t// documentation and/or other materials provided with the distribution.\n\t// * Neither the name of NVIDIA CORPORATION nor the names of its\n\t// contributors may be used to endorse or promote products derived\n\t// from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t// For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 . . 1 .\n\t\t\t\t\t// 1 0 2 ~= 0 0 1\n\t\t\t\t\t// . 1 . . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 . 1\n\t\t\t// 1 0 1 -> 0\n\t\t\t// . 0 . 1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t"}},5479:function(t,e,n){"use strict";n.d(e,{h:function(){return r}});class r{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,e){const n=this.workersResolve[t];if(n&&n(e),this.queue.length){const{resolve:e,msg:n,transfer:r}=this.queue.shift();this.workersResolve[t]=e,this.workers[t].postMessage(n,r)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,e){return new Promise(n=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(t,e)):this.queue.push({resolve:n,msg:t,transfer:e})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},7006:function(t,e,n){"use strict";n.d(e,{rpg:function(){return r}});const r=1e3},6043:function(t,e,n){"use strict";n.d(e,{C:function(){return r}});const r={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}}},634:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});const r=new class{constructor(t,e,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}};class i{constructor(t){this.manager=void 0!==t?t:r,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,i){n.load(t,r,e,i)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}}}]);